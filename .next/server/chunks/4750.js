"use strict";exports.id=4750,exports.ids=[4750],exports.modules={4750:(e,t,a)=>{a.d(t,{AU:()=>h,Ir:()=>_,OL:()=>D,OQ:()=>o,Qc:()=>k,Qu:()=>S,Sy:()=>v,Xp:()=>m,gK:()=>u,ix:()=>f,n3:()=>y,nM:()=>l});var i=a(32409);let r="https://twlegtqcyydgjkycxngw.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0";if(!r||!n)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let o=(0,i.eI)(r,n);function s(e){return{id:e.id,name:e.name,description:e.description,price:parseFloat(e.price),originalPrice:e.original_price?parseFloat(e.original_price):void 0,image:e.image,images:e.images||[],stock:e.stock||{},category:e.category,sizes:e.sizes||[],colors:e.colors||[],inStock:e.in_stock,rating:parseFloat(e.rating||0),reviews:e.reviews||0,sku:e.sku,weight:e.weight?parseFloat(e.weight):void 0,dimensions:e.dimensions,tags:e.tags||[],featured:e.featured||!1,sizeChartCategory:e.size_chart_category||"T-Shirts",customSizeChart:e.custom_size_chart||void 0,useCustomSizeChart:e.use_custom_size_chart||!1,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}let c=null,d=0;async function m(){try{if(c&&Date.now()-d<3e4)return c;let{data:e,error:t}=await o.from("products").select("*").order("created_at",{ascending:!1});if(t)return c||[];let a=(e||[]).map(s);return c=a,d=Date.now(),a}catch(e){return c||[]}}async function u(e){try{if(!o)throw Error("Supabase client not initialized");let t={id:e.id,name:e.name,description:e.description,price:e.price,original_price:e.originalPrice,image:e.image,images:e.images||[],stock:e.stock,category:e.category,sizes:e.sizes||[],colors:e.colors||[],in_stock:e.inStock,rating:e.rating,reviews:e.reviews,sku:e.sku,weight:e.weight,dimensions:e.dimensions,tags:e.tags||[],featured:e.featured||!1,custom_size_chart:e.customSizeChart||null,use_custom_size_chart:e.useCustomSizeChart||!1,size_chart_category:e.sizeChartCategory||e.category},{data:a,error:i}=await o.from("products").insert([t]).select().single();if(i)throw Error(`Supabase insert failed: ${i.message} (Code: ${i.code})`);return c=null,s(a)}catch(e){throw e}}async function l(e,t){try{let a={};void 0!==t.name&&(a.name=t.name),void 0!==t.description&&(a.description=t.description),void 0!==t.price&&(a.price=t.price),void 0!==t.originalPrice&&(a.original_price=t.originalPrice),void 0!==t.image&&(a.image=t.image),void 0!==t.images&&(a.images=t.images),void 0!==t.stock&&(a.stock=t.stock),void 0!==t.category&&(a.category=t.category),void 0!==t.sizes&&(a.sizes=t.sizes),void 0!==t.colors&&(a.colors=t.colors),void 0!==t.inStock&&(a.in_stock=t.inStock),void 0!==t.rating&&(a.rating=t.rating),void 0!==t.reviews&&(a.reviews=t.reviews),void 0!==t.sku&&(a.sku=t.sku),void 0!==t.weight&&(a.weight=t.weight),void 0!==t.dimensions&&(a.dimensions=t.dimensions),void 0!==t.tags&&(a.tags=t.tags),void 0!==t.featured&&(a.featured=t.featured),void 0!==t.sizeChartCategory&&(a.size_chart_category=t.sizeChartCategory),void 0!==t.customSizeChart&&(a.custom_size_chart=t.customSizeChart),void 0!==t.useCustomSizeChart&&(a.use_custom_size_chart=t.useCustomSizeChart);let{data:i,error:r}=await o.from("products").update(a).eq("id",e).select().single();if(r)return null;return c=null,s(i)}catch(e){return null}}async function _(e){try{let{error:t}=await o.from("products").delete().eq("id",e);if(t)return!1;return c=null,!0}catch(e){return!1}}function g(e){let t=e.items&&e.items.length>0?e.items[0]:{};return{id:e.id,productId:t.productId||"",productName:t.productName||"",productImage:t.productImage||"",customerName:t.customerName||"",customerPhone:t.customerPhone||"",customerEmail:t.customerEmail||"",customerAddress:t.customerAddress||"",customerCity:t.customerCity||"",wilayaId:t.wilayaId||0,wilayaName:t.wilayaName||"",shippingType:e.shipping_type||"homeDelivery",shippingCost:Number(e.shipping_cost)||0,quantity:t.quantity||1,selectedSize:t.selectedSize||"",selectedColor:t.selectedColor||"",subtotal:Number(e.total)-Number(e.shipping_cost)||0,total:Number(e.total)||0,orderDate:new Date(e.order_date),status:e.status||"pending",trackingNumber:e.tracking_number,notes:t.notes,paymentMethod:e.payment_method||"cod",paymentStatus:e.payment_status||"pending",estimatedDelivery:t.estimatedDelivery,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}c=null,d=0,Date.now();let p=null,w=0;async function h(){try{if(p&&Date.now()-w<3e4)return p;let{data:e,error:t}=await o.from("orders").select("*").order("order_date",{ascending:!1});if(t)return p||[];let a=(e||[]).map(g);return p=a,w=Date.now(),a}catch(e){return p||[]}}async function y(){try{let{data:e,error:t}=await o.from("wilaya_tariffs").select("*").order("order",{ascending:!0});if(t)return[];return(e||[]).map(e=>({id:e.id.toString(),wilaya_id:e.wilaya_id,name:e.name,domicile_ecommerce:e.domicile_ecommerce,stop_desk_ecommerce:e.stop_desk_ecommerce,order:e.order,home_delivery:e.domicile_ecommerce,stop_desk:e.stop_desk_ecommerce,homeDelivery:e.domicile_ecommerce,stopDesk:e.stop_desk_ecommerce,domicileEcommerce:e.domicile_ecommerce,stopDeskEcommerce:e.stop_desk_ecommerce}))}catch(e){return[]}}async function f(e){try{if(await o.from("wilaya_tariffs").delete().neq("id",0),e.length>0){let t=e.map(e=>({wilaya_id:e.wilaya_id||e.id,name:e.name,domicile_ecommerce:e.domicile_ecommerce||e.domicileEcommerce||e.home_delivery||e.homeDelivery||0,stop_desk_ecommerce:e.stop_desk_ecommerce||e.stopDeskEcommerce||e.stop_desk||e.stopDesk||0,order:e.order||1})),{error:a}=await o.from("wilaya_tariffs").insert(t);if(a)throw a}}catch(e){throw e}}async function S(){try{let{data:e,error:t}=await o.from("maintenance_settings").select("*").eq("id","maintenance").single();if(t)return t.code,{id:"maintenance",is_maintenance_mode:!1,drop_date:new Date(Date.now()+2592e6).toISOString(),maintenance_message:"We are currently performing maintenance. Please check back later.",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return e||{id:"maintenance",is_maintenance_mode:!1,drop_date:new Date(Date.now()+2592e6).toISOString(),maintenance_message:"We are currently performing maintenance. Please check back later.",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}catch(e){return{id:"maintenance",is_maintenance_mode:!1,drop_date:new Date(Date.now()+2592e6).toISOString(),maintenance_message:"We are currently performing maintenance. Please check back later.",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}async function k(e){try{let t={updated_at:new Date().toISOString()};void 0!==e.is_maintenance_mode&&(t.is_maintenance_mode=e.is_maintenance_mode),void 0!==e.drop_date&&(t.drop_date=e.drop_date),void 0!==e.maintenance_message&&(t.maintenance_message=e.maintenance_message);let{data:a,error:i}=await o.from("maintenance_settings").update(t).eq("id","maintenance").select().single();if(i){let{data:t,error:a}=await o.from("maintenance_settings").insert([{id:"maintenance",is_maintenance_mode:e.is_maintenance_mode??!1,drop_date:e.drop_date??new Date(Date.now()+2592e6).toISOString(),maintenance_message:e.maintenance_message??"We are currently performing maintenance. Please check back later.",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a)throw a;return t}return a}catch(e){throw e}}async function D(){try{let{data:e,error:t}=await o.from("customers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){throw e}}async function v(e){try{let t=new Date().toISOString(),a={...e,id:`customer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,created_at:t,updated_at:t},{data:i,error:r}=await o.from("customers").insert([a]).select().single();if(r)throw r;return{id:i.id,name:i.name,email:i.email,phone:i.phone,address:i.address,city:i.city,wilaya:i.wilaya,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}}catch(e){throw e}}}};