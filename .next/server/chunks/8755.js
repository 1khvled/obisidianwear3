"use strict";exports.id=8755,exports.ids=[8755],exports.modules={78755:(e,r,t)=>{t.d(r,{addInventory:()=>c,initializeProductInventory:()=>a});var n=t(32409);let o="https://twlegtqcyydgjkycxngw.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0";if(!o||!i)throw Error("Missing Supabase environment variables");let s=(0,n.eI)(o,i);async function c(e,r,t,n,o,i){try{let c=`INV-${e}-${r}-${t}`,{data:a,error:d}=await s.from("inventory").select("*").eq("id",c).single(),l=a?.quantity||0,u=l+n,{error:y}=await s.from("inventory").upsert([{id:c,product_id:e,size:r,color:t,quantity:u,reserved_quantity:a?.reserved_quantity||0,min_stock_level:a?.min_stock_level||5,max_stock_level:a?.max_stock_level||100}]);if(y)return console.error("Inventory service: addInventory error:",y),!1;return await s.from("inventory_transactions").insert([{id:`TXN-${Date.now()}-${c}`,product_id:e,size:r,color:t,transaction_type:"in",quantity_change:n,previous_quantity:l,new_quantity:u,reason:o||"Stock added",created_by:i||"admin"}]),!0}catch(e){return console.error("Inventory service: addInventory error:",e),!1}}async function a(e){try{let{data:r,error:t}=await s.from("products").select("sizes, colors, stock").eq("id",e).single();if(t||!r)return console.error("Inventory service: Product not found:",e),!1;let n=r.sizes||[],o=r.colors||[],i=r.stock||{},c=[];for(let r of n)for(let t of o){let n=i[r]?.[t]||0;c.push({id:`INV-${e}-${r}-${t}`,product_id:e,size:r,color:t,quantity:n,reserved_quantity:0,min_stock_level:5,max_stock_level:100})}if(c.length>0){let{error:e}=await s.from("inventory").upsert(c);if(e)return console.error("Inventory service: initializeProductInventory error:",e),!1}return!0}catch(e){return console.error("Inventory service: initializeProductInventory error:",e),!1}}}};