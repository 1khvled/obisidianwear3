"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_src_lib_inventoryService_ts";
exports.ids = ["_rsc_src_lib_inventoryService_ts"];
exports.modules = {

/***/ "(rsc)/./src/lib/inventoryService.ts":
/*!*************************************!*\
  !*** ./src/lib/inventoryService.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addInventory: () => (/* binding */ addInventory),\n/* harmony export */   checkStock: () => (/* binding */ checkStock),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getInventoryTransactions: () => (/* binding */ getInventoryTransactions),\n/* harmony export */   getLowStockItems: () => (/* binding */ getLowStockItems),\n/* harmony export */   getProductInventory: () => (/* binding */ getProductInventory),\n/* harmony export */   initializeProductInventory: () => (/* binding */ initializeProductInventory),\n/* harmony export */   updateInventoryQuantity: () => (/* binding */ updateInventoryQuantity)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Get all inventory records\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Inventory service: getInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventory error:\", error);\n        return [];\n    }\n}\n// Get inventory for a specific product\nasync function getProductInventory(productId) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).eq(\"product_id\", productId).order(\"size\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getProductInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getProductInventory error:\", error);\n        return [];\n    }\n}\n// Update inventory quantity\nasync function updateInventoryQuantity(inventoryId, newQuantity, reason, createdBy) {\n    try {\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        if (fetchError || !currentRecord) {\n            console.error(\"Inventory service: Record not found:\", inventoryId);\n            return false;\n        }\n        // Update inventory\n        const { error: updateError } = await supabase.from(\"inventory\").update({\n            quantity: newQuantity,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", inventoryId);\n        if (updateError) {\n            console.error(\"Inventory service: updateInventoryQuantity error:\", updateError);\n            return false;\n        }\n        // Log transaction\n        const quantityChange = newQuantity - currentRecord.quantity;\n        if (quantityChange !== 0) {\n            await supabase.from(\"inventory_transactions\").insert([\n                {\n                    id: `TXN-${Date.now()}-${inventoryId}`,\n                    product_id: currentRecord.product_id,\n                    size: currentRecord.size,\n                    color: currentRecord.color,\n                    transaction_type: \"adjustment\",\n                    quantity_change: quantityChange,\n                    previous_quantity: currentRecord.quantity,\n                    new_quantity: newQuantity,\n                    reason: reason || \"Manual adjustment\",\n                    created_by: createdBy || \"admin\"\n                }\n            ]);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: updateInventoryQuantity error:\", error);\n        return false;\n    }\n}\n// Add inventory (stock in)\nasync function addInventory(productId, size, color, quantity, reason, createdBy) {\n    try {\n        const inventoryId = `INV-${productId}-${size}-${color}`;\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        const currentQuantity = currentRecord?.quantity || 0;\n        const newQuantity = currentQuantity + quantity;\n        // Upsert inventory record\n        const { error: upsertError } = await supabase.from(\"inventory\").upsert([\n            {\n                id: inventoryId,\n                product_id: productId,\n                size,\n                color,\n                quantity: newQuantity,\n                reserved_quantity: currentRecord?.reserved_quantity || 0,\n                min_stock_level: currentRecord?.min_stock_level || 5,\n                max_stock_level: currentRecord?.max_stock_level || 100\n            }\n        ]);\n        if (upsertError) {\n            console.error(\"Inventory service: addInventory error:\", upsertError);\n            return false;\n        }\n        // Log transaction\n        await supabase.from(\"inventory_transactions\").insert([\n            {\n                id: `TXN-${Date.now()}-${inventoryId}`,\n                product_id: productId,\n                size,\n                color,\n                transaction_type: \"in\",\n                quantity_change: quantity,\n                previous_quantity: currentQuantity,\n                new_quantity: newQuantity,\n                reason: reason || \"Stock added\",\n                created_by: createdBy || \"admin\"\n            }\n        ]);\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: addInventory error:\", error);\n        return false;\n    }\n}\n// Check if product has sufficient stock\nasync function checkStock(productId, size, color, requestedQuantity) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"available_quantity\").eq(\"product_id\", productId).eq(\"size\", size).eq(\"color\", color).single();\n        if (error || !data) {\n            return {\n                available: false,\n                currentStock: 0\n            };\n        }\n        return {\n            available: data.available_quantity >= requestedQuantity,\n            currentStock: data.available_quantity\n        };\n    } catch (error) {\n        console.error(\"Inventory service: checkStock error:\", error);\n        return {\n            available: false,\n            currentStock: 0\n        };\n    }\n}\n// Get low stock items\nasync function getLowStockItems() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).lte(\"available_quantity\", supabase.raw(\"min_stock_level\")).order(\"available_quantity\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getLowStockItems error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getLowStockItems error:\", error);\n        return [];\n    }\n}\n// Get inventory transactions\nasync function getInventoryTransactions(productId, limit = 50) {\n    try {\n        let query = supabase.from(\"inventory_transactions\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (productId) {\n            query = query.eq(\"product_id\", productId);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Inventory service: getInventoryTransactions error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventoryTransactions error:\", error);\n        return [];\n    }\n}\n// Initialize inventory for a product\nasync function initializeProductInventory(productId) {\n    try {\n        // Get product details\n        const { data: product, error: productError } = await supabase.from(\"products\").select(\"sizes, colors, stock\").eq(\"id\", productId).single();\n        if (productError || !product) {\n            console.error(\"Inventory service: Product not found:\", productId);\n            return false;\n        }\n        const sizes = product.sizes || [];\n        const colors = product.colors || [];\n        const stock = product.stock || {};\n        // Create inventory records for each size/color combination\n        const inventoryRecords = [];\n        for (const size of sizes){\n            for (const color of colors){\n                const stockQuantity = stock[size]?.[color] || 0;\n                inventoryRecords.push({\n                    id: `INV-${productId}-${size}-${color}`,\n                    product_id: productId,\n                    size,\n                    color,\n                    quantity: stockQuantity,\n                    reserved_quantity: 0,\n                    min_stock_level: 5,\n                    max_stock_level: 100\n                });\n            }\n        }\n        if (inventoryRecords.length > 0) {\n            const { error: insertError } = await supabase.from(\"inventory\").upsert(inventoryRecords);\n            if (insertError) {\n                console.error(\"Inventory service: initializeProductInventory error:\", insertError);\n                return false;\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: initializeProductInventory error:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8uL3NyYy9saWIvaW52ZW50b3J5U2VydmljZS50cz8wMmU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlS2V5KSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbnZlbnRvcnlSZWNvcmQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcHJvZHVjdF9pZDogc3RyaW5nO1xyXG4gIHNpemU6IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG4gIHF1YW50aXR5OiBudW1iZXI7XHJcbiAgcmVzZXJ2ZWRfcXVhbnRpdHk6IG51bWJlcjtcclxuICBhdmFpbGFibGVfcXVhbnRpdHk6IG51bWJlcjtcclxuICBtaW5fc3RvY2tfbGV2ZWw6IG51bWJlcjtcclxuICBtYXhfc3RvY2tfbGV2ZWw6IG51bWJlcjtcclxuICBsYXN0X3VwZGF0ZWQ6IHN0cmluZztcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG4gIHByb2R1Y3RzPzoge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGltYWdlOiBzdHJpbmc7XHJcbiAgICBwcmljZTogbnVtYmVyO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW52ZW50b3J5VHJhbnNhY3Rpb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcHJvZHVjdF9pZDogc3RyaW5nO1xyXG4gIHNpemU6IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG4gIHRyYW5zYWN0aW9uX3R5cGU6ICdpbicgfCAnb3V0JyB8ICdhZGp1c3RtZW50JyB8ICdyZXNlcnZlJyB8ICd1bnJlc2VydmUnO1xyXG4gIHF1YW50aXR5X2NoYW5nZTogbnVtYmVyO1xyXG4gIHByZXZpb3VzX3F1YW50aXR5OiBudW1iZXI7XHJcbiAgbmV3X3F1YW50aXR5OiBudW1iZXI7XHJcbiAgcmVhc29uPzogc3RyaW5nO1xyXG4gIG9yZGVyX2lkPzogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYnk/OiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgYWxsIGludmVudG9yeSByZWNvcmRzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZlbnRvcnkoKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IGludmVudG9yeSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0SW52ZW50b3J5KHByb2R1Y3RJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5vcmRlcignc2l6ZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0UHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGdldFByb2R1Y3RJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVXBkYXRlIGludmVudG9yeSBxdWFudGl0eVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSW52ZW50b3J5UXVhbnRpdHkoXHJcbiAgaW52ZW50b3J5SWQ6IHN0cmluZyxcclxuICBuZXdRdWFudGl0eTogbnVtYmVyLFxyXG4gIHJlYXNvbj86IHN0cmluZyxcclxuICBjcmVhdGVkQnk/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBjdXJyZW50IHJlY29yZFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50UmVjb3JkLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaW52ZW50b3J5SWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudFJlY29yZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogUmVjb3JkIG5vdCBmb3VuZDonLCBpbnZlbnRvcnlJZCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgaW52ZW50b3J5XHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIHF1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSlcclxuICAgICAgLmVxKCdpZCcsIGludmVudG9yeUlkKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IHVwZGF0ZUludmVudG9yeVF1YW50aXR5IGVycm9yOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgcXVhbnRpdHlDaGFuZ2UgPSBuZXdRdWFudGl0eSAtIGN1cnJlbnRSZWNvcmQucXVhbnRpdHk7XHJcbiAgICBpZiAocXVhbnRpdHlDaGFuZ2UgIT09IDApIHtcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgICAgLmluc2VydChbe1xyXG4gICAgICAgICAgaWQ6IGBUWE4tJHtEYXRlLm5vdygpfS0ke2ludmVudG9yeUlkfWAsXHJcbiAgICAgICAgICBwcm9kdWN0X2lkOiBjdXJyZW50UmVjb3JkLnByb2R1Y3RfaWQsXHJcbiAgICAgICAgICBzaXplOiBjdXJyZW50UmVjb3JkLnNpemUsXHJcbiAgICAgICAgICBjb2xvcjogY3VycmVudFJlY29yZC5jb2xvcixcclxuICAgICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICdhZGp1c3RtZW50JyxcclxuICAgICAgICAgIHF1YW50aXR5X2NoYW5nZTogcXVhbnRpdHlDaGFuZ2UsXHJcbiAgICAgICAgICBwcmV2aW91c19xdWFudGl0eTogY3VycmVudFJlY29yZC5xdWFudGl0eSxcclxuICAgICAgICAgIG5ld19xdWFudGl0eTogbmV3UXVhbnRpdHksXHJcbiAgICAgICAgICByZWFzb246IHJlYXNvbiB8fCAnTWFudWFsIGFkanVzdG1lbnQnLFxyXG4gICAgICAgICAgY3JlYXRlZF9ieTogY3JlYXRlZEJ5IHx8ICdhZG1pbidcclxuICAgICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiB1cGRhdGVJbnZlbnRvcnlRdWFudGl0eSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBZGQgaW52ZW50b3J5IChzdG9jayBpbilcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEludmVudG9yeShcclxuICBwcm9kdWN0SWQ6IHN0cmluZyxcclxuICBzaXplOiBzdHJpbmcsXHJcbiAgY29sb3I6IHN0cmluZyxcclxuICBxdWFudGl0eTogbnVtYmVyLFxyXG4gIHJlYXNvbj86IHN0cmluZyxcclxuICBjcmVhdGVkQnk/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGludmVudG9yeUlkID0gYElOVi0ke3Byb2R1Y3RJZH0tJHtzaXplfS0ke2NvbG9yfWA7XHJcbiAgICBcclxuICAgIC8vIEdldCBjdXJyZW50IHJlY29yZFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50UmVjb3JkLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaW52ZW50b3J5SWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50UXVhbnRpdHkgPSBjdXJyZW50UmVjb3JkPy5xdWFudGl0eSB8fCAwO1xyXG4gICAgY29uc3QgbmV3UXVhbnRpdHkgPSBjdXJyZW50UXVhbnRpdHkgKyBxdWFudGl0eTtcclxuXHJcbiAgICAvLyBVcHNlcnQgaW52ZW50b3J5IHJlY29yZFxyXG4gICAgY29uc3QgeyBlcnJvcjogdXBzZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAudXBzZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGludmVudG9yeUlkLFxyXG4gICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICBzaXplLFxyXG4gICAgICAgIGNvbG9yLFxyXG4gICAgICAgIHF1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICByZXNlcnZlZF9xdWFudGl0eTogY3VycmVudFJlY29yZD8ucmVzZXJ2ZWRfcXVhbnRpdHkgfHwgMCxcclxuICAgICAgICBtaW5fc3RvY2tfbGV2ZWw6IGN1cnJlbnRSZWNvcmQ/Lm1pbl9zdG9ja19sZXZlbCB8fCA1LFxyXG4gICAgICAgIG1heF9zdG9ja19sZXZlbDogY3VycmVudFJlY29yZD8ubWF4X3N0b2NrX2xldmVsIHx8IDEwMFxyXG4gICAgICB9XSk7XHJcblxyXG4gICAgaWYgKHVwc2VydEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBhZGRJbnZlbnRvcnkgZXJyb3I6JywgdXBzZXJ0RXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9nIHRyYW5zYWN0aW9uXHJcbiAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgIC5pbnNlcnQoW3tcclxuICAgICAgICBpZDogYFRYTi0ke0RhdGUubm93KCl9LSR7aW52ZW50b3J5SWR9YCxcclxuICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgc2l6ZSxcclxuICAgICAgICBjb2xvcixcclxuICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnaW4nLFxyXG4gICAgICAgIHF1YW50aXR5X2NoYW5nZTogcXVhbnRpdHksXHJcbiAgICAgICAgcHJldmlvdXNfcXVhbnRpdHk6IGN1cnJlbnRRdWFudGl0eSxcclxuICAgICAgICBuZXdfcXVhbnRpdHk6IG5ld1F1YW50aXR5LFxyXG4gICAgICAgIHJlYXNvbjogcmVhc29uIHx8ICdTdG9jayBhZGRlZCcsXHJcbiAgICAgICAgY3JlYXRlZF9ieTogY3JlYXRlZEJ5IHx8ICdhZG1pbidcclxuICAgICAgfV0pO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogYWRkSW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENoZWNrIGlmIHByb2R1Y3QgaGFzIHN1ZmZpY2llbnQgc3RvY2tcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrU3RvY2soXHJcbiAgcHJvZHVjdElkOiBzdHJpbmcsXHJcbiAgc2l6ZTogc3RyaW5nLFxyXG4gIGNvbG9yOiBzdHJpbmcsXHJcbiAgcmVxdWVzdGVkUXVhbnRpdHk6IG51bWJlclxyXG4pOiBQcm9taXNlPHsgYXZhaWxhYmxlOiBib29sZWFuOyBjdXJyZW50U3RvY2s6IG51bWJlciB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAuc2VsZWN0KCdhdmFpbGFibGVfcXVhbnRpdHknKVxyXG4gICAgICAuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5lcSgnc2l6ZScsIHNpemUpXHJcbiAgICAgIC5lcSgnY29sb3InLCBjb2xvcilcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBhdmFpbGFibGU6IGZhbHNlLCBjdXJyZW50U3RvY2s6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhdmFpbGFibGU6IGRhdGEuYXZhaWxhYmxlX3F1YW50aXR5ID49IHJlcXVlc3RlZFF1YW50aXR5LFxyXG4gICAgICBjdXJyZW50U3RvY2s6IGRhdGEuYXZhaWxhYmxlX3F1YW50aXR5XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogY2hlY2tTdG9jayBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBhdmFpbGFibGU6IGZhbHNlLCBjdXJyZW50U3RvY2s6IDAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdldCBsb3cgc3RvY2sgaXRlbXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExvd1N0b2NrSXRlbXMoKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAubHRlKCdhdmFpbGFibGVfcXVhbnRpdHknLCBzdXBhYmFzZS5yYXcoJ21pbl9zdG9ja19sZXZlbCcpKVxyXG4gICAgICAub3JkZXIoJ2F2YWlsYWJsZV9xdWFudGl0eScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0TG93U3RvY2tJdGVtcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGdldExvd1N0b2NrSXRlbXMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IGludmVudG9yeSB0cmFuc2FjdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEludmVudG9yeVRyYW5zYWN0aW9ucyhcclxuICBwcm9kdWN0SWQ/OiBzdHJpbmcsXHJcbiAgbGltaXQ6IG51bWJlciA9IDUwXHJcbik6IFByb21pc2U8SW52ZW50b3J5VHJhbnNhY3Rpb25bXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KGxpbWl0KTtcclxuXHJcbiAgICBpZiAocHJvZHVjdElkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5VHJhbnNhY3Rpb25zIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5VHJhbnNhY3Rpb25zIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgaW52ZW50b3J5IGZvciBhIHByb2R1Y3RcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5KHByb2R1Y3RJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBwcm9kdWN0IGRldGFpbHNcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZHVjdCwgZXJyb3I6IHByb2R1Y3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLnNlbGVjdCgnc2l6ZXMsIGNvbG9ycywgc3RvY2snKVxyXG4gICAgICAuZXEoJ2lkJywgcHJvZHVjdElkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHByb2R1Y3RFcnJvciB8fCAhcHJvZHVjdCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogUHJvZHVjdCBub3QgZm91bmQ6JywgcHJvZHVjdElkKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNpemVzID0gcHJvZHVjdC5zaXplcyB8fCBbXTtcclxuICAgIGNvbnN0IGNvbG9ycyA9IHByb2R1Y3QuY29sb3JzIHx8IFtdO1xyXG4gICAgY29uc3Qgc3RvY2sgPSBwcm9kdWN0LnN0b2NrIHx8IHt9O1xyXG5cclxuICAgIC8vIENyZWF0ZSBpbnZlbnRvcnkgcmVjb3JkcyBmb3IgZWFjaCBzaXplL2NvbG9yIGNvbWJpbmF0aW9uXHJcbiAgICBjb25zdCBpbnZlbnRvcnlSZWNvcmRzID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3Qgc2l6ZSBvZiBzaXplcykge1xyXG4gICAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIGNvbG9ycykge1xyXG4gICAgICAgIGNvbnN0IHN0b2NrUXVhbnRpdHkgPSBzdG9ja1tzaXplXT8uW2NvbG9yXSB8fCAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGludmVudG9yeVJlY29yZHMucHVzaCh7XHJcbiAgICAgICAgICBpZDogYElOVi0ke3Byb2R1Y3RJZH0tJHtzaXplfS0ke2NvbG9yfWAsXHJcbiAgICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICBzaXplLFxyXG4gICAgICAgICAgY29sb3IsXHJcbiAgICAgICAgICBxdWFudGl0eTogc3RvY2tRdWFudGl0eSxcclxuICAgICAgICAgIHJlc2VydmVkX3F1YW50aXR5OiAwLFxyXG4gICAgICAgICAgbWluX3N0b2NrX2xldmVsOiA1LFxyXG4gICAgICAgICAgbWF4X3N0b2NrX2xldmVsOiAxMDBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbnZlbnRvcnlSZWNvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgICAgLnVwc2VydChpbnZlbnRvcnlSZWNvcmRzKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSIsImdldEludmVudG9yeSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsImNvbnNvbGUiLCJnZXRQcm9kdWN0SW52ZW50b3J5IiwicHJvZHVjdElkIiwiZXEiLCJ1cGRhdGVJbnZlbnRvcnlRdWFudGl0eSIsImludmVudG9yeUlkIiwibmV3UXVhbnRpdHkiLCJyZWFzb24iLCJjcmVhdGVkQnkiLCJjdXJyZW50UmVjb3JkIiwiZmV0Y2hFcnJvciIsInNpbmdsZSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXVhbnRpdHkiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicXVhbnRpdHlDaGFuZ2UiLCJpbnNlcnQiLCJpZCIsIm5vdyIsInByb2R1Y3RfaWQiLCJzaXplIiwiY29sb3IiLCJ0cmFuc2FjdGlvbl90eXBlIiwicXVhbnRpdHlfY2hhbmdlIiwicHJldmlvdXNfcXVhbnRpdHkiLCJuZXdfcXVhbnRpdHkiLCJjcmVhdGVkX2J5IiwiYWRkSW52ZW50b3J5IiwiY3VycmVudFF1YW50aXR5IiwidXBzZXJ0RXJyb3IiLCJ1cHNlcnQiLCJyZXNlcnZlZF9xdWFudGl0eSIsIm1pbl9zdG9ja19sZXZlbCIsIm1heF9zdG9ja19sZXZlbCIsImNoZWNrU3RvY2siLCJyZXF1ZXN0ZWRRdWFudGl0eSIsImF2YWlsYWJsZSIsImN1cnJlbnRTdG9jayIsImF2YWlsYWJsZV9xdWFudGl0eSIsImdldExvd1N0b2NrSXRlbXMiLCJsdGUiLCJyYXciLCJnZXRJbnZlbnRvcnlUcmFuc2FjdGlvbnMiLCJsaW1pdCIsInF1ZXJ5IiwiaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkiLCJwcm9kdWN0IiwicHJvZHVjdEVycm9yIiwic2l6ZXMiLCJjb2xvcnMiLCJzdG9jayIsImludmVudG9yeVJlY29yZHMiLCJzdG9ja1F1YW50aXR5IiwicHVzaCIsImxlbmd0aCIsImluc2VydEVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/inventoryService.ts\n");

/***/ })

};
;