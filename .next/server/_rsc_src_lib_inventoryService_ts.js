"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_src_lib_inventoryService_ts";
exports.ids = ["_rsc_src_lib_inventoryService_ts"];
exports.modules = {

/***/ "(rsc)/./src/lib/inventoryService.ts":
/*!*************************************!*\
  !*** ./src/lib/inventoryService.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addInventory: () => (/* binding */ addInventory),\n/* harmony export */   checkStock: () => (/* binding */ checkStock),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getInventoryTransactions: () => (/* binding */ getInventoryTransactions),\n/* harmony export */   getLowStockItems: () => (/* binding */ getLowStockItems),\n/* harmony export */   getProductInventory: () => (/* binding */ getProductInventory),\n/* harmony export */   initializeProductInventory: () => (/* binding */ initializeProductInventory),\n/* harmony export */   updateInventoryQuantity: () => (/* binding */ updateInventoryQuantity)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Get all inventory records\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Inventory service: getInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventory error:\", error);\n        return [];\n    }\n}\n// Get inventory for a specific product\nasync function getProductInventory(productId) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).eq(\"product_id\", productId).order(\"size\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getProductInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getProductInventory error:\", error);\n        return [];\n    }\n}\n// Update inventory quantity\nasync function updateInventoryQuantity(inventoryId, newQuantity, reason, createdBy) {\n    try {\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        if (fetchError || !currentRecord) {\n            console.error(\"Inventory service: Record not found:\", inventoryId);\n            return false;\n        }\n        // Update inventory\n        const { error: updateError } = await supabase.from(\"inventory\").update({\n            quantity: newQuantity,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", inventoryId);\n        if (updateError) {\n            console.error(\"Inventory service: updateInventoryQuantity error:\", updateError);\n            return false;\n        }\n        // Log transaction\n        const quantityChange = newQuantity - currentRecord.quantity;\n        if (quantityChange !== 0) {\n            await supabase.from(\"inventory_transactions\").insert([\n                {\n                    id: `TXN-${Date.now()}-${inventoryId}`,\n                    product_id: currentRecord.product_id,\n                    size: currentRecord.size,\n                    color: currentRecord.color,\n                    transaction_type: \"adjustment\",\n                    quantity_change: quantityChange,\n                    previous_quantity: currentRecord.quantity,\n                    new_quantity: newQuantity,\n                    reason: reason || \"Manual adjustment\",\n                    created_by: createdBy || \"admin\"\n                }\n            ]);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: updateInventoryQuantity error:\", error);\n        return false;\n    }\n}\n// Add inventory (stock in)\nasync function addInventory(productId, size, color, quantity, reason, createdBy) {\n    try {\n        const inventoryId = `INV-${productId}-${size}-${color}`;\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        const currentQuantity = currentRecord?.quantity || 0;\n        const newQuantity = currentQuantity + quantity;\n        // Upsert inventory record\n        const { error: upsertError } = await supabase.from(\"inventory\").upsert([\n            {\n                id: inventoryId,\n                product_id: productId,\n                size,\n                color,\n                quantity: newQuantity,\n                reserved_quantity: currentRecord?.reserved_quantity || 0,\n                min_stock_level: currentRecord?.min_stock_level || 5,\n                max_stock_level: currentRecord?.max_stock_level || 100\n            }\n        ]);\n        if (upsertError) {\n            console.error(\"Inventory service: addInventory error:\", upsertError);\n            return false;\n        }\n        // Log transaction\n        await supabase.from(\"inventory_transactions\").insert([\n            {\n                id: `TXN-${Date.now()}-${inventoryId}`,\n                product_id: productId,\n                size,\n                color,\n                transaction_type: \"in\",\n                quantity_change: quantity,\n                previous_quantity: currentQuantity,\n                new_quantity: newQuantity,\n                reason: reason || \"Stock added\",\n                created_by: createdBy || \"admin\"\n            }\n        ]);\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: addInventory error:\", error);\n        return false;\n    }\n}\n// Check if product has sufficient stock\nasync function checkStock(productId, size, color, requestedQuantity) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"available_quantity\").eq(\"product_id\", productId).eq(\"size\", size).eq(\"color\", color).single();\n        if (error || !data) {\n            return {\n                available: false,\n                currentStock: 0\n            };\n        }\n        return {\n            available: data.available_quantity >= requestedQuantity,\n            currentStock: data.available_quantity\n        };\n    } catch (error) {\n        console.error(\"Inventory service: checkStock error:\", error);\n        return {\n            available: false,\n            currentStock: 0\n        };\n    }\n}\n// Get low stock items\nasync function getLowStockItems() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(`\r\n        *,\r\n        products (\r\n          id,\r\n          name,\r\n          image,\r\n          price\r\n        )\r\n      `).lte(\"available_quantity\", 10) // Simple threshold for now\n        .order(\"available_quantity\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getLowStockItems error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getLowStockItems error:\", error);\n        return [];\n    }\n}\n// Get inventory transactions\nasync function getInventoryTransactions(productId, limit = 50) {\n    try {\n        let query = supabase.from(\"inventory_transactions\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (productId) {\n            query = query.eq(\"product_id\", productId);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Inventory service: getInventoryTransactions error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventoryTransactions error:\", error);\n        return [];\n    }\n}\n// Initialize inventory for a product\nasync function initializeProductInventory(productId) {\n    try {\n        // Get product details\n        const { data: product, error: productError } = await supabase.from(\"products\").select(\"sizes, colors, stock\").eq(\"id\", productId).single();\n        if (productError || !product) {\n            console.error(\"Inventory service: Product not found:\", productId);\n            return false;\n        }\n        const sizes = product.sizes || [];\n        const colors = product.colors || [];\n        const stock = product.stock || {};\n        // Create inventory records for each size/color combination\n        const inventoryRecords = [];\n        for (const size of sizes){\n            for (const color of colors){\n                const stockQuantity = stock[size]?.[color] || 0;\n                inventoryRecords.push({\n                    id: `INV-${productId}-${size}-${color}`,\n                    product_id: productId,\n                    size,\n                    color,\n                    quantity: stockQuantity,\n                    reserved_quantity: 0,\n                    min_stock_level: 5,\n                    max_stock_level: 100\n                });\n            }\n        }\n        if (inventoryRecords.length > 0) {\n            const { error: insertError } = await supabase.from(\"inventory\").upsert(inventoryRecords);\n            if (insertError) {\n                console.error(\"Inventory service: initializeProductInventory error:\", insertError);\n                return false;\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: initializeProductInventory error:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Olsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL2ludmVudG9yeVNlcnZpY2UudHM/MDJlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XHJcbmNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcclxufVxyXG5cclxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW52ZW50b3J5UmVjb3JkIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHByb2R1Y3RfaWQ6IHN0cmluZztcclxuICBzaXplOiBzdHJpbmc7XHJcbiAgY29sb3I6IHN0cmluZztcclxuICBxdWFudGl0eTogbnVtYmVyO1xyXG4gIHJlc2VydmVkX3F1YW50aXR5OiBudW1iZXI7XHJcbiAgYXZhaWxhYmxlX3F1YW50aXR5OiBudW1iZXI7XHJcbiAgbWluX3N0b2NrX2xldmVsOiBudW1iZXI7XHJcbiAgbWF4X3N0b2NrX2xldmVsOiBudW1iZXI7XHJcbiAgbGFzdF91cGRhdGVkOiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcclxuICBwcm9kdWN0cz86IHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBpbWFnZTogc3RyaW5nO1xyXG4gICAgcHJpY2U6IG51bWJlcjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEludmVudG9yeVRyYW5zYWN0aW9uIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHByb2R1Y3RfaWQ6IHN0cmluZztcclxuICBzaXplOiBzdHJpbmc7XHJcbiAgY29sb3I6IHN0cmluZztcclxuICB0cmFuc2FjdGlvbl90eXBlOiAnaW4nIHwgJ291dCcgfCAnYWRqdXN0bWVudCcgfCAncmVzZXJ2ZScgfCAndW5yZXNlcnZlJztcclxuICBxdWFudGl0eV9jaGFuZ2U6IG51bWJlcjtcclxuICBwcmV2aW91c19xdWFudGl0eTogbnVtYmVyO1xyXG4gIG5ld19xdWFudGl0eTogbnVtYmVyO1xyXG4gIHJlYXNvbj86IHN0cmluZztcclxuICBvcmRlcl9pZD86IHN0cmluZztcclxuICBjcmVhdGVkX2J5Pzogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gR2V0IGFsbCBpbnZlbnRvcnkgcmVjb3Jkc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW52ZW50b3J5KCk6IFByb21pc2U8SW52ZW50b3J5UmVjb3JkW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgcHJvZHVjdHMgKFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICBwcmljZVxyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdldCBpbnZlbnRvcnkgZm9yIGEgc3BlY2lmaWMgcHJvZHVjdFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdEludmVudG9yeShwcm9kdWN0SWQ6IHN0cmluZyk6IFByb21pc2U8SW52ZW50b3J5UmVjb3JkW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgcHJvZHVjdHMgKFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICBwcmljZVxyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLmVxKCdwcm9kdWN0X2lkJywgcHJvZHVjdElkKVxyXG4gICAgICAub3JkZXIoJ3NpemUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGdldFByb2R1Y3RJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRQcm9kdWN0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSBpbnZlbnRvcnkgcXVhbnRpdHlcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUludmVudG9yeVF1YW50aXR5KFxyXG4gIGludmVudG9yeUlkOiBzdHJpbmcsXHJcbiAgbmV3UXVhbnRpdHk6IG51bWJlcixcclxuICByZWFzb24/OiBzdHJpbmcsXHJcbiAgY3JlYXRlZEJ5Pzogc3RyaW5nXHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgY3VycmVudCByZWNvcmRcclxuICAgIGNvbnN0IHsgZGF0YTogY3VycmVudFJlY29yZCwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdpZCcsIGludmVudG9yeUlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGZldGNoRXJyb3IgfHwgIWN1cnJlbnRSZWNvcmQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IFJlY29yZCBub3QgZm91bmQ6JywgaW52ZW50b3J5SWQpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGludmVudG9yeVxyXG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAudXBkYXRlKHtcclxuICAgICAgICBxdWFudGl0eTogbmV3UXVhbnRpdHksXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCBpbnZlbnRvcnlJZCk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiB1cGRhdGVJbnZlbnRvcnlRdWFudGl0eSBlcnJvcjonLCB1cGRhdGVFcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgdHJhbnNhY3Rpb25cclxuICAgIGNvbnN0IHF1YW50aXR5Q2hhbmdlID0gbmV3UXVhbnRpdHkgLSBjdXJyZW50UmVjb3JkLnF1YW50aXR5O1xyXG4gICAgaWYgKHF1YW50aXR5Q2hhbmdlICE9PSAwKSB7XHJcbiAgICAgIGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2ludmVudG9yeV90cmFuc2FjdGlvbnMnKVxyXG4gICAgICAgIC5pbnNlcnQoW3tcclxuICAgICAgICAgIGlkOiBgVFhOLSR7RGF0ZS5ub3coKX0tJHtpbnZlbnRvcnlJZH1gLFxyXG4gICAgICAgICAgcHJvZHVjdF9pZDogY3VycmVudFJlY29yZC5wcm9kdWN0X2lkLFxyXG4gICAgICAgICAgc2l6ZTogY3VycmVudFJlY29yZC5zaXplLFxyXG4gICAgICAgICAgY29sb3I6IGN1cnJlbnRSZWNvcmQuY29sb3IsXHJcbiAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnYWRqdXN0bWVudCcsXHJcbiAgICAgICAgICBxdWFudGl0eV9jaGFuZ2U6IHF1YW50aXR5Q2hhbmdlLFxyXG4gICAgICAgICAgcHJldmlvdXNfcXVhbnRpdHk6IGN1cnJlbnRSZWNvcmQucXVhbnRpdHksXHJcbiAgICAgICAgICBuZXdfcXVhbnRpdHk6IG5ld1F1YW50aXR5LFxyXG4gICAgICAgICAgcmVhc29uOiByZWFzb24gfHwgJ01hbnVhbCBhZGp1c3RtZW50JyxcclxuICAgICAgICAgIGNyZWF0ZWRfYnk6IGNyZWF0ZWRCeSB8fCAnYWRtaW4nXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogdXBkYXRlSW52ZW50b3J5UXVhbnRpdHkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQWRkIGludmVudG9yeSAoc3RvY2sgaW4pXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRJbnZlbnRvcnkoXHJcbiAgcHJvZHVjdElkOiBzdHJpbmcsXHJcbiAgc2l6ZTogc3RyaW5nLFxyXG4gIGNvbG9yOiBzdHJpbmcsXHJcbiAgcXVhbnRpdHk6IG51bWJlcixcclxuICByZWFzb24/OiBzdHJpbmcsXHJcbiAgY3JlYXRlZEJ5Pzogc3RyaW5nXHJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbnZlbnRvcnlJZCA9IGBJTlYtJHtwcm9kdWN0SWR9LSR7c2l6ZX0tJHtjb2xvcn1gO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgY3VycmVudCByZWNvcmRcclxuICAgIGNvbnN0IHsgZGF0YTogY3VycmVudFJlY29yZCwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdpZCcsIGludmVudG9yeUlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgY29uc3QgY3VycmVudFF1YW50aXR5ID0gY3VycmVudFJlY29yZD8ucXVhbnRpdHkgfHwgMDtcclxuICAgIGNvbnN0IG5ld1F1YW50aXR5ID0gY3VycmVudFF1YW50aXR5ICsgcXVhbnRpdHk7XHJcblxyXG4gICAgLy8gVXBzZXJ0IGludmVudG9yeSByZWNvcmRcclxuICAgIGNvbnN0IHsgZXJyb3I6IHVwc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnVwc2VydChbe1xyXG4gICAgICAgIGlkOiBpbnZlbnRvcnlJZCxcclxuICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgc2l6ZSxcclxuICAgICAgICBjb2xvcixcclxuICAgICAgICBxdWFudGl0eTogbmV3UXVhbnRpdHksXHJcbiAgICAgICAgcmVzZXJ2ZWRfcXVhbnRpdHk6IGN1cnJlbnRSZWNvcmQ/LnJlc2VydmVkX3F1YW50aXR5IHx8IDAsXHJcbiAgICAgICAgbWluX3N0b2NrX2xldmVsOiBjdXJyZW50UmVjb3JkPy5taW5fc3RvY2tfbGV2ZWwgfHwgNSxcclxuICAgICAgICBtYXhfc3RvY2tfbGV2ZWw6IGN1cnJlbnRSZWNvcmQ/Lm1heF9zdG9ja19sZXZlbCB8fCAxMDBcclxuICAgICAgfV0pO1xyXG5cclxuICAgIGlmICh1cHNlcnRFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogYWRkSW52ZW50b3J5IGVycm9yOicsIHVwc2VydEVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB0cmFuc2FjdGlvblxyXG4gICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeV90cmFuc2FjdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGBUWE4tJHtEYXRlLm5vdygpfS0ke2ludmVudG9yeUlkfWAsXHJcbiAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElkLFxyXG4gICAgICAgIHNpemUsXHJcbiAgICAgICAgY29sb3IsXHJcbiAgICAgICAgdHJhbnNhY3Rpb25fdHlwZTogJ2luJyxcclxuICAgICAgICBxdWFudGl0eV9jaGFuZ2U6IHF1YW50aXR5LFxyXG4gICAgICAgIHByZXZpb3VzX3F1YW50aXR5OiBjdXJyZW50UXVhbnRpdHksXHJcbiAgICAgICAgbmV3X3F1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICByZWFzb246IHJlYXNvbiB8fCAnU3RvY2sgYWRkZWQnLFxyXG4gICAgICAgIGNyZWF0ZWRfYnk6IGNyZWF0ZWRCeSB8fCAnYWRtaW4nXHJcbiAgICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGFkZEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDaGVjayBpZiBwcm9kdWN0IGhhcyBzdWZmaWNpZW50IHN0b2NrXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1N0b2NrKFxyXG4gIHByb2R1Y3RJZDogc3RyaW5nLFxyXG4gIHNpemU6IHN0cmluZyxcclxuICBjb2xvcjogc3RyaW5nLFxyXG4gIHJlcXVlc3RlZFF1YW50aXR5OiBudW1iZXJcclxuKTogUHJvbWlzZTx7IGF2YWlsYWJsZTogYm9vbGVhbjsgY3VycmVudFN0b2NrOiBudW1iZXIgfT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdCgnYXZhaWxhYmxlX3F1YW50aXR5JylcclxuICAgICAgLmVxKCdwcm9kdWN0X2lkJywgcHJvZHVjdElkKVxyXG4gICAgICAuZXEoJ3NpemUnLCBzaXplKVxyXG4gICAgICAuZXEoJ2NvbG9yJywgY29sb3IpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgYXZhaWxhYmxlOiBmYWxzZSwgY3VycmVudFN0b2NrOiAwIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYXZhaWxhYmxlOiBkYXRhLmF2YWlsYWJsZV9xdWFudGl0eSA+PSByZXF1ZXN0ZWRRdWFudGl0eSxcclxuICAgICAgY3VycmVudFN0b2NrOiBkYXRhLmF2YWlsYWJsZV9xdWFudGl0eVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGNoZWNrU3RvY2sgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgYXZhaWxhYmxlOiBmYWxzZSwgY3VycmVudFN0b2NrOiAwIH07XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgbG93IHN0b2NrIGl0ZW1zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMb3dTdG9ja0l0ZW1zKCk6IFByb21pc2U8SW52ZW50b3J5UmVjb3JkW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICosXHJcbiAgICAgICAgcHJvZHVjdHMgKFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICBwcmljZVxyXG4gICAgICAgIClcclxuICAgICAgYClcclxuICAgICAgLmx0ZSgnYXZhaWxhYmxlX3F1YW50aXR5JywgMTApIC8vIFNpbXBsZSB0aHJlc2hvbGQgZm9yIG5vd1xyXG4gICAgICAub3JkZXIoJ2F2YWlsYWJsZV9xdWFudGl0eScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0TG93U3RvY2tJdGVtcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGdldExvd1N0b2NrSXRlbXMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IGludmVudG9yeSB0cmFuc2FjdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEludmVudG9yeVRyYW5zYWN0aW9ucyhcclxuICBwcm9kdWN0SWQ/OiBzdHJpbmcsXHJcbiAgbGltaXQ6IG51bWJlciA9IDUwXHJcbik6IFByb21pc2U8SW52ZW50b3J5VHJhbnNhY3Rpb25bXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KGxpbWl0KTtcclxuXHJcbiAgICBpZiAocHJvZHVjdElkKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5VHJhbnNhY3Rpb25zIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0SW52ZW50b3J5VHJhbnNhY3Rpb25zIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgaW52ZW50b3J5IGZvciBhIHByb2R1Y3RcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5KHByb2R1Y3RJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBwcm9kdWN0IGRldGFpbHNcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZHVjdCwgZXJyb3I6IHByb2R1Y3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLnNlbGVjdCgnc2l6ZXMsIGNvbG9ycywgc3RvY2snKVxyXG4gICAgICAuZXEoJ2lkJywgcHJvZHVjdElkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHByb2R1Y3RFcnJvciB8fCAhcHJvZHVjdCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogUHJvZHVjdCBub3QgZm91bmQ6JywgcHJvZHVjdElkKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNpemVzID0gcHJvZHVjdC5zaXplcyB8fCBbXTtcclxuICAgIGNvbnN0IGNvbG9ycyA9IHByb2R1Y3QuY29sb3JzIHx8IFtdO1xyXG4gICAgY29uc3Qgc3RvY2sgPSBwcm9kdWN0LnN0b2NrIHx8IHt9O1xyXG5cclxuICAgIC8vIENyZWF0ZSBpbnZlbnRvcnkgcmVjb3JkcyBmb3IgZWFjaCBzaXplL2NvbG9yIGNvbWJpbmF0aW9uXHJcbiAgICBjb25zdCBpbnZlbnRvcnlSZWNvcmRzID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3Qgc2l6ZSBvZiBzaXplcykge1xyXG4gICAgICBmb3IgKGNvbnN0IGNvbG9yIG9mIGNvbG9ycykge1xyXG4gICAgICAgIGNvbnN0IHN0b2NrUXVhbnRpdHkgPSBzdG9ja1tzaXplXT8uW2NvbG9yXSB8fCAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGludmVudG9yeVJlY29yZHMucHVzaCh7XHJcbiAgICAgICAgICBpZDogYElOVi0ke3Byb2R1Y3RJZH0tJHtzaXplfS0ke2NvbG9yfWAsXHJcbiAgICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICBzaXplLFxyXG4gICAgICAgICAgY29sb3IsXHJcbiAgICAgICAgICBxdWFudGl0eTogc3RvY2tRdWFudGl0eSxcclxuICAgICAgICAgIHJlc2VydmVkX3F1YW50aXR5OiAwLFxyXG4gICAgICAgICAgbWluX3N0b2NrX2xldmVsOiA1LFxyXG4gICAgICAgICAgbWF4X3N0b2NrX2xldmVsOiAxMDBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbnZlbnRvcnlSZWNvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgICAgLnVwc2VydChpbnZlbnRvcnlSZWNvcmRzKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSIsImdldEludmVudG9yeSIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsImNvbnNvbGUiLCJnZXRQcm9kdWN0SW52ZW50b3J5IiwicHJvZHVjdElkIiwiZXEiLCJ1cGRhdGVJbnZlbnRvcnlRdWFudGl0eSIsImludmVudG9yeUlkIiwibmV3UXVhbnRpdHkiLCJyZWFzb24iLCJjcmVhdGVkQnkiLCJjdXJyZW50UmVjb3JkIiwiZmV0Y2hFcnJvciIsInNpbmdsZSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXVhbnRpdHkiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicXVhbnRpdHlDaGFuZ2UiLCJpbnNlcnQiLCJpZCIsIm5vdyIsInByb2R1Y3RfaWQiLCJzaXplIiwiY29sb3IiLCJ0cmFuc2FjdGlvbl90eXBlIiwicXVhbnRpdHlfY2hhbmdlIiwicHJldmlvdXNfcXVhbnRpdHkiLCJuZXdfcXVhbnRpdHkiLCJjcmVhdGVkX2J5IiwiYWRkSW52ZW50b3J5IiwiY3VycmVudFF1YW50aXR5IiwidXBzZXJ0RXJyb3IiLCJ1cHNlcnQiLCJyZXNlcnZlZF9xdWFudGl0eSIsIm1pbl9zdG9ja19sZXZlbCIsIm1heF9zdG9ja19sZXZlbCIsImNoZWNrU3RvY2siLCJyZXF1ZXN0ZWRRdWFudGl0eSIsImF2YWlsYWJsZSIsImN1cnJlbnRTdG9jayIsImF2YWlsYWJsZV9xdWFudGl0eSIsImdldExvd1N0b2NrSXRlbXMiLCJsdGUiLCJnZXRJbnZlbnRvcnlUcmFuc2FjdGlvbnMiLCJsaW1pdCIsInF1ZXJ5IiwiaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkiLCJwcm9kdWN0IiwicHJvZHVjdEVycm9yIiwic2l6ZXMiLCJjb2xvcnMiLCJzdG9jayIsImludmVudG9yeVJlY29yZHMiLCJzdG9ja1F1YW50aXR5IiwicHVzaCIsImxlbmd0aCIsImluc2VydEVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/inventoryService.ts\n");

/***/ })

};
;