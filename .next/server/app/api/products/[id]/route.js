"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},5113:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>j,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>P,serverHooks:()=>w,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>g});var s={};t.r(s),t.d(s,{DELETE:()=>f,GET:()=>l,PUT:()=>p,runtime:()=>d});var o=t(5419),n=t(9108),u=t(9678),a=t(8070),i=t(4750),c=t(9372);let d="nodejs";async function l(e,{params:r}){try{let{id:e}=r,t=await (0,i.wv)(e);if(!t)return a.Z.json({success:!1,error:"Product not found"},{status:404});return console.log("Products API: GET single product:",e),a.Z.json({success:!0,data:t,timestamp:Date.now()})}catch(e){return console.error("Products API: GET single error:",e),a.Z.json({success:!1,error:"Failed to fetch product"},{status:500})}}async function p(e,{params:r}){try{let{id:t}=r,s=await e.json(),o=await (0,i.nM)(t,{...s,updatedAt:new Date});if(!o)return a.Z.json({success:!1,error:"Product not found"},{status:404});return console.log("Products API: PUT request - updated product:",t),a.Z.json({success:!0,data:o,message:"Product updated successfully",timestamp:Date.now()})}catch(e){return console.error("Products API: PUT error:",e),a.Z.json({success:!1,error:"Failed to update product"},{status:500})}}let f=(0,c.x)(async(e,{params:r})=>{try{let{id:e}=r,t=await (0,i.wv)(e);if(!t)return a.Z.json({success:!1,error:"Product not found"},{status:404});if(!await (0,i.Ir)(e))return a.Z.json({success:!1,error:"Failed to delete product"},{status:500});return console.log("Products API: DELETE request - deleted product:",e),a.Z.json({success:!0,data:t,message:"Product deleted successfully",timestamp:Date.now()})}catch(e){return console.error("Products API: DELETE error:",e),a.Z.json({success:!1,error:"Failed to delete product"},{status:500})}}),P=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:w,headerHooks:v,staticGenerationBailout:g}=P,j="/api/products/[id]/route";function y(){return(0,u.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:h})}},9372:(e,r,t)=>{t.d(r,{x:()=>a});var s=t(8070);async function o(e){try{let r=e.headers.get("x-session-id")||e.cookies.get("obsidian-admin-session-id")?.value;if(!r)return s.Z.json({error:"Authentication required"},{status:401});let t=await n(r);if(!t||!t.isActive)return s.Z.json({error:"Invalid or expired session"},{status:401});let o=new Date,a=new Date(t.expiresAt);if(o>a)return await u(r),s.Z.json({error:"Session expired"},{status:401});return e.user={username:t.username,sessionId:t.sessionId},null}catch(e){return console.error("Authentication error:",e),s.Z.json({error:"Authentication failed"},{status:500})}}async function n(e){try{let{supabase:r}=await Promise.resolve().then(t.bind(t,4750));if(!r)return null;let{data:s,error:o}=await r.from("admin_sessions").select("*").eq("session_id",e).eq("is_active",!0).single();if(o&&"PGRST116"!==o.code)return console.error("Error fetching session:",o),null;return s}catch(e){return console.error("Error verifying session:",e),null}}async function u(e){try{let{supabase:r}=await Promise.resolve().then(t.bind(t,4750));if(!r)return!1;let{error:s}=await r.from("admin_sessions").update({is_active:!1}).eq("session_id",e);return!s}catch(e){return console.error("Error deactivating session:",e),!1}}function a(e){return async(r,t)=>await o(r)||e(r,t)}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,206,409,750],()=>t(5113));module.exports=s})();