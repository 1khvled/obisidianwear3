"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},6366:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>P,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>w});var s={};t.r(s),t.d(s,{GET:()=>l,POST:()=>p,runtime:()=>d});var o=t(5419),n=t(9108),a=t(9678),i=t(8070),u=t(4750),c=t(9372);let d="nodejs";async function l(){try{console.log("Products API: GET request started");let e=await (0,u.Xp)();console.log("Products API: GET request - returning",e.length,"products");let r=i.Z.json({success:!0,data:e,count:e.length,timestamp:Date.now()});return r.headers.set("Cache-Control","public, s-maxage=300, stale-while-revalidate=600"),r}catch(e){return console.error("Products API: GET error:",e),console.error("Products API: Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),i.Z.json({success:!1,error:"Failed to fetch products",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=(0,c.x)(async e=>{try{let r=await e.json();if(!r.name||!r.price)return i.Z.json({success:!1,error:"Name and price are required"},{status:400});let t={id:Date.now().toString(),...r,createdAt:new Date,updatedAt:new Date},s=await (0,u.gK)(t);return console.log("Products API: POST request - created product:",t.id,t.name),i.Z.json({success:!0,data:s,message:"Product created successfully",timestamp:Date.now()},{status:201})}catch(e){return console.error("Products API: POST error:",e),i.Z.json({success:!1,error:"Failed to create product"},{status:500})}}),m=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\products\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:P,headerHooks:g,staticGenerationBailout:w}=m,v="/api/products/route";function x(){return(0,a.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:f})}},9372:(e,r,t)=>{t.d(r,{x:()=>i});var s=t(8070);async function o(e){try{let r=e.headers.get("x-session-id")||e.cookies.get("obsidian-admin-session-id")?.value;if(!r)return s.Z.json({error:"Authentication required"},{status:401});let t=await n(r);if(!t||!t.isActive)return s.Z.json({error:"Invalid or expired session"},{status:401});let o=new Date,i=new Date(t.expiresAt);if(o>i)return await a(r),s.Z.json({error:"Session expired"},{status:401});return e.user={username:t.username,sessionId:t.sessionId},null}catch(e){return console.error("Authentication error:",e),s.Z.json({error:"Authentication failed"},{status:500})}}async function n(e){try{let{supabase:r}=await Promise.resolve().then(t.bind(t,4750));if(!r)return null;let{data:s,error:o}=await r.from("admin_sessions").select("*").eq("session_id",e).eq("is_active",!0).single();if(o&&"PGRST116"!==o.code)return console.error("Error fetching session:",o),null;return s}catch(e){return console.error("Error verifying session:",e),null}}async function a(e){try{let{supabase:r}=await Promise.resolve().then(t.bind(t,4750));if(!r)return!1;let{error:s}=await r.from("admin_sessions").update({is_active:!1}).eq("session_id",e);return!s}catch(e){return console.error("Error deactivating session:",e),!1}}function i(e){return async(r,t)=>await o(r)||e(r,t)}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,206,409,750],()=>t(6366));module.exports=s})();