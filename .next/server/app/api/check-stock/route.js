"use strict";(()=>{var e={};e.id=4948,e.ids=[4948],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},66667:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>k,originalPathname:()=>m,patchFetch:()=>q,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>f});var s={};r.r(s),r.d(s,{GET:()=>n});var o=r(95419),a=r(69108),c=r(99678),u=r(78070),i=r(4750);async function n(e){try{let{searchParams:t}=new URL(e.url),r=t.get("productId"),s=t.get("type");if(!r||!s)return u.Z.json({success:!1,error:"Product ID and type are required"},{status:400});let o=null;if("made-to-order"===s){let{data:e,error:t}=await i.OQ.from("made_to_order_products").select("id, name, stock, colors, sizes").eq("id",r).single();if(t)return u.Z.json({success:!1,error:"Failed to fetch stock data"},{status:500});o=e}else{let{data:e,error:t}=await i.OQ.from("products").select("id, name, stock, colors, sizes").eq("id",r).single();if(t)return u.Z.json({success:!1,error:"Failed to fetch stock data"},{status:500});o=e}if(!o)return u.Z.json({success:!1,error:"Product not found"},{status:404});let a=o.stock||{},c=o.colors||["Default"],n=o.sizes||["S","M","L","XL"],d={};return c.forEach(e=>{d[e]={},n.forEach(t=>{d[e][t]=a[t]?.[e]||0})}),u.Z.json({success:!0,data:{productId:o.id,productName:o.name,colors:c,sizes:n,availability:d,stock:a}})}catch(e){return u.Z.json({success:!1,error:"Internal server error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/check-stock/route",pathname:"/api/check-stock",filename:"route",bundlePath:"app/api/check-stock/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\api\\check-stock\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:h,headerHooks:k,staticGenerationBailout:f}=d,m="/api/check-stock/route";function q(){return(0,c.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,2409,4750],()=>r(66667));module.exports=s})();