"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Desktop_Obsidian_wear_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/route.ts */ \"(rsc)/./src/app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Desktop\\\\Obsidian wear\\\\projectt\\\\src\\\\app\\\\api\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Desktop_Obsidian_wear_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rlc2t0b3AlNUNPYnNpZGlhbiUyMHdlYXIlNUNwcm9qZWN0dCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSFAlNUNEZXNrdG9wJTVDT2JzaWRpYW4lMjB3ZWFyJTVDcHJvamVjdHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2dDO0FBQzdHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8/YWU3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXE9ic2lkaWFuIHdlYXJcXFxccHJvamVjdHRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb3JkZXJzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb3JkZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9vcmRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXE9ic2lkaWFuIHdlYXJcXFxccHJvamVjdHRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb3JkZXJzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yZGVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/orders/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\");\n/* harmony import */ var _lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authMiddleware */ \"(rsc)/./src/lib/authMiddleware.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./src/lib/validation.ts\");\n/* harmony import */ var _lib_emailService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/emailService */ \"(rsc)/./src/lib/emailService.ts\");\n\n\n\n\n\n// Ensure we use Node.js runtime for Supabase compatibility\nconst runtime = \"nodejs\";\n// GET /api/orders - Get all orders\nasync function GET() {\n    try {\n        console.log(\"Orders API: GET request started\");\n        // Check if Supabase is available\n        if (false) {}\n        const orders = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrders)();\n        console.log(\"Orders API: GET request - returning\", orders.length, \"orders\");\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: orders,\n            count: orders.length,\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: GET error:\", error);\n        console.error(\"Orders API: Error details:\", {\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            stack: error instanceof Error ? error.stack : undefined\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch orders\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/orders - Create new order (PROTECTED)\nconst POST = (0,_lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__.withAuth)(async (request)=>{\n    try {\n        const orderData = await request.json();\n        console.log(\"Orders API: Received order data:\", orderData);\n        // Validate required fields\n        const validation = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.validateRequired(orderData, [\n            \"customerName\",\n            \"productId\",\n            \"total\"\n        ]);\n        if (!validation.isValid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: `Missing required fields: ${validation.missingFields.join(\", \")}`\n            }, {\n                status: 400\n            });\n        }\n        // Validate email if provided\n        if (orderData.customerEmail && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidEmail(orderData.customerEmail)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid email format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate phone if provided\n        if (orderData.customerPhone && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidPhone(orderData.customerPhone)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid phone number format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate numeric fields\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.total, 0, 999999)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Total must be a valid number between 0 and 999999\"\n            }, {\n                status: 400\n            });\n        }\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.quantity, 1, 100)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Quantity must be between 1 and 100\"\n            }, {\n                status: 400\n            });\n        }\n        // Sanitize order data\n        const sanitizedData = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.sanitizeOrderData(orderData);\n        // Generate unique ID and create complete Order object\n        const newOrder = {\n            id: `ORD-${Date.now()}`,\n            customerName: sanitizedData.customerName,\n            customerEmail: sanitizedData.customerEmail,\n            customerPhone: sanitizedData.customerPhone,\n            customerAddress: sanitizedData.customerAddress,\n            customerCity: sanitizedData.customerCity || \"\",\n            wilayaId: sanitizedData.wilayaId || 0,\n            wilayaName: sanitizedData.wilayaName || \"\",\n            productId: sanitizedData.productId,\n            productName: sanitizedData.productName,\n            productImage: sanitizedData.productImage || \"\",\n            selectedSize: sanitizedData.selectedSize,\n            selectedColor: sanitizedData.selectedColor,\n            quantity: sanitizedData.quantity,\n            subtotal: sanitizedData.subtotal || 0,\n            shippingCost: sanitizedData.shippingCost || 0,\n            total: sanitizedData.total,\n            shippingType: sanitizedData.shippingType || \"homeDelivery\",\n            paymentMethod: sanitizedData.paymentMethod || \"cod\",\n            paymentStatus: \"pending\",\n            status: \"pending\",\n            orderDate: new Date(),\n            notes: sanitizedData.notes,\n            trackingNumber: \"\",\n            estimatedDelivery: sanitizedData.estimatedDelivery || \"\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        const addedOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.addOrder)(newOrder);\n        // Automatically deduct stock from inventory\n        const stockDeducted = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.deductStockFromOrder)(newOrder);\n        if (!stockDeducted) {\n            console.warn(\"Orders API: Failed to deduct stock for order:\", newOrder.id);\n        // Note: We still return success for the order, but log the stock issue\n        }\n        // Send order confirmation email (async, don't wait for it)\n        if (addedOrder.customerEmail) {\n            (0,_lib_emailService__WEBPACK_IMPORTED_MODULE_4__.sendOrderConfirmationEmail)(addedOrder).catch((error)=>{\n                console.error(\"Orders API: Failed to send confirmation email:\", error);\n            // Don't fail the order creation if email fails\n            });\n        }\n        console.log(\"Orders API: POST request - created order:\", newOrder.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: addedOrder,\n            message: \"Order created successfully\",\n            stockDeducted: stockDeducted,\n            timestamp: Date.now()\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Orders API: POST error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to create order\"\n        }, {\n            status: 500\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXdCLGdCQUFnQixNQUFNckUsMkVBQW9CQSxDQUFDNkM7UUFDakQsSUFBSSxDQUFDd0IsZUFBZTtZQUNsQi9ELFFBQVFnRSxJQUFJLENBQUMsaURBQWlEekIsU0FBU0MsRUFBRTtRQUN6RSx1RUFBdUU7UUFDekU7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSXNCLFdBQVdoQyxhQUFhLEVBQUU7WUFDNUJqQyw2RUFBMEJBLENBQUNpRSxZQUFZRyxLQUFLLENBQUMzRCxDQUFBQTtnQkFDM0NOLFFBQVFNLEtBQUssQ0FBQyxrREFBa0RBO1lBQ2hFLCtDQUErQztZQUNqRDtRQUNGO1FBRUFOLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNzQyxTQUFTQyxFQUFFO1FBRXBFLE9BQU9qRCxrRkFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUSSxNQUFNa0Q7WUFDTjdDLFNBQVM7WUFDVDhDLGVBQWVBO1lBQ2ZqRCxXQUFXQyxLQUFLQyxHQUFHO1FBQ3JCLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CLEVBQUUsT0FBT0gsT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPZixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPRixPQUFPO1FBQXlCLEdBQ2xEO1lBQUVHLFFBQVE7UUFBSTtJQUVsQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzPzhkMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZXRPcmRlcnMsIGFkZE9yZGVyLCBkZWR1Y3RTdG9ja0Zyb21PcmRlciB9IGZyb20gJ0AvbGliL3N1cGFiYXNlRGF0YWJhc2UnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICdAL2xpYi9hdXRoTWlkZGxld2FyZSc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9uJztcbmltcG9ydCB7IHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIH0gZnJvbSAnQC9saWIvZW1haWxTZXJ2aWNlJztcblxuLy8gRW5zdXJlIHdlIHVzZSBOb2RlLmpzIHJ1bnRpbWUgZm9yIFN1cGFiYXNlIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XG5cbi8vIEdFVCAvYXBpL29yZGVycyAtIEdldCBhbGwgb3JkZXJzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBHRVQgcmVxdWVzdCBzdGFydGVkJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXG4gICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhdGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBnZXRPcmRlcnMoKTtcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogR0VUIHJlcXVlc3QgLSByZXR1cm5pbmcnLCBvcmRlcnMubGVuZ3RoLCAnb3JkZXJzJyk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBvcmRlcnMsXG4gICAgICBjb3VudDogb3JkZXJzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVycyBBUEk6IEdFVCBlcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG9yZGVycycsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBQT1NUIC9hcGkvb3JkZXJzIC0gQ3JlYXRlIG5ldyBvcmRlciAoUFJPVEVDVEVEKVxuZXhwb3J0IGNvbnN0IFBPU1QgPSB3aXRoQXV0aChhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmRlckRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogUmVjZWl2ZWQgb3JkZXIgZGF0YTonLCBvcmRlckRhdGEpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBWYWxpZGF0aW9uVXRpbHMudmFsaWRhdGVSZXF1aXJlZChvcmRlckRhdGEsIFsnY3VzdG9tZXJOYW1lJywgJ3Byb2R1Y3RJZCcsICd0b3RhbCddKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiAke3ZhbGlkYXRpb24ubWlzc2luZ0ZpZWxkcy5qb2luKCcsICcpfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGVtYWlsIGlmIHByb3ZpZGVkXG4gICAgaWYgKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsICYmICFWYWxpZGF0aW9uVXRpbHMuaXNWYWxpZEVtYWlsKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgcGhvbmUgaWYgcHJvdmlkZWRcbiAgICBpZiAob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUgJiYgIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkUGhvbmUob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBwaG9uZSBudW1iZXIgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbnVtZXJpYyBmaWVsZHNcbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS50b3RhbCwgMCwgOTk5OTk5KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1RvdGFsIG11c3QgYmUgYSB2YWxpZCBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTk5OTknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS5xdWFudGl0eSwgMSwgMTAwKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1F1YW50aXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMDAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBvcmRlciBkYXRhXG4gICAgY29uc3Qgc2FuaXRpemVkRGF0YSA9IFZhbGlkYXRpb25VdGlscy5zYW5pdGl6ZU9yZGVyRGF0YShvcmRlckRhdGEpO1xuXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIElEIGFuZCBjcmVhdGUgY29tcGxldGUgT3JkZXIgb2JqZWN0XG4gICAgY29uc3QgbmV3T3JkZXI6IE9yZGVyID0ge1xuICAgICAgaWQ6IGBPUkQtJHtEYXRlLm5vdygpfWAsXG4gICAgICBjdXN0b21lck5hbWU6IHNhbml0aXplZERhdGEuY3VzdG9tZXJOYW1lLFxuICAgICAgY3VzdG9tZXJFbWFpbDogc2FuaXRpemVkRGF0YS5jdXN0b21lckVtYWlsLFxuICAgICAgY3VzdG9tZXJQaG9uZTogc2FuaXRpemVkRGF0YS5jdXN0b21lclBob25lLFxuICAgICAgY3VzdG9tZXJBZGRyZXNzOiBzYW5pdGl6ZWREYXRhLmN1c3RvbWVyQWRkcmVzcyxcbiAgICAgIGN1c3RvbWVyQ2l0eTogc2FuaXRpemVkRGF0YS5jdXN0b21lckNpdHkgfHwgJycsXG4gICAgICB3aWxheWFJZDogc2FuaXRpemVkRGF0YS53aWxheWFJZCB8fCAwLFxuICAgICAgd2lsYXlhTmFtZTogc2FuaXRpemVkRGF0YS53aWxheWFOYW1lIHx8ICcnLFxuICAgICAgcHJvZHVjdElkOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3ROYW1lLFxuICAgICAgcHJvZHVjdEltYWdlOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJbWFnZSB8fCAnJyxcbiAgICAgIHNlbGVjdGVkU2l6ZTogc2FuaXRpemVkRGF0YS5zZWxlY3RlZFNpemUsXG4gICAgICBzZWxlY3RlZENvbG9yOiBzYW5pdGl6ZWREYXRhLnNlbGVjdGVkQ29sb3IsXG4gICAgICBxdWFudGl0eTogc2FuaXRpemVkRGF0YS5xdWFudGl0eSxcbiAgICAgIHN1YnRvdGFsOiBzYW5pdGl6ZWREYXRhLnN1YnRvdGFsIHx8IDAsXG4gICAgICBzaGlwcGluZ0Nvc3Q6IHNhbml0aXplZERhdGEuc2hpcHBpbmdDb3N0IHx8IDAsXG4gICAgICB0b3RhbDogc2FuaXRpemVkRGF0YS50b3RhbCxcbiAgICAgIHNoaXBwaW5nVHlwZTogc2FuaXRpemVkRGF0YS5zaGlwcGluZ1R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXG4gICAgICBwYXltZW50TWV0aG9kOiBzYW5pdGl6ZWREYXRhLnBheW1lbnRNZXRob2QgfHwgJ2NvZCcsXG4gICAgICBwYXltZW50U3RhdHVzOiAncGVuZGluZycsXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgIG9yZGVyRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIG5vdGVzOiBzYW5pdGl6ZWREYXRhLm5vdGVzLFxuICAgICAgdHJhY2tpbmdOdW1iZXI6ICcnLFxuICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IHNhbml0aXplZERhdGEuZXN0aW1hdGVkRGVsaXZlcnkgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkZWRPcmRlciA9IGF3YWl0IGFkZE9yZGVyKG5ld09yZGVyKTtcbiAgICBcbiAgICAvLyBBdXRvbWF0aWNhbGx5IGRlZHVjdCBzdG9jayBmcm9tIGludmVudG9yeVxuICAgIGNvbnN0IHN0b2NrRGVkdWN0ZWQgPSBhd2FpdCBkZWR1Y3RTdG9ja0Zyb21PcmRlcihuZXdPcmRlcik7XG4gICAgaWYgKCFzdG9ja0RlZHVjdGVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ09yZGVycyBBUEk6IEZhaWxlZCB0byBkZWR1Y3Qgc3RvY2sgZm9yIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICAgIC8vIE5vdGU6IFdlIHN0aWxsIHJldHVybiBzdWNjZXNzIGZvciB0aGUgb3JkZXIsIGJ1dCBsb2cgdGhlIHN0b2NrIGlzc3VlXG4gICAgfVxuICAgIFxuICAgIC8vIFNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIChhc3luYywgZG9uJ3Qgd2FpdCBmb3IgaXQpXG4gICAgaWYgKGFkZGVkT3JkZXIuY3VzdG9tZXJFbWFpbCkge1xuICAgICAgc2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwoYWRkZWRPcmRlcikuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBGYWlsZWQgdG8gc2VuZCBjb25maXJtYXRpb24gZW1haWw6JywgZXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSBvcmRlciBjcmVhdGlvbiBpZiBlbWFpbCBmYWlsc1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBQT1NUIHJlcXVlc3QgLSBjcmVhdGVkIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFkZGVkT3JkZXIsXG4gICAgICBtZXNzYWdlOiAnT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgc3RvY2tEZWR1Y3RlZDogc3RvY2tEZWR1Y3RlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogUE9TVCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIG9yZGVyJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0T3JkZXJzIiwiYWRkT3JkZXIiLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsIndpdGhBdXRoIiwiVmFsaWRhdGlvblV0aWxzIiwic2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwiLCJydW50aW1lIiwiR0VUIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJvcmRlcnMiLCJsZW5ndGgiLCJkYXRhIiwiY291bnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibWVzc2FnZSIsIkVycm9yIiwic3RhY2siLCJ1bmRlZmluZWQiLCJkZXRhaWxzIiwiUE9TVCIsInJlcXVlc3QiLCJvcmRlckRhdGEiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVSZXF1aXJlZCIsImlzVmFsaWQiLCJtaXNzaW5nRmllbGRzIiwiam9pbiIsImN1c3RvbWVyRW1haWwiLCJpc1ZhbGlkRW1haWwiLCJjdXN0b21lclBob25lIiwiaXNWYWxpZFBob25lIiwiaXNWYWxpZE51bWJlciIsInRvdGFsIiwicXVhbnRpdHkiLCJzYW5pdGl6ZWREYXRhIiwic2FuaXRpemVPcmRlckRhdGEiLCJuZXdPcmRlciIsImlkIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJBZGRyZXNzIiwiY3VzdG9tZXJDaXR5Iiwid2lsYXlhSWQiLCJ3aWxheWFOYW1lIiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0SW1hZ2UiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwic3VidG90YWwiLCJzaGlwcGluZ0Nvc3QiLCJzaGlwcGluZ1R5cGUiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFN0YXR1cyIsIm9yZGVyRGF0ZSIsIm5vdGVzIiwidHJhY2tpbmdOdW1iZXIiLCJlc3RpbWF0ZWREZWxpdmVyeSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImFkZGVkT3JkZXIiLCJzdG9ja0RlZHVjdGVkIiwid2FybiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authMiddleware.ts":
/*!***********************************!*\
  !*** ./src/lib/authMiddleware.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateRequest: () => (/* binding */ authenticateRequest),\n/* harmony export */   generateApiToken: () => (/* binding */ generateApiToken),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _rateLimiter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rateLimiter */ \"(rsc)/./src/lib/rateLimiter.ts\");\n\n\n// Simple authentication middleware for API routes\nfunction authenticateRequest(request) {\n    // Get authorization header\n    const authHeader = request.headers.get(\"authorization\");\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return false;\n    }\n    // Extract token\n    const token = authHeader.substring(7);\n    // Simple token validation (in production, use JWT or proper session validation)\n    const expectedToken = process.env.NEXT_PUBLIC_API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n    return token === expectedToken;\n}\n// Middleware wrapper for protected API routes\nfunction withAuth(handler) {\n    return async (request, ...args)=>{\n        // Skip auth for public routes\n        const url = new URL(request.url);\n        const publicRoutes = [\n            \"/api/maintenance\",\n            \"/api/test-db\",\n            \"/api/test-supabase\"\n        ];\n        if (publicRoutes.some((route)=>url.pathname.startsWith(route))) {\n            return handler(request, ...args);\n        }\n        // Get client IP for rate limiting\n        const clientIP = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        // Check rate limit\n        const rateLimitResult = (0,_rateLimiter__WEBPACK_IMPORTED_MODULE_1__.checkRateLimit)(clientIP, _rateLimiter__WEBPACK_IMPORTED_MODULE_1__.apiRateLimiter);\n        if (!rateLimitResult.allowed) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Too Many Requests\",\n                message: \"Rate limit exceeded. Please try again later.\"\n            }, {\n                status: 429,\n                headers: rateLimitResult.headers\n            });\n        }\n        // Check authentication\n        if (!authenticateRequest(request)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Unauthorized\",\n                message: \"Authentication required\"\n            }, {\n                status: 401,\n                headers: rateLimitResult.headers\n            });\n        }\n        return handler(request, ...args);\n    };\n}\n// Generate API token for admin\nfunction generateApiToken() {\n    return process.env.NEXT_PUBLIC_API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGhNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ087QUFFL0Qsa0RBQWtEO0FBQzNDLFNBQVNHLG9CQUFvQkMsT0FBb0I7SUFDdEQsMkJBQTJCO0lBQzNCLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBRXZDLElBQUksQ0FBQ0YsY0FBYyxDQUFDQSxXQUFXRyxVQUFVLENBQUMsWUFBWTtRQUNwRCxPQUFPO0lBQ1Q7SUFFQSxnQkFBZ0I7SUFDaEIsTUFBTUMsUUFBUUosV0FBV0ssU0FBUyxDQUFDO0lBRW5DLGdGQUFnRjtJQUNoRixNQUFNQyxnQkFBZ0JDLFFBQVFDLEdBQUcsQ0FBQ0MsMEJBQTBCLElBQUk7SUFFaEUsT0FBT0wsVUFBVUU7QUFDbkI7QUFFQSw4Q0FBOEM7QUFDdkMsU0FBU0ksU0FBU0MsT0FBaUI7SUFDeEMsT0FBTyxPQUFPWixTQUFzQixHQUFHYTtRQUNyQyw4QkFBOEI7UUFDOUIsTUFBTUMsTUFBTSxJQUFJQyxJQUFJZixRQUFRYyxHQUFHO1FBQy9CLE1BQU1FLGVBQWU7WUFBQztZQUFvQjtZQUFnQjtTQUFxQjtRQUUvRSxJQUFJQSxhQUFhQyxJQUFJLENBQUNDLENBQUFBLFFBQVNKLElBQUlLLFFBQVEsQ0FBQ2YsVUFBVSxDQUFDYyxTQUFTO1lBQzlELE9BQU9OLFFBQVFaLFlBQVlhO1FBQzdCO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1PLFdBQVdwQixRQUFRcUIsRUFBRSxJQUFJckIsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCO1FBRXpFLG1CQUFtQjtRQUNuQixNQUFNbUIsa0JBQWtCekIsNERBQWNBLENBQUN1QixVQUFVdEIsd0RBQWNBO1FBQy9ELElBQUksQ0FBQ3dCLGdCQUFnQkMsT0FBTyxFQUFFO1lBQzVCLE9BQU8zQixrRkFBWUEsQ0FBQzRCLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWCxHQUNBO2dCQUNFQyxRQUFRO2dCQUNSMUIsU0FBU29CLGdCQUFnQnBCLE9BQU87WUFDbEM7UUFFSjtRQUVBLHVCQUF1QjtRQUN2QixJQUFJLENBQUNILG9CQUFvQkMsVUFBVTtZQUNqQyxPQUFPSixrRkFBWUEsQ0FBQzRCLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWCxHQUNBO2dCQUNFQyxRQUFRO2dCQUNSMUIsU0FBU29CLGdCQUFnQnBCLE9BQU87WUFDbEM7UUFFSjtRQUVBLE9BQU9VLFFBQVFaLFlBQVlhO0lBQzdCO0FBQ0Y7QUFFQSwrQkFBK0I7QUFDeEIsU0FBU2dCO0lBQ2QsT0FBT3JCLFFBQVFDLEdBQUcsQ0FBQ0MsMEJBQTBCLElBQUk7QUFDbkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2xpYi9hdXRoTWlkZGxld2FyZS50cz9iMjYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNoZWNrUmF0ZUxpbWl0LCBhcGlSYXRlTGltaXRlciB9IGZyb20gJy4vcmF0ZUxpbWl0ZXInO1xyXG5cclxuLy8gU2ltcGxlIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgZm9yIEFQSSByb3V0ZXNcclxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBib29sZWFuIHtcclxuICAvLyBHZXQgYXV0aG9yaXphdGlvbiBoZWFkZXJcclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xyXG4gIFxyXG4gIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEV4dHJhY3QgdG9rZW5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gIFxyXG4gIC8vIFNpbXBsZSB0b2tlbiB2YWxpZGF0aW9uIChpbiBwcm9kdWN0aW9uLCB1c2UgSldUIG9yIHByb3BlciBzZXNzaW9uIHZhbGlkYXRpb24pXHJcbiAgY29uc3QgZXhwZWN0ZWRUb2tlbiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9BVVRIX1RPS0VOIHx8ICdvYnNpZGlhbi1hcGktdG9rZW4tMjAyNSc7XHJcbiAgXHJcbiAgcmV0dXJuIHRva2VuID09PSBleHBlY3RlZFRva2VuO1xyXG59XHJcblxyXG4vLyBNaWRkbGV3YXJlIHdyYXBwZXIgZm9yIHByb3RlY3RlZCBBUEkgcm91dGVzXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyOiBGdW5jdGlvbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAvLyBTa2lwIGF1dGggZm9yIHB1YmxpYyByb3V0ZXNcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgcHVibGljUm91dGVzID0gWycvYXBpL21haW50ZW5hbmNlJywgJy9hcGkvdGVzdC1kYicsICcvYXBpL3Rlc3Qtc3VwYWJhc2UnXTtcclxuICAgIFxyXG4gICAgaWYgKHB1YmxpY1JvdXRlcy5zb21lKHJvdXRlID0+IHVybC5wYXRobmFtZS5zdGFydHNXaXRoKHJvdXRlKSkpIHtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGNsaWVudCBJUCBmb3IgcmF0ZSBsaW1pdGluZ1xyXG4gICAgY29uc3QgY2xpZW50SVAgPSByZXF1ZXN0LmlwIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8ICd1bmtub3duJztcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgcmF0ZSBsaW1pdFxyXG4gICAgY29uc3QgcmF0ZUxpbWl0UmVzdWx0ID0gY2hlY2tSYXRlTGltaXQoY2xpZW50SVAsIGFwaVJhdGVMaW1pdGVyKTtcclxuICAgIGlmICghcmF0ZUxpbWl0UmVzdWx0LmFsbG93ZWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1RvbyBNYW55IFJlcXVlc3RzJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3RhdHVzOiA0MjksXHJcbiAgICAgICAgICBoZWFkZXJzOiByYXRlTGltaXRSZXN1bHQuaGVhZGVyc1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgaWYgKCFhdXRoZW50aWNhdGVSZXF1ZXN0KHJlcXVlc3QpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdGF0dXM6IDQwMSxcclxuICAgICAgICAgIGhlYWRlcnM6IHJhdGVMaW1pdFJlc3VsdC5oZWFkZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcXVlc3QsIC4uLmFyZ3MpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIEFQSSB0b2tlbiBmb3IgYWRtaW5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXBpVG9rZW4oKTogc3RyaW5nIHtcclxuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX0FVVEhfVE9LRU4gfHwgJ29ic2lkaWFuLWFwaS10b2tlbi0yMDI1JztcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2hlY2tSYXRlTGltaXQiLCJhcGlSYXRlTGltaXRlciIsImF1dGhlbnRpY2F0ZVJlcXVlc3QiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJzdGFydHNXaXRoIiwidG9rZW4iLCJzdWJzdHJpbmciLCJleHBlY3RlZFRva2VuIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9BVVRIX1RPS0VOIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwiYXJncyIsInVybCIsIlVSTCIsInB1YmxpY1JvdXRlcyIsInNvbWUiLCJyb3V0ZSIsInBhdGhuYW1lIiwiY2xpZW50SVAiLCJpcCIsInJhdGVMaW1pdFJlc3VsdCIsImFsbG93ZWQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsImdlbmVyYXRlQXBpVG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authMiddleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/emailService.ts":
/*!*********************************!*\
  !*** ./src/lib/emailService.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendOrderConfirmationEmail: () => (/* binding */ sendOrderConfirmationEmail)\n/* harmony export */ });\nasync function sendOrderConfirmationEmail(order) {\n    try {\n        const emailData = {\n            to: order.customerEmail,\n            subject: \"Your Order Confirmation - OBSIDIAN WEAR\",\n            text: generateOrderConfirmationText(order),\n            html: generateOrderConfirmationHTML(order)\n        };\n        // Use the direct email sending logic instead of making an API call\n        const nodemailer = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n        // Create transporter with Gmail SMTP\n        const transporter = nodemailer.createTransport({\n            service: \"gmail\",\n            auth: {\n                user: process.env.GMAIL_USER,\n                pass: process.env.GMAIL_APP_PASSWORD\n            }\n        });\n        // Email options\n        const mailOptions = {\n            from: {\n                name: \"OBSIDIAN WEAR\",\n                address: process.env.GMAIL_USER || \"\"\n            },\n            to: emailData.to,\n            subject: emailData.subject,\n            text: emailData.text,\n            html: emailData.html\n        };\n        // Send email\n        const info = await transporter.sendMail(mailOptions);\n        console.log(\"Order confirmation email sent successfully:\", info.messageId);\n        return true;\n    } catch (error) {\n        console.error(\"Error sending order confirmation email:\", error);\n        return false;\n    }\n}\nfunction generateOrderConfirmationText(order) {\n    return `\r\nOrder Confirmation - OBSIDIAN WEAR\r\n\r\nDear ${order.customerName},\r\n\r\nThank you for your order! Your order has been confirmed and we'll start processing it immediately.\r\n\r\nOrder Details:\r\n- Order ID: #${order.id}\r\n- Date: ${new Date(order.orderDate).toLocaleDateString()}\r\n- Product: ${order.productName}\r\n- Size: ${order.selectedSize}\r\n- Color: ${order.selectedColor}\r\n- Quantity: ${order.quantity}\r\n- Total: ${order.total.toLocaleString()} DA\r\n\r\nShipping Information:\r\n- Shipping Type: ${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}\r\n- Wilaya: ${order.wilayaName}\r\n- City: ${order.customerCity}\r\n- Address: ${order.customerAddress}\r\n- Shipping Cost: ${order.shippingCost.toLocaleString()} DA\r\n\r\nPayment Method: ${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}\r\n\r\nWe will contact you soon to confirm the delivery details.\r\n\r\nBest regards,\r\nOBSIDIAN WEAR Team\r\n  `.trim();\n}\nfunction generateOrderConfirmationHTML(order) {\n    return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Order Confirmation - OBSIDIAN WEAR</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            line-height: 1.6;\r\n            color: #333;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n            padding: 20px;\r\n            background-color: #f4f4f4;\r\n        }\r\n        .container {\r\n            background-color: white;\r\n            padding: 30px;\r\n            border-radius: 10px;\r\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\r\n        }\r\n        .header {\r\n            text-align: center;\r\n            margin-bottom: 30px;\r\n            padding-bottom: 20px;\r\n            border-bottom: 2px solid #000;\r\n        }\r\n        .logo {\r\n            font-size: 24px;\r\n            font-weight: bold;\r\n            color: #000;\r\n            margin-bottom: 10px;\r\n        }\r\n        .order-id {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 10px 20px;\r\n            border-radius: 5px;\r\n            display: inline-block;\r\n            font-weight: bold;\r\n        }\r\n        .section {\r\n            margin-bottom: 25px;\r\n        }\r\n        .section h3 {\r\n            color: #000;\r\n            border-bottom: 1px solid #eee;\r\n            padding-bottom: 5px;\r\n        }\r\n        .order-details {\r\n            background-color: #f8f8f8;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n        }\r\n        .detail-row {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: 8px;\r\n        }\r\n        .detail-label {\r\n            font-weight: bold;\r\n            color: #666;\r\n        }\r\n        .total {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n            text-align: center;\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            margin-top: 20px;\r\n        }\r\n        .footer {\r\n            text-align: center;\r\n            margin-top: 30px;\r\n            padding-top: 20px;\r\n            border-top: 1px solid #eee;\r\n            color: #666;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <div class=\"logo\">OBSIDIAN WEAR</div>\r\n            <h1>Order Confirmation</h1>\r\n            <div class=\"order-id\">#${order.id}</div>\r\n        </div>\r\n\r\n        <p>Dear <strong>${order.customerName}</strong>,</p>\r\n        \r\n        <p>Thank you for your order! Your order has been confirmed and we'll start processing it immediately.</p>\r\n\r\n        <div class=\"section\">\r\n            <h3>Order Details</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Order ID:</span>\r\n                    <span>#${order.id}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Date:</span>\r\n                    <span>${new Date(order.orderDate).toLocaleDateString()}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Product:</span>\r\n                    <span>${order.productName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Size:</span>\r\n                    <span>${order.selectedSize}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Color:</span>\r\n                    <span>${order.selectedColor}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Quantity:</span>\r\n                    <span>${order.quantity}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Shipping Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Type:</span>\r\n                    <span>${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Wilaya:</span>\r\n                    <span>${order.wilayaName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">City:</span>\r\n                    <span>${order.customerCity}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Address:</span>\r\n                    <span>${order.customerAddress}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Cost:</span>\r\n                    <span>${order.shippingCost.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Payment Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Payment Method:</span>\r\n                    <span>${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Subtotal:</span>\r\n                    <span>${order.subtotal.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"total\">\r\n            Total: ${order.total.toLocaleString()} DA\r\n        </div>\r\n\r\n        <p>We will contact you soon to confirm the delivery details.</p>\r\n\r\n        <div class=\"footer\">\r\n            <p>Best regards,<br><strong>OBSIDIAN WEAR Team</strong></p>\r\n            <p>If you have any questions, please contact us.</p>\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>\r\n  `.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VWpCLEVBQUV2QyxNQUFNMEMsWUFBWSxLQUFLLGlCQUFpQixrQkFBa0IsWUFBWTs7OzswQkFJeEUsRUFBRTFDLE1BQU0yQyxVQUFVLENBQUM7Ozs7MEJBSW5CLEVBQUUzQyxNQUFNNEMsWUFBWSxDQUFDOzs7OzBCQUlyQixFQUFFNUMsTUFBTTZDLGVBQWUsQ0FBQzs7OzswQkFJeEIsRUFBRTdDLE1BQU04QyxZQUFZLENBQUNMLGNBQWMsR0FBRzs7Ozs7Ozs7OzswQkFVdEMsRUFBRXpDLE1BQU0rQyxhQUFhLEtBQUssUUFBUSxxQkFBcUIsZ0JBQWdCOzs7OzBCQUl2RSxFQUFFL0MsTUFBTWlELFFBQVEsQ0FBQ1IsY0FBYyxHQUFHOzs7Ozs7bUJBTXpDLEVBQUV6QyxNQUFNd0MsS0FBSyxDQUFDQyxjQUFjLEdBQUc7Ozs7Ozs7Ozs7OztFQVloRCxDQUFDLENBQUNPLElBQUk7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL2VtYWlsU2VydmljZS50cz80NWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtYWlsRGF0YSB7XHJcbiAgdG86IHN0cmluZztcclxuICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGh0bWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsKG9yZGVyOiBPcmRlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBlbWFpbERhdGE6IEVtYWlsRGF0YSA9IHtcclxuICAgICAgdG86IG9yZGVyLmN1c3RvbWVyRW1haWwsXHJcbiAgICAgIHN1YmplY3Q6ICdZb3VyIE9yZGVyIENvbmZpcm1hdGlvbiAtIE9CU0lESUFOIFdFQVInLFxyXG4gICAgICB0ZXh0OiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uVGV4dChvcmRlciksXHJcbiAgICAgIGh0bWw6IGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MKG9yZGVyKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXNlIHRoZSBkaXJlY3QgZW1haWwgc2VuZGluZyBsb2dpYyBpbnN0ZWFkIG9mIG1ha2luZyBhbiBBUEkgY2FsbFxyXG4gICAgY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdHJhbnNwb3J0ZXIgd2l0aCBHbWFpbCBTTVRQXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgc2VydmljZTogJ2dtYWlsJyxcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkdNQUlMX1VTRVIsXHJcbiAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuR01BSUxfQVBQX1BBU1NXT1JELFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRW1haWwgb3B0aW9uc1xyXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgIGZyb206IHtcclxuICAgICAgICBuYW1lOiAnT0JTSURJQU4gV0VBUicsXHJcbiAgICAgICAgYWRkcmVzczogcHJvY2Vzcy5lbnYuR01BSUxfVVNFUiB8fCAnJyxcclxuICAgICAgfSxcclxuICAgICAgdG86IGVtYWlsRGF0YS50byxcclxuICAgICAgc3ViamVjdDogZW1haWxEYXRhLnN1YmplY3QsXHJcbiAgICAgIHRleHQ6IGVtYWlsRGF0YS50ZXh0LFxyXG4gICAgICBodG1sOiBlbWFpbERhdGEuaHRtbCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCBlbWFpbFxyXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ09yZGVyIGNvbmZpcm1hdGlvbiBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseTonLCBpbmZvLm1lc3NhZ2VJZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0KG9yZGVyOiBPcmRlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuT3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUlxyXG5cclxuRGVhciAke29yZGVyLmN1c3RvbWVyTmFtZX0sXHJcblxyXG5UaGFuayB5b3UgZm9yIHlvdXIgb3JkZXIhIFlvdXIgb3JkZXIgaGFzIGJlZW4gY29uZmlybWVkIGFuZCB3ZSdsbCBzdGFydCBwcm9jZXNzaW5nIGl0IGltbWVkaWF0ZWx5LlxyXG5cclxuT3JkZXIgRGV0YWlsczpcclxuLSBPcmRlciBJRDogIyR7b3JkZXIuaWR9XHJcbi0gRGF0ZTogJHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxyXG4tIFByb2R1Y3Q6ICR7b3JkZXIucHJvZHVjdE5hbWV9XHJcbi0gU2l6ZTogJHtvcmRlci5zZWxlY3RlZFNpemV9XHJcbi0gQ29sb3I6ICR7b3JkZXIuc2VsZWN0ZWRDb2xvcn1cclxuLSBRdWFudGl0eTogJHtvcmRlci5xdWFudGl0eX1cclxuLSBUb3RhbDogJHtvcmRlci50b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQVxyXG5cclxuU2hpcHBpbmcgSW5mb3JtYXRpb246XHJcbi0gU2hpcHBpbmcgVHlwZTogJHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9XHJcbi0gV2lsYXlhOiAke29yZGVyLndpbGF5YU5hbWV9XHJcbi0gQ2l0eTogJHtvcmRlci5jdXN0b21lckNpdHl9XHJcbi0gQWRkcmVzczogJHtvcmRlci5jdXN0b21lckFkZHJlc3N9XHJcbi0gU2hpcHBpbmcgQ29zdDogJHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREFcclxuXHJcblBheW1lbnQgTWV0aG9kOiAke29yZGVyLnBheW1lbnRNZXRob2QgPT09ICdjb2QnID8gJ0Nhc2ggb24gRGVsaXZlcnknIDogJ0JhbmsgVHJhbnNmZXInfVxyXG5cclxuV2Ugd2lsbCBjb250YWN0IHlvdSBzb29uIHRvIGNvbmZpcm0gdGhlIGRlbGl2ZXJ5IGRldGFpbHMuXHJcblxyXG5CZXN0IHJlZ2FyZHMsXHJcbk9CU0lESUFOIFdFQVIgVGVhbVxyXG4gIGAudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uSFRNTChvcmRlcjogT3JkZXIpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbjwhRE9DVFlQRSBodG1sPlxyXG48aHRtbCBsYW5nPVwiZW5cIj5cclxuPGhlYWQ+XHJcbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cclxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XHJcbiAgICA8dGl0bGU+T3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUjwvdGl0bGU+XHJcbiAgICA8c3R5bGU+XHJcbiAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcclxuICAgICAgICAgICAgY29sb3I6ICMzMzM7XHJcbiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29udGFpbmVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmhlYWRlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubG9nbyB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItaWQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VjdGlvbiB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zZWN0aW9uIGgzIHtcclxuICAgICAgICAgICAgY29sb3I6ICMwMDA7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItZGV0YWlscyB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1yb3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1sYWJlbCB7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnRvdGFsIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmZvb3RlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICA8L3N0eWxlPlxyXG48L2hlYWQ+XHJcbjxib2R5PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj5PQlNJRElBTiBXRUFSPC9kaXY+XHJcbiAgICAgICAgICAgIDxoMT5PcmRlciBDb25maXJtYXRpb248L2gxPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaWRcIj4jJHtvcmRlci5pZH08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPHA+RGVhciA8c3Ryb25nPiR7b3JkZXIuY3VzdG9tZXJOYW1lfTwvc3Ryb25nPiw8L3A+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPHA+VGhhbmsgeW91IGZvciB5b3VyIG9yZGVyISBZb3VyIG9yZGVyIGhhcyBiZWVuIGNvbmZpcm1lZCBhbmQgd2UnbGwgc3RhcnQgcHJvY2Vzc2luZyBpdCBpbW1lZGlhdGVseS48L3A+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5PcmRlciBEZXRhaWxzPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5PcmRlciBJRDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+IyR7b3JkZXIuaWR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+RGF0ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1yb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlByb2R1Y3Q6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIucHJvZHVjdE5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2l6ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zZWxlY3RlZFNpemV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q29sb3I6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIuc2VsZWN0ZWRDb2xvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5RdWFudGl0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5xdWFudGl0eX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5TaGlwcGluZyBJbmZvcm1hdGlvbjwvaDM+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1kZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgVHlwZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+V2lsYXlhOjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke29yZGVyLndpbGF5YU5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q2l0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckNpdHl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+QWRkcmVzczo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckFkZHJlc3N9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgQ29zdDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREE8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5QYXltZW50IEluZm9ybWF0aW9uPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5QYXltZW50IE1ldGhvZDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5wYXltZW50TWV0aG9kID09PSAnY29kJyA/ICdDYXNoIG9uIERlbGl2ZXJ5JyA6ICdCYW5rIFRyYW5zZmVyJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5TdWJ0b3RhbDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zdWJ0b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvdGFsXCI+XHJcbiAgICAgICAgICAgIFRvdGFsOiAke29yZGVyLnRvdGFsLnRvTG9jYWxlU3RyaW5nKCl9IERBXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxwPldlIHdpbGwgY29udGFjdCB5b3Ugc29vbiB0byBjb25maXJtIHRoZSBkZWxpdmVyeSBkZXRhaWxzLjwvcD5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD5CZXN0IHJlZ2FyZHMsPGJyPjxzdHJvbmc+T0JTSURJQU4gV0VBUiBUZWFtPC9zdHJvbmc+PC9wPlxyXG4gICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCB1cy48L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9ib2R5PlxyXG48L2h0bWw+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIiwib3JkZXIiLCJlbWFpbERhdGEiLCJ0byIsImN1c3RvbWVyRW1haWwiLCJzdWJqZWN0IiwidGV4dCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0IiwiaHRtbCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MIiwibm9kZW1haWxlciIsInJlcXVpcmUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJHTUFJTF9VU0VSIiwicGFzcyIsIkdNQUlMX0FQUF9QQVNTV09SRCIsIm1haWxPcHRpb25zIiwiZnJvbSIsIm5hbWUiLCJhZGRyZXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCIsImVycm9yIiwiY3VzdG9tZXJOYW1lIiwiaWQiLCJEYXRlIiwib3JkZXJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHJvZHVjdE5hbWUiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwicXVhbnRpdHkiLCJ0b3RhbCIsInRvTG9jYWxlU3RyaW5nIiwic2hpcHBpbmdUeXBlIiwid2lsYXlhTmFtZSIsImN1c3RvbWVyQ2l0eSIsImN1c3RvbWVyQWRkcmVzcyIsInNoaXBwaW5nQ29zdCIsInBheW1lbnRNZXRob2QiLCJ0cmltIiwic3VidG90YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rateLimiter.ts":
/*!********************************!*\
  !*** ./src/lib/rateLimiter.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiRateLimiter: () => (/* binding */ apiRateLimiter),\n/* harmony export */   authRateLimiter: () => (/* binding */ authRateLimiter),\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit)\n/* harmony export */ });\n// Simple in-memory rate limiter\nclass RateLimiter {\n    constructor(windowMs = 60000, maxRequests = 100){\n        this.requests = new Map();\n        this.windowMs = windowMs;\n        this.maxRequests = maxRequests;\n    }\n    // Check if request is allowed\n    isAllowed(identifier) {\n        const now = Date.now();\n        const entry = this.requests.get(identifier);\n        if (!entry || now > entry.resetTime) {\n            // Create new entry or reset expired entry\n            this.requests.set(identifier, {\n                count: 1,\n                resetTime: now + this.windowMs\n            });\n            return {\n                allowed: true,\n                remaining: this.maxRequests - 1,\n                resetTime: now + this.windowMs\n            };\n        }\n        if (entry.count >= this.maxRequests) {\n            return {\n                allowed: false,\n                remaining: 0,\n                resetTime: entry.resetTime\n            };\n        }\n        // Increment count\n        entry.count++;\n        this.requests.set(identifier, entry);\n        return {\n            allowed: true,\n            remaining: this.maxRequests - entry.count,\n            resetTime: entry.resetTime\n        };\n    }\n    // Clean up expired entries\n    cleanup() {\n        const now = Date.now();\n        this.requests.forEach((entry, key)=>{\n            if (now > entry.resetTime) {\n                this.requests.delete(key);\n            }\n        });\n    }\n}\n// Create rate limiter instances\nconst apiRateLimiter = new RateLimiter(60000, 100); // 100 requests per minute\nconst authRateLimiter = new RateLimiter(300000, 5); // 5 login attempts per 5 minutes\n// Rate limiting middleware\nfunction checkRateLimit(identifier, limiter) {\n    const result = limiter.isAllowed(identifier);\n    // Clean up expired entries periodically\n    if (Math.random() < 0.01) {\n        limiter.cleanup();\n    }\n    const headers = {\n        \"X-RateLimit-Limit\": limiter[\"maxRequests\"].toString(),\n        \"X-RateLimit-Remaining\": result.remaining.toString(),\n        \"X-RateLimit-Reset\": new Date(result.resetTime).toISOString()\n    };\n    return {\n        allowed: result.allowed,\n        headers\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGVMaW1pdGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdDQUFnQztBQU1oQyxNQUFNQTtJQUtKQyxZQUFZQyxXQUFtQixLQUFLLEVBQUVDLGNBQXNCLEdBQUcsQ0FBRTthQUp6REMsV0FBd0MsSUFBSUM7UUFLbEQsSUFBSSxDQUFDSCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtJQUNyQjtJQUVBLDhCQUE4QjtJQUM5QkcsVUFBVUMsVUFBa0IsRUFBOEQ7UUFDeEYsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNRSxRQUFRLElBQUksQ0FBQ04sUUFBUSxDQUFDTyxHQUFHLENBQUNKO1FBRWhDLElBQUksQ0FBQ0csU0FBU0YsTUFBTUUsTUFBTUUsU0FBUyxFQUFFO1lBQ25DLDBDQUEwQztZQUMxQyxJQUFJLENBQUNSLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZO2dCQUM1Qk8sT0FBTztnQkFDUEYsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7WUFFQSxPQUFPO2dCQUNMYSxTQUFTO2dCQUNUQyxXQUFXLElBQUksQ0FBQ2IsV0FBVyxHQUFHO2dCQUM5QlMsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7UUFDRjtRQUVBLElBQUlRLE1BQU1JLEtBQUssSUFBSSxJQUFJLENBQUNYLFdBQVcsRUFBRTtZQUNuQyxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxXQUFXO2dCQUNYSixXQUFXRixNQUFNRSxTQUFTO1lBQzVCO1FBQ0Y7UUFFQSxrQkFBa0I7UUFDbEJGLE1BQU1JLEtBQUs7UUFDWCxJQUFJLENBQUNWLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZRztRQUU5QixPQUFPO1lBQ0xLLFNBQVM7WUFDVEMsV0FBVyxJQUFJLENBQUNiLFdBQVcsR0FBR08sTUFBTUksS0FBSztZQUN6Q0YsV0FBV0YsTUFBTUUsU0FBUztRQUM1QjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCSyxVQUFnQjtRQUNkLE1BQU1ULE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsSUFBSSxDQUFDSixRQUFRLENBQUNjLE9BQU8sQ0FBQyxDQUFDUixPQUFPUztZQUM1QixJQUFJWCxNQUFNRSxNQUFNRSxTQUFTLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQ1IsUUFBUSxDQUFDZ0IsTUFBTSxDQUFDRDtZQUN2QjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLGdDQUFnQztBQUN6QixNQUFNRSxpQkFBaUIsSUFBSXJCLFlBQVksT0FBTyxLQUFLLENBQUMsMEJBQTBCO0FBQzlFLE1BQU1zQixrQkFBa0IsSUFBSXRCLFlBQVksUUFBUSxHQUFHLENBQUMsaUNBQWlDO0FBRTVGLDJCQUEyQjtBQUNwQixTQUFTdUIsZUFBZWhCLFVBQWtCLEVBQUVpQixPQUFvQjtJQUNyRSxNQUFNQyxTQUFTRCxRQUFRbEIsU0FBUyxDQUFDQztJQUVqQyx3Q0FBd0M7SUFDeEMsSUFBSW1CLEtBQUtDLE1BQU0sS0FBSyxNQUFNO1FBQ3hCSCxRQUFRUCxPQUFPO0lBQ2pCO0lBRUEsTUFBTVcsVUFBVTtRQUNkLHFCQUFxQkosT0FBTyxDQUFDLGNBQWMsQ0FBQ0ssUUFBUTtRQUNwRCx5QkFBeUJKLE9BQU9ULFNBQVMsQ0FBQ2EsUUFBUTtRQUNsRCxxQkFBcUIsSUFBSXBCLEtBQUtnQixPQUFPYixTQUFTLEVBQUVrQixXQUFXO0lBQzdEO0lBRUEsT0FBTztRQUNMZixTQUFTVSxPQUFPVixPQUFPO1FBQ3ZCYTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2xpYi9yYXRlTGltaXRlci50cz9mODFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBpbi1tZW1vcnkgcmF0ZSBsaW1pdGVyXHJcbmludGVyZmFjZSBSYXRlTGltaXRFbnRyeSB7XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICByZXNldFRpbWU6IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgUmF0ZUxpbWl0ZXIge1xyXG4gIHByaXZhdGUgcmVxdWVzdHM6IE1hcDxzdHJpbmcsIFJhdGVMaW1pdEVudHJ5PiA9IG5ldyBNYXAoKTtcclxuICBwcml2YXRlIHJlYWRvbmx5IHdpbmRvd01zOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhSZXF1ZXN0czogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aW5kb3dNczogbnVtYmVyID0gNjAwMDAsIG1heFJlcXVlc3RzOiBudW1iZXIgPSAxMDApIHtcclxuICAgIHRoaXMud2luZG93TXMgPSB3aW5kb3dNcztcclxuICAgIHRoaXMubWF4UmVxdWVzdHMgPSBtYXhSZXF1ZXN0cztcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHJlcXVlc3QgaXMgYWxsb3dlZFxyXG4gIGlzQWxsb3dlZChpZGVudGlmaWVyOiBzdHJpbmcpOiB7IGFsbG93ZWQ6IGJvb2xlYW47IHJlbWFpbmluZzogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9IHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMucmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xyXG5cclxuICAgIGlmICghZW50cnkgfHwgbm93ID4gZW50cnkucmVzZXRUaW1lKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBuZXcgZW50cnkgb3IgcmVzZXQgZXhwaXJlZCBlbnRyeVxyXG4gICAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCB7XHJcbiAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB0aGlzLndpbmRvd01zXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhbGxvd2VkOiB0cnVlLFxyXG4gICAgICAgIHJlbWFpbmluZzogdGhpcy5tYXhSZXF1ZXN0cyAtIDEsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB0aGlzLndpbmRvd01zXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVudHJ5LmNvdW50ID49IHRoaXMubWF4UmVxdWVzdHMpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhbGxvd2VkOiBmYWxzZSxcclxuICAgICAgICByZW1haW5pbmc6IDAsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBlbnRyeS5yZXNldFRpbWVcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbmNyZW1lbnQgY291bnRcclxuICAgIGVudHJ5LmNvdW50Kys7XHJcbiAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCBlbnRyeSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWxsb3dlZDogdHJ1ZSxcclxuICAgICAgcmVtYWluaW5nOiB0aGlzLm1heFJlcXVlc3RzIC0gZW50cnkuY291bnQsXHJcbiAgICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzXHJcbiAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICB0aGlzLnJlcXVlc3RzLmZvckVhY2goKGVudHJ5LCBrZXkpID0+IHtcclxuICAgICAgaWYgKG5vdyA+IGVudHJ5LnJlc2V0VGltZSkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdHMuZGVsZXRlKGtleSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIHJhdGUgbGltaXRlciBpbnN0YW5jZXNcclxuZXhwb3J0IGNvbnN0IGFwaVJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDYwMDAwLCAxMDApOyAvLyAxMDAgcmVxdWVzdHMgcGVyIG1pbnV0ZVxyXG5leHBvcnQgY29uc3QgYXV0aFJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDMwMDAwMCwgNSk7IC8vIDUgbG9naW4gYXR0ZW1wdHMgcGVyIDUgbWludXRlc1xyXG5cclxuLy8gUmF0ZSBsaW1pdGluZyBtaWRkbGV3YXJlXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JhdGVMaW1pdChpZGVudGlmaWVyOiBzdHJpbmcsIGxpbWl0ZXI6IFJhdGVMaW1pdGVyKTogeyBhbGxvd2VkOiBib29sZWFuOyBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGxpbWl0ZXIuaXNBbGxvd2VkKGlkZW50aWZpZXIpO1xyXG4gIFxyXG4gIC8vIENsZWFuIHVwIGV4cGlyZWQgZW50cmllcyBwZXJpb2RpY2FsbHlcclxuICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDEpIHsgLy8gMSUgY2hhbmNlXHJcbiAgICBsaW1pdGVyLmNsZWFudXAoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAnWC1SYXRlTGltaXQtTGltaXQnOiBsaW1pdGVyWydtYXhSZXF1ZXN0cyddLnRvU3RyaW5nKCksXHJcbiAgICAnWC1SYXRlTGltaXQtUmVtYWluaW5nJzogcmVzdWx0LnJlbWFpbmluZy50b1N0cmluZygpLFxyXG4gICAgJ1gtUmF0ZUxpbWl0LVJlc2V0JzogbmV3IERhdGUocmVzdWx0LnJlc2V0VGltZSkudG9JU09TdHJpbmcoKVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhbGxvd2VkOiByZXN1bHQuYWxsb3dlZCxcclxuICAgIGhlYWRlcnNcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlciIsImNvbnN0cnVjdG9yIiwid2luZG93TXMiLCJtYXhSZXF1ZXN0cyIsInJlcXVlc3RzIiwiTWFwIiwiaXNBbGxvd2VkIiwiaWRlbnRpZmllciIsIm5vdyIsIkRhdGUiLCJlbnRyeSIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiYWxsb3dlZCIsInJlbWFpbmluZyIsImNsZWFudXAiLCJmb3JFYWNoIiwia2V5IiwiZGVsZXRlIiwiYXBpUmF0ZUxpbWl0ZXIiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJjaGVja1JhdGVMaW1pdCIsImxpbWl0ZXIiLCJyZXN1bHQiLCJNYXRoIiwicmFuZG9tIiwiaGVhZGVycyIsInRvU3RyaW5nIiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rateLimiter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseDatabase.ts":
/*!*************************************!*\
  !*** ./src/lib/supabaseDatabase.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCustomer: () => (/* binding */ addCustomer),\n/* harmony export */   addOrder: () => (/* binding */ addOrder),\n/* harmony export */   addProduct: () => (/* binding */ addProduct),\n/* harmony export */   clearProductsCache: () => (/* binding */ clearProductsCache),\n/* harmony export */   deductStockFromOrder: () => (/* binding */ deductStockFromOrder),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getCustomers: () => (/* binding */ getCustomers),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getMaintenanceSettings: () => (/* binding */ getMaintenanceSettings),\n/* harmony export */   getOrder: () => (/* binding */ getOrder),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getProduct: () => (/* binding */ getProduct),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getWilayaTariffs: () => (/* binding */ getWilayaTariffs),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateInventory: () => (/* binding */ updateInventory),\n/* harmony export */   updateMaintenanceSettings: () => (/* binding */ updateMaintenanceSettings),\n/* harmony export */   updateOrder: () => (/* binding */ updateOrder),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateWilayaTariffs: () => (/* binding */ updateWilayaTariffs)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// Database service using Supabase (free tier)\n// This provides persistent storage with a real database\n\n// Supabase configuration - MUST use environment variables\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Export the supabase client for direct use\n\n// Helper function to convert database product to Product interface\nfunction convertDbProductToProduct(dbProduct) {\n    // Debug logging\n    console.log(\"\\uD83D\\uDD0D DEBUG: Raw price from DB:\", dbProduct.price, \"Type:\", typeof dbProduct.price);\n    console.log(\"\\uD83D\\uDD0D DEBUG: Parsed price:\", parseFloat(dbProduct.price), \"Type:\", typeof parseFloat(dbProduct.price));\n    const convertedProduct = {\n        id: dbProduct.id,\n        name: dbProduct.name,\n        description: dbProduct.description,\n        price: parseFloat(dbProduct.price),\n        originalPrice: dbProduct.original_price ? parseFloat(dbProduct.original_price) : undefined,\n        image: dbProduct.image,\n        images: dbProduct.images || [],\n        stock: dbProduct.stock || {},\n        category: dbProduct.category,\n        sizes: dbProduct.sizes || [],\n        colors: dbProduct.colors || [],\n        inStock: dbProduct.in_stock,\n        rating: parseFloat(dbProduct.rating || 0),\n        reviews: dbProduct.reviews || 0,\n        sku: dbProduct.sku,\n        weight: dbProduct.weight ? parseFloat(dbProduct.weight) : undefined,\n        dimensions: dbProduct.dimensions,\n        tags: dbProduct.tags || [],\n        featured: dbProduct.featured || false,\n        sizeChartCategory: dbProduct.size_chart_category || \"T-Shirts\",\n        customSizeChart: dbProduct.custom_size_chart || undefined,\n        useCustomSizeChart: dbProduct.use_custom_size_chart || false,\n        createdAt: new Date(dbProduct.created_at),\n        updatedAt: new Date(dbProduct.updated_at)\n    };\n    console.log(\"\\uD83D\\uDD0D DEBUG: Final converted product price:\", convertedProduct.price, \"Type:\", typeof convertedProduct.price);\n    return convertedProduct;\n}\n// Cache for products to reduce database calls\nlet productsCache = null;\nlet productsCacheTime = 0;\nconst CACHE_DURATION = 30000; // 30 seconds\n// Clear cache function\nfunction clearProductsCache() {\n    productsCache = null;\n    productsCacheTime = 0;\n    console.log(\"Supabase: Products cache cleared\");\n}\n// Force clear cache immediately to fix price formatting issue\nclearProductsCache();\n// Add timestamp to force cache invalidation\nconst CACHE_BUSTER = Date.now();\nconsole.log(\"\\uD83D\\uDE80 Cache buster timestamp:\", CACHE_BUSTER);\n// Products operations\nasync function getProducts() {\n    try {\n        // Return cached data if still fresh\n        if (productsCache && Date.now() - productsCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached products\");\n            return productsCache;\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getProducts error:\", error);\n            return productsCache || [];\n        }\n        const products = (data || []).map(convertDbProductToProduct);\n        // Update cache\n        productsCache = products;\n        productsCacheTime = Date.now();\n        return products;\n    } catch (error) {\n        console.error(\"Supabase getProducts error:\", error);\n        return productsCache || [];\n    }\n}\nasync function getProduct(id) {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getProduct error:\", error);\n            return null;\n        }\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase getProduct error:\", error);\n        return null;\n    }\n}\nasync function addProduct(product) {\n    try {\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Starting to add product:\", product.id, product.name);\n        // Check if Supabase is properly configured\n        if (!supabase) {\n            console.error(\" Supabase: Client not initialized\");\n            throw new Error(\"Supabase client not initialized\");\n        }\n        // Convert camelCase to snake_case for database\n        // Only include columns that exist in the current database schema\n        const dbProduct = {\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            price: product.price,\n            original_price: product.originalPrice,\n            image: product.image,\n            images: product.images || [],\n            stock: product.stock,\n            category: product.category,\n            sizes: product.sizes || [],\n            colors: product.colors || [],\n            in_stock: product.inStock,\n            rating: product.rating,\n            reviews: product.reviews,\n            sku: product.sku,\n            weight: product.weight,\n            dimensions: product.dimensions,\n            tags: product.tags || [],\n            featured: product.featured || false,\n            custom_size_chart: product.customSizeChart || null,\n            use_custom_size_chart: product.useCustomSizeChart || false,\n            size_chart_category: product.sizeChartCategory || product.category\n        };\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Database product object:\", JSON.stringify(dbProduct, null, 2));\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Attempting to insert into products table...\");\n        const { data, error } = await supabase.from(\"products\").insert([\n            dbProduct\n        ]).select().single();\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Insert result - data:\", data);\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Insert result - error:\", error);\n        if (error) {\n            console.error(\" Supabase addProduct error:\", error);\n            console.error(\" Supabase addProduct error details:\", JSON.stringify(error, null, 2));\n            console.error(\" Supabase addProduct error code:\", error.code);\n            console.error(\" Supabase addProduct error message:\", error.message);\n            console.error(\" Supabase addProduct error hint:\", error.hint);\n            throw new Error(`Supabase insert failed: ${error.message} (Code: ${error.code})`);\n        }\n        console.log(\"Supabase: Added product:\", product.id);\n        // Initialize inventory for the new product\n        try {\n            const { initializeProductInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            await initializeProductInventory(product.id);\n            console.log(\"Supabase: Initialized inventory for product:\", product.id);\n        } catch (inventoryError) {\n            console.error(\"Supabase: Failed to initialize inventory for product:\", product.id, inventoryError);\n        // Don't throw error here, product creation should still succeed\n        }\n        // Invalidate cache\n        productsCache = null;\n        // Convert back to camelCase\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase addProduct error:\", error);\n        throw error;\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        // Convert camelCase to snake_case for database\n        const dbProduct = {};\n        if (product.name !== undefined) dbProduct.name = product.name;\n        if (product.description !== undefined) dbProduct.description = product.description;\n        if (product.price !== undefined) dbProduct.price = product.price;\n        if (product.originalPrice !== undefined) dbProduct.original_price = product.originalPrice;\n        if (product.image !== undefined) dbProduct.image = product.image;\n        if (product.images !== undefined) dbProduct.images = product.images;\n        if (product.stock !== undefined) dbProduct.stock = product.stock;\n        if (product.category !== undefined) dbProduct.category = product.category;\n        if (product.sizes !== undefined) dbProduct.sizes = product.sizes;\n        if (product.colors !== undefined) dbProduct.colors = product.colors;\n        if (product.inStock !== undefined) dbProduct.in_stock = product.inStock;\n        if (product.rating !== undefined) dbProduct.rating = product.rating;\n        if (product.reviews !== undefined) dbProduct.reviews = product.reviews;\n        if (product.sku !== undefined) dbProduct.sku = product.sku;\n        if (product.weight !== undefined) dbProduct.weight = product.weight;\n        if (product.dimensions !== undefined) dbProduct.dimensions = product.dimensions;\n        if (product.tags !== undefined) dbProduct.tags = product.tags;\n        if (product.featured !== undefined) dbProduct.featured = product.featured;\n        if (product.sizeChartCategory !== undefined) dbProduct.size_chart_category = product.sizeChartCategory;\n        if (product.customSizeChart !== undefined) dbProduct.custom_size_chart = product.customSizeChart;\n        if (product.useCustomSizeChart !== undefined) dbProduct.use_custom_size_chart = product.useCustomSizeChart;\n        const { data, error } = await supabase.from(\"products\").update(dbProduct).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateProduct error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase updateProduct error:\", error);\n        return null;\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteProduct error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteProduct error:\", error);\n        return false;\n    }\n}\n// Helper function to convert database order to Order interface\nfunction convertDbOrderToOrder(dbOrder) {\n    // Extract customer info from items or use defaults\n    const firstItem = dbOrder.items && dbOrder.items.length > 0 ? dbOrder.items[0] : {};\n    return {\n        id: dbOrder.id,\n        productId: firstItem.productId || \"\",\n        productName: firstItem.productName || \"\",\n        productImage: firstItem.productImage || \"\",\n        customerName: firstItem.customerName || \"\",\n        customerPhone: firstItem.customerPhone || \"\",\n        customerEmail: firstItem.customerEmail || \"\",\n        customerAddress: firstItem.customerAddress || \"\",\n        customerCity: firstItem.customerCity || \"\",\n        wilayaId: firstItem.wilayaId || 0,\n        wilayaName: firstItem.wilayaName || \"\",\n        shippingType: dbOrder.shipping_type || \"homeDelivery\",\n        shippingCost: Number(dbOrder.shipping_cost) || 0,\n        quantity: firstItem.quantity || 1,\n        selectedSize: firstItem.selectedSize || \"\",\n        selectedColor: firstItem.selectedColor || \"\",\n        subtotal: Number(dbOrder.total) - Number(dbOrder.shipping_cost) || 0,\n        total: Number(dbOrder.total) || 0,\n        orderDate: new Date(dbOrder.order_date),\n        status: dbOrder.status || \"pending\",\n        trackingNumber: dbOrder.tracking_number,\n        notes: firstItem.notes,\n        paymentMethod: dbOrder.payment_method || \"cod\",\n        paymentStatus: dbOrder.payment_status || \"pending\",\n        estimatedDelivery: firstItem.estimatedDelivery,\n        createdAt: new Date(dbOrder.created_at),\n        updatedAt: new Date(dbOrder.updated_at)\n    };\n}\n// Cache for orders to reduce database calls\nlet ordersCache = null;\nlet ordersCacheTime = 0;\n// Orders operations\nasync function getOrders() {\n    try {\n        // Return cached data if still fresh\n        if (ordersCache && Date.now() - ordersCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached orders\");\n            return ordersCache;\n        }\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").order(\"order_date\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getOrders error:\", error);\n            return ordersCache || [];\n        }\n        const orders = (data || []).map(convertDbOrderToOrder);\n        // Update cache\n        ordersCache = orders;\n        ordersCacheTime = Date.now();\n        return orders;\n    } catch (error) {\n        console.error(\"Supabase getOrders error:\", error);\n        return ordersCache || [];\n    }\n}\nasync function getOrder(id) {\n    try {\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getOrder error:\", error);\n            return null;\n        }\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase getOrder error:\", error);\n        return null;\n    }\n}\nasync function addOrder(order) {\n    try {\n        // Convert Order interface to database format\n        const dbOrder = {\n            id: order.id,\n            customer_id: `CUST-${Date.now()}`,\n            items: [\n                {\n                    productId: order.productId,\n                    productName: order.productName,\n                    productImage: order.productImage,\n                    customerName: order.customerName,\n                    customerPhone: order.customerPhone,\n                    customerEmail: order.customerEmail,\n                    customerAddress: order.customerAddress,\n                    customerCity: order.customerCity,\n                    wilayaId: order.wilayaId,\n                    wilayaName: order.wilayaName,\n                    quantity: order.quantity,\n                    selectedSize: order.selectedSize,\n                    selectedColor: order.selectedColor,\n                    notes: order.notes,\n                    estimatedDelivery: order.estimatedDelivery\n                }\n            ],\n            total: order.total,\n            shipping_cost: order.shippingCost,\n            shipping_type: order.shippingType,\n            payment_method: order.paymentMethod,\n            payment_status: order.paymentStatus,\n            status: order.status,\n            tracking_number: order.trackingNumber,\n            order_date: order.orderDate.toISOString(),\n            created_at: order.createdAt.toISOString(),\n            updated_at: order.updatedAt.toISOString()\n        };\n        const { data, error } = await supabase.from(\"orders\").insert([\n            dbOrder\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addOrder error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added order:\", order.id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase addOrder error:\", error);\n        throw error;\n    }\n}\nasync function updateOrder(id, order) {\n    try {\n        // Convert partial Order to database format\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (order.status !== undefined) updateData.status = order.status;\n        if (order.paymentStatus !== undefined) updateData.payment_status = order.paymentStatus;\n        if (order.trackingNumber !== undefined) updateData.tracking_number = order.trackingNumber;\n        if (order.shippingType !== undefined) updateData.shipping_type = order.shippingType;\n        if (order.shippingCost !== undefined) updateData.shipping_cost = order.shippingCost;\n        if (order.total !== undefined) updateData.total = order.total;\n        if (order.paymentMethod !== undefined) updateData.payment_method = order.paymentMethod;\n        const { data, error } = await supabase.from(\"orders\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateOrder error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated order:\", id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase updateOrder error:\", error);\n        return null;\n    }\n}\nasync function deleteOrder(id) {\n    try {\n        // First, get the order details to restore inventory\n        const order = await getOrder(id);\n        if (!order) {\n            console.error(\"Supabase deleteOrder: Order not found:\", id);\n            return false;\n        }\n        // Restore inventory quantity\n        if (order.productId && order.selectedSize && order.selectedColor && order.quantity) {\n            try {\n                const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n                const inventoryRestored = await addInventory(order.productId, order.selectedSize, order.selectedColor, order.quantity, `Order ${id} deleted - inventory restored`, \"admin\");\n                if (inventoryRestored) {\n                    console.log(\"Supabase deleteOrder: Inventory restored for order:\", id);\n                } else {\n                    console.warn(\"Supabase deleteOrder: Failed to restore inventory for order:\", id);\n                }\n            } catch (inventoryError) {\n                console.error(\"Supabase deleteOrder: Inventory restoration error:\", inventoryError);\n            // Continue with order deletion even if inventory restoration fails\n            }\n        }\n        // Delete the order\n        const { error } = await supabase.from(\"orders\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteOrder error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted order:\", id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteOrder error:\", error);\n        return false;\n    }\n}\n// Wilaya operations\nasync function getWilayaTariffs() {\n    try {\n        const { data, error } = await supabase.from(\"wilaya_tariffs\").select(\"*\").order(\"order\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Supabase getWilayaTariffs error:\", error);\n            return [];\n        }\n        // Transform the data to match the expected format\n        const transformedData = (data || []).map((tariff)=>({\n                id: tariff.id.toString(),\n                wilaya_id: tariff.wilaya_id,\n                name: tariff.name,\n                domicile_ecommerce: tariff.domicile_ecommerce,\n                stop_desk_ecommerce: tariff.stop_desk_ecommerce,\n                order: tariff.order,\n                // Legacy compatibility for backward compatibility\n                home_delivery: tariff.domicile_ecommerce,\n                stop_desk: tariff.stop_desk_ecommerce,\n                homeDelivery: tariff.domicile_ecommerce,\n                stopDesk: tariff.stop_desk_ecommerce,\n                domicileEcommerce: tariff.domicile_ecommerce,\n                stopDeskEcommerce: tariff.stop_desk_ecommerce\n            }));\n        return transformedData;\n    } catch (error) {\n        console.error(\"Supabase getWilayaTariffs error:\", error);\n        return [];\n    }\n}\nasync function updateWilayaTariffs(tariffs) {\n    try {\n        // Delete all existing tariffs\n        await supabase.from(\"wilaya_tariffs\").delete().neq(\"id\", 0); // Delete all records\n        // Insert new tariffs\n        if (tariffs.length > 0) {\n            // Transform the data to match database structure\n            const transformedTariffs = tariffs.map((tariff)=>({\n                    wilaya_id: tariff.wilaya_id || tariff.id,\n                    name: tariff.name,\n                    domicile_ecommerce: tariff.domicile_ecommerce || tariff.domicileEcommerce || tariff.home_delivery || tariff.homeDelivery || 0,\n                    stop_desk_ecommerce: tariff.stop_desk_ecommerce || tariff.stopDeskEcommerce || tariff.stop_desk || tariff.stopDesk || 0,\n                    order: tariff.order || 1\n                }));\n            const { error } = await supabase.from(\"wilaya_tariffs\").insert(transformedTariffs);\n            if (error) {\n                console.error(\"Supabase updateWilayaTariffs error:\", error);\n                throw error;\n            }\n        }\n        console.log(\"Supabase: Updated wilaya tariffs\");\n    } catch (error) {\n        console.error(\"Supabase updateWilayaTariffs error:\", error);\n        throw error;\n    }\n}\n// Inventory operations\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"id, name, sku, stock, sizes, colors, in_stock, category\").order(\"name\");\n        if (error) {\n            console.error(\"Supabase getInventory error:\", error);\n            return [];\n        }\n        // Transform data for inventory management\n        return (data || []).map((product)=>({\n                id: product.id,\n                name: product.name,\n                sku: product.sku,\n                category: product.category,\n                inStock: product.in_stock,\n                stock: product.stock || {},\n                sizes: product.sizes || [],\n                colors: product.colors || [],\n                totalStock: calculateTotalStock(product.stock || {}),\n                stockBySize: calculateStockBySize(product.stock || {}, product.sizes || [], product.colors || [])\n            }));\n    } catch (error) {\n        console.error(\"Supabase getInventory error:\", error);\n        return [];\n    }\n}\nasync function updateInventory(productId, stockData) {\n    try {\n        const updateObj = {\n            updated_at: new Date().toISOString()\n        };\n        if (stockData.stock) {\n            updateObj.stock = stockData.stock;\n        }\n        if (stockData.inStock !== undefined) {\n            updateObj.in_stock = stockData.inStock;\n        }\n        const { data, error } = await supabase.from(\"products\").update(updateObj).eq(\"id\", productId).select().single();\n        if (error) {\n            console.error(\"Supabase updateInventory error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Updated inventory for product:\", productId);\n        return {\n            id: data.id,\n            name: data.name,\n            stock: data.stock,\n            inStock: data.in_stock,\n            totalStock: calculateTotalStock(data.stock)\n        };\n    } catch (error) {\n        console.error(\"Supabase updateInventory error:\", error);\n        throw error;\n    }\n}\n// Helper functions for inventory calculations\nfunction calculateTotalStock(stock) {\n    if (!stock || typeof stock !== \"object\") return 0;\n    let total = 0;\n    for(const size in stock){\n        if (typeof stock[size] === \"object\") {\n            for(const color in stock[size]){\n                total += Number(stock[size][color]) || 0;\n            }\n        }\n    }\n    return total;\n}\nfunction calculateStockBySize(stock, sizes, colors) {\n    const result = {};\n    sizes.forEach((size)=>{\n        result[size] = {};\n        colors.forEach((color)=>{\n            result[size][color] = Number(stock[size]?.[color]) || 0;\n        });\n    });\n    return result;\n}\n// Stock deduction function for orders\nasync function deductStockFromOrder(order) {\n    try {\n        console.log(\"Supabase: Deducting stock for order:\", order.id);\n        // Get the product\n        const product = await getProduct(order.productId);\n        if (!product) {\n            console.error(\"Supabase: Product not found for order:\", order.productId);\n            return false;\n        }\n        // Check if we have enough stock\n        const currentStock = product.stock?.[order.selectedSize]?.[order.selectedColor] || 0;\n        if (currentStock < order.quantity) {\n            console.error(\"Supabase: Insufficient stock for order:\", {\n                productId: order.productId,\n                size: order.selectedSize,\n                color: order.selectedColor,\n                requested: order.quantity,\n                available: currentStock\n            });\n            return false;\n        }\n        // Deduct the stock from product\n        const newStock = {\n            ...product.stock,\n            [order.selectedSize]: {\n                ...product.stock?.[order.selectedSize],\n                [order.selectedColor]: currentStock - order.quantity\n            }\n        };\n        // Update the product stock\n        const updatedProduct = await updateProduct(order.productId, {\n            stock: newStock,\n            inStock: calculateTotalStock(newStock) > 0\n        });\n        if (!updatedProduct) {\n            console.error(\"Supabase: Failed to update product stock for order:\", order.id);\n            return false;\n        }\n        // Also deduct from inventory system\n        try {\n            const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            const inventoryDeducted = await addInventory(order.productId, order.selectedSize, order.selectedColor, -order.quantity, `Order ${order.id} created - stock deducted`, \"system\");\n            if (inventoryDeducted) {\n                console.log(\"Supabase: Successfully deducted inventory for order:\", order.id);\n            } else {\n                console.warn(\"Supabase: Failed to deduct inventory for order:\", order.id);\n            }\n        } catch (inventoryError) {\n            console.error(\"Supabase: Inventory deduction error:\", inventoryError);\n        // Continue even if inventory update fails\n        }\n        console.log(\"Supabase: Successfully deducted stock for order:\", order.id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase: Error deducting stock for order:\", error);\n        return false;\n    }\n}\n// Maintenance settings operations\nasync function getMaintenanceSettings() {\n    try {\n        const { data, error } = await supabase.from(\"maintenance_settings\").select(\"*\").eq(\"id\", \"maintenance\").single();\n        if (error) {\n            console.error(\"Supabase getMaintenanceSettings error:\", error);\n            // If table doesn't exist, return default settings\n            if (error.code === \"PGRST205\") {\n                console.log(\"Maintenance settings table not found, using default settings\");\n            }\n            // Return default settings if no data exists\n            return {\n                id: \"maintenance\",\n                is_maintenance_mode: false,\n                drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n        }\n        return data || {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(\"Supabase getMaintenanceSettings error:\", error);\n        return {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    }\n}\nasync function updateMaintenanceSettings(settings) {\n    try {\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (settings.is_maintenance_mode !== undefined) {\n            updateData.is_maintenance_mode = settings.is_maintenance_mode;\n        }\n        if (settings.drop_date !== undefined) {\n            updateData.drop_date = settings.drop_date;\n        }\n        if (settings.maintenance_message !== undefined) {\n            updateData.maintenance_message = settings.maintenance_message;\n        }\n        console.log(\"Updating maintenance settings with:\", updateData);\n        // Try update first\n        const { data: updateResult, error: updateError } = await supabase.from(\"maintenance_settings\").update(updateData).eq(\"id\", \"maintenance\").select().single();\n        if (updateError) {\n            console.error(\"Update error:\", updateError);\n            // If update fails, try insert\n            const { data: insertResult, error: insertError } = await supabase.from(\"maintenance_settings\").insert([\n                {\n                    id: \"maintenance\",\n                    is_maintenance_mode: settings.is_maintenance_mode ?? false,\n                    drop_date: settings.drop_date ?? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                    maintenance_message: settings.maintenance_message ?? \"We are currently performing maintenance. Please check back later.\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                }\n            ]).select().single();\n            if (insertError) {\n                console.error(\"Insert error:\", insertError);\n                throw insertError;\n            }\n            console.log(\"Supabase: Created maintenance settings\");\n            return insertResult;\n        }\n        console.log(\"Supabase: Updated maintenance settings\");\n        return updateResult;\n    } catch (error) {\n        console.error(\"Supabase updateMaintenanceSettings error:\", error);\n        throw error;\n    }\n}\n// Customers methods\nasync function getCustomers() {\n    try {\n        const { data, error } = await supabase.from(\"customers\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getCustomers error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Fetched\", data?.length || 0, \"customers\");\n        return data || [];\n    } catch (error) {\n        console.error(\"Supabase getCustomers error:\", error);\n        throw error;\n    }\n}\nasync function addCustomer(customerData) {\n    try {\n        const now = new Date().toISOString();\n        const customer = {\n            ...customerData,\n            id: `customer_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            created_at: now,\n            updated_at: now\n        };\n        const { data, error } = await supabase.from(\"customers\").insert([\n            customer\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addCustomer error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Created customer:\", data.id);\n        return {\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            phone: data.phone,\n            address: data.address,\n            city: data.city,\n            wilaya: data.wilaya,\n            createdAt: new Date(data.created_at),\n            updatedAt: new Date(data.updated_at)\n        };\n    } catch (error) {\n        console.error(\"Supabase addCustomer error:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TEEsSUFBSXVDLEtBQUt2QyxFQUFFO1lBQ1hDLE1BQU1zQyxLQUFLdEMsSUFBSTtZQUNmc0ssT0FBT2hJLEtBQUtnSSxLQUFLO1lBQ2pCQyxPQUFPakksS0FBS2lJLEtBQUs7WUFDakJDLFNBQVNsSSxLQUFLa0ksT0FBTztZQUNyQkMsTUFBTW5JLEtBQUttSSxJQUFJO1lBQ2ZDLFFBQVFwSSxLQUFLb0ksTUFBTTtZQUNuQmhKLFdBQVcsSUFBSUMsS0FBS1csS0FBS1YsVUFBVTtZQUNuQ0MsV0FBVyxJQUFJRixLQUFLVyxLQUFLUixVQUFVO1FBQ3JDO0lBQ0YsRUFBRSxPQUFPUyxPQUFPO1FBQ2Q3QyxRQUFRNkMsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8uL3NyYy9saWIvc3VwYWJhc2VEYXRhYmFzZS50cz9mNDI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIERhdGFiYXNlIHNlcnZpY2UgdXNpbmcgU3VwYWJhc2UgKGZyZWUgdGllcilcbi8vIFRoaXMgcHJvdmlkZXMgcGVyc2lzdGVudCBzdG9yYWdlIHdpdGggYSByZWFsIGRhdGFiYXNlXG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBQcm9kdWN0LCBPcmRlciB9IGZyb20gJ0AvdHlwZXMnO1xuXG4vLyBDdXN0b21lciBpbnRlcmZhY2VcbmludGVyZmFjZSBDdXN0b21lciB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcGhvbmU6IHN0cmluZztcbiAgYWRkcmVzczogc3RyaW5nO1xuICBjaXR5OiBzdHJpbmc7XG4gIHdpbGF5YTogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuLy8gU3VwYWJhc2UgY29uZmlndXJhdGlvbiAtIE1VU1QgdXNlIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG5jb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzLiBQbGVhc2Ugc2V0IE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBhbmQgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknKTtcbn1cblxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KTtcblxuLy8gRXhwb3J0IHRoZSBzdXBhYmFzZSBjbGllbnQgZm9yIGRpcmVjdCB1c2VcbmV4cG9ydCB7IHN1cGFiYXNlIH07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGRhdGFiYXNlIHByb2R1Y3QgdG8gUHJvZHVjdCBpbnRlcmZhY2VcbmZ1bmN0aW9uIGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QoZGJQcm9kdWN0OiBhbnkpOiBQcm9kdWN0IHtcbiAgLy8gRGVidWcgbG9nZ2luZ1xuICBjb25zb2xlLmxvZygn8J+UjSBERUJVRzogUmF3IHByaWNlIGZyb20gREI6JywgZGJQcm9kdWN0LnByaWNlLCAnVHlwZTonLCB0eXBlb2YgZGJQcm9kdWN0LnByaWNlKTtcbiAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IFBhcnNlZCBwcmljZTonLCBwYXJzZUZsb2F0KGRiUHJvZHVjdC5wcmljZSksICdUeXBlOicsIHR5cGVvZiBwYXJzZUZsb2F0KGRiUHJvZHVjdC5wcmljZSkpO1xuICBcbiAgY29uc3QgY29udmVydGVkUHJvZHVjdCA9IHtcbiAgICBpZDogZGJQcm9kdWN0LmlkLFxuICAgIG5hbWU6IGRiUHJvZHVjdC5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiBkYlByb2R1Y3QuZGVzY3JpcHRpb24sXG4gICAgcHJpY2U6IHBhcnNlRmxvYXQoZGJQcm9kdWN0LnByaWNlKSxcbiAgICBvcmlnaW5hbFByaWNlOiBkYlByb2R1Y3Qub3JpZ2luYWxfcHJpY2UgPyBwYXJzZUZsb2F0KGRiUHJvZHVjdC5vcmlnaW5hbF9wcmljZSkgOiB1bmRlZmluZWQsXG4gICAgaW1hZ2U6IGRiUHJvZHVjdC5pbWFnZSxcbiAgICBpbWFnZXM6IGRiUHJvZHVjdC5pbWFnZXMgfHwgW10sXG4gICAgc3RvY2s6IGRiUHJvZHVjdC5zdG9jayB8fCB7fSxcbiAgICBjYXRlZ29yeTogZGJQcm9kdWN0LmNhdGVnb3J5LFxuICAgIHNpemVzOiBkYlByb2R1Y3Quc2l6ZXMgfHwgW10sXG4gICAgY29sb3JzOiBkYlByb2R1Y3QuY29sb3JzIHx8IFtdLFxuICAgIGluU3RvY2s6IGRiUHJvZHVjdC5pbl9zdG9jayxcbiAgICByYXRpbmc6IHBhcnNlRmxvYXQoZGJQcm9kdWN0LnJhdGluZyB8fCAwKSxcbiAgICByZXZpZXdzOiBkYlByb2R1Y3QucmV2aWV3cyB8fCAwLFxuICAgIHNrdTogZGJQcm9kdWN0LnNrdSxcbiAgICB3ZWlnaHQ6IGRiUHJvZHVjdC53ZWlnaHQgPyBwYXJzZUZsb2F0KGRiUHJvZHVjdC53ZWlnaHQpIDogdW5kZWZpbmVkLFxuICAgIGRpbWVuc2lvbnM6IGRiUHJvZHVjdC5kaW1lbnNpb25zLFxuICAgIHRhZ3M6IGRiUHJvZHVjdC50YWdzIHx8IFtdLFxuICAgIGZlYXR1cmVkOiBkYlByb2R1Y3QuZmVhdHVyZWQgfHwgZmFsc2UsXG4gICAgc2l6ZUNoYXJ0Q2F0ZWdvcnk6IGRiUHJvZHVjdC5zaXplX2NoYXJ0X2NhdGVnb3J5IHx8ICdULVNoaXJ0cycsXG4gICAgY3VzdG9tU2l6ZUNoYXJ0OiBkYlByb2R1Y3QuY3VzdG9tX3NpemVfY2hhcnQgfHwgdW5kZWZpbmVkLFxuICAgIHVzZUN1c3RvbVNpemVDaGFydDogZGJQcm9kdWN0LnVzZV9jdXN0b21fc2l6ZV9jaGFydCB8fCBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRiUHJvZHVjdC5jcmVhdGVkX2F0KSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKGRiUHJvZHVjdC51cGRhdGVkX2F0KVxuICB9O1xuICBcbiAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IEZpbmFsIGNvbnZlcnRlZCBwcm9kdWN0IHByaWNlOicsIGNvbnZlcnRlZFByb2R1Y3QucHJpY2UsICdUeXBlOicsIHR5cGVvZiBjb252ZXJ0ZWRQcm9kdWN0LnByaWNlKTtcbiAgcmV0dXJuIGNvbnZlcnRlZFByb2R1Y3Q7XG59XG5cbi8vIENhY2hlIGZvciBwcm9kdWN0cyB0byByZWR1Y2UgZGF0YWJhc2UgY2FsbHNcbmxldCBwcm9kdWN0c0NhY2hlOiBQcm9kdWN0W10gfCBudWxsID0gbnVsbDtcbmxldCBwcm9kdWN0c0NhY2hlVGltZSA9IDA7XG5jb25zdCBDQUNIRV9EVVJBVElPTiA9IDMwMDAwOyAvLyAzMCBzZWNvbmRzXG5cbi8vIENsZWFyIGNhY2hlIGZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJQcm9kdWN0c0NhY2hlKCk6IHZvaWQge1xuICBwcm9kdWN0c0NhY2hlID0gbnVsbDtcbiAgcHJvZHVjdHNDYWNoZVRpbWUgPSAwO1xuICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFByb2R1Y3RzIGNhY2hlIGNsZWFyZWQnKTtcbn1cblxuLy8gRm9yY2UgY2xlYXIgY2FjaGUgaW1tZWRpYXRlbHkgdG8gZml4IHByaWNlIGZvcm1hdHRpbmcgaXNzdWVcbmNsZWFyUHJvZHVjdHNDYWNoZSgpO1xuXG4vLyBBZGQgdGltZXN0YW1wIHRvIGZvcmNlIGNhY2hlIGludmFsaWRhdGlvblxuY29uc3QgQ0FDSEVfQlVTVEVSID0gRGF0ZS5ub3coKTtcbmNvbnNvbGUubG9nKCfwn5qAIENhY2hlIGJ1c3RlciB0aW1lc3RhbXA6JywgQ0FDSEVfQlVTVEVSKTtcblxuLy8gUHJvZHVjdHMgb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCk6IFByb21pc2U8UHJvZHVjdFtdPiB7XG4gIHRyeSB7XG4gICAgLy8gUmV0dXJuIGNhY2hlZCBkYXRhIGlmIHN0aWxsIGZyZXNoXG4gICAgaWYgKHByb2R1Y3RzQ2FjaGUgJiYgRGF0ZS5ub3coKSAtIHByb2R1Y3RzQ2FjaGVUaW1lIDwgQ0FDSEVfRFVSQVRJT04pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogUmV0dXJuaW5nIGNhY2hlZCBwcm9kdWN0cycpO1xuICAgICAgcmV0dXJuIHByb2R1Y3RzQ2FjaGU7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFByb2R1Y3RzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBwcm9kdWN0c0NhY2hlIHx8IFtdO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm9kdWN0cyA9IChkYXRhIHx8IFtdKS5tYXAoY29udmVydERiUHJvZHVjdFRvUHJvZHVjdCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGNhY2hlXG4gICAgcHJvZHVjdHNDYWNoZSA9IHByb2R1Y3RzO1xuICAgIHByb2R1Y3RzQ2FjaGVUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICByZXR1cm4gcHJvZHVjdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0UHJvZHVjdHMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBwcm9kdWN0c0NhY2hlIHx8IFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPFByb2R1Y3QgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9kdWN0KHByb2R1Y3Q6IFByb2R1Y3QpOiBQcm9taXNlPFByb2R1Y3Q+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UpyBTdXBhYmFzZSBhZGRQcm9kdWN0OiBTdGFydGluZyB0byBhZGQgcHJvZHVjdDonLCBwcm9kdWN0LmlkLCBwcm9kdWN0Lm5hbWUpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIFN1cGFiYXNlIGlzIHByb3Blcmx5IGNvbmZpZ3VyZWRcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2U6IENsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb252ZXJ0IGNhbWVsQ2FzZSB0byBzbmFrZV9jYXNlIGZvciBkYXRhYmFzZVxuICAgIC8vIE9ubHkgaW5jbHVkZSBjb2x1bW5zIHRoYXQgZXhpc3QgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2Ugc2NoZW1hXG4gICAgY29uc3QgZGJQcm9kdWN0ID0ge1xuICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogcHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxuICAgICAgb3JpZ2luYWxfcHJpY2U6IHByb2R1Y3Qub3JpZ2luYWxQcmljZSxcbiAgICAgIGltYWdlOiBwcm9kdWN0LmltYWdlLFxuICAgICAgaW1hZ2VzOiBwcm9kdWN0LmltYWdlcyB8fCBbXSxcbiAgICAgIHN0b2NrOiBwcm9kdWN0LnN0b2NrLFxuICAgICAgY2F0ZWdvcnk6IHByb2R1Y3QuY2F0ZWdvcnksXG4gICAgICBzaXplczogcHJvZHVjdC5zaXplcyB8fCBbXSxcbiAgICAgIGNvbG9yczogcHJvZHVjdC5jb2xvcnMgfHwgW10sXG4gICAgICBpbl9zdG9jazogcHJvZHVjdC5pblN0b2NrLFxuICAgICAgcmF0aW5nOiBwcm9kdWN0LnJhdGluZyxcbiAgICAgIHJldmlld3M6IHByb2R1Y3QucmV2aWV3cyxcbiAgICAgIHNrdTogcHJvZHVjdC5za3UsXG4gICAgICB3ZWlnaHQ6IHByb2R1Y3Qud2VpZ2h0LFxuICAgICAgZGltZW5zaW9uczogcHJvZHVjdC5kaW1lbnNpb25zLFxuICAgICAgdGFnczogcHJvZHVjdC50YWdzIHx8IFtdLFxuICAgICAgZmVhdHVyZWQ6IHByb2R1Y3QuZmVhdHVyZWQgfHwgZmFsc2UsXG4gICAgICBjdXN0b21fc2l6ZV9jaGFydDogcHJvZHVjdC5jdXN0b21TaXplQ2hhcnQgfHwgbnVsbCxcbiAgICAgIHVzZV9jdXN0b21fc2l6ZV9jaGFydDogcHJvZHVjdC51c2VDdXN0b21TaXplQ2hhcnQgfHwgZmFsc2UsXG4gICAgICBzaXplX2NoYXJ0X2NhdGVnb3J5OiBwcm9kdWN0LnNpemVDaGFydENhdGVnb3J5IHx8IHByb2R1Y3QuY2F0ZWdvcnlcbiAgICAgIC8vIGNyZWF0ZWRfYXQgYW5kIHVwZGF0ZWRfYXQgYXJlIGF1dG9tYXRpY2FsbHkgc2V0IGJ5IHRoZSBkYXRhYmFzZVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygn8J+UpyBTdXBhYmFzZSBhZGRQcm9kdWN0OiBEYXRhYmFzZSBwcm9kdWN0IG9iamVjdDonLCBKU09OLnN0cmluZ2lmeShkYlByb2R1Y3QsIG51bGwsIDIpKTtcbiAgICBjb25zb2xlLmxvZygn8J+UpyBTdXBhYmFzZSBhZGRQcm9kdWN0OiBBdHRlbXB0aW5nIHRvIGluc2VydCBpbnRvIHByb2R1Y3RzIHRhYmxlLi4uJyk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC5pbnNlcnQoW2RiUHJvZHVjdF0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UpyBTdXBhYmFzZSBhZGRQcm9kdWN0OiBJbnNlcnQgcmVzdWx0IC0gZGF0YTonLCBkYXRhKTtcbiAgICBjb25zb2xlLmxvZygn8J+UpyBTdXBhYmFzZSBhZGRQcm9kdWN0OiBJbnNlcnQgcmVzdWx0IC0gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFN1cGFiYXNlIGFkZFByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFN1cGFiYXNlIGFkZFByb2R1Y3QgZXJyb3IgZGV0YWlsczonLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFN1cGFiYXNlIGFkZFByb2R1Y3QgZXJyb3IgY29kZTonLCBlcnJvci5jb2RlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTdXBhYmFzZSBhZGRQcm9kdWN0IGVycm9yIG1lc3NhZ2U6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvciBoaW50OicsIGVycm9yLmhpbnQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdXBhYmFzZSBpbnNlcnQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9IChDb2RlOiAke2Vycm9yLmNvZGV9KWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IEFkZGVkIHByb2R1Y3Q6JywgcHJvZHVjdC5pZCk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBpbnZlbnRvcnkgZm9yIHRoZSBuZXcgcHJvZHVjdFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5IH0gPSBhd2FpdCBpbXBvcnQoJy4vaW52ZW50b3J5U2VydmljZScpO1xuICAgICAgYXdhaXQgaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkocHJvZHVjdC5pZCk7XG4gICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IEluaXRpYWxpemVkIGludmVudG9yeSBmb3IgcHJvZHVjdDonLCBwcm9kdWN0LmlkKTtcbiAgICB9IGNhdGNoIChpbnZlbnRvcnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEZhaWxlZCB0byBpbml0aWFsaXplIGludmVudG9yeSBmb3IgcHJvZHVjdDonLCBwcm9kdWN0LmlkLCBpbnZlbnRvcnlFcnJvcik7XG4gICAgICAvLyBEb24ndCB0aHJvdyBlcnJvciBoZXJlLCBwcm9kdWN0IGNyZWF0aW9uIHNob3VsZCBzdGlsbCBzdWNjZWVkXG4gICAgfVxuICAgIFxuICAgIC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICBwcm9kdWN0c0NhY2hlID0gbnVsbDtcbiAgICBcbiAgICAvLyBDb252ZXJ0IGJhY2sgdG8gY2FtZWxDYXNlXG4gICAgcmV0dXJuIGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QoZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QoaWQ6IHN0cmluZywgcHJvZHVjdDogUGFydGlhbDxQcm9kdWN0Pik6IFByb21pc2U8UHJvZHVjdCB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBDb252ZXJ0IGNhbWVsQ2FzZSB0byBzbmFrZV9jYXNlIGZvciBkYXRhYmFzZVxuICAgIGNvbnN0IGRiUHJvZHVjdDogYW55ID0ge307XG4gICAgXG4gICAgaWYgKHByb2R1Y3QubmFtZSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QubmFtZSA9IHByb2R1Y3QubmFtZTtcbiAgICBpZiAocHJvZHVjdC5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuZGVzY3JpcHRpb24gPSBwcm9kdWN0LmRlc2NyaXB0aW9uO1xuICAgIGlmIChwcm9kdWN0LnByaWNlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5wcmljZSA9IHByb2R1Y3QucHJpY2U7XG4gICAgaWYgKHByb2R1Y3Qub3JpZ2luYWxQcmljZSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Qub3JpZ2luYWxfcHJpY2UgPSBwcm9kdWN0Lm9yaWdpbmFsUHJpY2U7XG4gICAgaWYgKHByb2R1Y3QuaW1hZ2UgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmltYWdlID0gcHJvZHVjdC5pbWFnZTtcbiAgICBpZiAocHJvZHVjdC5pbWFnZXMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmltYWdlcyA9IHByb2R1Y3QuaW1hZ2VzO1xuICAgIGlmIChwcm9kdWN0LnN0b2NrICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5zdG9jayA9IHByb2R1Y3Quc3RvY2s7XG4gICAgaWYgKHByb2R1Y3QuY2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmNhdGVnb3J5ID0gcHJvZHVjdC5jYXRlZ29yeTtcbiAgICBpZiAocHJvZHVjdC5zaXplcyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Quc2l6ZXMgPSBwcm9kdWN0LnNpemVzO1xuICAgIGlmIChwcm9kdWN0LmNvbG9ycyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuY29sb3JzID0gcHJvZHVjdC5jb2xvcnM7XG4gICAgaWYgKHByb2R1Y3QuaW5TdG9jayAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuaW5fc3RvY2sgPSBwcm9kdWN0LmluU3RvY2s7XG4gICAgaWYgKHByb2R1Y3QucmF0aW5nICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5yYXRpbmcgPSBwcm9kdWN0LnJhdGluZztcbiAgICBpZiAocHJvZHVjdC5yZXZpZXdzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5yZXZpZXdzID0gcHJvZHVjdC5yZXZpZXdzO1xuICAgIGlmIChwcm9kdWN0LnNrdSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Quc2t1ID0gcHJvZHVjdC5za3U7XG4gICAgaWYgKHByb2R1Y3Qud2VpZ2h0ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC53ZWlnaHQgPSBwcm9kdWN0LndlaWdodDtcbiAgICBpZiAocHJvZHVjdC5kaW1lbnNpb25zICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5kaW1lbnNpb25zID0gcHJvZHVjdC5kaW1lbnNpb25zO1xuICAgIGlmIChwcm9kdWN0LnRhZ3MgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnRhZ3MgPSBwcm9kdWN0LnRhZ3M7XG4gICAgaWYgKHByb2R1Y3QuZmVhdHVyZWQgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmZlYXR1cmVkID0gcHJvZHVjdC5mZWF0dXJlZDtcbiAgICBpZiAocHJvZHVjdC5zaXplQ2hhcnRDYXRlZ29yeSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Quc2l6ZV9jaGFydF9jYXRlZ29yeSA9IHByb2R1Y3Quc2l6ZUNoYXJ0Q2F0ZWdvcnk7XG4gICAgaWYgKHByb2R1Y3QuY3VzdG9tU2l6ZUNoYXJ0ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5jdXN0b21fc2l6ZV9jaGFydCA9IHByb2R1Y3QuY3VzdG9tU2l6ZUNoYXJ0O1xuICAgIGlmIChwcm9kdWN0LnVzZUN1c3RvbVNpemVDaGFydCAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QudXNlX2N1c3RvbV9zaXplX2NoYXJ0ID0gcHJvZHVjdC51c2VDdXN0b21TaXplQ2hhcnQ7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAudXBkYXRlKGRiUHJvZHVjdClcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIHByb2R1Y3Q6JywgaWQpO1xuICAgIFxuICAgIC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICBwcm9kdWN0c0NhY2hlID0gbnVsbDtcbiAgICBcbiAgICByZXR1cm4gY29udmVydERiUHJvZHVjdFRvUHJvZHVjdChkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBEZWxldGVkIHByb2R1Y3Q6JywgaWQpO1xuICAgIFxuICAgIC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICBwcm9kdWN0c0NhY2hlID0gbnVsbDtcbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgZGF0YWJhc2Ugb3JkZXIgdG8gT3JkZXIgaW50ZXJmYWNlXG5mdW5jdGlvbiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGJPcmRlcjogYW55KTogT3JkZXIge1xuICAvLyBFeHRyYWN0IGN1c3RvbWVyIGluZm8gZnJvbSBpdGVtcyBvciB1c2UgZGVmYXVsdHNcbiAgY29uc3QgZmlyc3RJdGVtID0gZGJPcmRlci5pdGVtcyAmJiBkYk9yZGVyLml0ZW1zLmxlbmd0aCA+IDAgPyBkYk9yZGVyLml0ZW1zWzBdIDoge307XG4gIFxuICByZXR1cm4ge1xuICAgIGlkOiBkYk9yZGVyLmlkLFxuICAgIHByb2R1Y3RJZDogZmlyc3RJdGVtLnByb2R1Y3RJZCB8fCAnJyxcbiAgICBwcm9kdWN0TmFtZTogZmlyc3RJdGVtLnByb2R1Y3ROYW1lIHx8ICcnLFxuICAgIHByb2R1Y3RJbWFnZTogZmlyc3RJdGVtLnByb2R1Y3RJbWFnZSB8fCAnJyxcbiAgICBjdXN0b21lck5hbWU6IGZpcnN0SXRlbS5jdXN0b21lck5hbWUgfHwgJycsXG4gICAgY3VzdG9tZXJQaG9uZTogZmlyc3RJdGVtLmN1c3RvbWVyUGhvbmUgfHwgJycsXG4gICAgY3VzdG9tZXJFbWFpbDogZmlyc3RJdGVtLmN1c3RvbWVyRW1haWwgfHwgJycsXG4gICAgY3VzdG9tZXJBZGRyZXNzOiBmaXJzdEl0ZW0uY3VzdG9tZXJBZGRyZXNzIHx8ICcnLFxuICAgIGN1c3RvbWVyQ2l0eTogZmlyc3RJdGVtLmN1c3RvbWVyQ2l0eSB8fCAnJyxcbiAgICB3aWxheWFJZDogZmlyc3RJdGVtLndpbGF5YUlkIHx8IDAsXG4gICAgd2lsYXlhTmFtZTogZmlyc3RJdGVtLndpbGF5YU5hbWUgfHwgJycsXG4gICAgc2hpcHBpbmdUeXBlOiBkYk9yZGVyLnNoaXBwaW5nX3R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXG4gICAgc2hpcHBpbmdDb3N0OiBOdW1iZXIoZGJPcmRlci5zaGlwcGluZ19jb3N0KSB8fCAwLFxuICAgIHF1YW50aXR5OiBmaXJzdEl0ZW0ucXVhbnRpdHkgfHwgMSxcbiAgICBzZWxlY3RlZFNpemU6IGZpcnN0SXRlbS5zZWxlY3RlZFNpemUgfHwgJycsXG4gICAgc2VsZWN0ZWRDb2xvcjogZmlyc3RJdGVtLnNlbGVjdGVkQ29sb3IgfHwgJycsXG4gICAgc3VidG90YWw6IE51bWJlcihkYk9yZGVyLnRvdGFsKSAtIE51bWJlcihkYk9yZGVyLnNoaXBwaW5nX2Nvc3QpIHx8IDAsXG4gICAgdG90YWw6IE51bWJlcihkYk9yZGVyLnRvdGFsKSB8fCAwLFxuICAgIG9yZGVyRGF0ZTogbmV3IERhdGUoZGJPcmRlci5vcmRlcl9kYXRlKSxcbiAgICBzdGF0dXM6IGRiT3JkZXIuc3RhdHVzIHx8ICdwZW5kaW5nJyxcbiAgICB0cmFja2luZ051bWJlcjogZGJPcmRlci50cmFja2luZ19udW1iZXIsXG4gICAgbm90ZXM6IGZpcnN0SXRlbS5ub3RlcyxcbiAgICBwYXltZW50TWV0aG9kOiBkYk9yZGVyLnBheW1lbnRfbWV0aG9kIHx8ICdjb2QnLFxuICAgIHBheW1lbnRTdGF0dXM6IGRiT3JkZXIucGF5bWVudF9zdGF0dXMgfHwgJ3BlbmRpbmcnLFxuICAgIGVzdGltYXRlZERlbGl2ZXJ5OiBmaXJzdEl0ZW0uZXN0aW1hdGVkRGVsaXZlcnksXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShkYk9yZGVyLmNyZWF0ZWRfYXQpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoZGJPcmRlci51cGRhdGVkX2F0KVxuICB9O1xufVxuXG4vLyBDYWNoZSBmb3Igb3JkZXJzIHRvIHJlZHVjZSBkYXRhYmFzZSBjYWxsc1xubGV0IG9yZGVyc0NhY2hlOiBPcmRlcltdIHwgbnVsbCA9IG51bGw7XG5sZXQgb3JkZXJzQ2FjaGVUaW1lID0gMDtcblxuLy8gT3JkZXJzIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlcnMoKTogUHJvbWlzZTxPcmRlcltdPiB7XG4gIHRyeSB7XG4gICAgLy8gUmV0dXJuIGNhY2hlZCBkYXRhIGlmIHN0aWxsIGZyZXNoXG4gICAgaWYgKG9yZGVyc0NhY2hlICYmIERhdGUubm93KCkgLSBvcmRlcnNDYWNoZVRpbWUgPCBDQUNIRV9EVVJBVElPTikge1xuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBSZXR1cm5pbmcgY2FjaGVkIG9yZGVycycpO1xuICAgICAgcmV0dXJuIG9yZGVyc0NhY2hlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm9yZGVyKCdvcmRlcl9kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0T3JkZXJzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBvcmRlcnNDYWNoZSB8fCBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgb3JkZXJzID0gKGRhdGEgfHwgW10pLm1hcChjb252ZXJ0RGJPcmRlclRvT3JkZXIpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjYWNoZVxuICAgIG9yZGVyc0NhY2hlID0gb3JkZXJzO1xuICAgIG9yZGVyc0NhY2hlVGltZSA9IERhdGUubm93KCk7XG4gICAgXG4gICAgcmV0dXJuIG9yZGVycztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRPcmRlcnMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBvcmRlcnNDYWNoZSB8fCBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JkZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8T3JkZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnZlcnREYk9yZGVyVG9PcmRlcihkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZE9yZGVyKG9yZGVyOiBPcmRlcik6IFByb21pc2U8T3JkZXI+IHtcbiAgdHJ5IHtcbiAgICAvLyBDb252ZXJ0IE9yZGVyIGludGVyZmFjZSB0byBkYXRhYmFzZSBmb3JtYXRcbiAgICBjb25zdCBkYk9yZGVyID0ge1xuICAgICAgaWQ6IG9yZGVyLmlkLFxuICAgICAgY3VzdG9tZXJfaWQ6IGBDVVNULSR7RGF0ZS5ub3coKX1gLCAvLyBHZW5lcmF0ZSBjdXN0b21lciBJRFxuICAgICAgaXRlbXM6IFt7XG4gICAgICAgIHByb2R1Y3RJZDogb3JkZXIucHJvZHVjdElkLFxuICAgICAgICBwcm9kdWN0TmFtZTogb3JkZXIucHJvZHVjdE5hbWUsXG4gICAgICAgIHByb2R1Y3RJbWFnZTogb3JkZXIucHJvZHVjdEltYWdlLFxuICAgICAgICBjdXN0b21lck5hbWU6IG9yZGVyLmN1c3RvbWVyTmFtZSxcbiAgICAgICAgY3VzdG9tZXJQaG9uZTogb3JkZXIuY3VzdG9tZXJQaG9uZSxcbiAgICAgICAgY3VzdG9tZXJFbWFpbDogb3JkZXIuY3VzdG9tZXJFbWFpbCxcbiAgICAgICAgY3VzdG9tZXJBZGRyZXNzOiBvcmRlci5jdXN0b21lckFkZHJlc3MsXG4gICAgICAgIGN1c3RvbWVyQ2l0eTogb3JkZXIuY3VzdG9tZXJDaXR5LFxuICAgICAgICB3aWxheWFJZDogb3JkZXIud2lsYXlhSWQsXG4gICAgICAgIHdpbGF5YU5hbWU6IG9yZGVyLndpbGF5YU5hbWUsXG4gICAgICAgIHF1YW50aXR5OiBvcmRlci5xdWFudGl0eSxcbiAgICAgICAgc2VsZWN0ZWRTaXplOiBvcmRlci5zZWxlY3RlZFNpemUsXG4gICAgICAgIHNlbGVjdGVkQ29sb3I6IG9yZGVyLnNlbGVjdGVkQ29sb3IsXG4gICAgICAgIG5vdGVzOiBvcmRlci5ub3RlcyxcbiAgICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IG9yZGVyLmVzdGltYXRlZERlbGl2ZXJ5XG4gICAgICB9XSxcbiAgICAgIHRvdGFsOiBvcmRlci50b3RhbCxcbiAgICAgIHNoaXBwaW5nX2Nvc3Q6IG9yZGVyLnNoaXBwaW5nQ29zdCxcbiAgICAgIHNoaXBwaW5nX3R5cGU6IG9yZGVyLnNoaXBwaW5nVHlwZSxcbiAgICAgIHBheW1lbnRfbWV0aG9kOiBvcmRlci5wYXltZW50TWV0aG9kLFxuICAgICAgcGF5bWVudF9zdGF0dXM6IG9yZGVyLnBheW1lbnRTdGF0dXMsXG4gICAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgICAgIHRyYWNraW5nX251bWJlcjogb3JkZXIudHJhY2tpbmdOdW1iZXIsXG4gICAgICBvcmRlcl9kYXRlOiBvcmRlci5vcmRlckRhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgIGNyZWF0ZWRfYXQ6IG9yZGVyLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZF9hdDogb3JkZXIudXBkYXRlZEF0LnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5pbnNlcnQoW2RiT3JkZXJdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBBZGRlZCBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgcmV0dXJuIGNvbnZlcnREYk9yZGVyVG9PcmRlcihkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyKGlkOiBzdHJpbmcsIG9yZGVyOiBQYXJ0aWFsPE9yZGVyPik6IFByb21pc2U8T3JkZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBwYXJ0aWFsIE9yZGVyIHRvIGRhdGFiYXNlIGZvcm1hdFxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgaWYgKG9yZGVyLnN0YXR1cyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnN0YXR1cyA9IG9yZGVyLnN0YXR1cztcbiAgICBpZiAob3JkZXIucGF5bWVudFN0YXR1cyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnBheW1lbnRfc3RhdHVzID0gb3JkZXIucGF5bWVudFN0YXR1cztcbiAgICBpZiAob3JkZXIudHJhY2tpbmdOdW1iZXIgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS50cmFja2luZ19udW1iZXIgPSBvcmRlci50cmFja2luZ051bWJlcjtcbiAgICBpZiAob3JkZXIuc2hpcHBpbmdUeXBlICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuc2hpcHBpbmdfdHlwZSA9IG9yZGVyLnNoaXBwaW5nVHlwZTtcbiAgICBpZiAob3JkZXIuc2hpcHBpbmdDb3N0ICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuc2hpcHBpbmdfY29zdCA9IG9yZGVyLnNoaXBwaW5nQ29zdDtcbiAgICBpZiAob3JkZXIudG90YWwgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS50b3RhbCA9IG9yZGVyLnRvdGFsO1xuICAgIGlmIChvcmRlci5wYXltZW50TWV0aG9kICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEucGF5bWVudF9tZXRob2QgPSBvcmRlci5wYXltZW50TWV0aG9kO1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogVXBkYXRlZCBvcmRlcjonLCBpZCk7XG4gICAgcmV0dXJuIGNvbnZlcnREYk9yZGVyVG9PcmRlcihkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCwgZ2V0IHRoZSBvcmRlciBkZXRhaWxzIHRvIHJlc3RvcmUgaW52ZW50b3J5XG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBnZXRPcmRlcihpZCk7XG4gICAgaWYgKCFvcmRlcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlT3JkZXI6IE9yZGVyIG5vdCBmb3VuZDonLCBpZCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUmVzdG9yZSBpbnZlbnRvcnkgcXVhbnRpdHlcbiAgICBpZiAob3JkZXIucHJvZHVjdElkICYmIG9yZGVyLnNlbGVjdGVkU2l6ZSAmJiBvcmRlci5zZWxlY3RlZENvbG9yICYmIG9yZGVyLnF1YW50aXR5KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGFkZEludmVudG9yeSB9ID0gYXdhaXQgaW1wb3J0KCcuL2ludmVudG9yeVNlcnZpY2UnKTtcbiAgICAgICAgY29uc3QgaW52ZW50b3J5UmVzdG9yZWQgPSBhd2FpdCBhZGRJbnZlbnRvcnkoXG4gICAgICAgICAgb3JkZXIucHJvZHVjdElkLFxuICAgICAgICAgIG9yZGVyLnNlbGVjdGVkU2l6ZSxcbiAgICAgICAgICBvcmRlci5zZWxlY3RlZENvbG9yLFxuICAgICAgICAgIG9yZGVyLnF1YW50aXR5LFxuICAgICAgICAgIGBPcmRlciAke2lkfSBkZWxldGVkIC0gaW52ZW50b3J5IHJlc3RvcmVkYCxcbiAgICAgICAgICAnYWRtaW4nXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW52ZW50b3J5UmVzdG9yZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2UgZGVsZXRlT3JkZXI6IEludmVudG9yeSByZXN0b3JlZCBmb3Igb3JkZXI6JywgaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybignU3VwYWJhc2UgZGVsZXRlT3JkZXI6IEZhaWxlZCB0byByZXN0b3JlIGludmVudG9yeSBmb3Igb3JkZXI6JywgaWQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChpbnZlbnRvcnlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlcjogSW52ZW50b3J5IHJlc3RvcmF0aW9uIGVycm9yOicsIGludmVudG9yeUVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aCBvcmRlciBkZWxldGlvbiBldmVuIGlmIGludmVudG9yeSByZXN0b3JhdGlvbiBmYWlsc1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0aGUgb3JkZXJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogRGVsZXRlZCBvcmRlcjonLCBpZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5cbi8vIFdpbGF5YSBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V2lsYXlhVGFyaWZmcygpOiBQcm9taXNlPGFueVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd3aWxheWFfdGFyaWZmcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignb3JkZXInLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFdpbGF5YVRhcmlmZnMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcmFuc2Zvcm0gdGhlIGRhdGEgdG8gbWF0Y2ggdGhlIGV4cGVjdGVkIGZvcm1hdFxuICAgIGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IChkYXRhIHx8IFtdKS5tYXAodGFyaWZmID0+ICh7XG4gICAgICBpZDogdGFyaWZmLmlkLnRvU3RyaW5nKCksXG4gICAgICB3aWxheWFfaWQ6IHRhcmlmZi53aWxheWFfaWQsXG4gICAgICBuYW1lOiB0YXJpZmYubmFtZSxcbiAgICAgIGRvbWljaWxlX2Vjb21tZXJjZTogdGFyaWZmLmRvbWljaWxlX2Vjb21tZXJjZSxcbiAgICAgIHN0b3BfZGVza19lY29tbWVyY2U6IHRhcmlmZi5zdG9wX2Rlc2tfZWNvbW1lcmNlLFxuICAgICAgb3JkZXI6IHRhcmlmZi5vcmRlcixcbiAgICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICBob21lX2RlbGl2ZXJ5OiB0YXJpZmYuZG9taWNpbGVfZWNvbW1lcmNlLFxuICAgICAgc3RvcF9kZXNrOiB0YXJpZmYuc3RvcF9kZXNrX2Vjb21tZXJjZSxcbiAgICAgIGhvbWVEZWxpdmVyeTogdGFyaWZmLmRvbWljaWxlX2Vjb21tZXJjZSxcbiAgICAgIHN0b3BEZXNrOiB0YXJpZmYuc3RvcF9kZXNrX2Vjb21tZXJjZSxcbiAgICAgIGRvbWljaWxlRWNvbW1lcmNlOiB0YXJpZmYuZG9taWNpbGVfZWNvbW1lcmNlLFxuICAgICAgc3RvcERlc2tFY29tbWVyY2U6IHRhcmlmZi5zdG9wX2Rlc2tfZWNvbW1lcmNlXG4gICAgfSkpO1xuICAgIFxuICAgIHJldHVybiB0cmFuc2Zvcm1lZERhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0V2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVXaWxheWFUYXJpZmZzKHRhcmlmZnM6IGFueVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgLy8gRGVsZXRlIGFsbCBleGlzdGluZyB0YXJpZmZzXG4gICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd3aWxheWFfdGFyaWZmcycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5uZXEoJ2lkJywgMCk7IC8vIERlbGV0ZSBhbGwgcmVjb3Jkc1xuICAgIFxuICAgIC8vIEluc2VydCBuZXcgdGFyaWZmc1xuICAgIGlmICh0YXJpZmZzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCBkYXRhYmFzZSBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkVGFyaWZmcyA9IHRhcmlmZnMubWFwKHRhcmlmZiA9PiAoe1xuICAgICAgICB3aWxheWFfaWQ6IHRhcmlmZi53aWxheWFfaWQgfHwgdGFyaWZmLmlkLFxuICAgICAgICBuYW1lOiB0YXJpZmYubmFtZSxcbiAgICAgICAgZG9taWNpbGVfZWNvbW1lcmNlOiB0YXJpZmYuZG9taWNpbGVfZWNvbW1lcmNlIHx8IHRhcmlmZi5kb21pY2lsZUVjb21tZXJjZSB8fCB0YXJpZmYuaG9tZV9kZWxpdmVyeSB8fCB0YXJpZmYuaG9tZURlbGl2ZXJ5IHx8IDAsXG4gICAgICAgIHN0b3BfZGVza19lY29tbWVyY2U6IHRhcmlmZi5zdG9wX2Rlc2tfZWNvbW1lcmNlIHx8IHRhcmlmZi5zdG9wRGVza0Vjb21tZXJjZSB8fCB0YXJpZmYuc3RvcF9kZXNrIHx8IHRhcmlmZi5zdG9wRGVzayB8fCAwLFxuICAgICAgICBvcmRlcjogdGFyaWZmLm9yZGVyIHx8IDFcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3dpbGF5YV90YXJpZmZzJylcbiAgICAgICAgLmluc2VydCh0cmFuc2Zvcm1lZFRhcmlmZnMpO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlV2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgd2lsYXlhIHRhcmlmZnMnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVXaWxheWFUYXJpZmZzIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBJbnZlbnRvcnkgb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEludmVudG9yeSgpOiBQcm9taXNlPGFueVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuc2VsZWN0KCdpZCwgbmFtZSwgc2t1LCBzdG9jaywgc2l6ZXMsIGNvbG9ycywgaW5fc3RvY2ssIGNhdGVnb3J5JylcbiAgICAgIC5vcmRlcignbmFtZScpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJhbnNmb3JtIGRhdGEgZm9yIGludmVudG9yeSBtYW5hZ2VtZW50XG4gICAgcmV0dXJuIChkYXRhIHx8IFtdKS5tYXAocHJvZHVjdCA9PiAoe1xuICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgICBza3U6IHByb2R1Y3Quc2t1LFxuICAgICAgY2F0ZWdvcnk6IHByb2R1Y3QuY2F0ZWdvcnksXG4gICAgICBpblN0b2NrOiBwcm9kdWN0LmluX3N0b2NrLFxuICAgICAgc3RvY2s6IHByb2R1Y3Quc3RvY2sgfHwge30sXG4gICAgICBzaXplczogcHJvZHVjdC5zaXplcyB8fCBbXSxcbiAgICAgIGNvbG9yczogcHJvZHVjdC5jb2xvcnMgfHwgW10sXG4gICAgICB0b3RhbFN0b2NrOiBjYWxjdWxhdGVUb3RhbFN0b2NrKHByb2R1Y3Quc3RvY2sgfHwge30pLFxuICAgICAgc3RvY2tCeVNpemU6IGNhbGN1bGF0ZVN0b2NrQnlTaXplKHByb2R1Y3Quc3RvY2sgfHwge30sIHByb2R1Y3Quc2l6ZXMgfHwgW10sIHByb2R1Y3QuY29sb3JzIHx8IFtdKVxuICAgIH0pKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSW52ZW50b3J5KHByb2R1Y3RJZDogc3RyaW5nLCBzdG9ja0RhdGE6IGFueSk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXBkYXRlT2JqOiBhbnkgPSB7XG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGlmIChzdG9ja0RhdGEuc3RvY2spIHtcbiAgICAgIHVwZGF0ZU9iai5zdG9jayA9IHN0b2NrRGF0YS5zdG9jaztcbiAgICB9XG4gICAgXG4gICAgaWYgKHN0b2NrRGF0YS5pblN0b2NrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZU9iai5pbl9zdG9jayA9IHN0b2NrRGF0YS5pblN0b2NrO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC51cGRhdGUodXBkYXRlT2JqKVxuICAgICAgLmVxKCdpZCcsIHByb2R1Y3RJZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlSW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgaW52ZW50b3J5IGZvciBwcm9kdWN0OicsIHByb2R1Y3RJZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgc3RvY2s6IGRhdGEuc3RvY2ssXG4gICAgICBpblN0b2NrOiBkYXRhLmluX3N0b2NrLFxuICAgICAgdG90YWxTdG9jazogY2FsY3VsYXRlVG90YWxTdG9jayhkYXRhLnN0b2NrKVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlSW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBpbnZlbnRvcnkgY2FsY3VsYXRpb25zXG5mdW5jdGlvbiBjYWxjdWxhdGVUb3RhbFN0b2NrKHN0b2NrOiBhbnkpOiBudW1iZXIge1xuICBpZiAoIXN0b2NrIHx8IHR5cGVvZiBzdG9jayAhPT0gJ29iamVjdCcpIHJldHVybiAwO1xuICBcbiAgbGV0IHRvdGFsID0gMDtcbiAgZm9yIChjb25zdCBzaXplIGluIHN0b2NrKSB7XG4gICAgaWYgKHR5cGVvZiBzdG9ja1tzaXplXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAoY29uc3QgY29sb3IgaW4gc3RvY2tbc2l6ZV0pIHtcbiAgICAgICAgdG90YWwgKz0gTnVtYmVyKHN0b2NrW3NpemVdW2NvbG9yXSkgfHwgMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvdGFsO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVTdG9ja0J5U2l6ZShzdG9jazogYW55LCBzaXplczogc3RyaW5nW10sIGNvbG9yczogc3RyaW5nW10pOiBhbnkge1xuICBjb25zdCByZXN1bHQ6IGFueSA9IHt9O1xuICBcbiAgc2l6ZXMuZm9yRWFjaChzaXplID0+IHtcbiAgICByZXN1bHRbc2l6ZV0gPSB7fTtcbiAgICBjb2xvcnMuZm9yRWFjaChjb2xvciA9PiB7XG4gICAgICByZXN1bHRbc2l6ZV1bY29sb3JdID0gTnVtYmVyKHN0b2NrW3NpemVdPy5bY29sb3JdKSB8fCAwO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIFN0b2NrIGRlZHVjdGlvbiBmdW5jdGlvbiBmb3Igb3JkZXJzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVkdWN0U3RvY2tGcm9tT3JkZXIob3JkZXI6IE9yZGVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBEZWR1Y3Rpbmcgc3RvY2sgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIHByb2R1Y3RcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgZ2V0UHJvZHVjdChvcmRlci5wcm9kdWN0SWQpO1xuICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IFByb2R1Y3Qgbm90IGZvdW5kIGZvciBvcmRlcjonLCBvcmRlci5wcm9kdWN0SWQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGVub3VnaCBzdG9ja1xuICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Quc3RvY2s/LltvcmRlci5zZWxlY3RlZFNpemVdPy5bb3JkZXIuc2VsZWN0ZWRDb2xvcl0gfHwgMDtcbiAgICBpZiAoY3VycmVudFN0b2NrIDwgb3JkZXIucXVhbnRpdHkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBJbnN1ZmZpY2llbnQgc3RvY2sgZm9yIG9yZGVyOicsIHtcbiAgICAgICAgcHJvZHVjdElkOiBvcmRlci5wcm9kdWN0SWQsXG4gICAgICAgIHNpemU6IG9yZGVyLnNlbGVjdGVkU2l6ZSxcbiAgICAgICAgY29sb3I6IG9yZGVyLnNlbGVjdGVkQ29sb3IsXG4gICAgICAgIHJlcXVlc3RlZDogb3JkZXIucXVhbnRpdHksXG4gICAgICAgIGF2YWlsYWJsZTogY3VycmVudFN0b2NrXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gRGVkdWN0IHRoZSBzdG9jayBmcm9tIHByb2R1Y3RcbiAgICBjb25zdCBuZXdTdG9jayA9IHtcbiAgICAgIC4uLnByb2R1Y3Quc3RvY2ssXG4gICAgICBbb3JkZXIuc2VsZWN0ZWRTaXplXToge1xuICAgICAgICAuLi5wcm9kdWN0LnN0b2NrPy5bb3JkZXIuc2VsZWN0ZWRTaXplXSxcbiAgICAgICAgW29yZGVyLnNlbGVjdGVkQ29sb3JdOiBjdXJyZW50U3RvY2sgLSBvcmRlci5xdWFudGl0eVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gVXBkYXRlIHRoZSBwcm9kdWN0IHN0b2NrXG4gICAgY29uc3QgdXBkYXRlZFByb2R1Y3QgPSBhd2FpdCB1cGRhdGVQcm9kdWN0KG9yZGVyLnByb2R1Y3RJZCwge1xuICAgICAgc3RvY2s6IG5ld1N0b2NrLFxuICAgICAgaW5TdG9jazogY2FsY3VsYXRlVG90YWxTdG9jayhuZXdTdG9jaykgPiAwXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCF1cGRhdGVkUHJvZHVjdCkge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCBzdG9jayBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEFsc28gZGVkdWN0IGZyb20gaW52ZW50b3J5IHN5c3RlbVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGFkZEludmVudG9yeSB9ID0gYXdhaXQgaW1wb3J0KCcuL2ludmVudG9yeVNlcnZpY2UnKTtcbiAgICAgIGNvbnN0IGludmVudG9yeURlZHVjdGVkID0gYXdhaXQgYWRkSW52ZW50b3J5KFxuICAgICAgICBvcmRlci5wcm9kdWN0SWQsXG4gICAgICAgIG9yZGVyLnNlbGVjdGVkU2l6ZSxcbiAgICAgICAgb3JkZXIuc2VsZWN0ZWRDb2xvcixcbiAgICAgICAgLW9yZGVyLnF1YW50aXR5LCAvLyBOZWdhdGl2ZSBxdWFudGl0eSB0byBkZWR1Y3RcbiAgICAgICAgYE9yZGVyICR7b3JkZXIuaWR9IGNyZWF0ZWQgLSBzdG9jayBkZWR1Y3RlZGAsXG4gICAgICAgICdzeXN0ZW0nXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoaW52ZW50b3J5RGVkdWN0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBTdWNjZXNzZnVsbHkgZGVkdWN0ZWQgaW52ZW50b3J5IGZvciBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1N1cGFiYXNlOiBGYWlsZWQgdG8gZGVkdWN0IGludmVudG9yeSBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGludmVudG9yeUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogSW52ZW50b3J5IGRlZHVjdGlvbiBlcnJvcjonLCBpbnZlbnRvcnlFcnJvcik7XG4gICAgICAvLyBDb250aW51ZSBldmVuIGlmIGludmVudG9yeSB1cGRhdGUgZmFpbHNcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBTdWNjZXNzZnVsbHkgZGVkdWN0ZWQgc3RvY2sgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogRXJyb3IgZGVkdWN0aW5nIHN0b2NrIGZvciBvcmRlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIE1haW50ZW5hbmNlIHNldHRpbmdzIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYWludGVuYW5jZVNldHRpbmdzKCk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdtYWludGVuYW5jZV9zZXR0aW5ncycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCAnbWFpbnRlbmFuY2UnKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0TWFpbnRlbmFuY2VTZXR0aW5ncyBlcnJvcjonLCBlcnJvcik7XG4gICAgICAvLyBJZiB0YWJsZSBkb2Vzbid0IGV4aXN0LCByZXR1cm4gZGVmYXVsdCBzZXR0aW5nc1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDIwNScpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01haW50ZW5hbmNlIHNldHRpbmdzIHRhYmxlIG5vdCBmb3VuZCwgdXNpbmcgZGVmYXVsdCBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgc2V0dGluZ3MgaWYgbm8gZGF0YSBleGlzdHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICBpc19tYWludGVuYW5jZV9tb2RlOiBmYWxzZSxcbiAgICAgICAgZHJvcF9kYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyAzMCBkYXlzIGZyb20gbm93XG4gICAgICAgIG1haW50ZW5hbmNlX21lc3NhZ2U6ICdXZSBhcmUgY3VycmVudGx5IHBlcmZvcm1pbmcgbWFpbnRlbmFuY2UuIFBsZWFzZSBjaGVjayBiYWNrIGxhdGVyLicsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YSB8fCB7XG4gICAgICBpZDogJ21haW50ZW5hbmNlJyxcbiAgICAgIGlzX21haW50ZW5hbmNlX21vZGU6IGZhbHNlLFxuICAgICAgZHJvcF9kYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgbWFpbnRlbmFuY2VfbWVzc2FnZTogJ1dlIGFyZSBjdXJyZW50bHkgcGVyZm9ybWluZyBtYWludGVuYW5jZS4gUGxlYXNlIGNoZWNrIGJhY2sgbGF0ZXIuJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0TWFpbnRlbmFuY2VTZXR0aW5ncyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgaXNfbWFpbnRlbmFuY2VfbW9kZTogZmFsc2UsXG4gICAgICBkcm9wX2RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBtYWludGVuYW5jZV9tZXNzYWdlOiAnV2UgYXJlIGN1cnJlbnRseSBwZXJmb3JtaW5nIG1haW50ZW5hbmNlLiBQbGVhc2UgY2hlY2sgYmFjayBsYXRlci4nLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWFpbnRlbmFuY2VTZXR0aW5ncyhzZXR0aW5nczoge1xuICBpc19tYWludGVuYW5jZV9tb2RlPzogYm9vbGVhbjtcbiAgZHJvcF9kYXRlPzogc3RyaW5nO1xuICBtYWludGVuYW5jZV9tZXNzYWdlPzogc3RyaW5nO1xufSk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0ge1xuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBcbiAgICBpZiAoc2V0dGluZ3MuaXNfbWFpbnRlbmFuY2VfbW9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVEYXRhLmlzX21haW50ZW5hbmNlX21vZGUgPSBzZXR0aW5ncy5pc19tYWludGVuYW5jZV9tb2RlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc2V0dGluZ3MuZHJvcF9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZURhdGEuZHJvcF9kYXRlID0gc2V0dGluZ3MuZHJvcF9kYXRlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc2V0dGluZ3MubWFpbnRlbmFuY2VfbWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVEYXRhLm1haW50ZW5hbmNlX21lc3NhZ2UgPSBzZXR0aW5ncy5tYWludGVuYW5jZV9tZXNzYWdlO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgbWFpbnRlbmFuY2Ugc2V0dGluZ3Mgd2l0aDonLCB1cGRhdGVEYXRhKTtcbiAgICBcbiAgICAvLyBUcnkgdXBkYXRlIGZpcnN0XG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVSZXN1bHQsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdtYWludGVuYW5jZV9zZXR0aW5ncycpXG4gICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAuZXEoJ2lkJywgJ21haW50ZW5hbmNlJylcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignVXBkYXRlIGVycm9yOicsIHVwZGF0ZUVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdXBkYXRlIGZhaWxzLCB0cnkgaW5zZXJ0XG4gICAgICBjb25zdCB7IGRhdGE6IGluc2VydFJlc3VsdCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWFpbnRlbmFuY2Vfc2V0dGluZ3MnKVxuICAgICAgICAuaW5zZXJ0KFt7XG4gICAgICAgICAgaWQ6ICdtYWludGVuYW5jZScsXG4gICAgICAgICAgaXNfbWFpbnRlbmFuY2VfbW9kZTogc2V0dGluZ3MuaXNfbWFpbnRlbmFuY2VfbW9kZSA/PyBmYWxzZSxcbiAgICAgICAgICBkcm9wX2RhdGU6IHNldHRpbmdzLmRyb3BfZGF0ZSA/PyBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIG1haW50ZW5hbmNlX21lc3NhZ2U6IHNldHRpbmdzLm1haW50ZW5hbmNlX21lc3NhZ2UgPz8gJ1dlIGFyZSBjdXJyZW50bHkgcGVyZm9ybWluZyBtYWludGVuYW5jZS4gUGxlYXNlIGNoZWNrIGJhY2sgbGF0ZXIuJyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1dKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW5zZXJ0IGVycm9yOicsIGluc2VydEVycm9yKTtcbiAgICAgICAgdGhyb3cgaW5zZXJ0RXJyb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogQ3JlYXRlZCBtYWludGVuYW5jZSBzZXR0aW5ncycpO1xuICAgICAgcmV0dXJuIGluc2VydFJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIG1haW50ZW5hbmNlIHNldHRpbmdzJyk7XG4gICAgcmV0dXJuIHVwZGF0ZVJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVNYWludGVuYW5jZVNldHRpbmdzIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBDdXN0b21lcnMgbWV0aG9kc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVycygpOiBQcm9taXNlPEN1c3RvbWVyW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2N1c3RvbWVycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEN1c3RvbWVycyBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBGZXRjaGVkJywgZGF0YT8ubGVuZ3RoIHx8IDAsICdjdXN0b21lcnMnKTtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRDdXN0b21lcnMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRDdXN0b21lcihjdXN0b21lckRhdGE6IE9taXQ8Q3VzdG9tZXIsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8Q3VzdG9tZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGN1c3RvbWVyID0ge1xuICAgICAgLi4uY3VzdG9tZXJEYXRhLFxuICAgICAgaWQ6IGBjdXN0b21lcl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICBjcmVhdGVkX2F0OiBub3csXG4gICAgICB1cGRhdGVkX2F0OiBub3dcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY3VzdG9tZXJzJylcbiAgICAgIC5pbnNlcnQoW2N1c3RvbWVyXSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkQ3VzdG9tZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogQ3JlYXRlZCBjdXN0b21lcjonLCBkYXRhLmlkKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgIHBob25lOiBkYXRhLnBob25lLFxuICAgICAgYWRkcmVzczogZGF0YS5hZGRyZXNzLFxuICAgICAgY2l0eTogZGF0YS5jaXR5LFxuICAgICAgd2lsYXlhOiBkYXRhLndpbGF5YSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoZGF0YS5jcmVhdGVkX2F0KSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoZGF0YS51cGRhdGVkX2F0KVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkQ3VzdG9tZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0IiwiZGJQcm9kdWN0IiwiY29uc29sZSIsImxvZyIsInByaWNlIiwicGFyc2VGbG9hdCIsImNvbnZlcnRlZFByb2R1Y3QiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm9yaWdpbmFsUHJpY2UiLCJvcmlnaW5hbF9wcmljZSIsInVuZGVmaW5lZCIsImltYWdlIiwiaW1hZ2VzIiwic3RvY2siLCJjYXRlZ29yeSIsInNpemVzIiwiY29sb3JzIiwiaW5TdG9jayIsImluX3N0b2NrIiwicmF0aW5nIiwicmV2aWV3cyIsInNrdSIsIndlaWdodCIsImRpbWVuc2lvbnMiLCJ0YWdzIiwiZmVhdHVyZWQiLCJzaXplQ2hhcnRDYXRlZ29yeSIsInNpemVfY2hhcnRfY2F0ZWdvcnkiLCJjdXN0b21TaXplQ2hhcnQiLCJjdXN0b21fc2l6ZV9jaGFydCIsInVzZUN1c3RvbVNpemVDaGFydCIsInVzZV9jdXN0b21fc2l6ZV9jaGFydCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJjcmVhdGVkX2F0IiwidXBkYXRlZEF0IiwidXBkYXRlZF9hdCIsInByb2R1Y3RzQ2FjaGUiLCJwcm9kdWN0c0NhY2hlVGltZSIsIkNBQ0hFX0RVUkFUSU9OIiwiY2xlYXJQcm9kdWN0c0NhY2hlIiwiQ0FDSEVfQlVTVEVSIiwibm93IiwiZ2V0UHJvZHVjdHMiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJwcm9kdWN0cyIsIm1hcCIsImdldFByb2R1Y3QiLCJlcSIsInNpbmdsZSIsImFkZFByb2R1Y3QiLCJwcm9kdWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImluc2VydCIsImNvZGUiLCJtZXNzYWdlIiwiaGludCIsImluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5IiwiaW52ZW50b3J5RXJyb3IiLCJ1cGRhdGVQcm9kdWN0IiwidXBkYXRlIiwiZGVsZXRlUHJvZHVjdCIsImRlbGV0ZSIsImNvbnZlcnREYk9yZGVyVG9PcmRlciIsImRiT3JkZXIiLCJmaXJzdEl0ZW0iLCJpdGVtcyIsImxlbmd0aCIsInByb2R1Y3RJZCIsInByb2R1Y3ROYW1lIiwicHJvZHVjdEltYWdlIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJQaG9uZSIsImN1c3RvbWVyRW1haWwiLCJjdXN0b21lckFkZHJlc3MiLCJjdXN0b21lckNpdHkiLCJ3aWxheWFJZCIsIndpbGF5YU5hbWUiLCJzaGlwcGluZ1R5cGUiLCJzaGlwcGluZ190eXBlIiwic2hpcHBpbmdDb3N0IiwiTnVtYmVyIiwic2hpcHBpbmdfY29zdCIsInF1YW50aXR5Iiwic2VsZWN0ZWRTaXplIiwic2VsZWN0ZWRDb2xvciIsInN1YnRvdGFsIiwidG90YWwiLCJvcmRlckRhdGUiLCJvcmRlcl9kYXRlIiwic3RhdHVzIiwidHJhY2tpbmdOdW1iZXIiLCJ0cmFja2luZ19udW1iZXIiLCJub3RlcyIsInBheW1lbnRNZXRob2QiLCJwYXltZW50X21ldGhvZCIsInBheW1lbnRTdGF0dXMiLCJwYXltZW50X3N0YXR1cyIsImVzdGltYXRlZERlbGl2ZXJ5Iiwib3JkZXJzQ2FjaGUiLCJvcmRlcnNDYWNoZVRpbWUiLCJnZXRPcmRlcnMiLCJvcmRlcnMiLCJnZXRPcmRlciIsImFkZE9yZGVyIiwiY3VzdG9tZXJfaWQiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZU9yZGVyIiwidXBkYXRlRGF0YSIsImRlbGV0ZU9yZGVyIiwiYWRkSW52ZW50b3J5IiwiaW52ZW50b3J5UmVzdG9yZWQiLCJ3YXJuIiwiZ2V0V2lsYXlhVGFyaWZmcyIsInRyYW5zZm9ybWVkRGF0YSIsInRhcmlmZiIsInRvU3RyaW5nIiwid2lsYXlhX2lkIiwiZG9taWNpbGVfZWNvbW1lcmNlIiwic3RvcF9kZXNrX2Vjb21tZXJjZSIsImhvbWVfZGVsaXZlcnkiLCJzdG9wX2Rlc2siLCJob21lRGVsaXZlcnkiLCJzdG9wRGVzayIsImRvbWljaWxlRWNvbW1lcmNlIiwic3RvcERlc2tFY29tbWVyY2UiLCJ1cGRhdGVXaWxheWFUYXJpZmZzIiwidGFyaWZmcyIsIm5lcSIsInRyYW5zZm9ybWVkVGFyaWZmcyIsImdldEludmVudG9yeSIsInRvdGFsU3RvY2siLCJjYWxjdWxhdGVUb3RhbFN0b2NrIiwic3RvY2tCeVNpemUiLCJjYWxjdWxhdGVTdG9ja0J5U2l6ZSIsInVwZGF0ZUludmVudG9yeSIsInN0b2NrRGF0YSIsInVwZGF0ZU9iaiIsInNpemUiLCJjb2xvciIsInJlc3VsdCIsImZvckVhY2giLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsImN1cnJlbnRTdG9jayIsInJlcXVlc3RlZCIsImF2YWlsYWJsZSIsIm5ld1N0b2NrIiwidXBkYXRlZFByb2R1Y3QiLCJpbnZlbnRvcnlEZWR1Y3RlZCIsImdldE1haW50ZW5hbmNlU2V0dGluZ3MiLCJpc19tYWludGVuYW5jZV9tb2RlIiwiZHJvcF9kYXRlIiwibWFpbnRlbmFuY2VfbWVzc2FnZSIsInVwZGF0ZU1haW50ZW5hbmNlU2V0dGluZ3MiLCJzZXR0aW5ncyIsInVwZGF0ZVJlc3VsdCIsInVwZGF0ZUVycm9yIiwiaW5zZXJ0UmVzdWx0IiwiaW5zZXJ0RXJyb3IiLCJnZXRDdXN0b21lcnMiLCJhZGRDdXN0b21lciIsImN1c3RvbWVyRGF0YSIsImN1c3RvbWVyIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0ciIsImVtYWlsIiwicGhvbmUiLCJhZGRyZXNzIiwiY2l0eSIsIndpbGF5YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseDatabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validation.ts":
/*!*******************************!*\
  !*** ./src/lib/validation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationUtils: () => (/* binding */ ValidationUtils)\n/* harmony export */ });\n// Input validation and sanitization utilities\nclass ValidationUtils {\n    // Sanitize HTML input to prevent XSS\n    static sanitizeHtml(input) {\n        if (typeof input !== \"string\") return \"\";\n        return input.replace(/[<>]/g, \"\") // Remove < and >\n        .replace(/javascript:/gi, \"\") // Remove javascript: protocol\n        .replace(/on\\w+=/gi, \"\") // Remove event handlers\n        .trim();\n    }\n    // Validate email format\n    static isValidEmail(email) {\n        if (typeof email !== \"string\") return false;\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }\n    // Validate phone number (basic)\n    static isValidPhone(phone) {\n        if (typeof phone !== \"string\") return false;\n        const phoneRegex = /^[\\+]?[0-9\\s\\-\\(\\)]{8,}$/;\n        return phoneRegex.test(phone.trim());\n    }\n    // Validate required fields\n    static validateRequired(data, fields) {\n        const missingFields = [];\n        for (const field of fields){\n            if (!data[field] || typeof data[field] === \"string\" && data[field].trim() === \"\") {\n                missingFields.push(field);\n            }\n        }\n        return {\n            isValid: missingFields.length === 0,\n            missingFields\n        };\n    }\n    // Validate string length\n    static validateLength(input, min, max) {\n        if (typeof input !== \"string\") return false;\n        const length = input.trim().length;\n        return length >= min && length <= max;\n    }\n    // Validate numeric input\n    static isValidNumber(input, min, max) {\n        const num = Number(input);\n        if (isNaN(num)) return false;\n        if (min !== undefined && num < min) return false;\n        if (max !== undefined && num > max) return false;\n        return true;\n    }\n    // Sanitize product data\n    static sanitizeProductData(data) {\n        return {\n            ...data,\n            name: this.sanitizeHtml(data.name || \"\"),\n            description: this.sanitizeHtml(data.description || \"\"),\n            category: this.sanitizeHtml(data.category || \"\"),\n            price: this.isValidNumber(data.price, 0, 999999) ? Number(data.price) : 0,\n            stock: data.stock || {},\n            image: this.sanitizeHtml(data.image || \"\"),\n            colors: Array.isArray(data.colors) ? data.colors.map((c)=>this.sanitizeHtml(c)) : [],\n            sizes: Array.isArray(data.sizes) ? data.sizes.map((s)=>this.sanitizeHtml(s)) : []\n        };\n    }\n    // Sanitize order data\n    static sanitizeOrderData(data) {\n        return {\n            ...data,\n            customerName: this.sanitizeHtml(data.customerName || \"\"),\n            customerEmail: this.isValidEmail(data.customerEmail) ? data.customerEmail.trim() : \"\",\n            customerPhone: this.isValidPhone(data.customerPhone) ? data.customerPhone.trim() : \"\",\n            customerAddress: this.sanitizeHtml(data.customerAddress || \"\"),\n            productName: this.sanitizeHtml(data.productName || \"\"),\n            selectedSize: this.sanitizeHtml(data.selectedSize || \"\"),\n            selectedColor: this.sanitizeHtml(data.selectedColor || \"\"),\n            notes: this.sanitizeHtml(data.notes || \"\"),\n            quantity: this.isValidNumber(data.quantity, 1, 100) ? Number(data.quantity) : 1,\n            total: this.isValidNumber(data.total, 0, 999999) ? Number(data.total) : 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2xpYi92YWxpZGF0aW9uLnRzPzQ2MGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW5wdXQgdmFsaWRhdGlvbiBhbmQgc2FuaXRpemF0aW9uIHV0aWxpdGllc1xyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblV0aWxzIHtcclxuICAvLyBTYW5pdGl6ZSBIVE1MIGlucHV0IHRvIHByZXZlbnQgWFNTXHJcbiAgc3RhdGljIHNhbml0aXplSHRtbChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIHJldHVybiBpbnB1dFxyXG4gICAgICAucmVwbGFjZSgvWzw+XS9nLCAnJykgLy8gUmVtb3ZlIDwgYW5kID5cclxuICAgICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gUmVtb3ZlIGphdmFzY3JpcHQ6IHByb3RvY29sXHJcbiAgICAgIC5yZXBsYWNlKC9vblxcdys9L2dpLCAnJykgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIC50cmltKCk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXRcclxuICBzdGF0aWMgaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgZW1haWwgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XHJcbiAgICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsLnRyaW0oKSk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXIgKGJhc2ljKVxyXG4gIHN0YXRpYyBpc1ZhbGlkUGhvbmUocGhvbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHR5cGVvZiBwaG9uZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IHBob25lUmVnZXggPSAvXltcXCtdP1swLTlcXHNcXC1cXChcXCldezgsfSQvO1xyXG4gICAgcmV0dXJuIHBob25lUmVnZXgudGVzdChwaG9uZS50cmltKCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgc3RhdGljIHZhbGlkYXRlUmVxdWlyZWQoZGF0YTogYW55LCBmaWVsZHM6IHN0cmluZ1tdKTogeyBpc1ZhbGlkOiBib29sZWFuOyBtaXNzaW5nRmllbGRzOiBzdHJpbmdbXSB9IHtcclxuICAgIGNvbnN0IG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XHJcbiAgICAgIGlmICghZGF0YVtmaWVsZF0gfHwgKHR5cGVvZiBkYXRhW2ZpZWxkXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtmaWVsZF0udHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICBtaXNzaW5nRmllbGRzLnB1c2goZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmFsaWQ6IG1pc3NpbmdGaWVsZHMubGVuZ3RoID09PSAwLFxyXG4gICAgICBtaXNzaW5nRmllbGRzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgc3RyaW5nIGxlbmd0aFxyXG4gIHN0YXRpYyB2YWxpZGF0ZUxlbmd0aChpbnB1dDogc3RyaW5nLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC50cmltKCkubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGxlbmd0aCA+PSBtaW4gJiYgbGVuZ3RoIDw9IG1heDtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIG51bWVyaWMgaW5wdXRcclxuICBzdGF0aWMgaXNWYWxpZE51bWJlcihpbnB1dDogYW55LCBtaW4/OiBudW1iZXIsIG1heD86IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgbnVtID0gTnVtYmVyKGlucHV0KTtcclxuICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbnVtIDwgbWluKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbnVtID4gbWF4KSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIHByb2R1Y3QgZGF0YVxyXG4gIHN0YXRpYyBzYW5pdGl6ZVByb2R1Y3REYXRhKGRhdGE6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICBuYW1lOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLm5hbWUgfHwgJycpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyksXHJcbiAgICAgIGNhdGVnb3J5OiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmNhdGVnb3J5IHx8ICcnKSxcclxuICAgICAgcHJpY2U6IHRoaXMuaXNWYWxpZE51bWJlcihkYXRhLnByaWNlLCAwLCA5OTk5OTkpID8gTnVtYmVyKGRhdGEucHJpY2UpIDogMCxcclxuICAgICAgc3RvY2s6IGRhdGEuc3RvY2sgfHwge30sXHJcbiAgICAgIGltYWdlOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmltYWdlIHx8ICcnKSxcclxuICAgICAgY29sb3JzOiBBcnJheS5pc0FycmF5KGRhdGEuY29sb3JzKSA/IGRhdGEuY29sb3JzLm1hcCgoYzogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChjKSkgOiBbXSxcclxuICAgICAgc2l6ZXM6IEFycmF5LmlzQXJyYXkoZGF0YS5zaXplcykgPyBkYXRhLnNpemVzLm1hcCgoczogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChzKSkgOiBbXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIG9yZGVyIGRhdGFcclxuICBzdGF0aWMgc2FuaXRpemVPcmRlckRhdGEoZGF0YTogYW55KTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmRhdGEsXHJcbiAgICAgIGN1c3RvbWVyTmFtZTogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5jdXN0b21lck5hbWUgfHwgJycpLFxyXG4gICAgICBjdXN0b21lckVtYWlsOiB0aGlzLmlzVmFsaWRFbWFpbChkYXRhLmN1c3RvbWVyRW1haWwpID8gZGF0YS5jdXN0b21lckVtYWlsLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lclBob25lOiB0aGlzLmlzVmFsaWRQaG9uZShkYXRhLmN1c3RvbWVyUGhvbmUpID8gZGF0YS5jdXN0b21lclBob25lLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lckFkZHJlc3M6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuY3VzdG9tZXJBZGRyZXNzIHx8ICcnKSxcclxuICAgICAgcHJvZHVjdE5hbWU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEucHJvZHVjdE5hbWUgfHwgJycpLFxyXG4gICAgICBzZWxlY3RlZFNpemU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuc2VsZWN0ZWRTaXplIHx8ICcnKSxcclxuICAgICAgc2VsZWN0ZWRDb2xvcjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5zZWxlY3RlZENvbG9yIHx8ICcnKSxcclxuICAgICAgbm90ZXM6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEubm90ZXMgfHwgJycpLFxyXG4gICAgICBxdWFudGl0eTogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEucXVhbnRpdHksIDEsIDEwMCkgPyBOdW1iZXIoZGF0YS5xdWFudGl0eSkgOiAxLFxyXG4gICAgICB0b3RhbDogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEudG90YWwsIDAsIDk5OTk5OSkgPyBOdW1iZXIoZGF0YS50b3RhbCkgOiAwXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvblV0aWxzIiwic2FuaXRpemVIdG1sIiwiaW5wdXQiLCJyZXBsYWNlIiwidHJpbSIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwiZW1haWxSZWdleCIsInRlc3QiLCJpc1ZhbGlkUGhvbmUiLCJwaG9uZSIsInBob25lUmVnZXgiLCJ2YWxpZGF0ZVJlcXVpcmVkIiwiZGF0YSIsImZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWVsZCIsInB1c2giLCJpc1ZhbGlkIiwibGVuZ3RoIiwidmFsaWRhdGVMZW5ndGgiLCJtaW4iLCJtYXgiLCJpc1ZhbGlkTnVtYmVyIiwibnVtIiwiTnVtYmVyIiwiaXNOYU4iLCJ1bmRlZmluZWQiLCJzYW5pdGl6ZVByb2R1Y3REYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcmljZSIsInN0b2NrIiwiaW1hZ2UiLCJjb2xvcnMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJjIiwic2l6ZXMiLCJzIiwic2FuaXRpemVPcmRlckRhdGEiLCJjdXN0b21lck5hbWUiLCJjdXN0b21lckVtYWlsIiwiY3VzdG9tZXJQaG9uZSIsImN1c3RvbWVyQWRkcmVzcyIsInByb2R1Y3ROYW1lIiwic2VsZWN0ZWRTaXplIiwic2VsZWN0ZWRDb2xvciIsIm5vdGVzIiwicXVhbnRpdHkiLCJ0b3RhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5CObsidian%20wear%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();