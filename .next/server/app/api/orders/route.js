"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Desktop_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/route.ts */ \"(rsc)/./src/app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Desktop\\\\projectt\\\\src\\\\app\\\\api\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Desktop_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rlc2t0b3AlNUNwcm9qZWN0dCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSFAlNUNEZXNrdG9wJTVDcHJvamVjdHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8/MjMwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXHByb2plY3R0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29yZGVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yZGVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcSFBcXFxcRGVza3RvcFxcXFxwcm9qZWN0dFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxvcmRlcnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvb3JkZXJzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/orders/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\");\n/* harmony import */ var _lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authMiddleware */ \"(rsc)/./src/lib/authMiddleware.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./src/lib/validation.ts\");\n/* harmony import */ var _lib_emailService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/emailService */ \"(rsc)/./src/lib/emailService.ts\");\n\n\n\n\n\n// Ensure we use Node.js runtime for Supabase compatibility\nconst runtime = \"nodejs\";\n// GET /api/orders - Get all orders\nasync function GET() {\n    try {\n        console.log(\"Orders API: GET request started\");\n        // Check if Supabase is available\n        if (false) {}\n        const orders = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrders)();\n        console.log(\"Orders API: GET request - returning\", orders.length, \"orders\");\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: orders,\n            count: orders.length,\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: GET error:\", error);\n        console.error(\"Orders API: Error details:\", {\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            stack: error instanceof Error ? error.stack : undefined\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch orders\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/orders - Create new order (PROTECTED)\nconst POST = (0,_lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__.withAuth)(async (request)=>{\n    try {\n        const orderData = await request.json();\n        console.log(\"Orders API: Received order data:\", orderData);\n        // Validate required fields\n        const validation = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.validateRequired(orderData, [\n            \"customerName\",\n            \"productId\",\n            \"total\"\n        ]);\n        if (!validation.isValid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: `Missing required fields: ${validation.missingFields.join(\", \")}`\n            }, {\n                status: 400\n            });\n        }\n        // Validate email if provided\n        if (orderData.customerEmail && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidEmail(orderData.customerEmail)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid email format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate phone if provided\n        if (orderData.customerPhone && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidPhone(orderData.customerPhone)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid phone number format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate numeric fields\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.total, 0, 999999)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Total must be a valid number between 0 and 999999\"\n            }, {\n                status: 400\n            });\n        }\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.quantity, 1, 100)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Quantity must be between 1 and 100\"\n            }, {\n                status: 400\n            });\n        }\n        // Sanitize order data\n        const sanitizedData = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.sanitizeOrderData(orderData);\n        // Generate unique ID and create complete Order object\n        const newOrder = {\n            id: `ORD-${Date.now()}`,\n            customerName: sanitizedData.customerName,\n            customerEmail: sanitizedData.customerEmail,\n            customerPhone: sanitizedData.customerPhone,\n            customerAddress: sanitizedData.customerAddress,\n            customerCity: sanitizedData.customerCity || \"\",\n            wilayaId: sanitizedData.wilayaId || 0,\n            wilayaName: sanitizedData.wilayaName || \"\",\n            productId: sanitizedData.productId,\n            productName: sanitizedData.productName,\n            productImage: sanitizedData.productImage || \"\",\n            selectedSize: sanitizedData.selectedSize,\n            selectedColor: sanitizedData.selectedColor,\n            quantity: sanitizedData.quantity,\n            subtotal: sanitizedData.subtotal || 0,\n            shippingCost: sanitizedData.shippingCost || 0,\n            total: sanitizedData.total,\n            shippingType: sanitizedData.shippingType || \"homeDelivery\",\n            paymentMethod: sanitizedData.paymentMethod || \"cod\",\n            paymentStatus: \"pending\",\n            status: \"pending\",\n            orderDate: new Date(),\n            notes: sanitizedData.notes,\n            trackingNumber: \"\",\n            estimatedDelivery: sanitizedData.estimatedDelivery || \"\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        const addedOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.addOrder)(newOrder);\n        // Automatically deduct stock from inventory\n        const stockDeducted = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.deductStockFromOrder)(newOrder);\n        if (!stockDeducted) {\n            console.warn(\"Orders API: Failed to deduct stock for order:\", newOrder.id);\n        // Note: We still return success for the order, but log the stock issue\n        }\n        // Send order confirmation email (async, don't wait for it)\n        if (addedOrder.customerEmail) {\n            (0,_lib_emailService__WEBPACK_IMPORTED_MODULE_4__.sendOrderConfirmationEmail)(addedOrder).catch((error)=>{\n                console.error(\"Orders API: Failed to send confirmation email:\", error);\n            // Don't fail the order creation if email fails\n            });\n        }\n        console.log(\"Orders API: POST request - created order:\", newOrder.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: addedOrder,\n            message: \"Order created successfully\",\n            stockDeducted: stockDeducted,\n            timestamp: Date.now()\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Orders API: POST error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to create order\"\n        }, {\n            status: 500\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXdCLGdCQUFnQixNQUFNckUsMkVBQW9CQSxDQUFDNkM7UUFDakQsSUFBSSxDQUFDd0IsZUFBZTtZQUNsQi9ELFFBQVFnRSxJQUFJLENBQUMsaURBQWlEekIsU0FBU0MsRUFBRTtRQUN6RSx1RUFBdUU7UUFDekU7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSXNCLFdBQVdoQyxhQUFhLEVBQUU7WUFDNUJqQyw2RUFBMEJBLENBQUNpRSxZQUFZRyxLQUFLLENBQUMzRCxDQUFBQTtnQkFDM0NOLFFBQVFNLEtBQUssQ0FBQyxrREFBa0RBO1lBQ2hFLCtDQUErQztZQUNqRDtRQUNGO1FBRUFOLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNzQyxTQUFTQyxFQUFFO1FBRXBFLE9BQU9qRCxrRkFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUSSxNQUFNa0Q7WUFDTjdDLFNBQVM7WUFDVDhDLGVBQWVBO1lBQ2ZqRCxXQUFXQyxLQUFLQyxHQUFHO1FBQ3JCLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CLEVBQUUsT0FBT0gsT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPZixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPRixPQUFPO1FBQXlCLEdBQ2xEO1lBQUVHLFFBQVE7UUFBSTtJQUVsQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzPzhkMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZXRPcmRlcnMsIGFkZE9yZGVyLCBkZWR1Y3RTdG9ja0Zyb21PcmRlciB9IGZyb20gJ0AvbGliL3N1cGFiYXNlRGF0YWJhc2UnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICdAL2xpYi9hdXRoTWlkZGxld2FyZSc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9uJztcbmltcG9ydCB7IHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIH0gZnJvbSAnQC9saWIvZW1haWxTZXJ2aWNlJztcblxuLy8gRW5zdXJlIHdlIHVzZSBOb2RlLmpzIHJ1bnRpbWUgZm9yIFN1cGFiYXNlIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XG5cbi8vIEdFVCAvYXBpL29yZGVycyAtIEdldCBhbGwgb3JkZXJzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBHRVQgcmVxdWVzdCBzdGFydGVkJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXG4gICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhdGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBnZXRPcmRlcnMoKTtcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogR0VUIHJlcXVlc3QgLSByZXR1cm5pbmcnLCBvcmRlcnMubGVuZ3RoLCAnb3JkZXJzJyk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBvcmRlcnMsXG4gICAgICBjb3VudDogb3JkZXJzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVycyBBUEk6IEdFVCBlcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG9yZGVycycsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBQT1NUIC9hcGkvb3JkZXJzIC0gQ3JlYXRlIG5ldyBvcmRlciAoUFJPVEVDVEVEKVxuZXhwb3J0IGNvbnN0IFBPU1QgPSB3aXRoQXV0aChhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmRlckRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogUmVjZWl2ZWQgb3JkZXIgZGF0YTonLCBvcmRlckRhdGEpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBWYWxpZGF0aW9uVXRpbHMudmFsaWRhdGVSZXF1aXJlZChvcmRlckRhdGEsIFsnY3VzdG9tZXJOYW1lJywgJ3Byb2R1Y3RJZCcsICd0b3RhbCddKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiAke3ZhbGlkYXRpb24ubWlzc2luZ0ZpZWxkcy5qb2luKCcsICcpfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGVtYWlsIGlmIHByb3ZpZGVkXG4gICAgaWYgKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsICYmICFWYWxpZGF0aW9uVXRpbHMuaXNWYWxpZEVtYWlsKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgcGhvbmUgaWYgcHJvdmlkZWRcbiAgICBpZiAob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUgJiYgIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkUGhvbmUob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBwaG9uZSBudW1iZXIgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbnVtZXJpYyBmaWVsZHNcbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS50b3RhbCwgMCwgOTk5OTk5KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1RvdGFsIG11c3QgYmUgYSB2YWxpZCBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTk5OTknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS5xdWFudGl0eSwgMSwgMTAwKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1F1YW50aXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMDAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBvcmRlciBkYXRhXG4gICAgY29uc3Qgc2FuaXRpemVkRGF0YSA9IFZhbGlkYXRpb25VdGlscy5zYW5pdGl6ZU9yZGVyRGF0YShvcmRlckRhdGEpO1xuXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIElEIGFuZCBjcmVhdGUgY29tcGxldGUgT3JkZXIgb2JqZWN0XG4gICAgY29uc3QgbmV3T3JkZXI6IE9yZGVyID0ge1xuICAgICAgaWQ6IGBPUkQtJHtEYXRlLm5vdygpfWAsXG4gICAgICBjdXN0b21lck5hbWU6IHNhbml0aXplZERhdGEuY3VzdG9tZXJOYW1lLFxuICAgICAgY3VzdG9tZXJFbWFpbDogc2FuaXRpemVkRGF0YS5jdXN0b21lckVtYWlsLFxuICAgICAgY3VzdG9tZXJQaG9uZTogc2FuaXRpemVkRGF0YS5jdXN0b21lclBob25lLFxuICAgICAgY3VzdG9tZXJBZGRyZXNzOiBzYW5pdGl6ZWREYXRhLmN1c3RvbWVyQWRkcmVzcyxcbiAgICAgIGN1c3RvbWVyQ2l0eTogc2FuaXRpemVkRGF0YS5jdXN0b21lckNpdHkgfHwgJycsXG4gICAgICB3aWxheWFJZDogc2FuaXRpemVkRGF0YS53aWxheWFJZCB8fCAwLFxuICAgICAgd2lsYXlhTmFtZTogc2FuaXRpemVkRGF0YS53aWxheWFOYW1lIHx8ICcnLFxuICAgICAgcHJvZHVjdElkOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3ROYW1lLFxuICAgICAgcHJvZHVjdEltYWdlOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJbWFnZSB8fCAnJyxcbiAgICAgIHNlbGVjdGVkU2l6ZTogc2FuaXRpemVkRGF0YS5zZWxlY3RlZFNpemUsXG4gICAgICBzZWxlY3RlZENvbG9yOiBzYW5pdGl6ZWREYXRhLnNlbGVjdGVkQ29sb3IsXG4gICAgICBxdWFudGl0eTogc2FuaXRpemVkRGF0YS5xdWFudGl0eSxcbiAgICAgIHN1YnRvdGFsOiBzYW5pdGl6ZWREYXRhLnN1YnRvdGFsIHx8IDAsXG4gICAgICBzaGlwcGluZ0Nvc3Q6IHNhbml0aXplZERhdGEuc2hpcHBpbmdDb3N0IHx8IDAsXG4gICAgICB0b3RhbDogc2FuaXRpemVkRGF0YS50b3RhbCxcbiAgICAgIHNoaXBwaW5nVHlwZTogc2FuaXRpemVkRGF0YS5zaGlwcGluZ1R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXG4gICAgICBwYXltZW50TWV0aG9kOiBzYW5pdGl6ZWREYXRhLnBheW1lbnRNZXRob2QgfHwgJ2NvZCcsXG4gICAgICBwYXltZW50U3RhdHVzOiAncGVuZGluZycsXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgIG9yZGVyRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIG5vdGVzOiBzYW5pdGl6ZWREYXRhLm5vdGVzLFxuICAgICAgdHJhY2tpbmdOdW1iZXI6ICcnLFxuICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IHNhbml0aXplZERhdGEuZXN0aW1hdGVkRGVsaXZlcnkgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkZWRPcmRlciA9IGF3YWl0IGFkZE9yZGVyKG5ld09yZGVyKTtcbiAgICBcbiAgICAvLyBBdXRvbWF0aWNhbGx5IGRlZHVjdCBzdG9jayBmcm9tIGludmVudG9yeVxuICAgIGNvbnN0IHN0b2NrRGVkdWN0ZWQgPSBhd2FpdCBkZWR1Y3RTdG9ja0Zyb21PcmRlcihuZXdPcmRlcik7XG4gICAgaWYgKCFzdG9ja0RlZHVjdGVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ09yZGVycyBBUEk6IEZhaWxlZCB0byBkZWR1Y3Qgc3RvY2sgZm9yIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICAgIC8vIE5vdGU6IFdlIHN0aWxsIHJldHVybiBzdWNjZXNzIGZvciB0aGUgb3JkZXIsIGJ1dCBsb2cgdGhlIHN0b2NrIGlzc3VlXG4gICAgfVxuICAgIFxuICAgIC8vIFNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIChhc3luYywgZG9uJ3Qgd2FpdCBmb3IgaXQpXG4gICAgaWYgKGFkZGVkT3JkZXIuY3VzdG9tZXJFbWFpbCkge1xuICAgICAgc2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwoYWRkZWRPcmRlcikuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBGYWlsZWQgdG8gc2VuZCBjb25maXJtYXRpb24gZW1haWw6JywgZXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSBvcmRlciBjcmVhdGlvbiBpZiBlbWFpbCBmYWlsc1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBQT1NUIHJlcXVlc3QgLSBjcmVhdGVkIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFkZGVkT3JkZXIsXG4gICAgICBtZXNzYWdlOiAnT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgc3RvY2tEZWR1Y3RlZDogc3RvY2tEZWR1Y3RlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogUE9TVCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIG9yZGVyJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0T3JkZXJzIiwiYWRkT3JkZXIiLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsIndpdGhBdXRoIiwiVmFsaWRhdGlvblV0aWxzIiwic2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwiLCJydW50aW1lIiwiR0VUIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJvcmRlcnMiLCJsZW5ndGgiLCJkYXRhIiwiY291bnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibWVzc2FnZSIsIkVycm9yIiwic3RhY2siLCJ1bmRlZmluZWQiLCJkZXRhaWxzIiwiUE9TVCIsInJlcXVlc3QiLCJvcmRlckRhdGEiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVSZXF1aXJlZCIsImlzVmFsaWQiLCJtaXNzaW5nRmllbGRzIiwiam9pbiIsImN1c3RvbWVyRW1haWwiLCJpc1ZhbGlkRW1haWwiLCJjdXN0b21lclBob25lIiwiaXNWYWxpZFBob25lIiwiaXNWYWxpZE51bWJlciIsInRvdGFsIiwicXVhbnRpdHkiLCJzYW5pdGl6ZWREYXRhIiwic2FuaXRpemVPcmRlckRhdGEiLCJuZXdPcmRlciIsImlkIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJBZGRyZXNzIiwiY3VzdG9tZXJDaXR5Iiwid2lsYXlhSWQiLCJ3aWxheWFOYW1lIiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0SW1hZ2UiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwic3VidG90YWwiLCJzaGlwcGluZ0Nvc3QiLCJzaGlwcGluZ1R5cGUiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFN0YXR1cyIsIm9yZGVyRGF0ZSIsIm5vdGVzIiwidHJhY2tpbmdOdW1iZXIiLCJlc3RpbWF0ZWREZWxpdmVyeSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImFkZGVkT3JkZXIiLCJzdG9ja0RlZHVjdGVkIiwid2FybiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authMiddleware.ts":
/*!***********************************!*\
  !*** ./src/lib/authMiddleware.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateRequest: () => (/* binding */ authenticateRequest),\n/* harmony export */   generateApiToken: () => (/* binding */ generateApiToken),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _rateLimiter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rateLimiter */ \"(rsc)/./src/lib/rateLimiter.ts\");\n\n\n// Simple authentication middleware for API routes\nfunction authenticateRequest(request) {\n    // Get authorization header\n    const authHeader = request.headers.get(\"authorization\");\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return false;\n    }\n    // Extract token\n    const token = authHeader.substring(7);\n    // Simple token validation (in production, use JWT or proper session validation)\n    const expectedToken = process.env.API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n    return token === expectedToken;\n}\n// Middleware wrapper for protected API routes\nfunction withAuth(handler) {\n    return async (request, ...args)=>{\n        // Skip auth for public routes\n        const url = new URL(request.url);\n        const publicRoutes = [\n            \"/api/maintenance\",\n            \"/api/test-db\",\n            \"/api/test-supabase\"\n        ];\n        if (publicRoutes.some((route)=>url.pathname.startsWith(route))) {\n            return handler(request, ...args);\n        }\n        // Get client IP for rate limiting\n        const clientIP = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        // Check rate limit\n        const rateLimitResult = (0,_rateLimiter__WEBPACK_IMPORTED_MODULE_1__.checkRateLimit)(clientIP, _rateLimiter__WEBPACK_IMPORTED_MODULE_1__.apiRateLimiter);\n        if (!rateLimitResult.allowed) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Too Many Requests\",\n                message: \"Rate limit exceeded. Please try again later.\"\n            }, {\n                status: 429,\n                headers: rateLimitResult.headers\n            });\n        }\n        // Check authentication\n        if (!authenticateRequest(request)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Unauthorized\",\n                message: \"Authentication required\"\n            }, {\n                status: 401,\n                headers: rateLimitResult.headers\n            });\n        }\n        return handler(request, ...args);\n    };\n}\n// Generate API token for admin\nfunction generateApiToken() {\n    return process.env.API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGhNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ087QUFFL0Qsa0RBQWtEO0FBQzNDLFNBQVNHLG9CQUFvQkMsT0FBb0I7SUFDdEQsMkJBQTJCO0lBQzNCLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBRXZDLElBQUksQ0FBQ0YsY0FBYyxDQUFDQSxXQUFXRyxVQUFVLENBQUMsWUFBWTtRQUNwRCxPQUFPO0lBQ1Q7SUFFQSxnQkFBZ0I7SUFDaEIsTUFBTUMsUUFBUUosV0FBV0ssU0FBUyxDQUFDO0lBRW5DLGdGQUFnRjtJQUNoRixNQUFNQyxnQkFBZ0JDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0lBRXBELE9BQU9MLFVBQVVFO0FBQ25CO0FBRUEsOENBQThDO0FBQ3ZDLFNBQVNJLFNBQVNDLE9BQWlCO0lBQ3hDLE9BQU8sT0FBT1osU0FBc0IsR0FBR2E7UUFDckMsOEJBQThCO1FBQzlCLE1BQU1DLE1BQU0sSUFBSUMsSUFBSWYsUUFBUWMsR0FBRztRQUMvQixNQUFNRSxlQUFlO1lBQUM7WUFBb0I7WUFBZ0I7U0FBcUI7UUFFL0UsSUFBSUEsYUFBYUMsSUFBSSxDQUFDQyxDQUFBQSxRQUFTSixJQUFJSyxRQUFRLENBQUNmLFVBQVUsQ0FBQ2MsU0FBUztZQUM5RCxPQUFPTixRQUFRWixZQUFZYTtRQUM3QjtRQUVBLGtDQUFrQztRQUNsQyxNQUFNTyxXQUFXcEIsUUFBUXFCLEVBQUUsSUFBSXJCLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQjtRQUV6RSxtQkFBbUI7UUFDbkIsTUFBTW1CLGtCQUFrQnpCLDREQUFjQSxDQUFDdUIsVUFBVXRCLHdEQUFjQTtRQUMvRCxJQUFJLENBQUN3QixnQkFBZ0JDLE9BQU8sRUFBRTtZQUM1QixPQUFPM0Isa0ZBQVlBLENBQUM0QixJQUFJLENBQ3RCO2dCQUNFQyxTQUFTO2dCQUNUQyxPQUFPO2dCQUNQQyxTQUFTO1lBQ1gsR0FDQTtnQkFDRUMsUUFBUTtnQkFDUjFCLFNBQVNvQixnQkFBZ0JwQixPQUFPO1lBQ2xDO1FBRUo7UUFFQSx1QkFBdUI7UUFDdkIsSUFBSSxDQUFDSCxvQkFBb0JDLFVBQVU7WUFDakMsT0FBT0osa0ZBQVlBLENBQUM0QixJQUFJLENBQ3RCO2dCQUNFQyxTQUFTO2dCQUNUQyxPQUFPO2dCQUNQQyxTQUFTO1lBQ1gsR0FDQTtnQkFDRUMsUUFBUTtnQkFDUjFCLFNBQVNvQixnQkFBZ0JwQixPQUFPO1lBQ2xDO1FBRUo7UUFFQSxPQUFPVSxRQUFRWixZQUFZYTtJQUM3QjtBQUNGO0FBRUEsK0JBQStCO0FBQ3hCLFNBQVNnQjtJQUNkLE9BQU9yQixRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtBQUN2QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL2F1dGhNaWRkbGV3YXJlLnRzP2IyNjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY2hlY2tSYXRlTGltaXQsIGFwaVJhdGVMaW1pdGVyIH0gZnJvbSAnLi9yYXRlTGltaXRlcic7XHJcblxyXG4vLyBTaW1wbGUgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSBmb3IgQVBJIHJvdXRlc1xyXG5leHBvcnQgZnVuY3Rpb24gYXV0aGVudGljYXRlUmVxdWVzdChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IGJvb2xlYW4ge1xyXG4gIC8vIEdldCBhdXRob3JpemF0aW9uIGhlYWRlclxyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgXHJcbiAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0cmFjdCB0b2tlblxyXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XHJcbiAgXHJcbiAgLy8gU2ltcGxlIHRva2VuIHZhbGlkYXRpb24gKGluIHByb2R1Y3Rpb24sIHVzZSBKV1Qgb3IgcHJvcGVyIHNlc3Npb24gdmFsaWRhdGlvbilcclxuICBjb25zdCBleHBlY3RlZFRva2VuID0gcHJvY2Vzcy5lbnYuQVBJX0FVVEhfVE9LRU4gfHwgJ29ic2lkaWFuLWFwaS10b2tlbi0yMDI1JztcclxuICBcclxuICByZXR1cm4gdG9rZW4gPT09IGV4cGVjdGVkVG9rZW47XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgd3JhcHBlciBmb3IgcHJvdGVjdGVkIEFQSSByb3V0ZXNcclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoKGhhbmRsZXI6IEZ1bmN0aW9uKSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgLi4uYXJnczogYW55W10pID0+IHtcclxuICAgIC8vIFNraXAgYXV0aCBmb3IgcHVibGljIHJvdXRlc1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCBwdWJsaWNSb3V0ZXMgPSBbJy9hcGkvbWFpbnRlbmFuY2UnLCAnL2FwaS90ZXN0LWRiJywgJy9hcGkvdGVzdC1zdXBhYmFzZSddO1xyXG4gICAgXHJcbiAgICBpZiAocHVibGljUm91dGVzLnNvbWUocm91dGUgPT4gdXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKSkge1xyXG4gICAgICByZXR1cm4gaGFuZGxlcihyZXF1ZXN0LCAuLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgY2xpZW50IElQIGZvciByYXRlIGxpbWl0aW5nXHJcbiAgICBjb25zdCBjbGllbnRJUCA9IHJlcXVlc3QuaXAgfHwgcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayByYXRlIGxpbWl0XHJcbiAgICBjb25zdCByYXRlTGltaXRSZXN1bHQgPSBjaGVja1JhdGVMaW1pdChjbGllbnRJUCwgYXBpUmF0ZUxpbWl0ZXIpO1xyXG4gICAgaWYgKCFyYXRlTGltaXRSZXN1bHQuYWxsb3dlZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgIGVycm9yOiAnVG9vIE1hbnkgUmVxdWVzdHMnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1JhdGUgbGltaXQgZXhjZWVkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdGF0dXM6IDQyOSxcclxuICAgICAgICAgIGhlYWRlcnM6IHJhdGVMaW1pdFJlc3VsdC5oZWFkZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uXHJcbiAgICBpZiAoIWF1dGhlbnRpY2F0ZVJlcXVlc3QocmVxdWVzdCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIHN0YXR1czogNDAxLFxyXG4gICAgICAgICAgaGVhZGVyczogcmF0ZUxpbWl0UmVzdWx0LmhlYWRlcnNcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgLi4uYXJncyk7XHJcbiAgfTtcclxufVxyXG5cclxuLy8gR2VuZXJhdGUgQVBJIHRva2VuIGZvciBhZG1pblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBcGlUb2tlbigpOiBzdHJpbmcge1xyXG4gIHJldHVybiBwcm9jZXNzLmVudi5BUElfQVVUSF9UT0tFTiB8fCAnb2JzaWRpYW4tYXBpLXRva2VuLTIwMjUnO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjaGVja1JhdGVMaW1pdCIsImFwaVJhdGVMaW1pdGVyIiwiYXV0aGVudGljYXRlUmVxdWVzdCIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInN1YnN0cmluZyIsImV4cGVjdGVkVG9rZW4iLCJwcm9jZXNzIiwiZW52IiwiQVBJX0FVVEhfVE9LRU4iLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJhcmdzIiwidXJsIiwiVVJMIiwicHVibGljUm91dGVzIiwic29tZSIsInJvdXRlIiwicGF0aG5hbWUiLCJjbGllbnRJUCIsImlwIiwicmF0ZUxpbWl0UmVzdWx0IiwiYWxsb3dlZCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIiwiZ2VuZXJhdGVBcGlUb2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authMiddleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/emailService.ts":
/*!*********************************!*\
  !*** ./src/lib/emailService.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendOrderConfirmationEmail: () => (/* binding */ sendOrderConfirmationEmail)\n/* harmony export */ });\nasync function sendOrderConfirmationEmail(order) {\n    try {\n        const emailData = {\n            to: order.customerEmail,\n            subject: \"Your Order Confirmation - OBSIDIAN WEAR\",\n            text: generateOrderConfirmationText(order),\n            html: generateOrderConfirmationHTML(order)\n        };\n        // Use the direct email sending logic instead of making an API call\n        const nodemailer = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n        // Create transporter with Gmail SMTP\n        const transporter = nodemailer.createTransport({\n            service: \"gmail\",\n            auth: {\n                user: process.env.GMAIL_USER,\n                pass: process.env.GMAIL_APP_PASSWORD\n            }\n        });\n        // Email options\n        const mailOptions = {\n            from: {\n                name: \"OBSIDIAN WEAR\",\n                address: process.env.GMAIL_USER || \"\"\n            },\n            to: emailData.to,\n            subject: emailData.subject,\n            text: emailData.text,\n            html: emailData.html\n        };\n        // Send email\n        const info = await transporter.sendMail(mailOptions);\n        console.log(\"Order confirmation email sent successfully:\", info.messageId);\n        return true;\n    } catch (error) {\n        console.error(\"Error sending order confirmation email:\", error);\n        return false;\n    }\n}\nfunction generateOrderConfirmationText(order) {\n    return `\r\nOrder Confirmation - OBSIDIAN WEAR\r\n\r\nDear ${order.customerName},\r\n\r\nThank you for your order! Your order has been confirmed and we'll start processing it immediately.\r\n\r\nOrder Details:\r\n- Order ID: #${order.id}\r\n- Date: ${new Date(order.orderDate).toLocaleDateString()}\r\n- Product: ${order.productName}\r\n- Size: ${order.selectedSize}\r\n- Color: ${order.selectedColor}\r\n- Quantity: ${order.quantity}\r\n- Total: ${order.total.toLocaleString()} DA\r\n\r\nShipping Information:\r\n- Shipping Type: ${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}\r\n- Wilaya: ${order.wilayaName}\r\n- City: ${order.customerCity}\r\n- Address: ${order.customerAddress}\r\n- Shipping Cost: ${order.shippingCost.toLocaleString()} DA\r\n\r\nPayment Method: ${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}\r\n\r\nWe will contact you soon to confirm the delivery details.\r\n\r\nBest regards,\r\nOBSIDIAN WEAR Team\r\n  `.trim();\n}\nfunction generateOrderConfirmationHTML(order) {\n    return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Order Confirmation - OBSIDIAN WEAR</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            line-height: 1.6;\r\n            color: #333;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n            padding: 20px;\r\n            background-color: #f4f4f4;\r\n        }\r\n        .container {\r\n            background-color: white;\r\n            padding: 30px;\r\n            border-radius: 10px;\r\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\r\n        }\r\n        .header {\r\n            text-align: center;\r\n            margin-bottom: 30px;\r\n            padding-bottom: 20px;\r\n            border-bottom: 2px solid #000;\r\n        }\r\n        .logo {\r\n            font-size: 24px;\r\n            font-weight: bold;\r\n            color: #000;\r\n            margin-bottom: 10px;\r\n        }\r\n        .order-id {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 10px 20px;\r\n            border-radius: 5px;\r\n            display: inline-block;\r\n            font-weight: bold;\r\n        }\r\n        .section {\r\n            margin-bottom: 25px;\r\n        }\r\n        .section h3 {\r\n            color: #000;\r\n            border-bottom: 1px solid #eee;\r\n            padding-bottom: 5px;\r\n        }\r\n        .order-details {\r\n            background-color: #f8f8f8;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n        }\r\n        .detail-row {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: 8px;\r\n        }\r\n        .detail-label {\r\n            font-weight: bold;\r\n            color: #666;\r\n        }\r\n        .total {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n            text-align: center;\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            margin-top: 20px;\r\n        }\r\n        .footer {\r\n            text-align: center;\r\n            margin-top: 30px;\r\n            padding-top: 20px;\r\n            border-top: 1px solid #eee;\r\n            color: #666;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <div class=\"logo\">OBSIDIAN WEAR</div>\r\n            <h1>Order Confirmation</h1>\r\n            <div class=\"order-id\">#${order.id}</div>\r\n        </div>\r\n\r\n        <p>Dear <strong>${order.customerName}</strong>,</p>\r\n        \r\n        <p>Thank you for your order! Your order has been confirmed and we'll start processing it immediately.</p>\r\n\r\n        <div class=\"section\">\r\n            <h3>Order Details</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Order ID:</span>\r\n                    <span>#${order.id}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Date:</span>\r\n                    <span>${new Date(order.orderDate).toLocaleDateString()}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Product:</span>\r\n                    <span>${order.productName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Size:</span>\r\n                    <span>${order.selectedSize}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Color:</span>\r\n                    <span>${order.selectedColor}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Quantity:</span>\r\n                    <span>${order.quantity}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Shipping Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Type:</span>\r\n                    <span>${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Wilaya:</span>\r\n                    <span>${order.wilayaName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">City:</span>\r\n                    <span>${order.customerCity}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Address:</span>\r\n                    <span>${order.customerAddress}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Cost:</span>\r\n                    <span>${order.shippingCost.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Payment Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Payment Method:</span>\r\n                    <span>${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Subtotal:</span>\r\n                    <span>${order.subtotal.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"total\">\r\n            Total: ${order.total.toLocaleString()} DA\r\n        </div>\r\n\r\n        <p>We will contact you soon to confirm the delivery details.</p>\r\n\r\n        <div class=\"footer\">\r\n            <p>Best regards,<br><strong>OBSIDIAN WEAR Team</strong></p>\r\n            <p>If you have any questions, please contact us.</p>\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>\r\n  `.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VWpCLEVBQUV2QyxNQUFNMEMsWUFBWSxLQUFLLGlCQUFpQixrQkFBa0IsWUFBWTs7OzswQkFJeEUsRUFBRTFDLE1BQU0yQyxVQUFVLENBQUM7Ozs7MEJBSW5CLEVBQUUzQyxNQUFNNEMsWUFBWSxDQUFDOzs7OzBCQUlyQixFQUFFNUMsTUFBTTZDLGVBQWUsQ0FBQzs7OzswQkFJeEIsRUFBRTdDLE1BQU04QyxZQUFZLENBQUNMLGNBQWMsR0FBRzs7Ozs7Ozs7OzswQkFVdEMsRUFBRXpDLE1BQU0rQyxhQUFhLEtBQUssUUFBUSxxQkFBcUIsZ0JBQWdCOzs7OzBCQUl2RSxFQUFFL0MsTUFBTWlELFFBQVEsQ0FBQ1IsY0FBYyxHQUFHOzs7Ozs7bUJBTXpDLEVBQUV6QyxNQUFNd0MsS0FBSyxDQUFDQyxjQUFjLEdBQUc7Ozs7Ozs7Ozs7OztFQVloRCxDQUFDLENBQUNPLElBQUk7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL2VtYWlsU2VydmljZS50cz80NWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtYWlsRGF0YSB7XHJcbiAgdG86IHN0cmluZztcclxuICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGh0bWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsKG9yZGVyOiBPcmRlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBlbWFpbERhdGE6IEVtYWlsRGF0YSA9IHtcclxuICAgICAgdG86IG9yZGVyLmN1c3RvbWVyRW1haWwsXHJcbiAgICAgIHN1YmplY3Q6ICdZb3VyIE9yZGVyIENvbmZpcm1hdGlvbiAtIE9CU0lESUFOIFdFQVInLFxyXG4gICAgICB0ZXh0OiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uVGV4dChvcmRlciksXHJcbiAgICAgIGh0bWw6IGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MKG9yZGVyKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXNlIHRoZSBkaXJlY3QgZW1haWwgc2VuZGluZyBsb2dpYyBpbnN0ZWFkIG9mIG1ha2luZyBhbiBBUEkgY2FsbFxyXG4gICAgY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdHJhbnNwb3J0ZXIgd2l0aCBHbWFpbCBTTVRQXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgc2VydmljZTogJ2dtYWlsJyxcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkdNQUlMX1VTRVIsXHJcbiAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuR01BSUxfQVBQX1BBU1NXT1JELFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRW1haWwgb3B0aW9uc1xyXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgIGZyb206IHtcclxuICAgICAgICBuYW1lOiAnT0JTSURJQU4gV0VBUicsXHJcbiAgICAgICAgYWRkcmVzczogcHJvY2Vzcy5lbnYuR01BSUxfVVNFUiB8fCAnJyxcclxuICAgICAgfSxcclxuICAgICAgdG86IGVtYWlsRGF0YS50byxcclxuICAgICAgc3ViamVjdDogZW1haWxEYXRhLnN1YmplY3QsXHJcbiAgICAgIHRleHQ6IGVtYWlsRGF0YS50ZXh0LFxyXG4gICAgICBodG1sOiBlbWFpbERhdGEuaHRtbCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCBlbWFpbFxyXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ09yZGVyIGNvbmZpcm1hdGlvbiBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseTonLCBpbmZvLm1lc3NhZ2VJZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0KG9yZGVyOiBPcmRlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuT3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUlxyXG5cclxuRGVhciAke29yZGVyLmN1c3RvbWVyTmFtZX0sXHJcblxyXG5UaGFuayB5b3UgZm9yIHlvdXIgb3JkZXIhIFlvdXIgb3JkZXIgaGFzIGJlZW4gY29uZmlybWVkIGFuZCB3ZSdsbCBzdGFydCBwcm9jZXNzaW5nIGl0IGltbWVkaWF0ZWx5LlxyXG5cclxuT3JkZXIgRGV0YWlsczpcclxuLSBPcmRlciBJRDogIyR7b3JkZXIuaWR9XHJcbi0gRGF0ZTogJHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxyXG4tIFByb2R1Y3Q6ICR7b3JkZXIucHJvZHVjdE5hbWV9XHJcbi0gU2l6ZTogJHtvcmRlci5zZWxlY3RlZFNpemV9XHJcbi0gQ29sb3I6ICR7b3JkZXIuc2VsZWN0ZWRDb2xvcn1cclxuLSBRdWFudGl0eTogJHtvcmRlci5xdWFudGl0eX1cclxuLSBUb3RhbDogJHtvcmRlci50b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQVxyXG5cclxuU2hpcHBpbmcgSW5mb3JtYXRpb246XHJcbi0gU2hpcHBpbmcgVHlwZTogJHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9XHJcbi0gV2lsYXlhOiAke29yZGVyLndpbGF5YU5hbWV9XHJcbi0gQ2l0eTogJHtvcmRlci5jdXN0b21lckNpdHl9XHJcbi0gQWRkcmVzczogJHtvcmRlci5jdXN0b21lckFkZHJlc3N9XHJcbi0gU2hpcHBpbmcgQ29zdDogJHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREFcclxuXHJcblBheW1lbnQgTWV0aG9kOiAke29yZGVyLnBheW1lbnRNZXRob2QgPT09ICdjb2QnID8gJ0Nhc2ggb24gRGVsaXZlcnknIDogJ0JhbmsgVHJhbnNmZXInfVxyXG5cclxuV2Ugd2lsbCBjb250YWN0IHlvdSBzb29uIHRvIGNvbmZpcm0gdGhlIGRlbGl2ZXJ5IGRldGFpbHMuXHJcblxyXG5CZXN0IHJlZ2FyZHMsXHJcbk9CU0lESUFOIFdFQVIgVGVhbVxyXG4gIGAudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uSFRNTChvcmRlcjogT3JkZXIpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbjwhRE9DVFlQRSBodG1sPlxyXG48aHRtbCBsYW5nPVwiZW5cIj5cclxuPGhlYWQ+XHJcbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cclxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XHJcbiAgICA8dGl0bGU+T3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUjwvdGl0bGU+XHJcbiAgICA8c3R5bGU+XHJcbiAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcclxuICAgICAgICAgICAgY29sb3I6ICMzMzM7XHJcbiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29udGFpbmVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmhlYWRlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubG9nbyB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItaWQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VjdGlvbiB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zZWN0aW9uIGgzIHtcclxuICAgICAgICAgICAgY29sb3I6ICMwMDA7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItZGV0YWlscyB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1yb3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1sYWJlbCB7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnRvdGFsIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmZvb3RlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICA8L3N0eWxlPlxyXG48L2hlYWQ+XHJcbjxib2R5PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj5PQlNJRElBTiBXRUFSPC9kaXY+XHJcbiAgICAgICAgICAgIDxoMT5PcmRlciBDb25maXJtYXRpb248L2gxPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaWRcIj4jJHtvcmRlci5pZH08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPHA+RGVhciA8c3Ryb25nPiR7b3JkZXIuY3VzdG9tZXJOYW1lfTwvc3Ryb25nPiw8L3A+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPHA+VGhhbmsgeW91IGZvciB5b3VyIG9yZGVyISBZb3VyIG9yZGVyIGhhcyBiZWVuIGNvbmZpcm1lZCBhbmQgd2UnbGwgc3RhcnQgcHJvY2Vzc2luZyBpdCBpbW1lZGlhdGVseS48L3A+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5PcmRlciBEZXRhaWxzPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5PcmRlciBJRDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+IyR7b3JkZXIuaWR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+RGF0ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1yb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlByb2R1Y3Q6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIucHJvZHVjdE5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2l6ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zZWxlY3RlZFNpemV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q29sb3I6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIuc2VsZWN0ZWRDb2xvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5RdWFudGl0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5xdWFudGl0eX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5TaGlwcGluZyBJbmZvcm1hdGlvbjwvaDM+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1kZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgVHlwZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+V2lsYXlhOjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke29yZGVyLndpbGF5YU5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q2l0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckNpdHl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+QWRkcmVzczo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckFkZHJlc3N9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgQ29zdDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREE8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5QYXltZW50IEluZm9ybWF0aW9uPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5QYXltZW50IE1ldGhvZDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5wYXltZW50TWV0aG9kID09PSAnY29kJyA/ICdDYXNoIG9uIERlbGl2ZXJ5JyA6ICdCYW5rIFRyYW5zZmVyJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5TdWJ0b3RhbDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zdWJ0b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvdGFsXCI+XHJcbiAgICAgICAgICAgIFRvdGFsOiAke29yZGVyLnRvdGFsLnRvTG9jYWxlU3RyaW5nKCl9IERBXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxwPldlIHdpbGwgY29udGFjdCB5b3Ugc29vbiB0byBjb25maXJtIHRoZSBkZWxpdmVyeSBkZXRhaWxzLjwvcD5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD5CZXN0IHJlZ2FyZHMsPGJyPjxzdHJvbmc+T0JTSURJQU4gV0VBUiBUZWFtPC9zdHJvbmc+PC9wPlxyXG4gICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCB1cy48L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9ib2R5PlxyXG48L2h0bWw+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIiwib3JkZXIiLCJlbWFpbERhdGEiLCJ0byIsImN1c3RvbWVyRW1haWwiLCJzdWJqZWN0IiwidGV4dCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0IiwiaHRtbCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MIiwibm9kZW1haWxlciIsInJlcXVpcmUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJHTUFJTF9VU0VSIiwicGFzcyIsIkdNQUlMX0FQUF9QQVNTV09SRCIsIm1haWxPcHRpb25zIiwiZnJvbSIsIm5hbWUiLCJhZGRyZXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCIsImVycm9yIiwiY3VzdG9tZXJOYW1lIiwiaWQiLCJEYXRlIiwib3JkZXJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHJvZHVjdE5hbWUiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwicXVhbnRpdHkiLCJ0b3RhbCIsInRvTG9jYWxlU3RyaW5nIiwic2hpcHBpbmdUeXBlIiwid2lsYXlhTmFtZSIsImN1c3RvbWVyQ2l0eSIsImN1c3RvbWVyQWRkcmVzcyIsInNoaXBwaW5nQ29zdCIsInBheW1lbnRNZXRob2QiLCJ0cmltIiwic3VidG90YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rateLimiter.ts":
/*!********************************!*\
  !*** ./src/lib/rateLimiter.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiRateLimiter: () => (/* binding */ apiRateLimiter),\n/* harmony export */   authRateLimiter: () => (/* binding */ authRateLimiter),\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit)\n/* harmony export */ });\n// Simple in-memory rate limiter\nclass RateLimiter {\n    constructor(windowMs = 60000, maxRequests = 100){\n        this.requests = new Map();\n        this.windowMs = windowMs;\n        this.maxRequests = maxRequests;\n    }\n    // Check if request is allowed\n    isAllowed(identifier) {\n        const now = Date.now();\n        const entry = this.requests.get(identifier);\n        if (!entry || now > entry.resetTime) {\n            // Create new entry or reset expired entry\n            this.requests.set(identifier, {\n                count: 1,\n                resetTime: now + this.windowMs\n            });\n            return {\n                allowed: true,\n                remaining: this.maxRequests - 1,\n                resetTime: now + this.windowMs\n            };\n        }\n        if (entry.count >= this.maxRequests) {\n            return {\n                allowed: false,\n                remaining: 0,\n                resetTime: entry.resetTime\n            };\n        }\n        // Increment count\n        entry.count++;\n        this.requests.set(identifier, entry);\n        return {\n            allowed: true,\n            remaining: this.maxRequests - entry.count,\n            resetTime: entry.resetTime\n        };\n    }\n    // Clean up expired entries\n    cleanup() {\n        const now = Date.now();\n        for (const [key, entry] of this.requests.entries()){\n            if (now > entry.resetTime) {\n                this.requests.delete(key);\n            }\n        }\n    }\n}\n// Create rate limiter instances\nconst apiRateLimiter = new RateLimiter(60000, 100); // 100 requests per minute\nconst authRateLimiter = new RateLimiter(300000, 5); // 5 login attempts per 5 minutes\n// Rate limiting middleware\nfunction checkRateLimit(identifier, limiter) {\n    const result = limiter.isAllowed(identifier);\n    // Clean up expired entries periodically\n    if (Math.random() < 0.01) {\n        limiter.cleanup();\n    }\n    const headers = {\n        \"X-RateLimit-Limit\": limiter[\"maxRequests\"].toString(),\n        \"X-RateLimit-Remaining\": result.remaining.toString(),\n        \"X-RateLimit-Reset\": new Date(result.resetTime).toISOString()\n    };\n    return {\n        allowed: result.allowed,\n        headers\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGVMaW1pdGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdDQUFnQztBQU1oQyxNQUFNQTtJQUtKQyxZQUFZQyxXQUFtQixLQUFLLEVBQUVDLGNBQXNCLEdBQUcsQ0FBRTthQUp6REMsV0FBd0MsSUFBSUM7UUFLbEQsSUFBSSxDQUFDSCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtJQUNyQjtJQUVBLDhCQUE4QjtJQUM5QkcsVUFBVUMsVUFBa0IsRUFBOEQ7UUFDeEYsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNRSxRQUFRLElBQUksQ0FBQ04sUUFBUSxDQUFDTyxHQUFHLENBQUNKO1FBRWhDLElBQUksQ0FBQ0csU0FBU0YsTUFBTUUsTUFBTUUsU0FBUyxFQUFFO1lBQ25DLDBDQUEwQztZQUMxQyxJQUFJLENBQUNSLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZO2dCQUM1Qk8sT0FBTztnQkFDUEYsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7WUFFQSxPQUFPO2dCQUNMYSxTQUFTO2dCQUNUQyxXQUFXLElBQUksQ0FBQ2IsV0FBVyxHQUFHO2dCQUM5QlMsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7UUFDRjtRQUVBLElBQUlRLE1BQU1JLEtBQUssSUFBSSxJQUFJLENBQUNYLFdBQVcsRUFBRTtZQUNuQyxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxXQUFXO2dCQUNYSixXQUFXRixNQUFNRSxTQUFTO1lBQzVCO1FBQ0Y7UUFFQSxrQkFBa0I7UUFDbEJGLE1BQU1JLEtBQUs7UUFDWCxJQUFJLENBQUNWLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZRztRQUU5QixPQUFPO1lBQ0xLLFNBQVM7WUFDVEMsV0FBVyxJQUFJLENBQUNiLFdBQVcsR0FBR08sTUFBTUksS0FBSztZQUN6Q0YsV0FBV0YsTUFBTUUsU0FBUztRQUM1QjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCSyxVQUFnQjtRQUNkLE1BQU1ULE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsS0FBSyxNQUFNLENBQUNVLEtBQUtSLE1BQU0sSUFBSSxJQUFJLENBQUNOLFFBQVEsQ0FBQ2UsT0FBTyxHQUFJO1lBQ2xELElBQUlYLE1BQU1FLE1BQU1FLFNBQVMsRUFBRTtnQkFDekIsSUFBSSxDQUFDUixRQUFRLENBQUNnQixNQUFNLENBQUNGO1lBQ3ZCO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsZ0NBQWdDO0FBQ3pCLE1BQU1HLGlCQUFpQixJQUFJckIsWUFBWSxPQUFPLEtBQUssQ0FBQywwQkFBMEI7QUFDOUUsTUFBTXNCLGtCQUFrQixJQUFJdEIsWUFBWSxRQUFRLEdBQUcsQ0FBQyxpQ0FBaUM7QUFFNUYsMkJBQTJCO0FBQ3BCLFNBQVN1QixlQUFlaEIsVUFBa0IsRUFBRWlCLE9BQW9CO0lBQ3JFLE1BQU1DLFNBQVNELFFBQVFsQixTQUFTLENBQUNDO0lBRWpDLHdDQUF3QztJQUN4QyxJQUFJbUIsS0FBS0MsTUFBTSxLQUFLLE1BQU07UUFDeEJILFFBQVFQLE9BQU87SUFDakI7SUFFQSxNQUFNVyxVQUFVO1FBQ2QscUJBQXFCSixPQUFPLENBQUMsY0FBYyxDQUFDSyxRQUFRO1FBQ3BELHlCQUF5QkosT0FBT1QsU0FBUyxDQUFDYSxRQUFRO1FBQ2xELHFCQUFxQixJQUFJcEIsS0FBS2dCLE9BQU9iLFNBQVMsRUFBRWtCLFdBQVc7SUFDN0Q7SUFFQSxPQUFPO1FBQ0xmLFNBQVNVLE9BQU9WLE9BQU87UUFDdkJhO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL3JhdGVMaW1pdGVyLnRzP2Y4MWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2ltcGxlIGluLW1lbW9yeSByYXRlIGxpbWl0ZXJcclxuaW50ZXJmYWNlIFJhdGVMaW1pdEVudHJ5IHtcclxuICBjb3VudDogbnVtYmVyO1xyXG4gIHJlc2V0VGltZTogbnVtYmVyO1xyXG59XHJcblxyXG5jbGFzcyBSYXRlTGltaXRlciB7XHJcbiAgcHJpdmF0ZSByZXF1ZXN0czogTWFwPHN0cmluZywgUmF0ZUxpbWl0RW50cnk+ID0gbmV3IE1hcCgpO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgd2luZG93TXM6IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IG1heFJlcXVlc3RzOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpbmRvd01zOiBudW1iZXIgPSA2MDAwMCwgbWF4UmVxdWVzdHM6IG51bWJlciA9IDEwMCkge1xyXG4gICAgdGhpcy53aW5kb3dNcyA9IHdpbmRvd01zO1xyXG4gICAgdGhpcy5tYXhSZXF1ZXN0cyA9IG1heFJlcXVlc3RzO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgcmVxdWVzdCBpcyBhbGxvd2VkXHJcbiAgaXNBbGxvd2VkKGlkZW50aWZpZXI6IHN0cmluZyk6IHsgYWxsb3dlZDogYm9vbGVhbjsgcmVtYWluaW5nOiBudW1iZXI7IHJlc2V0VGltZTogbnVtYmVyIH0ge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5yZXF1ZXN0cy5nZXQoaWRlbnRpZmllcik7XHJcblxyXG4gICAgaWYgKCFlbnRyeSB8fCBub3cgPiBlbnRyeS5yZXNldFRpbWUpIHtcclxuICAgICAgLy8gQ3JlYXRlIG5ldyBlbnRyeSBvciByZXNldCBleHBpcmVkIGVudHJ5XHJcbiAgICAgIHRoaXMucmVxdWVzdHMuc2V0KGlkZW50aWZpZXIsIHtcclxuICAgICAgICBjb3VudDogMSxcclxuICAgICAgICByZXNldFRpbWU6IG5vdyArIHRoaXMud2luZG93TXNcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFsbG93ZWQ6IHRydWUsXHJcbiAgICAgICAgcmVtYWluaW5nOiB0aGlzLm1heFJlcXVlc3RzIC0gMSxcclxuICAgICAgICByZXNldFRpbWU6IG5vdyArIHRoaXMud2luZG93TXNcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW50cnkuY291bnQgPj0gdGhpcy5tYXhSZXF1ZXN0cykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFsbG93ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHJlbWFpbmluZzogMCxcclxuICAgICAgICByZXNldFRpbWU6IGVudHJ5LnJlc2V0VGltZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluY3JlbWVudCBjb3VudFxyXG4gICAgZW50cnkuY291bnQrKztcclxuICAgIHRoaXMucmVxdWVzdHMuc2V0KGlkZW50aWZpZXIsIGVudHJ5KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhbGxvd2VkOiB0cnVlLFxyXG4gICAgICByZW1haW5pbmc6IHRoaXMubWF4UmVxdWVzdHMgLSBlbnRyeS5jb3VudCxcclxuICAgICAgcmVzZXRUaW1lOiBlbnRyeS5yZXNldFRpbWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBDbGVhbiB1cCBleHBpcmVkIGVudHJpZXNcclxuICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMucmVxdWVzdHMuZW50cmllcygpKSB7XHJcbiAgICAgIGlmIChub3cgPiBlbnRyeS5yZXNldFRpbWUpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3RzLmRlbGV0ZShrZXkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgcmF0ZSBsaW1pdGVyIGluc3RhbmNlc1xyXG5leHBvcnQgY29uc3QgYXBpUmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoNjAwMDAsIDEwMCk7IC8vIDEwMCByZXF1ZXN0cyBwZXIgbWludXRlXHJcbmV4cG9ydCBjb25zdCBhdXRoUmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoMzAwMDAwLCA1KTsgLy8gNSBsb2dpbiBhdHRlbXB0cyBwZXIgNSBtaW51dGVzXHJcblxyXG4vLyBSYXRlIGxpbWl0aW5nIG1pZGRsZXdhcmVcclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmF0ZUxpbWl0KGlkZW50aWZpZXI6IHN0cmluZywgbGltaXRlcjogUmF0ZUxpbWl0ZXIpOiB7IGFsbG93ZWQ6IGJvb2xlYW47IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gbGltaXRlci5pc0FsbG93ZWQoaWRlbnRpZmllcik7XHJcbiAgXHJcbiAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzIHBlcmlvZGljYWxseVxyXG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wMSkgeyAvLyAxJSBjaGFuY2VcclxuICAgIGxpbWl0ZXIuY2xlYW51cCgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICdYLVJhdGVMaW1pdC1MaW1pdCc6IGxpbWl0ZXJbJ21heFJlcXVlc3RzJ10udG9TdHJpbmcoKSxcclxuICAgICdYLVJhdGVMaW1pdC1SZW1haW5pbmcnOiByZXN1bHQucmVtYWluaW5nLnRvU3RyaW5nKCksXHJcbiAgICAnWC1SYXRlTGltaXQtUmVzZXQnOiBuZXcgRGF0ZShyZXN1bHQucmVzZXRUaW1lKS50b0lTT1N0cmluZygpXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGFsbG93ZWQ6IHJlc3VsdC5hbGxvd2VkLFxyXG4gICAgaGVhZGVyc1xyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyIiwiY29uc3RydWN0b3IiLCJ3aW5kb3dNcyIsIm1heFJlcXVlc3RzIiwicmVxdWVzdHMiLCJNYXAiLCJpc0FsbG93ZWQiLCJpZGVudGlmaWVyIiwibm93IiwiRGF0ZSIsImVudHJ5IiwiZ2V0IiwicmVzZXRUaW1lIiwic2V0IiwiY291bnQiLCJhbGxvd2VkIiwicmVtYWluaW5nIiwiY2xlYW51cCIsImtleSIsImVudHJpZXMiLCJkZWxldGUiLCJhcGlSYXRlTGltaXRlciIsImF1dGhSYXRlTGltaXRlciIsImNoZWNrUmF0ZUxpbWl0IiwibGltaXRlciIsInJlc3VsdCIsIk1hdGgiLCJyYW5kb20iLCJoZWFkZXJzIiwidG9TdHJpbmciLCJ0b0lTT1N0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rateLimiter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseDatabase.ts":
/*!*************************************!*\
  !*** ./src/lib/supabaseDatabase.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCustomer: () => (/* binding */ addCustomer),\n/* harmony export */   addOrder: () => (/* binding */ addOrder),\n/* harmony export */   addProduct: () => (/* binding */ addProduct),\n/* harmony export */   clearProductsCache: () => (/* binding */ clearProductsCache),\n/* harmony export */   deductStockFromOrder: () => (/* binding */ deductStockFromOrder),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getCustomers: () => (/* binding */ getCustomers),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getMaintenanceSettings: () => (/* binding */ getMaintenanceSettings),\n/* harmony export */   getOrder: () => (/* binding */ getOrder),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getProduct: () => (/* binding */ getProduct),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getWilayaTariffs: () => (/* binding */ getWilayaTariffs),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateInventory: () => (/* binding */ updateInventory),\n/* harmony export */   updateMaintenanceSettings: () => (/* binding */ updateMaintenanceSettings),\n/* harmony export */   updateOrder: () => (/* binding */ updateOrder),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateWilayaTariffs: () => (/* binding */ updateWilayaTariffs)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// Database service using Supabase (free tier)\n// This provides persistent storage with a real database\n\n// Supabase configuration - MUST use environment variables\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Export the supabase client for direct use\n\n// Helper function to convert database product to Product interface\nfunction convertDbProductToProduct(dbProduct) {\n    // Debug logging\n    console.log(\"\\uD83D\\uDD0D DEBUG: Raw price from DB:\", dbProduct.price, \"Type:\", typeof dbProduct.price);\n    console.log(\"\\uD83D\\uDD0D DEBUG: Parsed price:\", parseFloat(dbProduct.price), \"Type:\", typeof parseFloat(dbProduct.price));\n    const convertedProduct = {\n        id: dbProduct.id,\n        name: dbProduct.name,\n        description: dbProduct.description,\n        price: parseFloat(dbProduct.price),\n        originalPrice: dbProduct.original_price ? parseFloat(dbProduct.original_price) : undefined,\n        image: dbProduct.image,\n        images: dbProduct.images || [],\n        stock: dbProduct.stock || {},\n        category: dbProduct.category,\n        sizes: dbProduct.sizes || [],\n        colors: dbProduct.colors || [],\n        inStock: dbProduct.in_stock,\n        rating: parseFloat(dbProduct.rating || 0),\n        reviews: dbProduct.reviews || 0,\n        sku: dbProduct.sku,\n        weight: dbProduct.weight ? parseFloat(dbProduct.weight) : undefined,\n        dimensions: dbProduct.dimensions,\n        tags: dbProduct.tags || [],\n        featured: dbProduct.featured || false,\n        sizeChartCategory: dbProduct.size_chart_category || \"T-Shirts\",\n        customSizeChart: dbProduct.custom_size_chart || undefined,\n        useCustomSizeChart: dbProduct.use_custom_size_chart || false,\n        createdAt: new Date(dbProduct.created_at),\n        updatedAt: new Date(dbProduct.updated_at)\n    };\n    console.log(\"\\uD83D\\uDD0D DEBUG: Final converted product price:\", convertedProduct.price, \"Type:\", typeof convertedProduct.price);\n    return convertedProduct;\n}\n// Cache for products to reduce database calls\nlet productsCache = null;\nlet productsCacheTime = 0;\nconst CACHE_DURATION = 30000; // 30 seconds\n// Clear cache function\nfunction clearProductsCache() {\n    productsCache = null;\n    productsCacheTime = 0;\n    console.log(\"Supabase: Products cache cleared\");\n}\n// Force clear cache immediately to fix price formatting issue\nclearProductsCache();\n// Add timestamp to force cache invalidation\nconst CACHE_BUSTER = Date.now();\nconsole.log(\"\\uD83D\\uDE80 Cache buster timestamp:\", CACHE_BUSTER);\n// Products operations\nasync function getProducts() {\n    try {\n        // Return cached data if still fresh\n        if (productsCache && Date.now() - productsCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached products\");\n            return productsCache;\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getProducts error:\", error);\n            return productsCache || [];\n        }\n        const products = (data || []).map(convertDbProductToProduct);\n        // Update cache\n        productsCache = products;\n        productsCacheTime = Date.now();\n        return products;\n    } catch (error) {\n        console.error(\"Supabase getProducts error:\", error);\n        return productsCache || [];\n    }\n}\nasync function getProduct(id) {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getProduct error:\", error);\n            return null;\n        }\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase getProduct error:\", error);\n        return null;\n    }\n}\nasync function addProduct(product) {\n    try {\n        // Convert camelCase to snake_case for database\n        const dbProduct = {\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            price: product.price,\n            original_price: product.originalPrice,\n            image: product.image,\n            images: product.images || [],\n            stock: product.stock,\n            category: product.category,\n            sizes: product.sizes || [],\n            colors: product.colors || [],\n            in_stock: product.inStock,\n            rating: product.rating,\n            reviews: product.reviews,\n            sku: product.sku,\n            weight: product.weight,\n            dimensions: product.dimensions,\n            tags: product.tags || [],\n            featured: product.featured || false,\n            size_chart_category: product.sizeChartCategory || \"T-Shirts\",\n            custom_size_chart: product.customSizeChart || null,\n            use_custom_size_chart: product.useCustomSizeChart || false\n        };\n        const { data, error } = await supabase.from(\"products\").insert([\n            dbProduct\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addProduct error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added product:\", product.id);\n        // Initialize inventory for the new product\n        try {\n            const { initializeProductInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            await initializeProductInventory(product.id);\n            console.log(\"Supabase: Initialized inventory for product:\", product.id);\n        } catch (inventoryError) {\n            console.error(\"Supabase: Failed to initialize inventory for product:\", product.id, inventoryError);\n        // Don't throw error here, product creation should still succeed\n        }\n        // Invalidate cache\n        productsCache = null;\n        // Convert back to camelCase\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase addProduct error:\", error);\n        throw error;\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        // Convert camelCase to snake_case for database\n        const dbProduct = {};\n        if (product.name !== undefined) dbProduct.name = product.name;\n        if (product.description !== undefined) dbProduct.description = product.description;\n        if (product.price !== undefined) dbProduct.price = product.price;\n        if (product.originalPrice !== undefined) dbProduct.original_price = product.originalPrice;\n        if (product.image !== undefined) dbProduct.image = product.image;\n        if (product.images !== undefined) dbProduct.images = product.images;\n        if (product.stock !== undefined) dbProduct.stock = product.stock;\n        if (product.category !== undefined) dbProduct.category = product.category;\n        if (product.sizes !== undefined) dbProduct.sizes = product.sizes;\n        if (product.colors !== undefined) dbProduct.colors = product.colors;\n        if (product.inStock !== undefined) dbProduct.in_stock = product.inStock;\n        if (product.rating !== undefined) dbProduct.rating = product.rating;\n        if (product.reviews !== undefined) dbProduct.reviews = product.reviews;\n        if (product.sku !== undefined) dbProduct.sku = product.sku;\n        if (product.weight !== undefined) dbProduct.weight = product.weight;\n        if (product.dimensions !== undefined) dbProduct.dimensions = product.dimensions;\n        if (product.tags !== undefined) dbProduct.tags = product.tags;\n        if (product.featured !== undefined) dbProduct.featured = product.featured;\n        if (product.sizeChartCategory !== undefined) dbProduct.size_chart_category = product.sizeChartCategory;\n        if (product.customSizeChart !== undefined) dbProduct.custom_size_chart = product.customSizeChart;\n        if (product.useCustomSizeChart !== undefined) dbProduct.use_custom_size_chart = product.useCustomSizeChart;\n        const { data, error } = await supabase.from(\"products\").update(dbProduct).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateProduct error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase updateProduct error:\", error);\n        return null;\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteProduct error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteProduct error:\", error);\n        return false;\n    }\n}\n// Helper function to convert database order to Order interface\nfunction convertDbOrderToOrder(dbOrder) {\n    // Extract customer info from items or use defaults\n    const firstItem = dbOrder.items && dbOrder.items.length > 0 ? dbOrder.items[0] : {};\n    return {\n        id: dbOrder.id,\n        productId: firstItem.productId || \"\",\n        productName: firstItem.productName || \"\",\n        productImage: firstItem.productImage || \"\",\n        customerName: firstItem.customerName || \"\",\n        customerPhone: firstItem.customerPhone || \"\",\n        customerEmail: firstItem.customerEmail || \"\",\n        customerAddress: firstItem.customerAddress || \"\",\n        customerCity: firstItem.customerCity || \"\",\n        wilayaId: firstItem.wilayaId || 0,\n        wilayaName: firstItem.wilayaName || \"\",\n        shippingType: dbOrder.shipping_type || \"homeDelivery\",\n        shippingCost: Number(dbOrder.shipping_cost) || 0,\n        quantity: firstItem.quantity || 1,\n        selectedSize: firstItem.selectedSize || \"\",\n        selectedColor: firstItem.selectedColor || \"\",\n        subtotal: Number(dbOrder.total) - Number(dbOrder.shipping_cost) || 0,\n        total: Number(dbOrder.total) || 0,\n        orderDate: new Date(dbOrder.order_date),\n        status: dbOrder.status || \"pending\",\n        trackingNumber: dbOrder.tracking_number,\n        notes: firstItem.notes,\n        paymentMethod: dbOrder.payment_method || \"cod\",\n        paymentStatus: dbOrder.payment_status || \"pending\",\n        estimatedDelivery: firstItem.estimatedDelivery,\n        createdAt: new Date(dbOrder.created_at),\n        updatedAt: new Date(dbOrder.updated_at)\n    };\n}\n// Cache for orders to reduce database calls\nlet ordersCache = null;\nlet ordersCacheTime = 0;\n// Orders operations\nasync function getOrders() {\n    try {\n        // Return cached data if still fresh\n        if (ordersCache && Date.now() - ordersCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached orders\");\n            return ordersCache;\n        }\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").order(\"order_date\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getOrders error:\", error);\n            return ordersCache || [];\n        }\n        const orders = (data || []).map(convertDbOrderToOrder);\n        // Update cache\n        ordersCache = orders;\n        ordersCacheTime = Date.now();\n        return orders;\n    } catch (error) {\n        console.error(\"Supabase getOrders error:\", error);\n        return ordersCache || [];\n    }\n}\nasync function getOrder(id) {\n    try {\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getOrder error:\", error);\n            return null;\n        }\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase getOrder error:\", error);\n        return null;\n    }\n}\nasync function addOrder(order) {\n    try {\n        // Convert Order interface to database format\n        const dbOrder = {\n            id: order.id,\n            customer_id: `CUST-${Date.now()}`,\n            items: [\n                {\n                    productId: order.productId,\n                    productName: order.productName,\n                    productImage: order.productImage,\n                    customerName: order.customerName,\n                    customerPhone: order.customerPhone,\n                    customerEmail: order.customerEmail,\n                    customerAddress: order.customerAddress,\n                    customerCity: order.customerCity,\n                    wilayaId: order.wilayaId,\n                    wilayaName: order.wilayaName,\n                    quantity: order.quantity,\n                    selectedSize: order.selectedSize,\n                    selectedColor: order.selectedColor,\n                    notes: order.notes,\n                    estimatedDelivery: order.estimatedDelivery\n                }\n            ],\n            total: order.total,\n            shipping_cost: order.shippingCost,\n            shipping_type: order.shippingType,\n            payment_method: order.paymentMethod,\n            payment_status: order.paymentStatus,\n            status: order.status,\n            tracking_number: order.trackingNumber,\n            order_date: order.orderDate.toISOString(),\n            created_at: order.createdAt.toISOString(),\n            updated_at: order.updatedAt.toISOString()\n        };\n        const { data, error } = await supabase.from(\"orders\").insert([\n            dbOrder\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addOrder error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added order:\", order.id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase addOrder error:\", error);\n        throw error;\n    }\n}\nasync function updateOrder(id, order) {\n    try {\n        // Convert partial Order to database format\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (order.status !== undefined) updateData.status = order.status;\n        if (order.paymentStatus !== undefined) updateData.payment_status = order.paymentStatus;\n        if (order.trackingNumber !== undefined) updateData.tracking_number = order.trackingNumber;\n        if (order.shippingType !== undefined) updateData.shipping_type = order.shippingType;\n        if (order.shippingCost !== undefined) updateData.shipping_cost = order.shippingCost;\n        if (order.total !== undefined) updateData.total = order.total;\n        if (order.paymentMethod !== undefined) updateData.payment_method = order.paymentMethod;\n        const { data, error } = await supabase.from(\"orders\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateOrder error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated order:\", id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase updateOrder error:\", error);\n        return null;\n    }\n}\nasync function deleteOrder(id) {\n    try {\n        // First, get the order details to restore inventory\n        const order = await getOrder(id);\n        if (!order) {\n            console.error(\"Supabase deleteOrder: Order not found:\", id);\n            return false;\n        }\n        // Restore inventory quantity\n        if (order.productId && order.selectedSize && order.selectedColor && order.quantity) {\n            try {\n                const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n                const inventoryRestored = await addInventory(order.productId, order.selectedSize, order.selectedColor, order.quantity, `Order ${id} deleted - inventory restored`, \"admin\");\n                if (inventoryRestored) {\n                    console.log(\"Supabase deleteOrder: Inventory restored for order:\", id);\n                } else {\n                    console.warn(\"Supabase deleteOrder: Failed to restore inventory for order:\", id);\n                }\n            } catch (inventoryError) {\n                console.error(\"Supabase deleteOrder: Inventory restoration error:\", inventoryError);\n            // Continue with order deletion even if inventory restoration fails\n            }\n        }\n        // Delete the order\n        const { error } = await supabase.from(\"orders\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteOrder error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted order:\", id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteOrder error:\", error);\n        return false;\n    }\n}\n// Wilaya operations\nasync function getWilayaTariffs() {\n    try {\n        const { data, error } = await supabase.from(\"wilaya_tariffs\").select(\"*\").order(\"order\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Supabase getWilayaTariffs error:\", error);\n            return [];\n        }\n        // Transform the data to match the expected format\n        const transformedData = (data || []).map((tariff)=>({\n                id: tariff.id.toString(),\n                wilaya_id: tariff.wilaya_id,\n                name: tariff.name,\n                domicile_ecommerce: tariff.domicile_ecommerce,\n                stop_desk_ecommerce: tariff.stop_desk_ecommerce,\n                order: tariff.order,\n                // Legacy compatibility for backward compatibility\n                home_delivery: tariff.domicile_ecommerce,\n                stop_desk: tariff.stop_desk_ecommerce,\n                homeDelivery: tariff.domicile_ecommerce,\n                stopDesk: tariff.stop_desk_ecommerce,\n                domicileEcommerce: tariff.domicile_ecommerce,\n                stopDeskEcommerce: tariff.stop_desk_ecommerce\n            }));\n        return transformedData;\n    } catch (error) {\n        console.error(\"Supabase getWilayaTariffs error:\", error);\n        return [];\n    }\n}\nasync function updateWilayaTariffs(tariffs) {\n    try {\n        // Delete all existing tariffs\n        await supabase.from(\"wilaya_tariffs\").delete().neq(\"id\", 0); // Delete all records\n        // Insert new tariffs\n        if (tariffs.length > 0) {\n            // Transform the data to match database structure\n            const transformedTariffs = tariffs.map((tariff)=>({\n                    wilaya_id: tariff.wilaya_id || tariff.id,\n                    name: tariff.name,\n                    domicile_ecommerce: tariff.domicile_ecommerce || tariff.domicileEcommerce || tariff.home_delivery || tariff.homeDelivery || 0,\n                    stop_desk_ecommerce: tariff.stop_desk_ecommerce || tariff.stopDeskEcommerce || tariff.stop_desk || tariff.stopDesk || 0,\n                    order: tariff.order || 1\n                }));\n            const { error } = await supabase.from(\"wilaya_tariffs\").insert(transformedTariffs);\n            if (error) {\n                console.error(\"Supabase updateWilayaTariffs error:\", error);\n                throw error;\n            }\n        }\n        console.log(\"Supabase: Updated wilaya tariffs\");\n    } catch (error) {\n        console.error(\"Supabase updateWilayaTariffs error:\", error);\n        throw error;\n    }\n}\n// Inventory operations\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"id, name, sku, stock, sizes, colors, in_stock, category\").order(\"name\");\n        if (error) {\n            console.error(\"Supabase getInventory error:\", error);\n            return [];\n        }\n        // Transform data for inventory management\n        return (data || []).map((product)=>({\n                id: product.id,\n                name: product.name,\n                sku: product.sku,\n                category: product.category,\n                inStock: product.in_stock,\n                stock: product.stock || {},\n                sizes: product.sizes || [],\n                colors: product.colors || [],\n                totalStock: calculateTotalStock(product.stock || {}),\n                stockBySize: calculateStockBySize(product.stock || {}, product.sizes || [], product.colors || [])\n            }));\n    } catch (error) {\n        console.error(\"Supabase getInventory error:\", error);\n        return [];\n    }\n}\nasync function updateInventory(productId, stockData) {\n    try {\n        const updateObj = {\n            updated_at: new Date().toISOString()\n        };\n        if (stockData.stock) {\n            updateObj.stock = stockData.stock;\n        }\n        if (stockData.inStock !== undefined) {\n            updateObj.in_stock = stockData.inStock;\n        }\n        const { data, error } = await supabase.from(\"products\").update(updateObj).eq(\"id\", productId).select().single();\n        if (error) {\n            console.error(\"Supabase updateInventory error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Updated inventory for product:\", productId);\n        return {\n            id: data.id,\n            name: data.name,\n            stock: data.stock,\n            inStock: data.in_stock,\n            totalStock: calculateTotalStock(data.stock)\n        };\n    } catch (error) {\n        console.error(\"Supabase updateInventory error:\", error);\n        throw error;\n    }\n}\n// Helper functions for inventory calculations\nfunction calculateTotalStock(stock) {\n    if (!stock || typeof stock !== \"object\") return 0;\n    let total = 0;\n    for(const size in stock){\n        if (typeof stock[size] === \"object\") {\n            for(const color in stock[size]){\n                total += Number(stock[size][color]) || 0;\n            }\n        }\n    }\n    return total;\n}\nfunction calculateStockBySize(stock, sizes, colors) {\n    const result = {};\n    sizes.forEach((size)=>{\n        result[size] = {};\n        colors.forEach((color)=>{\n            result[size][color] = Number(stock[size]?.[color]) || 0;\n        });\n    });\n    return result;\n}\n// Stock deduction function for orders\nasync function deductStockFromOrder(order) {\n    try {\n        console.log(\"Supabase: Deducting stock for order:\", order.id);\n        // Get the product\n        const product = await getProduct(order.productId);\n        if (!product) {\n            console.error(\"Supabase: Product not found for order:\", order.productId);\n            return false;\n        }\n        // Check if we have enough stock\n        const currentStock = product.stock?.[order.selectedSize]?.[order.selectedColor] || 0;\n        if (currentStock < order.quantity) {\n            console.error(\"Supabase: Insufficient stock for order:\", {\n                productId: order.productId,\n                size: order.selectedSize,\n                color: order.selectedColor,\n                requested: order.quantity,\n                available: currentStock\n            });\n            return false;\n        }\n        // Deduct the stock from product\n        const newStock = {\n            ...product.stock,\n            [order.selectedSize]: {\n                ...product.stock?.[order.selectedSize],\n                [order.selectedColor]: currentStock - order.quantity\n            }\n        };\n        // Update the product stock\n        const updatedProduct = await updateProduct(order.productId, {\n            stock: newStock,\n            inStock: calculateTotalStock(newStock) > 0\n        });\n        if (!updatedProduct) {\n            console.error(\"Supabase: Failed to update product stock for order:\", order.id);\n            return false;\n        }\n        // Also deduct from inventory system\n        try {\n            const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            const inventoryDeducted = await addInventory(order.productId, order.selectedSize, order.selectedColor, -order.quantity, `Order ${order.id} created - stock deducted`, \"system\");\n            if (inventoryDeducted) {\n                console.log(\"Supabase: Successfully deducted inventory for order:\", order.id);\n            } else {\n                console.warn(\"Supabase: Failed to deduct inventory for order:\", order.id);\n            }\n        } catch (inventoryError) {\n            console.error(\"Supabase: Inventory deduction error:\", inventoryError);\n        // Continue even if inventory update fails\n        }\n        console.log(\"Supabase: Successfully deducted stock for order:\", order.id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase: Error deducting stock for order:\", error);\n        return false;\n    }\n}\n// Maintenance settings operations\nasync function getMaintenanceSettings() {\n    try {\n        const { data, error } = await supabase.from(\"maintenance_settings\").select(\"*\").eq(\"id\", \"maintenance\").single();\n        if (error) {\n            console.error(\"Supabase getMaintenanceSettings error:\", error);\n            // If table doesn't exist, return default settings\n            if (error.code === \"PGRST205\") {\n                console.log(\"Maintenance settings table not found, using default settings\");\n            }\n            // Return default settings if no data exists\n            return {\n                id: \"maintenance\",\n                is_maintenance_mode: false,\n                drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n        }\n        return data || {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(\"Supabase getMaintenanceSettings error:\", error);\n        return {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    }\n}\nasync function updateMaintenanceSettings(settings) {\n    try {\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (settings.is_maintenance_mode !== undefined) {\n            updateData.is_maintenance_mode = settings.is_maintenance_mode;\n        }\n        if (settings.drop_date !== undefined) {\n            updateData.drop_date = settings.drop_date;\n        }\n        if (settings.maintenance_message !== undefined) {\n            updateData.maintenance_message = settings.maintenance_message;\n        }\n        console.log(\"Updating maintenance settings with:\", updateData);\n        // Try update first\n        const { data: updateResult, error: updateError } = await supabase.from(\"maintenance_settings\").update(updateData).eq(\"id\", \"maintenance\").select().single();\n        if (updateError) {\n            console.error(\"Update error:\", updateError);\n            // If update fails, try insert\n            const { data: insertResult, error: insertError } = await supabase.from(\"maintenance_settings\").insert([\n                {\n                    id: \"maintenance\",\n                    is_maintenance_mode: settings.is_maintenance_mode ?? false,\n                    drop_date: settings.drop_date ?? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                    maintenance_message: settings.maintenance_message ?? \"We are currently performing maintenance. Please check back later.\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                }\n            ]).select().single();\n            if (insertError) {\n                console.error(\"Insert error:\", insertError);\n                throw insertError;\n            }\n            console.log(\"Supabase: Created maintenance settings\");\n            return insertResult;\n        }\n        console.log(\"Supabase: Updated maintenance settings\");\n        return updateResult;\n    } catch (error) {\n        console.error(\"Supabase updateMaintenanceSettings error:\", error);\n        throw error;\n    }\n}\n// Customers methods\nasync function getCustomers() {\n    try {\n        const { data, error } = await supabase.from(\"customers\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getCustomers error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Fetched\", data?.length || 0, \"customers\");\n        return data || [];\n    } catch (error) {\n        console.error(\"Supabase getCustomers error:\", error);\n        throw error;\n    }\n}\nasync function addCustomer(customerData) {\n    try {\n        const now = new Date().toISOString();\n        const customer = {\n            ...customerData,\n            id: `customer_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            created_at: now,\n            updated_at: now\n        };\n        const { data, error } = await supabase.from(\"customers\").insert([\n            customer\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addCustomer error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Created customer:\", data.id);\n        return {\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            phone: data.phone,\n            address: data.address,\n            city: data.city,\n            wilaya: data.wilaya,\n            createdAt: new Date(data.created_at),\n            updatedAt: new Date(data.updated_at)\n        };\n    } catch (error) {\n        console.error(\"Supabase addCustomer error:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsR0FBRyxDQUFDO1lBQ3ZFckksWUFBWVE7WUFDWk4sWUFBWU07UUFDZDtRQUVBLE1BQU0sRUFBRUUsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNaEQsU0FDM0JpRCxJQUFJLENBQUMsYUFDTFcsTUFBTSxDQUFDO1lBQUMyRztTQUFTLEVBQ2pCckgsTUFBTSxHQUNOTyxNQUFNO1FBRVQsSUFBSVQsT0FBTztZQUNUN0MsUUFBUTZDLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDLE1BQU1BO1FBQ1I7UUFFQTdDLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0IyQyxLQUFLdkMsRUFBRTtRQUNsRCxPQUFPO1lBQ0xBLElBQUl1QyxLQUFLdkMsRUFBRTtZQUNYQyxNQUFNc0MsS0FBS3RDLElBQUk7WUFDZmtLLE9BQU81SCxLQUFLNEgsS0FBSztZQUNqQkMsT0FBTzdILEtBQUs2SCxLQUFLO1lBQ2pCQyxTQUFTOUgsS0FBSzhILE9BQU87WUFDckJDLE1BQU0vSCxLQUFLK0gsSUFBSTtZQUNmQyxRQUFRaEksS0FBS2dJLE1BQU07WUFDbkI1SSxXQUFXLElBQUlDLEtBQUtXLEtBQUtWLFVBQVU7WUFDbkNDLFdBQVcsSUFBSUYsS0FBS1csS0FBS1IsVUFBVTtRQUNyQztJQUNGLEVBQUUsT0FBT1MsT0FBTztRQUNkN0MsUUFBUTZDLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL3N1cGFiYXNlRGF0YWJhc2UudHM/ZjQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEYXRhYmFzZSBzZXJ2aWNlIHVzaW5nIFN1cGFiYXNlIChmcmVlIHRpZXIpXG4vLyBUaGlzIHByb3ZpZGVzIHBlcnNpc3RlbnQgc3RvcmFnZSB3aXRoIGEgcmVhbCBkYXRhYmFzZVxuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgUHJvZHVjdCwgT3JkZXIgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gQ3VzdG9tZXIgaW50ZXJmYWNlXG5pbnRlcmZhY2UgQ3VzdG9tZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBob25lOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgY2l0eTogc3RyaW5nO1xuICB3aWxheWE6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbi8vIFN1cGFiYXNlIGNvbmZpZ3VyYXRpb24gLSBNVVNUIHVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VLZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcy4gUGxlYXNlIHNldCBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYW5kIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJyk7XG59XG5cbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSk7XG5cbi8vIEV4cG9ydCB0aGUgc3VwYWJhc2UgY2xpZW50IGZvciBkaXJlY3QgdXNlXG5leHBvcnQgeyBzdXBhYmFzZSB9O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBkYXRhYmFzZSBwcm9kdWN0IHRvIFByb2R1Y3QgaW50ZXJmYWNlXG5mdW5jdGlvbiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRiUHJvZHVjdDogYW55KTogUHJvZHVjdCB7XG4gIC8vIERlYnVnIGxvZ2dpbmdcbiAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IFJhdyBwcmljZSBmcm9tIERCOicsIGRiUHJvZHVjdC5wcmljZSwgJ1R5cGU6JywgdHlwZW9mIGRiUHJvZHVjdC5wcmljZSk7XG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBQYXJzZWQgcHJpY2U6JywgcGFyc2VGbG9hdChkYlByb2R1Y3QucHJpY2UpLCAnVHlwZTonLCB0eXBlb2YgcGFyc2VGbG9hdChkYlByb2R1Y3QucHJpY2UpKTtcbiAgXG4gIGNvbnN0IGNvbnZlcnRlZFByb2R1Y3QgPSB7XG4gICAgaWQ6IGRiUHJvZHVjdC5pZCxcbiAgICBuYW1lOiBkYlByb2R1Y3QubmFtZSxcbiAgICBkZXNjcmlwdGlvbjogZGJQcm9kdWN0LmRlc2NyaXB0aW9uLFxuICAgIHByaWNlOiBwYXJzZUZsb2F0KGRiUHJvZHVjdC5wcmljZSksXG4gICAgb3JpZ2luYWxQcmljZTogZGJQcm9kdWN0Lm9yaWdpbmFsX3ByaWNlID8gcGFyc2VGbG9hdChkYlByb2R1Y3Qub3JpZ2luYWxfcHJpY2UpIDogdW5kZWZpbmVkLFxuICAgIGltYWdlOiBkYlByb2R1Y3QuaW1hZ2UsXG4gICAgaW1hZ2VzOiBkYlByb2R1Y3QuaW1hZ2VzIHx8IFtdLFxuICAgIHN0b2NrOiBkYlByb2R1Y3Quc3RvY2sgfHwge30sXG4gICAgY2F0ZWdvcnk6IGRiUHJvZHVjdC5jYXRlZ29yeSxcbiAgICBzaXplczogZGJQcm9kdWN0LnNpemVzIHx8IFtdLFxuICAgIGNvbG9yczogZGJQcm9kdWN0LmNvbG9ycyB8fCBbXSxcbiAgICBpblN0b2NrOiBkYlByb2R1Y3QuaW5fc3RvY2ssXG4gICAgcmF0aW5nOiBwYXJzZUZsb2F0KGRiUHJvZHVjdC5yYXRpbmcgfHwgMCksXG4gICAgcmV2aWV3czogZGJQcm9kdWN0LnJldmlld3MgfHwgMCxcbiAgICBza3U6IGRiUHJvZHVjdC5za3UsXG4gICAgd2VpZ2h0OiBkYlByb2R1Y3Qud2VpZ2h0ID8gcGFyc2VGbG9hdChkYlByb2R1Y3Qud2VpZ2h0KSA6IHVuZGVmaW5lZCxcbiAgICBkaW1lbnNpb25zOiBkYlByb2R1Y3QuZGltZW5zaW9ucyxcbiAgICB0YWdzOiBkYlByb2R1Y3QudGFncyB8fCBbXSxcbiAgICBmZWF0dXJlZDogZGJQcm9kdWN0LmZlYXR1cmVkIHx8IGZhbHNlLFxuICAgIHNpemVDaGFydENhdGVnb3J5OiBkYlByb2R1Y3Quc2l6ZV9jaGFydF9jYXRlZ29yeSB8fCAnVC1TaGlydHMnLFxuICAgIGN1c3RvbVNpemVDaGFydDogZGJQcm9kdWN0LmN1c3RvbV9zaXplX2NoYXJ0IHx8IHVuZGVmaW5lZCxcbiAgICB1c2VDdXN0b21TaXplQ2hhcnQ6IGRiUHJvZHVjdC51c2VfY3VzdG9tX3NpemVfY2hhcnQgfHwgZmFsc2UsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShkYlByb2R1Y3QuY3JlYXRlZF9hdCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShkYlByb2R1Y3QudXBkYXRlZF9hdClcbiAgfTtcbiAgXG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBGaW5hbCBjb252ZXJ0ZWQgcHJvZHVjdCBwcmljZTonLCBjb252ZXJ0ZWRQcm9kdWN0LnByaWNlLCAnVHlwZTonLCB0eXBlb2YgY29udmVydGVkUHJvZHVjdC5wcmljZSk7XG4gIHJldHVybiBjb252ZXJ0ZWRQcm9kdWN0O1xufVxuXG4vLyBDYWNoZSBmb3IgcHJvZHVjdHMgdG8gcmVkdWNlIGRhdGFiYXNlIGNhbGxzXG5sZXQgcHJvZHVjdHNDYWNoZTogUHJvZHVjdFtdIHwgbnVsbCA9IG51bGw7XG5sZXQgcHJvZHVjdHNDYWNoZVRpbWUgPSAwO1xuY29uc3QgQ0FDSEVfRFVSQVRJT04gPSAzMDAwMDsgLy8gMzAgc2Vjb25kc1xuXG4vLyBDbGVhciBjYWNoZSBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUHJvZHVjdHNDYWNoZSgpOiB2b2lkIHtcbiAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XG4gIHByb2R1Y3RzQ2FjaGVUaW1lID0gMDtcbiAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBQcm9kdWN0cyBjYWNoZSBjbGVhcmVkJyk7XG59XG5cbi8vIEZvcmNlIGNsZWFyIGNhY2hlIGltbWVkaWF0ZWx5IHRvIGZpeCBwcmljZSBmb3JtYXR0aW5nIGlzc3VlXG5jbGVhclByb2R1Y3RzQ2FjaGUoKTtcblxuLy8gQWRkIHRpbWVzdGFtcCB0byBmb3JjZSBjYWNoZSBpbnZhbGlkYXRpb25cbmNvbnN0IENBQ0hFX0JVU1RFUiA9IERhdGUubm93KCk7XG5jb25zb2xlLmxvZygn8J+agCBDYWNoZSBidXN0ZXIgdGltZXN0YW1wOicsIENBQ0hFX0JVU1RFUik7XG5cbi8vIFByb2R1Y3RzIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cygpOiBQcm9taXNlPFByb2R1Y3RbXT4ge1xuICB0cnkge1xuICAgIC8vIFJldHVybiBjYWNoZWQgZGF0YSBpZiBzdGlsbCBmcmVzaFxuICAgIGlmIChwcm9kdWN0c0NhY2hlICYmIERhdGUubm93KCkgLSBwcm9kdWN0c0NhY2hlVGltZSA8IENBQ0hFX0RVUkFUSU9OKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFJldHVybmluZyBjYWNoZWQgcHJvZHVjdHMnKTtcbiAgICAgIHJldHVybiBwcm9kdWN0c0NhY2hlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0cyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcHJvZHVjdHMgPSAoZGF0YSB8fCBbXSkubWFwKGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjYWNoZVxuICAgIHByb2R1Y3RzQ2FjaGUgPSBwcm9kdWN0cztcbiAgICBwcm9kdWN0c0NhY2hlVGltZSA9IERhdGUubm93KCk7XG4gICAgXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFByb2R1Y3RzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdChpZDogc3RyaW5nKTogUHJvbWlzZTxQcm9kdWN0IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udmVydERiUHJvZHVjdFRvUHJvZHVjdChkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJvZHVjdChwcm9kdWN0OiBQcm9kdWN0KTogUHJvbWlzZTxQcm9kdWN0PiB7XG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBjYW1lbENhc2UgdG8gc25ha2VfY2FzZSBmb3IgZGF0YWJhc2VcbiAgICBjb25zdCBkYlByb2R1Y3QgPSB7XG4gICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9kdWN0LmRlc2NyaXB0aW9uLFxuICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXG4gICAgICBvcmlnaW5hbF9wcmljZTogcHJvZHVjdC5vcmlnaW5hbFByaWNlLFxuICAgICAgaW1hZ2U6IHByb2R1Y3QuaW1hZ2UsXG4gICAgICBpbWFnZXM6IHByb2R1Y3QuaW1hZ2VzIHx8IFtdLFxuICAgICAgc3RvY2s6IHByb2R1Y3Quc3RvY2ssXG4gICAgICBjYXRlZ29yeTogcHJvZHVjdC5jYXRlZ29yeSxcbiAgICAgIHNpemVzOiBwcm9kdWN0LnNpemVzIHx8IFtdLFxuICAgICAgY29sb3JzOiBwcm9kdWN0LmNvbG9ycyB8fCBbXSxcbiAgICAgIGluX3N0b2NrOiBwcm9kdWN0LmluU3RvY2ssXG4gICAgICByYXRpbmc6IHByb2R1Y3QucmF0aW5nLFxuICAgICAgcmV2aWV3czogcHJvZHVjdC5yZXZpZXdzLFxuICAgICAgc2t1OiBwcm9kdWN0LnNrdSxcbiAgICAgIHdlaWdodDogcHJvZHVjdC53ZWlnaHQsXG4gICAgICBkaW1lbnNpb25zOiBwcm9kdWN0LmRpbWVuc2lvbnMsXG4gICAgICB0YWdzOiBwcm9kdWN0LnRhZ3MgfHwgW10sXG4gICAgICBmZWF0dXJlZDogcHJvZHVjdC5mZWF0dXJlZCB8fCBmYWxzZSxcbiAgICAgIHNpemVfY2hhcnRfY2F0ZWdvcnk6IHByb2R1Y3Quc2l6ZUNoYXJ0Q2F0ZWdvcnkgfHwgJ1QtU2hpcnRzJyxcbiAgICAgIGN1c3RvbV9zaXplX2NoYXJ0OiBwcm9kdWN0LmN1c3RvbVNpemVDaGFydCB8fCBudWxsLFxuICAgICAgdXNlX2N1c3RvbV9zaXplX2NoYXJ0OiBwcm9kdWN0LnVzZUN1c3RvbVNpemVDaGFydCB8fCBmYWxzZVxuICAgICAgLy8gY3JlYXRlZF9hdCBhbmQgdXBkYXRlZF9hdCBhcmUgYXV0b21hdGljYWxseSBzZXQgYnkgdGhlIGRhdGFiYXNlXG4gICAgfTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLmluc2VydChbZGJQcm9kdWN0XSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBBZGRlZCBwcm9kdWN0OicsIHByb2R1Y3QuaWQpO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgaW52ZW50b3J5IGZvciB0aGUgbmV3IHByb2R1Y3RcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSB9ID0gYXdhaXQgaW1wb3J0KCcuL2ludmVudG9yeVNlcnZpY2UnKTtcbiAgICAgIGF3YWl0IGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5KHByb2R1Y3QuaWQpO1xuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBJbml0aWFsaXplZCBpbnZlbnRvcnkgZm9yIHByb2R1Y3Q6JywgcHJvZHVjdC5pZCk7XG4gICAgfSBjYXRjaCAoaW52ZW50b3J5RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBpbnZlbnRvcnkgZm9yIHByb2R1Y3Q6JywgcHJvZHVjdC5pZCwgaW52ZW50b3J5RXJyb3IpO1xuICAgICAgLy8gRG9uJ3QgdGhyb3cgZXJyb3IgaGVyZSwgcHJvZHVjdCBjcmVhdGlvbiBzaG91bGQgc3RpbGwgc3VjY2VlZFxuICAgIH1cbiAgICBcbiAgICAvLyBJbnZhbGlkYXRlIGNhY2hlXG4gICAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XG4gICAgXG4gICAgLy8gQ29udmVydCBiYWNrIHRvIGNhbWVsQ2FzZVxuICAgIHJldHVybiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZFByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9kdWN0KGlkOiBzdHJpbmcsIHByb2R1Y3Q6IFBhcnRpYWw8UHJvZHVjdD4pOiBQcm9taXNlPFByb2R1Y3QgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBjYW1lbENhc2UgdG8gc25ha2VfY2FzZSBmb3IgZGF0YWJhc2VcbiAgICBjb25zdCBkYlByb2R1Y3Q6IGFueSA9IHt9O1xuICAgIFxuICAgIGlmIChwcm9kdWN0Lm5hbWUgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0Lm5hbWUgPSBwcm9kdWN0Lm5hbWU7XG4gICAgaWYgKHByb2R1Y3QuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmRlc2NyaXB0aW9uID0gcHJvZHVjdC5kZXNjcmlwdGlvbjtcbiAgICBpZiAocHJvZHVjdC5wcmljZSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QucHJpY2UgPSBwcm9kdWN0LnByaWNlO1xuICAgIGlmIChwcm9kdWN0Lm9yaWdpbmFsUHJpY2UgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0Lm9yaWdpbmFsX3ByaWNlID0gcHJvZHVjdC5vcmlnaW5hbFByaWNlO1xuICAgIGlmIChwcm9kdWN0LmltYWdlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5pbWFnZSA9IHByb2R1Y3QuaW1hZ2U7XG4gICAgaWYgKHByb2R1Y3QuaW1hZ2VzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5pbWFnZXMgPSBwcm9kdWN0LmltYWdlcztcbiAgICBpZiAocHJvZHVjdC5zdG9jayAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Quc3RvY2sgPSBwcm9kdWN0LnN0b2NrO1xuICAgIGlmIChwcm9kdWN0LmNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5jYXRlZ29yeSA9IHByb2R1Y3QuY2F0ZWdvcnk7XG4gICAgaWYgKHByb2R1Y3Quc2l6ZXMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnNpemVzID0gcHJvZHVjdC5zaXplcztcbiAgICBpZiAocHJvZHVjdC5jb2xvcnMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmNvbG9ycyA9IHByb2R1Y3QuY29sb3JzO1xuICAgIGlmIChwcm9kdWN0LmluU3RvY2sgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmluX3N0b2NrID0gcHJvZHVjdC5pblN0b2NrO1xuICAgIGlmIChwcm9kdWN0LnJhdGluZyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QucmF0aW5nID0gcHJvZHVjdC5yYXRpbmc7XG4gICAgaWYgKHByb2R1Y3QucmV2aWV3cyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QucmV2aWV3cyA9IHByb2R1Y3QucmV2aWV3cztcbiAgICBpZiAocHJvZHVjdC5za3UgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnNrdSA9IHByb2R1Y3Quc2t1O1xuICAgIGlmIChwcm9kdWN0LndlaWdodCAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Qud2VpZ2h0ID0gcHJvZHVjdC53ZWlnaHQ7XG4gICAgaWYgKHByb2R1Y3QuZGltZW5zaW9ucyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuZGltZW5zaW9ucyA9IHByb2R1Y3QuZGltZW5zaW9ucztcbiAgICBpZiAocHJvZHVjdC50YWdzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC50YWdzID0gcHJvZHVjdC50YWdzO1xuICAgIGlmIChwcm9kdWN0LmZlYXR1cmVkICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5mZWF0dXJlZCA9IHByb2R1Y3QuZmVhdHVyZWQ7XG4gICAgaWYgKHByb2R1Y3Quc2l6ZUNoYXJ0Q2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnNpemVfY2hhcnRfY2F0ZWdvcnkgPSBwcm9kdWN0LnNpemVDaGFydENhdGVnb3J5O1xuICAgIGlmIChwcm9kdWN0LmN1c3RvbVNpemVDaGFydCAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuY3VzdG9tX3NpemVfY2hhcnQgPSBwcm9kdWN0LmN1c3RvbVNpemVDaGFydDtcbiAgICBpZiAocHJvZHVjdC51c2VDdXN0b21TaXplQ2hhcnQgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnVzZV9jdXN0b21fc2l6ZV9jaGFydCA9IHByb2R1Y3QudXNlQ3VzdG9tU2l6ZUNoYXJ0O1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnVwZGF0ZShkYlByb2R1Y3QpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogVXBkYXRlZCBwcm9kdWN0OicsIGlkKTtcbiAgICBcbiAgICAvLyBJbnZhbGlkYXRlIGNhY2hlXG4gICAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XG4gICAgXG4gICAgcmV0dXJuIGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QoZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2lkJywgaWQpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogRGVsZXRlZCBwcm9kdWN0OicsIGlkKTtcbiAgICBcbiAgICAvLyBJbnZhbGlkYXRlIGNhY2hlXG4gICAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGRhdGFiYXNlIG9yZGVyIHRvIE9yZGVyIGludGVyZmFjZVxuZnVuY3Rpb24gY29udmVydERiT3JkZXJUb09yZGVyKGRiT3JkZXI6IGFueSk6IE9yZGVyIHtcbiAgLy8gRXh0cmFjdCBjdXN0b21lciBpbmZvIGZyb20gaXRlbXMgb3IgdXNlIGRlZmF1bHRzXG4gIGNvbnN0IGZpcnN0SXRlbSA9IGRiT3JkZXIuaXRlbXMgJiYgZGJPcmRlci5pdGVtcy5sZW5ndGggPiAwID8gZGJPcmRlci5pdGVtc1swXSA6IHt9O1xuICBcbiAgcmV0dXJuIHtcbiAgICBpZDogZGJPcmRlci5pZCxcbiAgICBwcm9kdWN0SWQ6IGZpcnN0SXRlbS5wcm9kdWN0SWQgfHwgJycsXG4gICAgcHJvZHVjdE5hbWU6IGZpcnN0SXRlbS5wcm9kdWN0TmFtZSB8fCAnJyxcbiAgICBwcm9kdWN0SW1hZ2U6IGZpcnN0SXRlbS5wcm9kdWN0SW1hZ2UgfHwgJycsXG4gICAgY3VzdG9tZXJOYW1lOiBmaXJzdEl0ZW0uY3VzdG9tZXJOYW1lIHx8ICcnLFxuICAgIGN1c3RvbWVyUGhvbmU6IGZpcnN0SXRlbS5jdXN0b21lclBob25lIHx8ICcnLFxuICAgIGN1c3RvbWVyRW1haWw6IGZpcnN0SXRlbS5jdXN0b21lckVtYWlsIHx8ICcnLFxuICAgIGN1c3RvbWVyQWRkcmVzczogZmlyc3RJdGVtLmN1c3RvbWVyQWRkcmVzcyB8fCAnJyxcbiAgICBjdXN0b21lckNpdHk6IGZpcnN0SXRlbS5jdXN0b21lckNpdHkgfHwgJycsXG4gICAgd2lsYXlhSWQ6IGZpcnN0SXRlbS53aWxheWFJZCB8fCAwLFxuICAgIHdpbGF5YU5hbWU6IGZpcnN0SXRlbS53aWxheWFOYW1lIHx8ICcnLFxuICAgIHNoaXBwaW5nVHlwZTogZGJPcmRlci5zaGlwcGluZ190eXBlIHx8ICdob21lRGVsaXZlcnknLFxuICAgIHNoaXBwaW5nQ29zdDogTnVtYmVyKGRiT3JkZXIuc2hpcHBpbmdfY29zdCkgfHwgMCxcbiAgICBxdWFudGl0eTogZmlyc3RJdGVtLnF1YW50aXR5IHx8IDEsXG4gICAgc2VsZWN0ZWRTaXplOiBmaXJzdEl0ZW0uc2VsZWN0ZWRTaXplIHx8ICcnLFxuICAgIHNlbGVjdGVkQ29sb3I6IGZpcnN0SXRlbS5zZWxlY3RlZENvbG9yIHx8ICcnLFxuICAgIHN1YnRvdGFsOiBOdW1iZXIoZGJPcmRlci50b3RhbCkgLSBOdW1iZXIoZGJPcmRlci5zaGlwcGluZ19jb3N0KSB8fCAwLFxuICAgIHRvdGFsOiBOdW1iZXIoZGJPcmRlci50b3RhbCkgfHwgMCxcbiAgICBvcmRlckRhdGU6IG5ldyBEYXRlKGRiT3JkZXIub3JkZXJfZGF0ZSksXG4gICAgc3RhdHVzOiBkYk9yZGVyLnN0YXR1cyB8fCAncGVuZGluZycsXG4gICAgdHJhY2tpbmdOdW1iZXI6IGRiT3JkZXIudHJhY2tpbmdfbnVtYmVyLFxuICAgIG5vdGVzOiBmaXJzdEl0ZW0ubm90ZXMsXG4gICAgcGF5bWVudE1ldGhvZDogZGJPcmRlci5wYXltZW50X21ldGhvZCB8fCAnY29kJyxcbiAgICBwYXltZW50U3RhdHVzOiBkYk9yZGVyLnBheW1lbnRfc3RhdHVzIHx8ICdwZW5kaW5nJyxcbiAgICBlc3RpbWF0ZWREZWxpdmVyeTogZmlyc3RJdGVtLmVzdGltYXRlZERlbGl2ZXJ5LFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoZGJPcmRlci5jcmVhdGVkX2F0KSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKGRiT3JkZXIudXBkYXRlZF9hdClcbiAgfTtcbn1cblxuLy8gQ2FjaGUgZm9yIG9yZGVycyB0byByZWR1Y2UgZGF0YWJhc2UgY2FsbHNcbmxldCBvcmRlcnNDYWNoZTogT3JkZXJbXSB8IG51bGwgPSBudWxsO1xubGV0IG9yZGVyc0NhY2hlVGltZSA9IDA7XG5cbi8vIE9yZGVycyBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JkZXJzKCk6IFByb21pc2U8T3JkZXJbXT4ge1xuICB0cnkge1xuICAgIC8vIFJldHVybiBjYWNoZWQgZGF0YSBpZiBzdGlsbCBmcmVzaFxuICAgIGlmIChvcmRlcnNDYWNoZSAmJiBEYXRlLm5vdygpIC0gb3JkZXJzQ2FjaGVUaW1lIDwgQ0FDSEVfRFVSQVRJT04pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogUmV0dXJuaW5nIGNhY2hlZCBvcmRlcnMnKTtcbiAgICAgIHJldHVybiBvcmRlcnNDYWNoZTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignb3JkZXJfZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVycyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gb3JkZXJzQ2FjaGUgfHwgW107XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG9yZGVycyA9IChkYXRhIHx8IFtdKS5tYXAoY29udmVydERiT3JkZXJUb09yZGVyKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICBvcmRlcnNDYWNoZSA9IG9yZGVycztcbiAgICBvcmRlcnNDYWNoZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIHJldHVybiBvcmRlcnM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0T3JkZXJzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gb3JkZXJzQ2FjaGUgfHwgW107XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0T3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0T3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRPcmRlcihvcmRlcjogT3JkZXIpOiBQcm9taXNlPE9yZGVyPiB7XG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBPcmRlciBpbnRlcmZhY2UgdG8gZGF0YWJhc2UgZm9ybWF0XG4gICAgY29uc3QgZGJPcmRlciA9IHtcbiAgICAgIGlkOiBvcmRlci5pZCxcbiAgICAgIGN1c3RvbWVyX2lkOiBgQ1VTVC0ke0RhdGUubm93KCl9YCwgLy8gR2VuZXJhdGUgY3VzdG9tZXIgSURcbiAgICAgIGl0ZW1zOiBbe1xuICAgICAgICBwcm9kdWN0SWQ6IG9yZGVyLnByb2R1Y3RJZCxcbiAgICAgICAgcHJvZHVjdE5hbWU6IG9yZGVyLnByb2R1Y3ROYW1lLFxuICAgICAgICBwcm9kdWN0SW1hZ2U6IG9yZGVyLnByb2R1Y3RJbWFnZSxcbiAgICAgICAgY3VzdG9tZXJOYW1lOiBvcmRlci5jdXN0b21lck5hbWUsXG4gICAgICAgIGN1c3RvbWVyUGhvbmU6IG9yZGVyLmN1c3RvbWVyUGhvbmUsXG4gICAgICAgIGN1c3RvbWVyRW1haWw6IG9yZGVyLmN1c3RvbWVyRW1haWwsXG4gICAgICAgIGN1c3RvbWVyQWRkcmVzczogb3JkZXIuY3VzdG9tZXJBZGRyZXNzLFxuICAgICAgICBjdXN0b21lckNpdHk6IG9yZGVyLmN1c3RvbWVyQ2l0eSxcbiAgICAgICAgd2lsYXlhSWQ6IG9yZGVyLndpbGF5YUlkLFxuICAgICAgICB3aWxheWFOYW1lOiBvcmRlci53aWxheWFOYW1lLFxuICAgICAgICBxdWFudGl0eTogb3JkZXIucXVhbnRpdHksXG4gICAgICAgIHNlbGVjdGVkU2l6ZTogb3JkZXIuc2VsZWN0ZWRTaXplLFxuICAgICAgICBzZWxlY3RlZENvbG9yOiBvcmRlci5zZWxlY3RlZENvbG9yLFxuICAgICAgICBub3Rlczogb3JkZXIubm90ZXMsXG4gICAgICAgIGVzdGltYXRlZERlbGl2ZXJ5OiBvcmRlci5lc3RpbWF0ZWREZWxpdmVyeVxuICAgICAgfV0sXG4gICAgICB0b3RhbDogb3JkZXIudG90YWwsXG4gICAgICBzaGlwcGluZ19jb3N0OiBvcmRlci5zaGlwcGluZ0Nvc3QsXG4gICAgICBzaGlwcGluZ190eXBlOiBvcmRlci5zaGlwcGluZ1R5cGUsXG4gICAgICBwYXltZW50X21ldGhvZDogb3JkZXIucGF5bWVudE1ldGhvZCxcbiAgICAgIHBheW1lbnRfc3RhdHVzOiBvcmRlci5wYXltZW50U3RhdHVzLFxuICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gICAgICB0cmFja2luZ19udW1iZXI6IG9yZGVyLnRyYWNraW5nTnVtYmVyLFxuICAgICAgb3JkZXJfZGF0ZTogb3JkZXIub3JkZXJEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICBjcmVhdGVkX2F0OiBvcmRlci5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG9yZGVyLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuaW5zZXJ0KFtkYk9yZGVyXSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogQWRkZWQgb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgIHJldHVybiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlcihpZDogc3RyaW5nLCBvcmRlcjogUGFydGlhbDxPcmRlcj4pOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIENvbnZlcnQgcGFydGlhbCBPcmRlciB0byBkYXRhYmFzZSBmb3JtYXRcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGlmIChvcmRlci5zdGF0dXMgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zdGF0dXMgPSBvcmRlci5zdGF0dXM7XG4gICAgaWYgKG9yZGVyLnBheW1lbnRTdGF0dXMgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5wYXltZW50X3N0YXR1cyA9IG9yZGVyLnBheW1lbnRTdGF0dXM7XG4gICAgaWYgKG9yZGVyLnRyYWNraW5nTnVtYmVyICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEudHJhY2tpbmdfbnVtYmVyID0gb3JkZXIudHJhY2tpbmdOdW1iZXI7XG4gICAgaWYgKG9yZGVyLnNoaXBwaW5nVHlwZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnNoaXBwaW5nX3R5cGUgPSBvcmRlci5zaGlwcGluZ1R5cGU7XG4gICAgaWYgKG9yZGVyLnNoaXBwaW5nQ29zdCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnNoaXBwaW5nX2Nvc3QgPSBvcmRlci5zaGlwcGluZ0Nvc3Q7XG4gICAgaWYgKG9yZGVyLnRvdGFsICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEudG90YWwgPSBvcmRlci50b3RhbDtcbiAgICBpZiAob3JkZXIucGF5bWVudE1ldGhvZCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnBheW1lbnRfbWV0aG9kID0gb3JkZXIucGF5bWVudE1ldGhvZDtcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZU9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgb3JkZXI6JywgaWQpO1xuICAgIHJldHVybiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVPcmRlcihpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIGdldCB0aGUgb3JkZXIgZGV0YWlscyB0byByZXN0b3JlIGludmVudG9yeVxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgZ2V0T3JkZXIoaWQpO1xuICAgIGlmICghb3JkZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyOiBPcmRlciBub3QgZm91bmQ6JywgaWQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFJlc3RvcmUgaW52ZW50b3J5IHF1YW50aXR5XG4gICAgaWYgKG9yZGVyLnByb2R1Y3RJZCAmJiBvcmRlci5zZWxlY3RlZFNpemUgJiYgb3JkZXIuc2VsZWN0ZWRDb2xvciAmJiBvcmRlci5xdWFudGl0eSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBhZGRJbnZlbnRvcnkgfSA9IGF3YWl0IGltcG9ydCgnLi9pbnZlbnRvcnlTZXJ2aWNlJyk7XG4gICAgICAgIGNvbnN0IGludmVudG9yeVJlc3RvcmVkID0gYXdhaXQgYWRkSW52ZW50b3J5KFxuICAgICAgICAgIG9yZGVyLnByb2R1Y3RJZCxcbiAgICAgICAgICBvcmRlci5zZWxlY3RlZFNpemUsXG4gICAgICAgICAgb3JkZXIuc2VsZWN0ZWRDb2xvcixcbiAgICAgICAgICBvcmRlci5xdWFudGl0eSxcbiAgICAgICAgICBgT3JkZXIgJHtpZH0gZGVsZXRlZCAtIGludmVudG9yeSByZXN0b3JlZGAsXG4gICAgICAgICAgJ2FkbWluJ1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGludmVudG9yeVJlc3RvcmVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyOiBJbnZlbnRvcnkgcmVzdG9yZWQgZm9yIG9yZGVyOicsIGlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyOiBGYWlsZWQgdG8gcmVzdG9yZSBpbnZlbnRvcnkgZm9yIG9yZGVyOicsIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoaW52ZW50b3J5RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlT3JkZXI6IEludmVudG9yeSByZXN0b3JhdGlvbiBlcnJvcjonLCBpbnZlbnRvcnlFcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGggb3JkZXIgZGVsZXRpb24gZXZlbiBpZiBpbnZlbnRvcnkgcmVzdG9yYXRpb24gZmFpbHNcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWxldGUgdGhlIG9yZGVyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2lkJywgaWQpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IERlbGV0ZWQgb3JkZXI6JywgaWQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuXG4vLyBXaWxheWEgb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdpbGF5YVRhcmlmZnMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnd2lsYXlhX3RhcmlmZnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ29yZGVyJywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRXaWxheWFUYXJpZmZzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJhbnNmb3JtIHRoZSBkYXRhIHRvIG1hdGNoIHRoZSBleHBlY3RlZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZERhdGEgPSAoZGF0YSB8fCBbXSkubWFwKHRhcmlmZiA9PiAoe1xuICAgICAgaWQ6IHRhcmlmZi5pZC50b1N0cmluZygpLFxuICAgICAgd2lsYXlhX2lkOiB0YXJpZmYud2lsYXlhX2lkLFxuICAgICAgbmFtZTogdGFyaWZmLm5hbWUsXG4gICAgICBkb21pY2lsZV9lY29tbWVyY2U6IHRhcmlmZi5kb21pY2lsZV9lY29tbWVyY2UsXG4gICAgICBzdG9wX2Rlc2tfZWNvbW1lcmNlOiB0YXJpZmYuc3RvcF9kZXNrX2Vjb21tZXJjZSxcbiAgICAgIG9yZGVyOiB0YXJpZmYub3JkZXIsXG4gICAgICAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgaG9tZV9kZWxpdmVyeTogdGFyaWZmLmRvbWljaWxlX2Vjb21tZXJjZSxcbiAgICAgIHN0b3BfZGVzazogdGFyaWZmLnN0b3BfZGVza19lY29tbWVyY2UsXG4gICAgICBob21lRGVsaXZlcnk6IHRhcmlmZi5kb21pY2lsZV9lY29tbWVyY2UsXG4gICAgICBzdG9wRGVzazogdGFyaWZmLnN0b3BfZGVza19lY29tbWVyY2UsXG4gICAgICBkb21pY2lsZUVjb21tZXJjZTogdGFyaWZmLmRvbWljaWxlX2Vjb21tZXJjZSxcbiAgICAgIHN0b3BEZXNrRWNvbW1lcmNlOiB0YXJpZmYuc3RvcF9kZXNrX2Vjb21tZXJjZVxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4gdHJhbnNmb3JtZWREYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFdpbGF5YVRhcmlmZnMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlV2lsYXlhVGFyaWZmcyh0YXJpZmZzOiBhbnlbXSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIC8vIERlbGV0ZSBhbGwgZXhpc3RpbmcgdGFyaWZmc1xuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnd2lsYXlhX3RhcmlmZnMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAubmVxKCdpZCcsIDApOyAvLyBEZWxldGUgYWxsIHJlY29yZHNcbiAgICBcbiAgICAvLyBJbnNlcnQgbmV3IHRhcmlmZnNcbiAgICBpZiAodGFyaWZmcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBUcmFuc2Zvcm0gdGhlIGRhdGEgdG8gbWF0Y2ggZGF0YWJhc2Ugc3RydWN0dXJlXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZFRhcmlmZnMgPSB0YXJpZmZzLm1hcCh0YXJpZmYgPT4gKHtcbiAgICAgICAgd2lsYXlhX2lkOiB0YXJpZmYud2lsYXlhX2lkIHx8IHRhcmlmZi5pZCxcbiAgICAgICAgbmFtZTogdGFyaWZmLm5hbWUsXG4gICAgICAgIGRvbWljaWxlX2Vjb21tZXJjZTogdGFyaWZmLmRvbWljaWxlX2Vjb21tZXJjZSB8fCB0YXJpZmYuZG9taWNpbGVFY29tbWVyY2UgfHwgdGFyaWZmLmhvbWVfZGVsaXZlcnkgfHwgdGFyaWZmLmhvbWVEZWxpdmVyeSB8fCAwLFxuICAgICAgICBzdG9wX2Rlc2tfZWNvbW1lcmNlOiB0YXJpZmYuc3RvcF9kZXNrX2Vjb21tZXJjZSB8fCB0YXJpZmYuc3RvcERlc2tFY29tbWVyY2UgfHwgdGFyaWZmLnN0b3BfZGVzayB8fCB0YXJpZmYuc3RvcERlc2sgfHwgMCxcbiAgICAgICAgb3JkZXI6IHRhcmlmZi5vcmRlciB8fCAxXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd3aWxheWFfdGFyaWZmcycpXG4gICAgICAgIC5pbnNlcnQodHJhbnNmb3JtZWRUYXJpZmZzKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVdpbGF5YVRhcmlmZnMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIHdpbGF5YSB0YXJpZmZzJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlV2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSW52ZW50b3J5IG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZlbnRvcnkoKTogUHJvbWlzZTxhbnlbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnNlbGVjdCgnaWQsIG5hbWUsIHNrdSwgc3RvY2ssIHNpemVzLCBjb2xvcnMsIGluX3N0b2NrLCBjYXRlZ29yeScpXG4gICAgICAub3JkZXIoJ25hbWUnKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIC8vIFRyYW5zZm9ybSBkYXRhIGZvciBpbnZlbnRvcnkgbWFuYWdlbWVudFxuICAgIHJldHVybiAoZGF0YSB8fCBbXSkubWFwKHByb2R1Y3QgPT4gKHtcbiAgICAgIGlkOiBwcm9kdWN0LmlkLFxuICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxuICAgICAgc2t1OiBwcm9kdWN0LnNrdSxcbiAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LmNhdGVnb3J5LFxuICAgICAgaW5TdG9jazogcHJvZHVjdC5pbl9zdG9jayxcbiAgICAgIHN0b2NrOiBwcm9kdWN0LnN0b2NrIHx8IHt9LFxuICAgICAgc2l6ZXM6IHByb2R1Y3Quc2l6ZXMgfHwgW10sXG4gICAgICBjb2xvcnM6IHByb2R1Y3QuY29sb3JzIHx8IFtdLFxuICAgICAgdG90YWxTdG9jazogY2FsY3VsYXRlVG90YWxTdG9jayhwcm9kdWN0LnN0b2NrIHx8IHt9KSxcbiAgICAgIHN0b2NrQnlTaXplOiBjYWxjdWxhdGVTdG9ja0J5U2l6ZShwcm9kdWN0LnN0b2NrIHx8IHt9LCBwcm9kdWN0LnNpemVzIHx8IFtdLCBwcm9kdWN0LmNvbG9ycyB8fCBbXSlcbiAgICB9KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUludmVudG9yeShwcm9kdWN0SWQ6IHN0cmluZywgc3RvY2tEYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVwZGF0ZU9iajogYW55ID0ge1xuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBcbiAgICBpZiAoc3RvY2tEYXRhLnN0b2NrKSB7XG4gICAgICB1cGRhdGVPYmouc3RvY2sgPSBzdG9ja0RhdGEuc3RvY2s7XG4gICAgfVxuICAgIFxuICAgIGlmIChzdG9ja0RhdGEuaW5TdG9jayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVPYmouaW5fc3RvY2sgPSBzdG9ja0RhdGEuaW5TdG9jaztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAudXBkYXRlKHVwZGF0ZU9iailcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZUludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIGludmVudG9yeSBmb3IgcHJvZHVjdDonLCBwcm9kdWN0SWQpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIHN0b2NrOiBkYXRhLnN0b2NrLFxuICAgICAgaW5TdG9jazogZGF0YS5pbl9zdG9jayxcbiAgICAgIHRvdGFsU3RvY2s6IGNhbGN1bGF0ZVRvdGFsU3RvY2soZGF0YS5zdG9jaylcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZUludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgaW52ZW50b3J5IGNhbGN1bGF0aW9uc1xuZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxTdG9jayhzdG9jazogYW55KTogbnVtYmVyIHtcbiAgaWYgKCFzdG9jayB8fCB0eXBlb2Ygc3RvY2sgIT09ICdvYmplY3QnKSByZXR1cm4gMDtcbiAgXG4gIGxldCB0b3RhbCA9IDA7XG4gIGZvciAoY29uc3Qgc2l6ZSBpbiBzdG9jaykge1xuICAgIGlmICh0eXBlb2Ygc3RvY2tbc2l6ZV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKGNvbnN0IGNvbG9yIGluIHN0b2NrW3NpemVdKSB7XG4gICAgICAgIHRvdGFsICs9IE51bWJlcihzdG9ja1tzaXplXVtjb2xvcl0pIHx8IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0b3RhbDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlU3RvY2tCeVNpemUoc3RvY2s6IGFueSwgc2l6ZXM6IHN0cmluZ1tdLCBjb2xvcnM6IHN0cmluZ1tdKTogYW55IHtcbiAgY29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcbiAgXG4gIHNpemVzLmZvckVhY2goc2l6ZSA9PiB7XG4gICAgcmVzdWx0W3NpemVdID0ge307XG4gICAgY29sb3JzLmZvckVhY2goY29sb3IgPT4ge1xuICAgICAgcmVzdWx0W3NpemVdW2NvbG9yXSA9IE51bWJlcihzdG9ja1tzaXplXT8uW2NvbG9yXSkgfHwgMDtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBTdG9jayBkZWR1Y3Rpb24gZnVuY3Rpb24gZm9yIG9yZGVyc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlZHVjdFN0b2NrRnJvbU9yZGVyKG9yZGVyOiBPcmRlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogRGVkdWN0aW5nIHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBwcm9kdWN0XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGdldFByb2R1Y3Qob3JkZXIucHJvZHVjdElkKTtcbiAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBQcm9kdWN0IG5vdCBmb3VuZCBmb3Igb3JkZXI6Jywgb3JkZXIucHJvZHVjdElkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBlbm91Z2ggc3RvY2tcbiAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBwcm9kdWN0LnN0b2NrPy5bb3JkZXIuc2VsZWN0ZWRTaXplXT8uW29yZGVyLnNlbGVjdGVkQ29sb3JdIHx8IDA7XG4gICAgaWYgKGN1cnJlbnRTdG9jayA8IG9yZGVyLnF1YW50aXR5KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogSW5zdWZmaWNpZW50IHN0b2NrIGZvciBvcmRlcjonLCB7XG4gICAgICAgIHByb2R1Y3RJZDogb3JkZXIucHJvZHVjdElkLFxuICAgICAgICBzaXplOiBvcmRlci5zZWxlY3RlZFNpemUsXG4gICAgICAgIGNvbG9yOiBvcmRlci5zZWxlY3RlZENvbG9yLFxuICAgICAgICByZXF1ZXN0ZWQ6IG9yZGVyLnF1YW50aXR5LFxuICAgICAgICBhdmFpbGFibGU6IGN1cnJlbnRTdG9ja1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIERlZHVjdCB0aGUgc3RvY2sgZnJvbSBwcm9kdWN0XG4gICAgY29uc3QgbmV3U3RvY2sgPSB7XG4gICAgICAuLi5wcm9kdWN0LnN0b2NrLFxuICAgICAgW29yZGVyLnNlbGVjdGVkU2l6ZV06IHtcbiAgICAgICAgLi4ucHJvZHVjdC5zdG9jaz8uW29yZGVyLnNlbGVjdGVkU2l6ZV0sXG4gICAgICAgIFtvcmRlci5zZWxlY3RlZENvbG9yXTogY3VycmVudFN0b2NrIC0gb3JkZXIucXVhbnRpdHlcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgcHJvZHVjdCBzdG9ja1xuICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgdXBkYXRlUHJvZHVjdChvcmRlci5wcm9kdWN0SWQsIHtcbiAgICAgIHN0b2NrOiBuZXdTdG9jayxcbiAgICAgIGluU3RvY2s6IGNhbGN1bGF0ZVRvdGFsU3RvY2sobmV3U3RvY2spID4gMFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghdXBkYXRlZFByb2R1Y3QpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBGYWlsZWQgdG8gdXBkYXRlIHByb2R1Y3Qgc3RvY2sgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBBbHNvIGRlZHVjdCBmcm9tIGludmVudG9yeSBzeXN0ZW1cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBhZGRJbnZlbnRvcnkgfSA9IGF3YWl0IGltcG9ydCgnLi9pbnZlbnRvcnlTZXJ2aWNlJyk7XG4gICAgICBjb25zdCBpbnZlbnRvcnlEZWR1Y3RlZCA9IGF3YWl0IGFkZEludmVudG9yeShcbiAgICAgICAgb3JkZXIucHJvZHVjdElkLFxuICAgICAgICBvcmRlci5zZWxlY3RlZFNpemUsXG4gICAgICAgIG9yZGVyLnNlbGVjdGVkQ29sb3IsXG4gICAgICAgIC1vcmRlci5xdWFudGl0eSwgLy8gTmVnYXRpdmUgcXVhbnRpdHkgdG8gZGVkdWN0XG4gICAgICAgIGBPcmRlciAke29yZGVyLmlkfSBjcmVhdGVkIC0gc3RvY2sgZGVkdWN0ZWRgLFxuICAgICAgICAnc3lzdGVtJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGludmVudG9yeURlZHVjdGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogU3VjY2Vzc2Z1bGx5IGRlZHVjdGVkIGludmVudG9yeSBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTdXBhYmFzZTogRmFpbGVkIHRvIGRlZHVjdCBpbnZlbnRvcnkgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChpbnZlbnRvcnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEludmVudG9yeSBkZWR1Y3Rpb24gZXJyb3I6JywgaW52ZW50b3J5RXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgZXZlbiBpZiBpbnZlbnRvcnkgdXBkYXRlIGZhaWxzXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogU3VjY2Vzc2Z1bGx5IGRlZHVjdGVkIHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEVycm9yIGRlZHVjdGluZyBzdG9jayBmb3Igb3JkZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBNYWludGVuYW5jZSBzZXR0aW5ncyBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFpbnRlbmFuY2VTZXR0aW5ncygpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbWFpbnRlbmFuY2Vfc2V0dGluZ3MnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgJ21haW50ZW5hbmNlJylcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE1haW50ZW5hbmNlU2V0dGluZ3MgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgLy8gSWYgdGFibGUgZG9lc24ndCBleGlzdCwgcmV0dXJuIGRlZmF1bHQgc2V0dGluZ3NcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QyMDUnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNYWludGVuYW5jZSBzZXR0aW5ncyB0YWJsZSBub3QgZm91bmQsIHVzaW5nIGRlZmF1bHQgc2V0dGluZ3MnKTtcbiAgICAgIH1cbiAgICAgIC8vIFJldHVybiBkZWZhdWx0IHNldHRpbmdzIGlmIG5vIGRhdGEgZXhpc3RzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogJ21haW50ZW5hbmNlJyxcbiAgICAgICAgaXNfbWFpbnRlbmFuY2VfbW9kZTogZmFsc2UsXG4gICAgICAgIGRyb3BfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMzAgZGF5cyBmcm9tIG5vd1xuICAgICAgICBtYWludGVuYW5jZV9tZXNzYWdlOiAnV2UgYXJlIGN1cnJlbnRseSBwZXJmb3JtaW5nIG1haW50ZW5hbmNlLiBQbGVhc2UgY2hlY2sgYmFjayBsYXRlci4nLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGEgfHwge1xuICAgICAgaWQ6ICdtYWludGVuYW5jZScsXG4gICAgICBpc19tYWludGVuYW5jZV9tb2RlOiBmYWxzZSxcbiAgICAgIGRyb3BfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1haW50ZW5hbmNlX21lc3NhZ2U6ICdXZSBhcmUgY3VycmVudGx5IHBlcmZvcm1pbmcgbWFpbnRlbmFuY2UuIFBsZWFzZSBjaGVjayBiYWNrIGxhdGVyLicsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE1haW50ZW5hbmNlU2V0dGluZ3MgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogJ21haW50ZW5hbmNlJyxcbiAgICAgIGlzX21haW50ZW5hbmNlX21vZGU6IGZhbHNlLFxuICAgICAgZHJvcF9kYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgbWFpbnRlbmFuY2VfbWVzc2FnZTogJ1dlIGFyZSBjdXJyZW50bHkgcGVyZm9ybWluZyBtYWludGVuYW5jZS4gUGxlYXNlIGNoZWNrIGJhY2sgbGF0ZXIuJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1haW50ZW5hbmNlU2V0dGluZ3Moc2V0dGluZ3M6IHtcbiAgaXNfbWFpbnRlbmFuY2VfbW9kZT86IGJvb2xlYW47XG4gIGRyb3BfZGF0ZT86IHN0cmluZztcbiAgbWFpbnRlbmFuY2VfbWVzc2FnZT86IHN0cmluZztcbn0pOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgaWYgKHNldHRpbmdzLmlzX21haW50ZW5hbmNlX21vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5pc19tYWludGVuYW5jZV9tb2RlID0gc2V0dGluZ3MuaXNfbWFpbnRlbmFuY2VfbW9kZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHNldHRpbmdzLmRyb3BfZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVEYXRhLmRyb3BfZGF0ZSA9IHNldHRpbmdzLmRyb3BfZGF0ZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHNldHRpbmdzLm1haW50ZW5hbmNlX21lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5tYWludGVuYW5jZV9tZXNzYWdlID0gc2V0dGluZ3MubWFpbnRlbmFuY2VfbWVzc2FnZTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIG1haW50ZW5hbmNlIHNldHRpbmdzIHdpdGg6JywgdXBkYXRlRGF0YSk7XG4gICAgXG4gICAgLy8gVHJ5IHVwZGF0ZSBmaXJzdFxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlUmVzdWx0LCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbWFpbnRlbmFuY2Vfc2V0dGluZ3MnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgLmVxKCdpZCcsICdtYWludGVuYW5jZScpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VwZGF0ZSBlcnJvcjonLCB1cGRhdGVFcnJvcik7XG4gICAgICBcbiAgICAgIC8vIElmIHVwZGF0ZSBmYWlscywgdHJ5IGluc2VydFxuICAgICAgY29uc3QgeyBkYXRhOiBpbnNlcnRSZXN1bHQsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ21haW50ZW5hbmNlX3NldHRpbmdzJylcbiAgICAgICAgLmluc2VydChbe1xuICAgICAgICAgIGlkOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAgIGlzX21haW50ZW5hbmNlX21vZGU6IHNldHRpbmdzLmlzX21haW50ZW5hbmNlX21vZGUgPz8gZmFsc2UsXG4gICAgICAgICAgZHJvcF9kYXRlOiBzZXR0aW5ncy5kcm9wX2RhdGUgPz8gbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBtYWludGVuYW5jZV9tZXNzYWdlOiBzZXR0aW5ncy5tYWludGVuYW5jZV9tZXNzYWdlID8/ICdXZSBhcmUgY3VycmVudGx5IHBlcmZvcm1pbmcgbWFpbnRlbmFuY2UuIFBsZWFzZSBjaGVjayBiYWNrIGxhdGVyLicsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGluc2VydEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0luc2VydCBlcnJvcjonLCBpbnNlcnRFcnJvcik7XG4gICAgICAgIHRocm93IGluc2VydEVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IENyZWF0ZWQgbWFpbnRlbmFuY2Ugc2V0dGluZ3MnKTtcbiAgICAgIHJldHVybiBpbnNlcnRSZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogVXBkYXRlZCBtYWludGVuYW5jZSBzZXR0aW5ncycpO1xuICAgIHJldHVybiB1cGRhdGVSZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlTWFpbnRlbmFuY2VTZXR0aW5ncyBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gQ3VzdG9tZXJzIG1ldGhvZHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXN0b21lcnMoKTogUHJvbWlzZTxDdXN0b21lcltdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjdXN0b21lcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRDdXN0b21lcnMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogRmV0Y2hlZCcsIGRhdGE/Lmxlbmd0aCB8fCAwLCAnY3VzdG9tZXJzJyk7XG4gICAgcmV0dXJuIGRhdGEgfHwgW107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0Q3VzdG9tZXJzIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ3VzdG9tZXIoY3VzdG9tZXJEYXRhOiBPbWl0PEN1c3RvbWVyLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pOiBQcm9taXNlPEN1c3RvbWVyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IHtcbiAgICAgIC4uLmN1c3RvbWVyRGF0YSxcbiAgICAgIGlkOiBgY3VzdG9tZXJfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgdXBkYXRlZF9hdDogbm93XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2N1c3RvbWVycycpXG4gICAgICAuaW5zZXJ0KFtjdXN0b21lcl0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZEN1c3RvbWVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IENyZWF0ZWQgY3VzdG9tZXI6JywgZGF0YS5pZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBwaG9uZTogZGF0YS5waG9uZSxcbiAgICAgIGFkZHJlc3M6IGRhdGEuYWRkcmVzcyxcbiAgICAgIGNpdHk6IGRhdGEuY2l0eSxcbiAgICAgIHdpbGF5YTogZGF0YS53aWxheWEsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKGRhdGEudXBkYXRlZF9hdClcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZEN1c3RvbWVyIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwiY29udmVydERiUHJvZHVjdFRvUHJvZHVjdCIsImRiUHJvZHVjdCIsImNvbnNvbGUiLCJsb2ciLCJwcmljZSIsInBhcnNlRmxvYXQiLCJjb252ZXJ0ZWRQcm9kdWN0IiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJvcmlnaW5hbFByaWNlIiwib3JpZ2luYWxfcHJpY2UiLCJ1bmRlZmluZWQiLCJpbWFnZSIsImltYWdlcyIsInN0b2NrIiwiY2F0ZWdvcnkiLCJzaXplcyIsImNvbG9ycyIsImluU3RvY2siLCJpbl9zdG9jayIsInJhdGluZyIsInJldmlld3MiLCJza3UiLCJ3ZWlnaHQiLCJkaW1lbnNpb25zIiwidGFncyIsImZlYXR1cmVkIiwic2l6ZUNoYXJ0Q2F0ZWdvcnkiLCJzaXplX2NoYXJ0X2NhdGVnb3J5IiwiY3VzdG9tU2l6ZUNoYXJ0IiwiY3VzdG9tX3NpemVfY2hhcnQiLCJ1c2VDdXN0b21TaXplQ2hhcnQiLCJ1c2VfY3VzdG9tX3NpemVfY2hhcnQiLCJjcmVhdGVkQXQiLCJEYXRlIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRfYXQiLCJwcm9kdWN0c0NhY2hlIiwicHJvZHVjdHNDYWNoZVRpbWUiLCJDQUNIRV9EVVJBVElPTiIsImNsZWFyUHJvZHVjdHNDYWNoZSIsIkNBQ0hFX0JVU1RFUiIsIm5vdyIsImdldFByb2R1Y3RzIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicHJvZHVjdHMiLCJtYXAiLCJnZXRQcm9kdWN0IiwiZXEiLCJzaW5nbGUiLCJhZGRQcm9kdWN0IiwicHJvZHVjdCIsImluc2VydCIsImluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5IiwiaW52ZW50b3J5RXJyb3IiLCJ1cGRhdGVQcm9kdWN0IiwidXBkYXRlIiwiZGVsZXRlUHJvZHVjdCIsImRlbGV0ZSIsImNvbnZlcnREYk9yZGVyVG9PcmRlciIsImRiT3JkZXIiLCJmaXJzdEl0ZW0iLCJpdGVtcyIsImxlbmd0aCIsInByb2R1Y3RJZCIsInByb2R1Y3ROYW1lIiwicHJvZHVjdEltYWdlIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJQaG9uZSIsImN1c3RvbWVyRW1haWwiLCJjdXN0b21lckFkZHJlc3MiLCJjdXN0b21lckNpdHkiLCJ3aWxheWFJZCIsIndpbGF5YU5hbWUiLCJzaGlwcGluZ1R5cGUiLCJzaGlwcGluZ190eXBlIiwic2hpcHBpbmdDb3N0IiwiTnVtYmVyIiwic2hpcHBpbmdfY29zdCIsInF1YW50aXR5Iiwic2VsZWN0ZWRTaXplIiwic2VsZWN0ZWRDb2xvciIsInN1YnRvdGFsIiwidG90YWwiLCJvcmRlckRhdGUiLCJvcmRlcl9kYXRlIiwic3RhdHVzIiwidHJhY2tpbmdOdW1iZXIiLCJ0cmFja2luZ19udW1iZXIiLCJub3RlcyIsInBheW1lbnRNZXRob2QiLCJwYXltZW50X21ldGhvZCIsInBheW1lbnRTdGF0dXMiLCJwYXltZW50X3N0YXR1cyIsImVzdGltYXRlZERlbGl2ZXJ5Iiwib3JkZXJzQ2FjaGUiLCJvcmRlcnNDYWNoZVRpbWUiLCJnZXRPcmRlcnMiLCJvcmRlcnMiLCJnZXRPcmRlciIsImFkZE9yZGVyIiwiY3VzdG9tZXJfaWQiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZU9yZGVyIiwidXBkYXRlRGF0YSIsImRlbGV0ZU9yZGVyIiwiYWRkSW52ZW50b3J5IiwiaW52ZW50b3J5UmVzdG9yZWQiLCJ3YXJuIiwiZ2V0V2lsYXlhVGFyaWZmcyIsInRyYW5zZm9ybWVkRGF0YSIsInRhcmlmZiIsInRvU3RyaW5nIiwid2lsYXlhX2lkIiwiZG9taWNpbGVfZWNvbW1lcmNlIiwic3RvcF9kZXNrX2Vjb21tZXJjZSIsImhvbWVfZGVsaXZlcnkiLCJzdG9wX2Rlc2siLCJob21lRGVsaXZlcnkiLCJzdG9wRGVzayIsImRvbWljaWxlRWNvbW1lcmNlIiwic3RvcERlc2tFY29tbWVyY2UiLCJ1cGRhdGVXaWxheWFUYXJpZmZzIiwidGFyaWZmcyIsIm5lcSIsInRyYW5zZm9ybWVkVGFyaWZmcyIsImdldEludmVudG9yeSIsInRvdGFsU3RvY2siLCJjYWxjdWxhdGVUb3RhbFN0b2NrIiwic3RvY2tCeVNpemUiLCJjYWxjdWxhdGVTdG9ja0J5U2l6ZSIsInVwZGF0ZUludmVudG9yeSIsInN0b2NrRGF0YSIsInVwZGF0ZU9iaiIsInNpemUiLCJjb2xvciIsInJlc3VsdCIsImZvckVhY2giLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsImN1cnJlbnRTdG9jayIsInJlcXVlc3RlZCIsImF2YWlsYWJsZSIsIm5ld1N0b2NrIiwidXBkYXRlZFByb2R1Y3QiLCJpbnZlbnRvcnlEZWR1Y3RlZCIsImdldE1haW50ZW5hbmNlU2V0dGluZ3MiLCJjb2RlIiwiaXNfbWFpbnRlbmFuY2VfbW9kZSIsImRyb3BfZGF0ZSIsIm1haW50ZW5hbmNlX21lc3NhZ2UiLCJ1cGRhdGVNYWludGVuYW5jZVNldHRpbmdzIiwic2V0dGluZ3MiLCJ1cGRhdGVSZXN1bHQiLCJ1cGRhdGVFcnJvciIsImluc2VydFJlc3VsdCIsImluc2VydEVycm9yIiwiZ2V0Q3VzdG9tZXJzIiwiYWRkQ3VzdG9tZXIiLCJjdXN0b21lckRhdGEiLCJjdXN0b21lciIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHIiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsImNpdHkiLCJ3aWxheWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseDatabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validation.ts":
/*!*******************************!*\
  !*** ./src/lib/validation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationUtils: () => (/* binding */ ValidationUtils)\n/* harmony export */ });\n// Input validation and sanitization utilities\nclass ValidationUtils {\n    // Sanitize HTML input to prevent XSS\n    static sanitizeHtml(input) {\n        if (typeof input !== \"string\") return \"\";\n        return input.replace(/[<>]/g, \"\") // Remove < and >\n        .replace(/javascript:/gi, \"\") // Remove javascript: protocol\n        .replace(/on\\w+=/gi, \"\") // Remove event handlers\n        .trim();\n    }\n    // Validate email format\n    static isValidEmail(email) {\n        if (typeof email !== \"string\") return false;\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }\n    // Validate phone number (basic)\n    static isValidPhone(phone) {\n        if (typeof phone !== \"string\") return false;\n        const phoneRegex = /^[\\+]?[0-9\\s\\-\\(\\)]{8,}$/;\n        return phoneRegex.test(phone.trim());\n    }\n    // Validate required fields\n    static validateRequired(data, fields) {\n        const missingFields = [];\n        for (const field of fields){\n            if (!data[field] || typeof data[field] === \"string\" && data[field].trim() === \"\") {\n                missingFields.push(field);\n            }\n        }\n        return {\n            isValid: missingFields.length === 0,\n            missingFields\n        };\n    }\n    // Validate string length\n    static validateLength(input, min, max) {\n        if (typeof input !== \"string\") return false;\n        const length = input.trim().length;\n        return length >= min && length <= max;\n    }\n    // Validate numeric input\n    static isValidNumber(input, min, max) {\n        const num = Number(input);\n        if (isNaN(num)) return false;\n        if (min !== undefined && num < min) return false;\n        if (max !== undefined && num > max) return false;\n        return true;\n    }\n    // Sanitize product data\n    static sanitizeProductData(data) {\n        return {\n            ...data,\n            name: this.sanitizeHtml(data.name || \"\"),\n            description: this.sanitizeHtml(data.description || \"\"),\n            category: this.sanitizeHtml(data.category || \"\"),\n            price: this.isValidNumber(data.price, 0, 999999) ? Number(data.price) : 0,\n            stock: data.stock || {},\n            image: this.sanitizeHtml(data.image || \"\"),\n            colors: Array.isArray(data.colors) ? data.colors.map((c)=>this.sanitizeHtml(c)) : [],\n            sizes: Array.isArray(data.sizes) ? data.sizes.map((s)=>this.sanitizeHtml(s)) : []\n        };\n    }\n    // Sanitize order data\n    static sanitizeOrderData(data) {\n        return {\n            ...data,\n            customerName: this.sanitizeHtml(data.customerName || \"\"),\n            customerEmail: this.isValidEmail(data.customerEmail) ? data.customerEmail.trim() : \"\",\n            customerPhone: this.isValidPhone(data.customerPhone) ? data.customerPhone.trim() : \"\",\n            customerAddress: this.sanitizeHtml(data.customerAddress || \"\"),\n            productName: this.sanitizeHtml(data.productName || \"\"),\n            selectedSize: this.sanitizeHtml(data.selectedSize || \"\"),\n            selectedColor: this.sanitizeHtml(data.selectedColor || \"\"),\n            notes: this.sanitizeHtml(data.notes || \"\"),\n            quantity: this.isValidNumber(data.quantity, 1, 100) ? Number(data.quantity) : 1,\n            total: this.isValidNumber(data.total, 0, 999999) ? Number(data.total) : 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2xpYi92YWxpZGF0aW9uLnRzPzQ2MGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW5wdXQgdmFsaWRhdGlvbiBhbmQgc2FuaXRpemF0aW9uIHV0aWxpdGllc1xyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblV0aWxzIHtcclxuICAvLyBTYW5pdGl6ZSBIVE1MIGlucHV0IHRvIHByZXZlbnQgWFNTXHJcbiAgc3RhdGljIHNhbml0aXplSHRtbChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIHJldHVybiBpbnB1dFxyXG4gICAgICAucmVwbGFjZSgvWzw+XS9nLCAnJykgLy8gUmVtb3ZlIDwgYW5kID5cclxuICAgICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gUmVtb3ZlIGphdmFzY3JpcHQ6IHByb3RvY29sXHJcbiAgICAgIC5yZXBsYWNlKC9vblxcdys9L2dpLCAnJykgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIC50cmltKCk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXRcclxuICBzdGF0aWMgaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgZW1haWwgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XHJcbiAgICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsLnRyaW0oKSk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXIgKGJhc2ljKVxyXG4gIHN0YXRpYyBpc1ZhbGlkUGhvbmUocGhvbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHR5cGVvZiBwaG9uZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IHBob25lUmVnZXggPSAvXltcXCtdP1swLTlcXHNcXC1cXChcXCldezgsfSQvO1xyXG4gICAgcmV0dXJuIHBob25lUmVnZXgudGVzdChwaG9uZS50cmltKCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgc3RhdGljIHZhbGlkYXRlUmVxdWlyZWQoZGF0YTogYW55LCBmaWVsZHM6IHN0cmluZ1tdKTogeyBpc1ZhbGlkOiBib29sZWFuOyBtaXNzaW5nRmllbGRzOiBzdHJpbmdbXSB9IHtcclxuICAgIGNvbnN0IG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XHJcbiAgICAgIGlmICghZGF0YVtmaWVsZF0gfHwgKHR5cGVvZiBkYXRhW2ZpZWxkXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtmaWVsZF0udHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICBtaXNzaW5nRmllbGRzLnB1c2goZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmFsaWQ6IG1pc3NpbmdGaWVsZHMubGVuZ3RoID09PSAwLFxyXG4gICAgICBtaXNzaW5nRmllbGRzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgc3RyaW5nIGxlbmd0aFxyXG4gIHN0YXRpYyB2YWxpZGF0ZUxlbmd0aChpbnB1dDogc3RyaW5nLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC50cmltKCkubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGxlbmd0aCA+PSBtaW4gJiYgbGVuZ3RoIDw9IG1heDtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIG51bWVyaWMgaW5wdXRcclxuICBzdGF0aWMgaXNWYWxpZE51bWJlcihpbnB1dDogYW55LCBtaW4/OiBudW1iZXIsIG1heD86IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgbnVtID0gTnVtYmVyKGlucHV0KTtcclxuICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbnVtIDwgbWluKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbnVtID4gbWF4KSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIHByb2R1Y3QgZGF0YVxyXG4gIHN0YXRpYyBzYW5pdGl6ZVByb2R1Y3REYXRhKGRhdGE6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICBuYW1lOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLm5hbWUgfHwgJycpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyksXHJcbiAgICAgIGNhdGVnb3J5OiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmNhdGVnb3J5IHx8ICcnKSxcclxuICAgICAgcHJpY2U6IHRoaXMuaXNWYWxpZE51bWJlcihkYXRhLnByaWNlLCAwLCA5OTk5OTkpID8gTnVtYmVyKGRhdGEucHJpY2UpIDogMCxcclxuICAgICAgc3RvY2s6IGRhdGEuc3RvY2sgfHwge30sXHJcbiAgICAgIGltYWdlOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmltYWdlIHx8ICcnKSxcclxuICAgICAgY29sb3JzOiBBcnJheS5pc0FycmF5KGRhdGEuY29sb3JzKSA/IGRhdGEuY29sb3JzLm1hcCgoYzogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChjKSkgOiBbXSxcclxuICAgICAgc2l6ZXM6IEFycmF5LmlzQXJyYXkoZGF0YS5zaXplcykgPyBkYXRhLnNpemVzLm1hcCgoczogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChzKSkgOiBbXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIG9yZGVyIGRhdGFcclxuICBzdGF0aWMgc2FuaXRpemVPcmRlckRhdGEoZGF0YTogYW55KTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmRhdGEsXHJcbiAgICAgIGN1c3RvbWVyTmFtZTogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5jdXN0b21lck5hbWUgfHwgJycpLFxyXG4gICAgICBjdXN0b21lckVtYWlsOiB0aGlzLmlzVmFsaWRFbWFpbChkYXRhLmN1c3RvbWVyRW1haWwpID8gZGF0YS5jdXN0b21lckVtYWlsLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lclBob25lOiB0aGlzLmlzVmFsaWRQaG9uZShkYXRhLmN1c3RvbWVyUGhvbmUpID8gZGF0YS5jdXN0b21lclBob25lLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lckFkZHJlc3M6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuY3VzdG9tZXJBZGRyZXNzIHx8ICcnKSxcclxuICAgICAgcHJvZHVjdE5hbWU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEucHJvZHVjdE5hbWUgfHwgJycpLFxyXG4gICAgICBzZWxlY3RlZFNpemU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuc2VsZWN0ZWRTaXplIHx8ICcnKSxcclxuICAgICAgc2VsZWN0ZWRDb2xvcjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5zZWxlY3RlZENvbG9yIHx8ICcnKSxcclxuICAgICAgbm90ZXM6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEubm90ZXMgfHwgJycpLFxyXG4gICAgICBxdWFudGl0eTogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEucXVhbnRpdHksIDEsIDEwMCkgPyBOdW1iZXIoZGF0YS5xdWFudGl0eSkgOiAxLFxyXG4gICAgICB0b3RhbDogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEudG90YWwsIDAsIDk5OTk5OSkgPyBOdW1iZXIoZGF0YS50b3RhbCkgOiAwXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvblV0aWxzIiwic2FuaXRpemVIdG1sIiwiaW5wdXQiLCJyZXBsYWNlIiwidHJpbSIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwiZW1haWxSZWdleCIsInRlc3QiLCJpc1ZhbGlkUGhvbmUiLCJwaG9uZSIsInBob25lUmVnZXgiLCJ2YWxpZGF0ZVJlcXVpcmVkIiwiZGF0YSIsImZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWVsZCIsInB1c2giLCJpc1ZhbGlkIiwibGVuZ3RoIiwidmFsaWRhdGVMZW5ndGgiLCJtaW4iLCJtYXgiLCJpc1ZhbGlkTnVtYmVyIiwibnVtIiwiTnVtYmVyIiwiaXNOYU4iLCJ1bmRlZmluZWQiLCJzYW5pdGl6ZVByb2R1Y3REYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcmljZSIsInN0b2NrIiwiaW1hZ2UiLCJjb2xvcnMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJjIiwic2l6ZXMiLCJzIiwic2FuaXRpemVPcmRlckRhdGEiLCJjdXN0b21lck5hbWUiLCJjdXN0b21lckVtYWlsIiwiY3VzdG9tZXJQaG9uZSIsImN1c3RvbWVyQWRkcmVzcyIsInByb2R1Y3ROYW1lIiwic2VsZWN0ZWRTaXplIiwic2VsZWN0ZWRDb2xvciIsIm5vdGVzIiwicXVhbnRpdHkiLCJ0b3RhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();