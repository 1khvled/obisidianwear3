"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Desktop_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/route.ts */ \"(rsc)/./src/app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Desktop\\\\projectt\\\\src\\\\app\\\\api\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Desktop_projectt_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rlc2t0b3AlNUNwcm9qZWN0dCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSFAlNUNEZXNrdG9wJTVDcHJvamVjdHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8/MjMwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXHByb2plY3R0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29yZGVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yZGVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcSFBcXFxcRGVza3RvcFxcXFxwcm9qZWN0dFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxvcmRlcnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvb3JkZXJzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/orders/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\");\n/* harmony import */ var _lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authMiddleware */ \"(rsc)/./src/lib/authMiddleware.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./src/lib/validation.ts\");\n/* harmony import */ var _lib_emailService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/emailService */ \"(rsc)/./src/lib/emailService.ts\");\n\n\n\n\n\n// Ensure we use Node.js runtime for Supabase compatibility\nconst runtime = \"nodejs\";\n// GET /api/orders - Get all orders\nasync function GET() {\n    try {\n        console.log(\"Orders API: GET request started\");\n        // Check if Supabase is available\n        if (false) {}\n        const orders = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrders)();\n        console.log(\"Orders API: GET request - returning\", orders.length, \"orders\");\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: orders,\n            count: orders.length,\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: GET error:\", error);\n        console.error(\"Orders API: Error details:\", {\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            stack: error instanceof Error ? error.stack : undefined\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch orders\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/orders - Create new order (PROTECTED)\nconst POST = (0,_lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__.withAuth)(async (request)=>{\n    try {\n        const orderData = await request.json();\n        console.log(\"Orders API: Received order data:\", orderData);\n        // Validate required fields\n        const validation = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.validateRequired(orderData, [\n            \"customerName\",\n            \"productId\",\n            \"total\"\n        ]);\n        if (!validation.isValid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: `Missing required fields: ${validation.missingFields.join(\", \")}`\n            }, {\n                status: 400\n            });\n        }\n        // Validate email if provided\n        if (orderData.customerEmail && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidEmail(orderData.customerEmail)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid email format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate phone if provided\n        if (orderData.customerPhone && !_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidPhone(orderData.customerPhone)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Invalid phone number format\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate numeric fields\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.total, 0, 999999)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Total must be a valid number between 0 and 999999\"\n            }, {\n                status: 400\n            });\n        }\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.isValidNumber(orderData.quantity, 1, 100)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Quantity must be between 1 and 100\"\n            }, {\n                status: 400\n            });\n        }\n        // Sanitize order data\n        const sanitizedData = _lib_validation__WEBPACK_IMPORTED_MODULE_3__.ValidationUtils.sanitizeOrderData(orderData);\n        // Generate unique ID and create complete Order object\n        const newOrder = {\n            id: `ORD-${Date.now()}`,\n            customerName: sanitizedData.customerName,\n            customerEmail: sanitizedData.customerEmail,\n            customerPhone: sanitizedData.customerPhone,\n            customerAddress: sanitizedData.customerAddress,\n            customerCity: sanitizedData.customerCity || \"\",\n            wilayaId: sanitizedData.wilayaId || 0,\n            wilayaName: sanitizedData.wilayaName || \"\",\n            productId: sanitizedData.productId,\n            productName: sanitizedData.productName,\n            productImage: sanitizedData.productImage || \"\",\n            selectedSize: sanitizedData.selectedSize,\n            selectedColor: sanitizedData.selectedColor,\n            quantity: sanitizedData.quantity,\n            subtotal: sanitizedData.subtotal || 0,\n            shippingCost: sanitizedData.shippingCost || 0,\n            total: sanitizedData.total,\n            shippingType: sanitizedData.shippingType || \"homeDelivery\",\n            paymentMethod: sanitizedData.paymentMethod || \"cod\",\n            paymentStatus: \"pending\",\n            status: \"pending\",\n            orderDate: new Date(),\n            notes: sanitizedData.notes,\n            trackingNumber: \"\",\n            estimatedDelivery: sanitizedData.estimatedDelivery || \"\",\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        const addedOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.addOrder)(newOrder);\n        // Automatically deduct stock from inventory\n        const stockDeducted = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.deductStockFromOrder)(newOrder);\n        if (!stockDeducted) {\n            console.warn(\"Orders API: Failed to deduct stock for order:\", newOrder.id);\n        // Note: We still return success for the order, but log the stock issue\n        }\n        // Send order confirmation email (async, don't wait for it)\n        if (addedOrder.customerEmail) {\n            (0,_lib_emailService__WEBPACK_IMPORTED_MODULE_4__.sendOrderConfirmationEmail)(addedOrder).catch((error)=>{\n                console.error(\"Orders API: Failed to send confirmation email:\", error);\n            // Don't fail the order creation if email fails\n            });\n        }\n        console.log(\"Orders API: POST request - created order:\", newOrder.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: addedOrder,\n            message: \"Order created successfully\",\n            stockDeducted: stockDeducted,\n            timestamp: Date.now()\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Orders API: POST error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to create order\"\n        }, {\n            status: 500\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXdCLGdCQUFnQixNQUFNckUsMkVBQW9CQSxDQUFDNkM7UUFDakQsSUFBSSxDQUFDd0IsZUFBZTtZQUNsQi9ELFFBQVFnRSxJQUFJLENBQUMsaURBQWlEekIsU0FBU0MsRUFBRTtRQUN6RSx1RUFBdUU7UUFDekU7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSXNCLFdBQVdoQyxhQUFhLEVBQUU7WUFDNUJqQyw2RUFBMEJBLENBQUNpRSxZQUFZRyxLQUFLLENBQUMzRCxDQUFBQTtnQkFDM0NOLFFBQVFNLEtBQUssQ0FBQyxrREFBa0RBO1lBQ2hFLCtDQUErQztZQUNqRDtRQUNGO1FBRUFOLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNzQyxTQUFTQyxFQUFFO1FBRXBFLE9BQU9qRCxrRkFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUSSxNQUFNa0Q7WUFDTjdDLFNBQVM7WUFDVDhDLGVBQWVBO1lBQ2ZqRCxXQUFXQyxLQUFLQyxHQUFHO1FBQ3JCLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CLEVBQUUsT0FBT0gsT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPZixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPRixPQUFPO1FBQXlCLEdBQ2xEO1lBQUVHLFFBQVE7UUFBSTtJQUVsQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzPzhkMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZXRPcmRlcnMsIGFkZE9yZGVyLCBkZWR1Y3RTdG9ja0Zyb21PcmRlciB9IGZyb20gJ0AvbGliL3N1cGFiYXNlRGF0YWJhc2UnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICdAL2xpYi9hdXRoTWlkZGxld2FyZSc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uVXRpbHMgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9uJztcbmltcG9ydCB7IHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIH0gZnJvbSAnQC9saWIvZW1haWxTZXJ2aWNlJztcblxuLy8gRW5zdXJlIHdlIHVzZSBOb2RlLmpzIHJ1bnRpbWUgZm9yIFN1cGFiYXNlIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XG5cbi8vIEdFVCAvYXBpL29yZGVycyAtIEdldCBhbGwgb3JkZXJzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBHRVQgcmVxdWVzdCBzdGFydGVkJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXG4gICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhdGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBnZXRPcmRlcnMoKTtcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogR0VUIHJlcXVlc3QgLSByZXR1cm5pbmcnLCBvcmRlcnMubGVuZ3RoLCAnb3JkZXJzJyk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBvcmRlcnMsXG4gICAgICBjb3VudDogb3JkZXJzLmxlbmd0aCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVycyBBUEk6IEdFVCBlcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG9yZGVycycsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBQT1NUIC9hcGkvb3JkZXJzIC0gQ3JlYXRlIG5ldyBvcmRlciAoUFJPVEVDVEVEKVxuZXhwb3J0IGNvbnN0IFBPU1QgPSB3aXRoQXV0aChhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmRlckRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogUmVjZWl2ZWQgb3JkZXIgZGF0YTonLCBvcmRlckRhdGEpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBWYWxpZGF0aW9uVXRpbHMudmFsaWRhdGVSZXF1aXJlZChvcmRlckRhdGEsIFsnY3VzdG9tZXJOYW1lJywgJ3Byb2R1Y3RJZCcsICd0b3RhbCddKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiAke3ZhbGlkYXRpb24ubWlzc2luZ0ZpZWxkcy5qb2luKCcsICcpfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGVtYWlsIGlmIHByb3ZpZGVkXG4gICAgaWYgKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsICYmICFWYWxpZGF0aW9uVXRpbHMuaXNWYWxpZEVtYWlsKG9yZGVyRGF0YS5jdXN0b21lckVtYWlsKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgcGhvbmUgaWYgcHJvdmlkZWRcbiAgICBpZiAob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUgJiYgIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkUGhvbmUob3JkZXJEYXRhLmN1c3RvbWVyUGhvbmUpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBwaG9uZSBudW1iZXIgZm9ybWF0JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbnVtZXJpYyBmaWVsZHNcbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS50b3RhbCwgMCwgOTk5OTk5KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1RvdGFsIG11c3QgYmUgYSB2YWxpZCBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTk5OTknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIVZhbGlkYXRpb25VdGlscy5pc1ZhbGlkTnVtYmVyKG9yZGVyRGF0YS5xdWFudGl0eSwgMSwgMTAwKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1F1YW50aXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMDAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBvcmRlciBkYXRhXG4gICAgY29uc3Qgc2FuaXRpemVkRGF0YSA9IFZhbGlkYXRpb25VdGlscy5zYW5pdGl6ZU9yZGVyRGF0YShvcmRlckRhdGEpO1xuXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIElEIGFuZCBjcmVhdGUgY29tcGxldGUgT3JkZXIgb2JqZWN0XG4gICAgY29uc3QgbmV3T3JkZXI6IE9yZGVyID0ge1xuICAgICAgaWQ6IGBPUkQtJHtEYXRlLm5vdygpfWAsXG4gICAgICBjdXN0b21lck5hbWU6IHNhbml0aXplZERhdGEuY3VzdG9tZXJOYW1lLFxuICAgICAgY3VzdG9tZXJFbWFpbDogc2FuaXRpemVkRGF0YS5jdXN0b21lckVtYWlsLFxuICAgICAgY3VzdG9tZXJQaG9uZTogc2FuaXRpemVkRGF0YS5jdXN0b21lclBob25lLFxuICAgICAgY3VzdG9tZXJBZGRyZXNzOiBzYW5pdGl6ZWREYXRhLmN1c3RvbWVyQWRkcmVzcyxcbiAgICAgIGN1c3RvbWVyQ2l0eTogc2FuaXRpemVkRGF0YS5jdXN0b21lckNpdHkgfHwgJycsXG4gICAgICB3aWxheWFJZDogc2FuaXRpemVkRGF0YS53aWxheWFJZCB8fCAwLFxuICAgICAgd2lsYXlhTmFtZTogc2FuaXRpemVkRGF0YS53aWxheWFOYW1lIHx8ICcnLFxuICAgICAgcHJvZHVjdElkOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3ROYW1lLFxuICAgICAgcHJvZHVjdEltYWdlOiBzYW5pdGl6ZWREYXRhLnByb2R1Y3RJbWFnZSB8fCAnJyxcbiAgICAgIHNlbGVjdGVkU2l6ZTogc2FuaXRpemVkRGF0YS5zZWxlY3RlZFNpemUsXG4gICAgICBzZWxlY3RlZENvbG9yOiBzYW5pdGl6ZWREYXRhLnNlbGVjdGVkQ29sb3IsXG4gICAgICBxdWFudGl0eTogc2FuaXRpemVkRGF0YS5xdWFudGl0eSxcbiAgICAgIHN1YnRvdGFsOiBzYW5pdGl6ZWREYXRhLnN1YnRvdGFsIHx8IDAsXG4gICAgICBzaGlwcGluZ0Nvc3Q6IHNhbml0aXplZERhdGEuc2hpcHBpbmdDb3N0IHx8IDAsXG4gICAgICB0b3RhbDogc2FuaXRpemVkRGF0YS50b3RhbCxcbiAgICAgIHNoaXBwaW5nVHlwZTogc2FuaXRpemVkRGF0YS5zaGlwcGluZ1R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXG4gICAgICBwYXltZW50TWV0aG9kOiBzYW5pdGl6ZWREYXRhLnBheW1lbnRNZXRob2QgfHwgJ2NvZCcsXG4gICAgICBwYXltZW50U3RhdHVzOiAncGVuZGluZycsXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgIG9yZGVyRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIG5vdGVzOiBzYW5pdGl6ZWREYXRhLm5vdGVzLFxuICAgICAgdHJhY2tpbmdOdW1iZXI6ICcnLFxuICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IHNhbml0aXplZERhdGEuZXN0aW1hdGVkRGVsaXZlcnkgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkZWRPcmRlciA9IGF3YWl0IGFkZE9yZGVyKG5ld09yZGVyKTtcbiAgICBcbiAgICAvLyBBdXRvbWF0aWNhbGx5IGRlZHVjdCBzdG9jayBmcm9tIGludmVudG9yeVxuICAgIGNvbnN0IHN0b2NrRGVkdWN0ZWQgPSBhd2FpdCBkZWR1Y3RTdG9ja0Zyb21PcmRlcihuZXdPcmRlcik7XG4gICAgaWYgKCFzdG9ja0RlZHVjdGVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ09yZGVycyBBUEk6IEZhaWxlZCB0byBkZWR1Y3Qgc3RvY2sgZm9yIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICAgIC8vIE5vdGU6IFdlIHN0aWxsIHJldHVybiBzdWNjZXNzIGZvciB0aGUgb3JkZXIsIGJ1dCBsb2cgdGhlIHN0b2NrIGlzc3VlXG4gICAgfVxuICAgIFxuICAgIC8vIFNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIChhc3luYywgZG9uJ3Qgd2FpdCBmb3IgaXQpXG4gICAgaWYgKGFkZGVkT3JkZXIuY3VzdG9tZXJFbWFpbCkge1xuICAgICAgc2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwoYWRkZWRPcmRlcikuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBGYWlsZWQgdG8gc2VuZCBjb25maXJtYXRpb24gZW1haWw6JywgZXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSBvcmRlciBjcmVhdGlvbiBpZiBlbWFpbCBmYWlsc1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgQVBJOiBQT1NUIHJlcXVlc3QgLSBjcmVhdGVkIG9yZGVyOicsIG5ld09yZGVyLmlkKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGFkZGVkT3JkZXIsXG4gICAgICBtZXNzYWdlOiAnT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgc3RvY2tEZWR1Y3RlZDogc3RvY2tEZWR1Y3RlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogUE9TVCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIG9yZGVyJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0T3JkZXJzIiwiYWRkT3JkZXIiLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsIndpdGhBdXRoIiwiVmFsaWRhdGlvblV0aWxzIiwic2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwiLCJydW50aW1lIiwiR0VUIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJvcmRlcnMiLCJsZW5ndGgiLCJkYXRhIiwiY291bnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwibWVzc2FnZSIsIkVycm9yIiwic3RhY2siLCJ1bmRlZmluZWQiLCJkZXRhaWxzIiwiUE9TVCIsInJlcXVlc3QiLCJvcmRlckRhdGEiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVSZXF1aXJlZCIsImlzVmFsaWQiLCJtaXNzaW5nRmllbGRzIiwiam9pbiIsImN1c3RvbWVyRW1haWwiLCJpc1ZhbGlkRW1haWwiLCJjdXN0b21lclBob25lIiwiaXNWYWxpZFBob25lIiwiaXNWYWxpZE51bWJlciIsInRvdGFsIiwicXVhbnRpdHkiLCJzYW5pdGl6ZWREYXRhIiwic2FuaXRpemVPcmRlckRhdGEiLCJuZXdPcmRlciIsImlkIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJBZGRyZXNzIiwiY3VzdG9tZXJDaXR5Iiwid2lsYXlhSWQiLCJ3aWxheWFOYW1lIiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0SW1hZ2UiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwic3VidG90YWwiLCJzaGlwcGluZ0Nvc3QiLCJzaGlwcGluZ1R5cGUiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudFN0YXR1cyIsIm9yZGVyRGF0ZSIsIm5vdGVzIiwidHJhY2tpbmdOdW1iZXIiLCJlc3RpbWF0ZWREZWxpdmVyeSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImFkZGVkT3JkZXIiLCJzdG9ja0RlZHVjdGVkIiwid2FybiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authMiddleware.ts":
/*!***********************************!*\
  !*** ./src/lib/authMiddleware.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateRequest: () => (/* binding */ authenticateRequest),\n/* harmony export */   generateApiToken: () => (/* binding */ generateApiToken),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _rateLimiter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rateLimiter */ \"(rsc)/./src/lib/rateLimiter.ts\");\n\n\n// Simple authentication middleware for API routes\nfunction authenticateRequest(request) {\n    // Get authorization header\n    const authHeader = request.headers.get(\"authorization\");\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return false;\n    }\n    // Extract token\n    const token = authHeader.substring(7);\n    // Simple token validation (in production, use JWT or proper session validation)\n    const expectedToken = process.env.NEXT_PUBLIC_API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n    return token === expectedToken;\n}\n// Middleware wrapper for protected API routes\nfunction withAuth(handler) {\n    return async (request, ...args)=>{\n        // Skip auth for public routes\n        const url = new URL(request.url);\n        const publicRoutes = [\n            \"/api/maintenance\",\n            \"/api/test-db\",\n            \"/api/test-supabase\"\n        ];\n        if (publicRoutes.some((route)=>url.pathname.startsWith(route))) {\n            return handler(request, ...args);\n        }\n        // Get client IP for rate limiting\n        const clientIP = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        // Check rate limit\n        const rateLimitResult = (0,_rateLimiter__WEBPACK_IMPORTED_MODULE_1__.checkRateLimit)(clientIP, _rateLimiter__WEBPACK_IMPORTED_MODULE_1__.apiRateLimiter);\n        if (!rateLimitResult.allowed) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Too Many Requests\",\n                message: \"Rate limit exceeded. Please try again later.\"\n            }, {\n                status: 429,\n                headers: rateLimitResult.headers\n            });\n        }\n        // Check authentication\n        if (!authenticateRequest(request)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Unauthorized\",\n                message: \"Authentication required\"\n            }, {\n                status: 401,\n                headers: rateLimitResult.headers\n            });\n        }\n        return handler(request, ...args);\n    };\n}\n// Generate API token for admin\nfunction generateApiToken() {\n    return process.env.NEXT_PUBLIC_API_AUTH_TOKEN || \"obsidian-api-token-2025\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGhNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ087QUFFL0Qsa0RBQWtEO0FBQzNDLFNBQVNHLG9CQUFvQkMsT0FBb0I7SUFDdEQsMkJBQTJCO0lBQzNCLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBRXZDLElBQUksQ0FBQ0YsY0FBYyxDQUFDQSxXQUFXRyxVQUFVLENBQUMsWUFBWTtRQUNwRCxPQUFPO0lBQ1Q7SUFFQSxnQkFBZ0I7SUFDaEIsTUFBTUMsUUFBUUosV0FBV0ssU0FBUyxDQUFDO0lBRW5DLGdGQUFnRjtJQUNoRixNQUFNQyxnQkFBZ0JDLFFBQVFDLEdBQUcsQ0FBQ0MsMEJBQTBCLElBQUk7SUFFaEUsT0FBT0wsVUFBVUU7QUFDbkI7QUFFQSw4Q0FBOEM7QUFDdkMsU0FBU0ksU0FBU0MsT0FBaUI7SUFDeEMsT0FBTyxPQUFPWixTQUFzQixHQUFHYTtRQUNyQyw4QkFBOEI7UUFDOUIsTUFBTUMsTUFBTSxJQUFJQyxJQUFJZixRQUFRYyxHQUFHO1FBQy9CLE1BQU1FLGVBQWU7WUFBQztZQUFvQjtZQUFnQjtTQUFxQjtRQUUvRSxJQUFJQSxhQUFhQyxJQUFJLENBQUNDLENBQUFBLFFBQVNKLElBQUlLLFFBQVEsQ0FBQ2YsVUFBVSxDQUFDYyxTQUFTO1lBQzlELE9BQU9OLFFBQVFaLFlBQVlhO1FBQzdCO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1PLFdBQVdwQixRQUFRcUIsRUFBRSxJQUFJckIsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCO1FBRXpFLG1CQUFtQjtRQUNuQixNQUFNbUIsa0JBQWtCekIsNERBQWNBLENBQUN1QixVQUFVdEIsd0RBQWNBO1FBQy9ELElBQUksQ0FBQ3dCLGdCQUFnQkMsT0FBTyxFQUFFO1lBQzVCLE9BQU8zQixrRkFBWUEsQ0FBQzRCLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWCxHQUNBO2dCQUNFQyxRQUFRO2dCQUNSMUIsU0FBU29CLGdCQUFnQnBCLE9BQU87WUFDbEM7UUFFSjtRQUVBLHVCQUF1QjtRQUN2QixJQUFJLENBQUNILG9CQUFvQkMsVUFBVTtZQUNqQyxPQUFPSixrRkFBWUEsQ0FBQzRCLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWCxHQUNBO2dCQUNFQyxRQUFRO2dCQUNSMUIsU0FBU29CLGdCQUFnQnBCLE9BQU87WUFDbEM7UUFFSjtRQUVBLE9BQU9VLFFBQVFaLFlBQVlhO0lBQzdCO0FBQ0Y7QUFFQSwrQkFBK0I7QUFDeEIsU0FBU2dCO0lBQ2QsT0FBT3JCLFFBQVFDLEdBQUcsQ0FBQ0MsMEJBQTBCLElBQUk7QUFDbkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2xpYi9hdXRoTWlkZGxld2FyZS50cz9iMjYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNoZWNrUmF0ZUxpbWl0LCBhcGlSYXRlTGltaXRlciB9IGZyb20gJy4vcmF0ZUxpbWl0ZXInO1xyXG5cclxuLy8gU2ltcGxlIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmUgZm9yIEFQSSByb3V0ZXNcclxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBib29sZWFuIHtcclxuICAvLyBHZXQgYXV0aG9yaXphdGlvbiBoZWFkZXJcclxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xyXG4gIFxyXG4gIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEV4dHJhY3QgdG9rZW5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gIFxyXG4gIC8vIFNpbXBsZSB0b2tlbiB2YWxpZGF0aW9uIChpbiBwcm9kdWN0aW9uLCB1c2UgSldUIG9yIHByb3BlciBzZXNzaW9uIHZhbGlkYXRpb24pXHJcbiAgY29uc3QgZXhwZWN0ZWRUb2tlbiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9BVVRIX1RPS0VOIHx8ICdvYnNpZGlhbi1hcGktdG9rZW4tMjAyNSc7XHJcbiAgXHJcbiAgcmV0dXJuIHRva2VuID09PSBleHBlY3RlZFRva2VuO1xyXG59XHJcblxyXG4vLyBNaWRkbGV3YXJlIHdyYXBwZXIgZm9yIHByb3RlY3RlZCBBUEkgcm91dGVzXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyOiBGdW5jdGlvbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAvLyBTa2lwIGF1dGggZm9yIHB1YmxpYyByb3V0ZXNcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgcHVibGljUm91dGVzID0gWycvYXBpL21haW50ZW5hbmNlJywgJy9hcGkvdGVzdC1kYicsICcvYXBpL3Rlc3Qtc3VwYWJhc2UnXTtcclxuICAgIFxyXG4gICAgaWYgKHB1YmxpY1JvdXRlcy5zb21lKHJvdXRlID0+IHVybC5wYXRobmFtZS5zdGFydHNXaXRoKHJvdXRlKSkpIHtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGNsaWVudCBJUCBmb3IgcmF0ZSBsaW1pdGluZ1xyXG4gICAgY29uc3QgY2xpZW50SVAgPSByZXF1ZXN0LmlwIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8ICd1bmtub3duJztcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgcmF0ZSBsaW1pdFxyXG4gICAgY29uc3QgcmF0ZUxpbWl0UmVzdWx0ID0gY2hlY2tSYXRlTGltaXQoY2xpZW50SVAsIGFwaVJhdGVMaW1pdGVyKTtcclxuICAgIGlmICghcmF0ZUxpbWl0UmVzdWx0LmFsbG93ZWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1RvbyBNYW55IFJlcXVlc3RzJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3RhdHVzOiA0MjksXHJcbiAgICAgICAgICBoZWFkZXJzOiByYXRlTGltaXRSZXN1bHQuaGVhZGVyc1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxyXG4gICAgaWYgKCFhdXRoZW50aWNhdGVSZXF1ZXN0KHJlcXVlc3QpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdGF0dXM6IDQwMSxcclxuICAgICAgICAgIGhlYWRlcnM6IHJhdGVMaW1pdFJlc3VsdC5oZWFkZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcXVlc3QsIC4uLmFyZ3MpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIEFQSSB0b2tlbiBmb3IgYWRtaW5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXBpVG9rZW4oKTogc3RyaW5nIHtcclxuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX0FVVEhfVE9LRU4gfHwgJ29ic2lkaWFuLWFwaS10b2tlbi0yMDI1JztcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2hlY2tSYXRlTGltaXQiLCJhcGlSYXRlTGltaXRlciIsImF1dGhlbnRpY2F0ZVJlcXVlc3QiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJzdGFydHNXaXRoIiwidG9rZW4iLCJzdWJzdHJpbmciLCJleHBlY3RlZFRva2VuIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9BVVRIX1RPS0VOIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwiYXJncyIsInVybCIsIlVSTCIsInB1YmxpY1JvdXRlcyIsInNvbWUiLCJyb3V0ZSIsInBhdGhuYW1lIiwiY2xpZW50SVAiLCJpcCIsInJhdGVMaW1pdFJlc3VsdCIsImFsbG93ZWQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsImdlbmVyYXRlQXBpVG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authMiddleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/emailService.ts":
/*!*********************************!*\
  !*** ./src/lib/emailService.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendOrderConfirmationEmail: () => (/* binding */ sendOrderConfirmationEmail)\n/* harmony export */ });\nasync function sendOrderConfirmationEmail(order) {\n    try {\n        const emailData = {\n            to: order.customerEmail,\n            subject: \"Your Order Confirmation - OBSIDIAN WEAR\",\n            text: generateOrderConfirmationText(order),\n            html: generateOrderConfirmationHTML(order)\n        };\n        // Use the direct email sending logic instead of making an API call\n        const nodemailer = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n        // Create transporter with Gmail SMTP\n        const transporter = nodemailer.createTransport({\n            service: \"gmail\",\n            auth: {\n                user: process.env.GMAIL_USER,\n                pass: process.env.GMAIL_APP_PASSWORD\n            }\n        });\n        // Email options\n        const mailOptions = {\n            from: {\n                name: \"OBSIDIAN WEAR\",\n                address: process.env.GMAIL_USER || \"\"\n            },\n            to: emailData.to,\n            subject: emailData.subject,\n            text: emailData.text,\n            html: emailData.html\n        };\n        // Send email\n        const info = await transporter.sendMail(mailOptions);\n        console.log(\"Order confirmation email sent successfully:\", info.messageId);\n        return true;\n    } catch (error) {\n        console.error(\"Error sending order confirmation email:\", error);\n        return false;\n    }\n}\nfunction generateOrderConfirmationText(order) {\n    return `\r\nOrder Confirmation - OBSIDIAN WEAR\r\n\r\nDear ${order.customerName},\r\n\r\nThank you for your order! Your order has been confirmed and we'll start processing it immediately.\r\n\r\nOrder Details:\r\n- Order ID: #${order.id}\r\n- Date: ${new Date(order.orderDate).toLocaleDateString()}\r\n- Product: ${order.productName}\r\n- Size: ${order.selectedSize}\r\n- Color: ${order.selectedColor}\r\n- Quantity: ${order.quantity}\r\n- Total: ${order.total.toLocaleString()} DA\r\n\r\nShipping Information:\r\n- Shipping Type: ${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}\r\n- Wilaya: ${order.wilayaName}\r\n- City: ${order.customerCity}\r\n- Address: ${order.customerAddress}\r\n- Shipping Cost: ${order.shippingCost.toLocaleString()} DA\r\n\r\nPayment Method: ${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}\r\n\r\nWe will contact you soon to confirm the delivery details.\r\n\r\nBest regards,\r\nOBSIDIAN WEAR Team\r\n  `.trim();\n}\nfunction generateOrderConfirmationHTML(order) {\n    return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Order Confirmation - OBSIDIAN WEAR</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            line-height: 1.6;\r\n            color: #333;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n            padding: 20px;\r\n            background-color: #f4f4f4;\r\n        }\r\n        .container {\r\n            background-color: white;\r\n            padding: 30px;\r\n            border-radius: 10px;\r\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\r\n        }\r\n        .header {\r\n            text-align: center;\r\n            margin-bottom: 30px;\r\n            padding-bottom: 20px;\r\n            border-bottom: 2px solid #000;\r\n        }\r\n        .logo {\r\n            font-size: 24px;\r\n            font-weight: bold;\r\n            color: #000;\r\n            margin-bottom: 10px;\r\n        }\r\n        .order-id {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 10px 20px;\r\n            border-radius: 5px;\r\n            display: inline-block;\r\n            font-weight: bold;\r\n        }\r\n        .section {\r\n            margin-bottom: 25px;\r\n        }\r\n        .section h3 {\r\n            color: #000;\r\n            border-bottom: 1px solid #eee;\r\n            padding-bottom: 5px;\r\n        }\r\n        .order-details {\r\n            background-color: #f8f8f8;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n        }\r\n        .detail-row {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: 8px;\r\n        }\r\n        .detail-label {\r\n            font-weight: bold;\r\n            color: #666;\r\n        }\r\n        .total {\r\n            background-color: #000;\r\n            color: white;\r\n            padding: 15px;\r\n            border-radius: 5px;\r\n            text-align: center;\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            margin-top: 20px;\r\n        }\r\n        .footer {\r\n            text-align: center;\r\n            margin-top: 30px;\r\n            padding-top: 20px;\r\n            border-top: 1px solid #eee;\r\n            color: #666;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <div class=\"logo\">OBSIDIAN WEAR</div>\r\n            <h1>Order Confirmation</h1>\r\n            <div class=\"order-id\">#${order.id}</div>\r\n        </div>\r\n\r\n        <p>Dear <strong>${order.customerName}</strong>,</p>\r\n        \r\n        <p>Thank you for your order! Your order has been confirmed and we'll start processing it immediately.</p>\r\n\r\n        <div class=\"section\">\r\n            <h3>Order Details</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Order ID:</span>\r\n                    <span>#${order.id}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Date:</span>\r\n                    <span>${new Date(order.orderDate).toLocaleDateString()}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Product:</span>\r\n                    <span>${order.productName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Size:</span>\r\n                    <span>${order.selectedSize}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Color:</span>\r\n                    <span>${order.selectedColor}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Quantity:</span>\r\n                    <span>${order.quantity}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Shipping Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Type:</span>\r\n                    <span>${order.shippingType === \"homeDelivery\" ? \"Home Delivery\" : \"Stop Desk\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Wilaya:</span>\r\n                    <span>${order.wilayaName}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">City:</span>\r\n                    <span>${order.customerCity}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Address:</span>\r\n                    <span>${order.customerAddress}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Shipping Cost:</span>\r\n                    <span>${order.shippingCost.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"section\">\r\n            <h3>Payment Information</h3>\r\n            <div class=\"order-details\">\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Payment Method:</span>\r\n                    <span>${order.paymentMethod === \"cod\" ? \"Cash on Delivery\" : \"Bank Transfer\"}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <span class=\"detail-label\">Subtotal:</span>\r\n                    <span>${order.subtotal.toLocaleString()} DA</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"total\">\r\n            Total: ${order.total.toLocaleString()} DA\r\n        </div>\r\n\r\n        <p>We will contact you soon to confirm the delivery details.</p>\r\n\r\n        <div class=\"footer\">\r\n            <p>Best regards,<br><strong>OBSIDIAN WEAR Team</strong></p>\r\n            <p>If you have any questions, please contact us.</p>\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>\r\n  `.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VWpCLEVBQUV2QyxNQUFNMEMsWUFBWSxLQUFLLGlCQUFpQixrQkFBa0IsWUFBWTs7OzswQkFJeEUsRUFBRTFDLE1BQU0yQyxVQUFVLENBQUM7Ozs7MEJBSW5CLEVBQUUzQyxNQUFNNEMsWUFBWSxDQUFDOzs7OzBCQUlyQixFQUFFNUMsTUFBTTZDLGVBQWUsQ0FBQzs7OzswQkFJeEIsRUFBRTdDLE1BQU04QyxZQUFZLENBQUNMLGNBQWMsR0FBRzs7Ozs7Ozs7OzswQkFVdEMsRUFBRXpDLE1BQU0rQyxhQUFhLEtBQUssUUFBUSxxQkFBcUIsZ0JBQWdCOzs7OzBCQUl2RSxFQUFFL0MsTUFBTWlELFFBQVEsQ0FBQ1IsY0FBYyxHQUFHOzs7Ozs7bUJBTXpDLEVBQUV6QyxNQUFNd0MsS0FBSyxDQUFDQyxjQUFjLEdBQUc7Ozs7Ozs7Ozs7OztFQVloRCxDQUFDLENBQUNPLElBQUk7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL2VtYWlsU2VydmljZS50cz80NWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9yZGVyIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtYWlsRGF0YSB7XHJcbiAgdG86IHN0cmluZztcclxuICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGh0bWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsKG9yZGVyOiBPcmRlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBlbWFpbERhdGE6IEVtYWlsRGF0YSA9IHtcclxuICAgICAgdG86IG9yZGVyLmN1c3RvbWVyRW1haWwsXHJcbiAgICAgIHN1YmplY3Q6ICdZb3VyIE9yZGVyIENvbmZpcm1hdGlvbiAtIE9CU0lESUFOIFdFQVInLFxyXG4gICAgICB0ZXh0OiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uVGV4dChvcmRlciksXHJcbiAgICAgIGh0bWw6IGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MKG9yZGVyKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXNlIHRoZSBkaXJlY3QgZW1haWwgc2VuZGluZyBsb2dpYyBpbnN0ZWFkIG9mIG1ha2luZyBhbiBBUEkgY2FsbFxyXG4gICAgY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdHJhbnNwb3J0ZXIgd2l0aCBHbWFpbCBTTVRQXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgc2VydmljZTogJ2dtYWlsJyxcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkdNQUlMX1VTRVIsXHJcbiAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuR01BSUxfQVBQX1BBU1NXT1JELFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRW1haWwgb3B0aW9uc1xyXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgIGZyb206IHtcclxuICAgICAgICBuYW1lOiAnT0JTSURJQU4gV0VBUicsXHJcbiAgICAgICAgYWRkcmVzczogcHJvY2Vzcy5lbnYuR01BSUxfVVNFUiB8fCAnJyxcclxuICAgICAgfSxcclxuICAgICAgdG86IGVtYWlsRGF0YS50byxcclxuICAgICAgc3ViamVjdDogZW1haWxEYXRhLnN1YmplY3QsXHJcbiAgICAgIHRleHQ6IGVtYWlsRGF0YS50ZXh0LFxyXG4gICAgICBodG1sOiBlbWFpbERhdGEuaHRtbCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCBlbWFpbFxyXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ09yZGVyIGNvbmZpcm1hdGlvbiBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseTonLCBpbmZvLm1lc3NhZ2VJZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0KG9yZGVyOiBPcmRlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuT3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUlxyXG5cclxuRGVhciAke29yZGVyLmN1c3RvbWVyTmFtZX0sXHJcblxyXG5UaGFuayB5b3UgZm9yIHlvdXIgb3JkZXIhIFlvdXIgb3JkZXIgaGFzIGJlZW4gY29uZmlybWVkIGFuZCB3ZSdsbCBzdGFydCBwcm9jZXNzaW5nIGl0IGltbWVkaWF0ZWx5LlxyXG5cclxuT3JkZXIgRGV0YWlsczpcclxuLSBPcmRlciBJRDogIyR7b3JkZXIuaWR9XHJcbi0gRGF0ZTogJHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxyXG4tIFByb2R1Y3Q6ICR7b3JkZXIucHJvZHVjdE5hbWV9XHJcbi0gU2l6ZTogJHtvcmRlci5zZWxlY3RlZFNpemV9XHJcbi0gQ29sb3I6ICR7b3JkZXIuc2VsZWN0ZWRDb2xvcn1cclxuLSBRdWFudGl0eTogJHtvcmRlci5xdWFudGl0eX1cclxuLSBUb3RhbDogJHtvcmRlci50b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQVxyXG5cclxuU2hpcHBpbmcgSW5mb3JtYXRpb246XHJcbi0gU2hpcHBpbmcgVHlwZTogJHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9XHJcbi0gV2lsYXlhOiAke29yZGVyLndpbGF5YU5hbWV9XHJcbi0gQ2l0eTogJHtvcmRlci5jdXN0b21lckNpdHl9XHJcbi0gQWRkcmVzczogJHtvcmRlci5jdXN0b21lckFkZHJlc3N9XHJcbi0gU2hpcHBpbmcgQ29zdDogJHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREFcclxuXHJcblBheW1lbnQgTWV0aG9kOiAke29yZGVyLnBheW1lbnRNZXRob2QgPT09ICdjb2QnID8gJ0Nhc2ggb24gRGVsaXZlcnknIDogJ0JhbmsgVHJhbnNmZXInfVxyXG5cclxuV2Ugd2lsbCBjb250YWN0IHlvdSBzb29uIHRvIGNvbmZpcm0gdGhlIGRlbGl2ZXJ5IGRldGFpbHMuXHJcblxyXG5CZXN0IHJlZ2FyZHMsXHJcbk9CU0lESUFOIFdFQVIgVGVhbVxyXG4gIGAudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU9yZGVyQ29uZmlybWF0aW9uSFRNTChvcmRlcjogT3JkZXIpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbjwhRE9DVFlQRSBodG1sPlxyXG48aHRtbCBsYW5nPVwiZW5cIj5cclxuPGhlYWQ+XHJcbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cclxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XHJcbiAgICA8dGl0bGU+T3JkZXIgQ29uZmlybWF0aW9uIC0gT0JTSURJQU4gV0VBUjwvdGl0bGU+XHJcbiAgICA8c3R5bGU+XHJcbiAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcclxuICAgICAgICAgICAgY29sb3I6ICMzMzM7XHJcbiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuY29udGFpbmVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmhlYWRlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAubG9nbyB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItaWQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VjdGlvbiB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zZWN0aW9uIGgzIHtcclxuICAgICAgICAgICAgY29sb3I6ICMwMDA7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAub3JkZXItZGV0YWlscyB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1yb3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1sYWJlbCB7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnRvdGFsIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmZvb3RlciB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcclxuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICB9XHJcbiAgICA8L3N0eWxlPlxyXG48L2hlYWQ+XHJcbjxib2R5PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj5PQlNJRElBTiBXRUFSPC9kaXY+XHJcbiAgICAgICAgICAgIDxoMT5PcmRlciBDb25maXJtYXRpb248L2gxPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItaWRcIj4jJHtvcmRlci5pZH08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPHA+RGVhciA8c3Ryb25nPiR7b3JkZXIuY3VzdG9tZXJOYW1lfTwvc3Ryb25nPiw8L3A+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPHA+VGhhbmsgeW91IGZvciB5b3VyIG9yZGVyISBZb3VyIG9yZGVyIGhhcyBiZWVuIGNvbmZpcm1lZCBhbmQgd2UnbGwgc3RhcnQgcHJvY2Vzc2luZyBpdCBpbW1lZGlhdGVseS48L3A+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5PcmRlciBEZXRhaWxzPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5PcmRlciBJRDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+IyR7b3JkZXIuaWR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+RGF0ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtuZXcgRGF0ZShvcmRlci5vcmRlckRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1yb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlByb2R1Y3Q6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIucHJvZHVjdE5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2l6ZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zZWxlY3RlZFNpemV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q29sb3I6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7b3JkZXIuc2VsZWN0ZWRDb2xvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5RdWFudGl0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5xdWFudGl0eX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5TaGlwcGluZyBJbmZvcm1hdGlvbjwvaDM+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlci1kZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgVHlwZTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ1R5cGUgPT09ICdob21lRGVsaXZlcnknID8gJ0hvbWUgRGVsaXZlcnknIDogJ1N0b3AgRGVzayd9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+V2lsYXlhOjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke29yZGVyLndpbGF5YU5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Q2l0eTo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckNpdHl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+QWRkcmVzczo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5jdXN0b21lckFkZHJlc3N9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+U2hpcHBpbmcgQ29zdDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zaGlwcGluZ0Nvc3QudG9Mb2NhbGVTdHJpbmcoKX0gREE8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XHJcbiAgICAgICAgICAgIDxoMz5QYXltZW50IEluZm9ybWF0aW9uPC9oMz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9yZGVyLWRldGFpbHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5QYXltZW50IE1ldGhvZDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5wYXltZW50TWV0aG9kID09PSAnY29kJyA/ICdDYXNoIG9uIERlbGl2ZXJ5JyA6ICdCYW5rIFRyYW5zZmVyJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5TdWJ0b3RhbDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtvcmRlci5zdWJ0b3RhbC50b0xvY2FsZVN0cmluZygpfSBEQTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvdGFsXCI+XHJcbiAgICAgICAgICAgIFRvdGFsOiAke29yZGVyLnRvdGFsLnRvTG9jYWxlU3RyaW5nKCl9IERBXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxwPldlIHdpbGwgY29udGFjdCB5b3Ugc29vbiB0byBjb25maXJtIHRoZSBkZWxpdmVyeSBkZXRhaWxzLjwvcD5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD5CZXN0IHJlZ2FyZHMsPGJyPjxzdHJvbmc+T0JTSURJQU4gV0VBUiBUZWFtPC9zdHJvbmc+PC9wPlxyXG4gICAgICAgICAgICA8cD5JZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCB1cy48L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9ib2R5PlxyXG48L2h0bWw+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbmRPcmRlckNvbmZpcm1hdGlvbkVtYWlsIiwib3JkZXIiLCJlbWFpbERhdGEiLCJ0byIsImN1c3RvbWVyRW1haWwiLCJzdWJqZWN0IiwidGV4dCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25UZXh0IiwiaHRtbCIsImdlbmVyYXRlT3JkZXJDb25maXJtYXRpb25IVE1MIiwibm9kZW1haWxlciIsInJlcXVpcmUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJHTUFJTF9VU0VSIiwicGFzcyIsIkdNQUlMX0FQUF9QQVNTV09SRCIsIm1haWxPcHRpb25zIiwiZnJvbSIsIm5hbWUiLCJhZGRyZXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCIsImVycm9yIiwiY3VzdG9tZXJOYW1lIiwiaWQiLCJEYXRlIiwib3JkZXJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHJvZHVjdE5hbWUiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwicXVhbnRpdHkiLCJ0b3RhbCIsInRvTG9jYWxlU3RyaW5nIiwic2hpcHBpbmdUeXBlIiwid2lsYXlhTmFtZSIsImN1c3RvbWVyQ2l0eSIsImN1c3RvbWVyQWRkcmVzcyIsInNoaXBwaW5nQ29zdCIsInBheW1lbnRNZXRob2QiLCJ0cmltIiwic3VidG90YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/emailService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/rateLimiter.ts":
/*!********************************!*\
  !*** ./src/lib/rateLimiter.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiRateLimiter: () => (/* binding */ apiRateLimiter),\n/* harmony export */   authRateLimiter: () => (/* binding */ authRateLimiter),\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit)\n/* harmony export */ });\n// Simple in-memory rate limiter\nclass RateLimiter {\n    constructor(windowMs = 60000, maxRequests = 100){\n        this.requests = new Map();\n        this.windowMs = windowMs;\n        this.maxRequests = maxRequests;\n    }\n    // Check if request is allowed\n    isAllowed(identifier) {\n        const now = Date.now();\n        const entry = this.requests.get(identifier);\n        if (!entry || now > entry.resetTime) {\n            // Create new entry or reset expired entry\n            this.requests.set(identifier, {\n                count: 1,\n                resetTime: now + this.windowMs\n            });\n            return {\n                allowed: true,\n                remaining: this.maxRequests - 1,\n                resetTime: now + this.windowMs\n            };\n        }\n        if (entry.count >= this.maxRequests) {\n            return {\n                allowed: false,\n                remaining: 0,\n                resetTime: entry.resetTime\n            };\n        }\n        // Increment count\n        entry.count++;\n        this.requests.set(identifier, entry);\n        return {\n            allowed: true,\n            remaining: this.maxRequests - entry.count,\n            resetTime: entry.resetTime\n        };\n    }\n    // Clean up expired entries\n    cleanup() {\n        const now = Date.now();\n        this.requests.forEach((entry, key)=>{\n            if (now > entry.resetTime) {\n                this.requests.delete(key);\n            }\n        });\n    }\n}\n// Create rate limiter instances\nconst apiRateLimiter = new RateLimiter(60000, 100); // 100 requests per minute\nconst authRateLimiter = new RateLimiter(300000, 5); // 5 login attempts per 5 minutes\n// Rate limiting middleware\nfunction checkRateLimit(identifier, limiter) {\n    const result = limiter.isAllowed(identifier);\n    // Clean up expired entries periodically\n    if (Math.random() < 0.01) {\n        limiter.cleanup();\n    }\n    const headers = {\n        \"X-RateLimit-Limit\": limiter[\"maxRequests\"].toString(),\n        \"X-RateLimit-Remaining\": result.remaining.toString(),\n        \"X-RateLimit-Reset\": new Date(result.resetTime).toISOString()\n    };\n    return {\n        allowed: result.allowed,\n        headers\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhdGVMaW1pdGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdDQUFnQztBQU1oQyxNQUFNQTtJQUtKQyxZQUFZQyxXQUFtQixLQUFLLEVBQUVDLGNBQXNCLEdBQUcsQ0FBRTthQUp6REMsV0FBd0MsSUFBSUM7UUFLbEQsSUFBSSxDQUFDSCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtJQUNyQjtJQUVBLDhCQUE4QjtJQUM5QkcsVUFBVUMsVUFBa0IsRUFBOEQ7UUFDeEYsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNRSxRQUFRLElBQUksQ0FBQ04sUUFBUSxDQUFDTyxHQUFHLENBQUNKO1FBRWhDLElBQUksQ0FBQ0csU0FBU0YsTUFBTUUsTUFBTUUsU0FBUyxFQUFFO1lBQ25DLDBDQUEwQztZQUMxQyxJQUFJLENBQUNSLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZO2dCQUM1Qk8sT0FBTztnQkFDUEYsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7WUFFQSxPQUFPO2dCQUNMYSxTQUFTO2dCQUNUQyxXQUFXLElBQUksQ0FBQ2IsV0FBVyxHQUFHO2dCQUM5QlMsV0FBV0osTUFBTSxJQUFJLENBQUNOLFFBQVE7WUFDaEM7UUFDRjtRQUVBLElBQUlRLE1BQU1JLEtBQUssSUFBSSxJQUFJLENBQUNYLFdBQVcsRUFBRTtZQUNuQyxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxXQUFXO2dCQUNYSixXQUFXRixNQUFNRSxTQUFTO1lBQzVCO1FBQ0Y7UUFFQSxrQkFBa0I7UUFDbEJGLE1BQU1JLEtBQUs7UUFDWCxJQUFJLENBQUNWLFFBQVEsQ0FBQ1MsR0FBRyxDQUFDTixZQUFZRztRQUU5QixPQUFPO1lBQ0xLLFNBQVM7WUFDVEMsV0FBVyxJQUFJLENBQUNiLFdBQVcsR0FBR08sTUFBTUksS0FBSztZQUN6Q0YsV0FBV0YsTUFBTUUsU0FBUztRQUM1QjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCSyxVQUFnQjtRQUNkLE1BQU1ULE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsSUFBSSxDQUFDSixRQUFRLENBQUNjLE9BQU8sQ0FBQyxDQUFDUixPQUFPUztZQUM1QixJQUFJWCxNQUFNRSxNQUFNRSxTQUFTLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQ1IsUUFBUSxDQUFDZ0IsTUFBTSxDQUFDRDtZQUN2QjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLGdDQUFnQztBQUN6QixNQUFNRSxpQkFBaUIsSUFBSXJCLFlBQVksT0FBTyxLQUFLLENBQUMsMEJBQTBCO0FBQzlFLE1BQU1zQixrQkFBa0IsSUFBSXRCLFlBQVksUUFBUSxHQUFHLENBQUMsaUNBQWlDO0FBRTVGLDJCQUEyQjtBQUNwQixTQUFTdUIsZUFBZWhCLFVBQWtCLEVBQUVpQixPQUFvQjtJQUNyRSxNQUFNQyxTQUFTRCxRQUFRbEIsU0FBUyxDQUFDQztJQUVqQyx3Q0FBd0M7SUFDeEMsSUFBSW1CLEtBQUtDLE1BQU0sS0FBSyxNQUFNO1FBQ3hCSCxRQUFRUCxPQUFPO0lBQ2pCO0lBRUEsTUFBTVcsVUFBVTtRQUNkLHFCQUFxQkosT0FBTyxDQUFDLGNBQWMsQ0FBQ0ssUUFBUTtRQUNwRCx5QkFBeUJKLE9BQU9ULFNBQVMsQ0FBQ2EsUUFBUTtRQUNsRCxxQkFBcUIsSUFBSXBCLEtBQUtnQixPQUFPYixTQUFTLEVBQUVrQixXQUFXO0lBQzdEO0lBRUEsT0FBTztRQUNMZixTQUFTVSxPQUFPVixPQUFPO1FBQ3ZCYTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2xpYi9yYXRlTGltaXRlci50cz9mODFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpbXBsZSBpbi1tZW1vcnkgcmF0ZSBsaW1pdGVyXHJcbmludGVyZmFjZSBSYXRlTGltaXRFbnRyeSB7XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICByZXNldFRpbWU6IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgUmF0ZUxpbWl0ZXIge1xyXG4gIHByaXZhdGUgcmVxdWVzdHM6IE1hcDxzdHJpbmcsIFJhdGVMaW1pdEVudHJ5PiA9IG5ldyBNYXAoKTtcclxuICBwcml2YXRlIHJlYWRvbmx5IHdpbmRvd01zOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhSZXF1ZXN0czogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aW5kb3dNczogbnVtYmVyID0gNjAwMDAsIG1heFJlcXVlc3RzOiBudW1iZXIgPSAxMDApIHtcclxuICAgIHRoaXMud2luZG93TXMgPSB3aW5kb3dNcztcclxuICAgIHRoaXMubWF4UmVxdWVzdHMgPSBtYXhSZXF1ZXN0cztcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHJlcXVlc3QgaXMgYWxsb3dlZFxyXG4gIGlzQWxsb3dlZChpZGVudGlmaWVyOiBzdHJpbmcpOiB7IGFsbG93ZWQ6IGJvb2xlYW47IHJlbWFpbmluZzogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9IHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMucmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpO1xyXG5cclxuICAgIGlmICghZW50cnkgfHwgbm93ID4gZW50cnkucmVzZXRUaW1lKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBuZXcgZW50cnkgb3IgcmVzZXQgZXhwaXJlZCBlbnRyeVxyXG4gICAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCB7XHJcbiAgICAgICAgY291bnQ6IDEsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB0aGlzLndpbmRvd01zXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhbGxvd2VkOiB0cnVlLFxyXG4gICAgICAgIHJlbWFpbmluZzogdGhpcy5tYXhSZXF1ZXN0cyAtIDEsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB0aGlzLndpbmRvd01zXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVudHJ5LmNvdW50ID49IHRoaXMubWF4UmVxdWVzdHMpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhbGxvd2VkOiBmYWxzZSxcclxuICAgICAgICByZW1haW5pbmc6IDAsXHJcbiAgICAgICAgcmVzZXRUaW1lOiBlbnRyeS5yZXNldFRpbWVcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbmNyZW1lbnQgY291bnRcclxuICAgIGVudHJ5LmNvdW50Kys7XHJcbiAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCBlbnRyeSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWxsb3dlZDogdHJ1ZSxcclxuICAgICAgcmVtYWluaW5nOiB0aGlzLm1heFJlcXVlc3RzIC0gZW50cnkuY291bnQsXHJcbiAgICAgIHJlc2V0VGltZTogZW50cnkucmVzZXRUaW1lXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzXHJcbiAgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICB0aGlzLnJlcXVlc3RzLmZvckVhY2goKGVudHJ5LCBrZXkpID0+IHtcclxuICAgICAgaWYgKG5vdyA+IGVudHJ5LnJlc2V0VGltZSkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdHMuZGVsZXRlKGtleSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIHJhdGUgbGltaXRlciBpbnN0YW5jZXNcclxuZXhwb3J0IGNvbnN0IGFwaVJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDYwMDAwLCAxMDApOyAvLyAxMDAgcmVxdWVzdHMgcGVyIG1pbnV0ZVxyXG5leHBvcnQgY29uc3QgYXV0aFJhdGVMaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKDMwMDAwMCwgNSk7IC8vIDUgbG9naW4gYXR0ZW1wdHMgcGVyIDUgbWludXRlc1xyXG5cclxuLy8gUmF0ZSBsaW1pdGluZyBtaWRkbGV3YXJlXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JhdGVMaW1pdChpZGVudGlmaWVyOiBzdHJpbmcsIGxpbWl0ZXI6IFJhdGVMaW1pdGVyKTogeyBhbGxvd2VkOiBib29sZWFuOyBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH0ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGxpbWl0ZXIuaXNBbGxvd2VkKGlkZW50aWZpZXIpO1xyXG4gIFxyXG4gIC8vIENsZWFuIHVwIGV4cGlyZWQgZW50cmllcyBwZXJpb2RpY2FsbHlcclxuICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDEpIHsgLy8gMSUgY2hhbmNlXHJcbiAgICBsaW1pdGVyLmNsZWFudXAoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAnWC1SYXRlTGltaXQtTGltaXQnOiBsaW1pdGVyWydtYXhSZXF1ZXN0cyddLnRvU3RyaW5nKCksXHJcbiAgICAnWC1SYXRlTGltaXQtUmVtYWluaW5nJzogcmVzdWx0LnJlbWFpbmluZy50b1N0cmluZygpLFxyXG4gICAgJ1gtUmF0ZUxpbWl0LVJlc2V0JzogbmV3IERhdGUocmVzdWx0LnJlc2V0VGltZSkudG9JU09TdHJpbmcoKVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhbGxvd2VkOiByZXN1bHQuYWxsb3dlZCxcclxuICAgIGhlYWRlcnNcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSYXRlTGltaXRlciIsImNvbnN0cnVjdG9yIiwid2luZG93TXMiLCJtYXhSZXF1ZXN0cyIsInJlcXVlc3RzIiwiTWFwIiwiaXNBbGxvd2VkIiwiaWRlbnRpZmllciIsIm5vdyIsIkRhdGUiLCJlbnRyeSIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiYWxsb3dlZCIsInJlbWFpbmluZyIsImNsZWFudXAiLCJmb3JFYWNoIiwia2V5IiwiZGVsZXRlIiwiYXBpUmF0ZUxpbWl0ZXIiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJjaGVja1JhdGVMaW1pdCIsImxpbWl0ZXIiLCJyZXN1bHQiLCJNYXRoIiwicmFuZG9tIiwiaGVhZGVycyIsInRvU3RyaW5nIiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/rateLimiter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseDatabase.ts":
/*!*************************************!*\
  !*** ./src/lib/supabaseDatabase.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCustomer: () => (/* binding */ addCustomer),\n/* harmony export */   addOrder: () => (/* binding */ addOrder),\n/* harmony export */   addProduct: () => (/* binding */ addProduct),\n/* harmony export */   clearProductsCache: () => (/* binding */ clearProductsCache),\n/* harmony export */   deductStockFromOrder: () => (/* binding */ deductStockFromOrder),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getCustomers: () => (/* binding */ getCustomers),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getMaintenanceSettings: () => (/* binding */ getMaintenanceSettings),\n/* harmony export */   getOrder: () => (/* binding */ getOrder),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getProduct: () => (/* binding */ getProduct),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getWilayaTariffs: () => (/* binding */ getWilayaTariffs),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateInventory: () => (/* binding */ updateInventory),\n/* harmony export */   updateMaintenanceSettings: () => (/* binding */ updateMaintenanceSettings),\n/* harmony export */   updateOrder: () => (/* binding */ updateOrder),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateWilayaTariffs: () => (/* binding */ updateWilayaTariffs)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// Database service using Supabase (free tier)\n// This provides persistent storage with a real database\n\n// Supabase configuration - MUST use environment variables\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Export the supabase client for direct use\n\n// Helper function to convert database product to Product interface\nfunction convertDbProductToProduct(dbProduct) {\n    // Debug logging\n    console.log(\"\\uD83D\\uDD0D DEBUG: Raw price from DB:\", dbProduct.price, \"Type:\", typeof dbProduct.price);\n    console.log(\"\\uD83D\\uDD0D DEBUG: Parsed price:\", parseFloat(dbProduct.price), \"Type:\", typeof parseFloat(dbProduct.price));\n    const convertedProduct = {\n        id: dbProduct.id,\n        name: dbProduct.name,\n        description: dbProduct.description,\n        price: parseFloat(dbProduct.price),\n        originalPrice: dbProduct.original_price ? parseFloat(dbProduct.original_price) : undefined,\n        image: dbProduct.image,\n        images: dbProduct.images || [],\n        stock: dbProduct.stock || {},\n        category: dbProduct.category,\n        sizes: dbProduct.sizes || [],\n        colors: dbProduct.colors || [],\n        inStock: dbProduct.in_stock,\n        rating: parseFloat(dbProduct.rating || 0),\n        reviews: dbProduct.reviews || 0,\n        sku: dbProduct.sku,\n        weight: dbProduct.weight ? parseFloat(dbProduct.weight) : undefined,\n        dimensions: dbProduct.dimensions,\n        tags: dbProduct.tags || [],\n        featured: dbProduct.featured || false,\n        sizeChartCategory: dbProduct.size_chart_category || \"T-Shirts\",\n        customSizeChart: dbProduct.custom_size_chart || undefined,\n        useCustomSizeChart: dbProduct.use_custom_size_chart || false,\n        createdAt: new Date(dbProduct.created_at),\n        updatedAt: new Date(dbProduct.updated_at)\n    };\n    console.log(\"\\uD83D\\uDD0D DEBUG: Final converted product price:\", convertedProduct.price, \"Type:\", typeof convertedProduct.price);\n    return convertedProduct;\n}\n// Cache for products to reduce database calls\nlet productsCache = null;\nlet productsCacheTime = 0;\nconst CACHE_DURATION = 30000; // 30 seconds\n// Clear cache function\nfunction clearProductsCache() {\n    productsCache = null;\n    productsCacheTime = 0;\n    console.log(\"Supabase: Products cache cleared\");\n}\n// Force clear cache immediately to fix price formatting issue\nclearProductsCache();\n// Add timestamp to force cache invalidation\nconst CACHE_BUSTER = Date.now();\nconsole.log(\"\\uD83D\\uDE80 Cache buster timestamp:\", CACHE_BUSTER);\n// Products operations\nasync function getProducts() {\n    try {\n        // Return cached data if still fresh\n        if (productsCache && Date.now() - productsCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached products\");\n            return productsCache;\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getProducts error:\", error);\n            return productsCache || [];\n        }\n        const products = (data || []).map(convertDbProductToProduct);\n        // Update cache\n        productsCache = products;\n        productsCacheTime = Date.now();\n        return products;\n    } catch (error) {\n        console.error(\"Supabase getProducts error:\", error);\n        return productsCache || [];\n    }\n}\nasync function getProduct(id) {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getProduct error:\", error);\n            return null;\n        }\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase getProduct error:\", error);\n        return null;\n    }\n}\nasync function addProduct(product) {\n    try {\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Starting to add product:\", product.id, product.name);\n        // Check if Supabase is properly configured\n        if (!supabase) {\n            console.error(\"❌ Supabase: Client not initialized\");\n            throw new Error(\"Supabase client not initialized\");\n        }\n        // Convert camelCase to snake_case for database\n        // Only include columns that exist in the current database schema\n        const dbProduct = {\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            price: product.price,\n            original_price: product.originalPrice,\n            image: product.image,\n            images: product.images || [],\n            stock: product.stock,\n            category: product.category,\n            sizes: product.sizes || [],\n            colors: product.colors || [],\n            in_stock: product.inStock,\n            rating: product.rating,\n            reviews: product.reviews,\n            sku: product.sku,\n            weight: product.weight,\n            dimensions: product.dimensions,\n            tags: product.tags || [],\n            featured: product.featured || false\n        };\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Database product object:\", JSON.stringify(dbProduct, null, 2));\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Attempting to insert into products table...\");\n        const { data, error } = await supabase.from(\"products\").insert([\n            dbProduct\n        ]).select().single();\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Insert result - data:\", data);\n        console.log(\"\\uD83D\\uDD27 Supabase addProduct: Insert result - error:\", error);\n        if (error) {\n            console.error(\"❌ Supabase addProduct error:\", error);\n            console.error(\"❌ Supabase addProduct error details:\", JSON.stringify(error, null, 2));\n            console.error(\"❌ Supabase addProduct error code:\", error.code);\n            console.error(\"❌ Supabase addProduct error message:\", error.message);\n            console.error(\"❌ Supabase addProduct error hint:\", error.hint);\n            throw new Error(`Supabase insert failed: ${error.message} (Code: ${error.code})`);\n        }\n        console.log(\"Supabase: Added product:\", product.id);\n        // Initialize inventory for the new product\n        try {\n            const { initializeProductInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            await initializeProductInventory(product.id);\n            console.log(\"Supabase: Initialized inventory for product:\", product.id);\n        } catch (inventoryError) {\n            console.error(\"Supabase: Failed to initialize inventory for product:\", product.id, inventoryError);\n        // Don't throw error here, product creation should still succeed\n        }\n        // Invalidate cache\n        productsCache = null;\n        // Convert back to camelCase\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase addProduct error:\", error);\n        throw error;\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        // Convert camelCase to snake_case for database\n        const dbProduct = {};\n        if (product.name !== undefined) dbProduct.name = product.name;\n        if (product.description !== undefined) dbProduct.description = product.description;\n        if (product.price !== undefined) dbProduct.price = product.price;\n        if (product.originalPrice !== undefined) dbProduct.original_price = product.originalPrice;\n        if (product.image !== undefined) dbProduct.image = product.image;\n        if (product.images !== undefined) dbProduct.images = product.images;\n        if (product.stock !== undefined) dbProduct.stock = product.stock;\n        if (product.category !== undefined) dbProduct.category = product.category;\n        if (product.sizes !== undefined) dbProduct.sizes = product.sizes;\n        if (product.colors !== undefined) dbProduct.colors = product.colors;\n        if (product.inStock !== undefined) dbProduct.in_stock = product.inStock;\n        if (product.rating !== undefined) dbProduct.rating = product.rating;\n        if (product.reviews !== undefined) dbProduct.reviews = product.reviews;\n        if (product.sku !== undefined) dbProduct.sku = product.sku;\n        if (product.weight !== undefined) dbProduct.weight = product.weight;\n        if (product.dimensions !== undefined) dbProduct.dimensions = product.dimensions;\n        if (product.tags !== undefined) dbProduct.tags = product.tags;\n        if (product.featured !== undefined) dbProduct.featured = product.featured;\n        if (product.sizeChartCategory !== undefined) dbProduct.size_chart_category = product.sizeChartCategory;\n        if (product.customSizeChart !== undefined) dbProduct.custom_size_chart = product.customSizeChart;\n        if (product.useCustomSizeChart !== undefined) dbProduct.use_custom_size_chart = product.useCustomSizeChart;\n        const { data, error } = await supabase.from(\"products\").update(dbProduct).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateProduct error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase updateProduct error:\", error);\n        return null;\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteProduct error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteProduct error:\", error);\n        return false;\n    }\n}\n// Helper function to convert database order to Order interface\nfunction convertDbOrderToOrder(dbOrder) {\n    // Extract customer info from items or use defaults\n    const firstItem = dbOrder.items && dbOrder.items.length > 0 ? dbOrder.items[0] : {};\n    return {\n        id: dbOrder.id,\n        productId: firstItem.productId || \"\",\n        productName: firstItem.productName || \"\",\n        productImage: firstItem.productImage || \"\",\n        customerName: firstItem.customerName || \"\",\n        customerPhone: firstItem.customerPhone || \"\",\n        customerEmail: firstItem.customerEmail || \"\",\n        customerAddress: firstItem.customerAddress || \"\",\n        customerCity: firstItem.customerCity || \"\",\n        wilayaId: firstItem.wilayaId || 0,\n        wilayaName: firstItem.wilayaName || \"\",\n        shippingType: dbOrder.shipping_type || \"homeDelivery\",\n        shippingCost: Number(dbOrder.shipping_cost) || 0,\n        quantity: firstItem.quantity || 1,\n        selectedSize: firstItem.selectedSize || \"\",\n        selectedColor: firstItem.selectedColor || \"\",\n        subtotal: Number(dbOrder.total) - Number(dbOrder.shipping_cost) || 0,\n        total: Number(dbOrder.total) || 0,\n        orderDate: new Date(dbOrder.order_date),\n        status: dbOrder.status || \"pending\",\n        trackingNumber: dbOrder.tracking_number,\n        notes: firstItem.notes,\n        paymentMethod: dbOrder.payment_method || \"cod\",\n        paymentStatus: dbOrder.payment_status || \"pending\",\n        estimatedDelivery: firstItem.estimatedDelivery,\n        createdAt: new Date(dbOrder.created_at),\n        updatedAt: new Date(dbOrder.updated_at)\n    };\n}\n// Cache for orders to reduce database calls\nlet ordersCache = null;\nlet ordersCacheTime = 0;\n// Orders operations\nasync function getOrders() {\n    try {\n        // Return cached data if still fresh\n        if (ordersCache && Date.now() - ordersCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached orders\");\n            return ordersCache;\n        }\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").order(\"order_date\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getOrders error:\", error);\n            return ordersCache || [];\n        }\n        const orders = (data || []).map(convertDbOrderToOrder);\n        // Update cache\n        ordersCache = orders;\n        ordersCacheTime = Date.now();\n        return orders;\n    } catch (error) {\n        console.error(\"Supabase getOrders error:\", error);\n        return ordersCache || [];\n    }\n}\nasync function getOrder(id) {\n    try {\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getOrder error:\", error);\n            return null;\n        }\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase getOrder error:\", error);\n        return null;\n    }\n}\nasync function addOrder(order) {\n    try {\n        // Convert Order interface to database format\n        const dbOrder = {\n            id: order.id,\n            customer_id: `CUST-${Date.now()}`,\n            items: [\n                {\n                    productId: order.productId,\n                    productName: order.productName,\n                    productImage: order.productImage,\n                    customerName: order.customerName,\n                    customerPhone: order.customerPhone,\n                    customerEmail: order.customerEmail,\n                    customerAddress: order.customerAddress,\n                    customerCity: order.customerCity,\n                    wilayaId: order.wilayaId,\n                    wilayaName: order.wilayaName,\n                    quantity: order.quantity,\n                    selectedSize: order.selectedSize,\n                    selectedColor: order.selectedColor,\n                    notes: order.notes,\n                    estimatedDelivery: order.estimatedDelivery\n                }\n            ],\n            total: order.total,\n            shipping_cost: order.shippingCost,\n            shipping_type: order.shippingType,\n            payment_method: order.paymentMethod,\n            payment_status: order.paymentStatus,\n            status: order.status,\n            tracking_number: order.trackingNumber,\n            order_date: order.orderDate.toISOString(),\n            created_at: order.createdAt.toISOString(),\n            updated_at: order.updatedAt.toISOString()\n        };\n        const { data, error } = await supabase.from(\"orders\").insert([\n            dbOrder\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addOrder error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added order:\", order.id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase addOrder error:\", error);\n        throw error;\n    }\n}\nasync function updateOrder(id, order) {\n    try {\n        // Convert partial Order to database format\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (order.status !== undefined) updateData.status = order.status;\n        if (order.paymentStatus !== undefined) updateData.payment_status = order.paymentStatus;\n        if (order.trackingNumber !== undefined) updateData.tracking_number = order.trackingNumber;\n        if (order.shippingType !== undefined) updateData.shipping_type = order.shippingType;\n        if (order.shippingCost !== undefined) updateData.shipping_cost = order.shippingCost;\n        if (order.total !== undefined) updateData.total = order.total;\n        if (order.paymentMethod !== undefined) updateData.payment_method = order.paymentMethod;\n        const { data, error } = await supabase.from(\"orders\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateOrder error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated order:\", id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase updateOrder error:\", error);\n        return null;\n    }\n}\nasync function deleteOrder(id) {\n    try {\n        // First, get the order details to restore inventory\n        const order = await getOrder(id);\n        if (!order) {\n            console.error(\"Supabase deleteOrder: Order not found:\", id);\n            return false;\n        }\n        // Restore inventory quantity\n        if (order.productId && order.selectedSize && order.selectedColor && order.quantity) {\n            try {\n                const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n                const inventoryRestored = await addInventory(order.productId, order.selectedSize, order.selectedColor, order.quantity, `Order ${id} deleted - inventory restored`, \"admin\");\n                if (inventoryRestored) {\n                    console.log(\"Supabase deleteOrder: Inventory restored for order:\", id);\n                } else {\n                    console.warn(\"Supabase deleteOrder: Failed to restore inventory for order:\", id);\n                }\n            } catch (inventoryError) {\n                console.error(\"Supabase deleteOrder: Inventory restoration error:\", inventoryError);\n            // Continue with order deletion even if inventory restoration fails\n            }\n        }\n        // Delete the order\n        const { error } = await supabase.from(\"orders\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteOrder error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted order:\", id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteOrder error:\", error);\n        return false;\n    }\n}\n// Wilaya operations\nasync function getWilayaTariffs() {\n    try {\n        const { data, error } = await supabase.from(\"wilaya_tariffs\").select(\"*\").order(\"order\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Supabase getWilayaTariffs error:\", error);\n            return [];\n        }\n        // Transform the data to match the expected format\n        const transformedData = (data || []).map((tariff)=>({\n                id: tariff.id.toString(),\n                wilaya_id: tariff.wilaya_id,\n                name: tariff.name,\n                domicile_ecommerce: tariff.domicile_ecommerce,\n                stop_desk_ecommerce: tariff.stop_desk_ecommerce,\n                order: tariff.order,\n                // Legacy compatibility for backward compatibility\n                home_delivery: tariff.domicile_ecommerce,\n                stop_desk: tariff.stop_desk_ecommerce,\n                homeDelivery: tariff.domicile_ecommerce,\n                stopDesk: tariff.stop_desk_ecommerce,\n                domicileEcommerce: tariff.domicile_ecommerce,\n                stopDeskEcommerce: tariff.stop_desk_ecommerce\n            }));\n        return transformedData;\n    } catch (error) {\n        console.error(\"Supabase getWilayaTariffs error:\", error);\n        return [];\n    }\n}\nasync function updateWilayaTariffs(tariffs) {\n    try {\n        // Delete all existing tariffs\n        await supabase.from(\"wilaya_tariffs\").delete().neq(\"id\", 0); // Delete all records\n        // Insert new tariffs\n        if (tariffs.length > 0) {\n            // Transform the data to match database structure\n            const transformedTariffs = tariffs.map((tariff)=>({\n                    wilaya_id: tariff.wilaya_id || tariff.id,\n                    name: tariff.name,\n                    domicile_ecommerce: tariff.domicile_ecommerce || tariff.domicileEcommerce || tariff.home_delivery || tariff.homeDelivery || 0,\n                    stop_desk_ecommerce: tariff.stop_desk_ecommerce || tariff.stopDeskEcommerce || tariff.stop_desk || tariff.stopDesk || 0,\n                    order: tariff.order || 1\n                }));\n            const { error } = await supabase.from(\"wilaya_tariffs\").insert(transformedTariffs);\n            if (error) {\n                console.error(\"Supabase updateWilayaTariffs error:\", error);\n                throw error;\n            }\n        }\n        console.log(\"Supabase: Updated wilaya tariffs\");\n    } catch (error) {\n        console.error(\"Supabase updateWilayaTariffs error:\", error);\n        throw error;\n    }\n}\n// Inventory operations\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"products\").select(\"id, name, sku, stock, sizes, colors, in_stock, category\").order(\"name\");\n        if (error) {\n            console.error(\"Supabase getInventory error:\", error);\n            return [];\n        }\n        // Transform data for inventory management\n        return (data || []).map((product)=>({\n                id: product.id,\n                name: product.name,\n                sku: product.sku,\n                category: product.category,\n                inStock: product.in_stock,\n                stock: product.stock || {},\n                sizes: product.sizes || [],\n                colors: product.colors || [],\n                totalStock: calculateTotalStock(product.stock || {}),\n                stockBySize: calculateStockBySize(product.stock || {}, product.sizes || [], product.colors || [])\n            }));\n    } catch (error) {\n        console.error(\"Supabase getInventory error:\", error);\n        return [];\n    }\n}\nasync function updateInventory(productId, stockData) {\n    try {\n        const updateObj = {\n            updated_at: new Date().toISOString()\n        };\n        if (stockData.stock) {\n            updateObj.stock = stockData.stock;\n        }\n        if (stockData.inStock !== undefined) {\n            updateObj.in_stock = stockData.inStock;\n        }\n        const { data, error } = await supabase.from(\"products\").update(updateObj).eq(\"id\", productId).select().single();\n        if (error) {\n            console.error(\"Supabase updateInventory error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Updated inventory for product:\", productId);\n        return {\n            id: data.id,\n            name: data.name,\n            stock: data.stock,\n            inStock: data.in_stock,\n            totalStock: calculateTotalStock(data.stock)\n        };\n    } catch (error) {\n        console.error(\"Supabase updateInventory error:\", error);\n        throw error;\n    }\n}\n// Helper functions for inventory calculations\nfunction calculateTotalStock(stock) {\n    if (!stock || typeof stock !== \"object\") return 0;\n    let total = 0;\n    for(const size in stock){\n        if (typeof stock[size] === \"object\") {\n            for(const color in stock[size]){\n                total += Number(stock[size][color]) || 0;\n            }\n        }\n    }\n    return total;\n}\nfunction calculateStockBySize(stock, sizes, colors) {\n    const result = {};\n    sizes.forEach((size)=>{\n        result[size] = {};\n        colors.forEach((color)=>{\n            result[size][color] = Number(stock[size]?.[color]) || 0;\n        });\n    });\n    return result;\n}\n// Stock deduction function for orders\nasync function deductStockFromOrder(order) {\n    try {\n        console.log(\"Supabase: Deducting stock for order:\", order.id);\n        // Get the product\n        const product = await getProduct(order.productId);\n        if (!product) {\n            console.error(\"Supabase: Product not found for order:\", order.productId);\n            return false;\n        }\n        // Check if we have enough stock\n        const currentStock = product.stock?.[order.selectedSize]?.[order.selectedColor] || 0;\n        if (currentStock < order.quantity) {\n            console.error(\"Supabase: Insufficient stock for order:\", {\n                productId: order.productId,\n                size: order.selectedSize,\n                color: order.selectedColor,\n                requested: order.quantity,\n                available: currentStock\n            });\n            return false;\n        }\n        // Deduct the stock from product\n        const newStock = {\n            ...product.stock,\n            [order.selectedSize]: {\n                ...product.stock?.[order.selectedSize],\n                [order.selectedColor]: currentStock - order.quantity\n            }\n        };\n        // Update the product stock\n        const updatedProduct = await updateProduct(order.productId, {\n            stock: newStock,\n            inStock: calculateTotalStock(newStock) > 0\n        });\n        if (!updatedProduct) {\n            console.error(\"Supabase: Failed to update product stock for order:\", order.id);\n            return false;\n        }\n        // Also deduct from inventory system\n        try {\n            const { addInventory } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_inventoryService_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./inventoryService */ \"(rsc)/./src/lib/inventoryService.ts\"));\n            const inventoryDeducted = await addInventory(order.productId, order.selectedSize, order.selectedColor, -order.quantity, `Order ${order.id} created - stock deducted`, \"system\");\n            if (inventoryDeducted) {\n                console.log(\"Supabase: Successfully deducted inventory for order:\", order.id);\n            } else {\n                console.warn(\"Supabase: Failed to deduct inventory for order:\", order.id);\n            }\n        } catch (inventoryError) {\n            console.error(\"Supabase: Inventory deduction error:\", inventoryError);\n        // Continue even if inventory update fails\n        }\n        console.log(\"Supabase: Successfully deducted stock for order:\", order.id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase: Error deducting stock for order:\", error);\n        return false;\n    }\n}\n// Maintenance settings operations\nasync function getMaintenanceSettings() {\n    try {\n        const { data, error } = await supabase.from(\"maintenance_settings\").select(\"*\").eq(\"id\", \"maintenance\").single();\n        if (error) {\n            console.error(\"Supabase getMaintenanceSettings error:\", error);\n            // If table doesn't exist, return default settings\n            if (error.code === \"PGRST205\") {\n                console.log(\"Maintenance settings table not found, using default settings\");\n            }\n            // Return default settings if no data exists\n            return {\n                id: \"maintenance\",\n                is_maintenance_mode: false,\n                drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n        }\n        return data || {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(\"Supabase getMaintenanceSettings error:\", error);\n        return {\n            id: \"maintenance\",\n            is_maintenance_mode: false,\n            drop_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n            maintenance_message: \"We are currently performing maintenance. Please check back later.\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n    }\n}\nasync function updateMaintenanceSettings(settings) {\n    try {\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (settings.is_maintenance_mode !== undefined) {\n            updateData.is_maintenance_mode = settings.is_maintenance_mode;\n        }\n        if (settings.drop_date !== undefined) {\n            updateData.drop_date = settings.drop_date;\n        }\n        if (settings.maintenance_message !== undefined) {\n            updateData.maintenance_message = settings.maintenance_message;\n        }\n        console.log(\"Updating maintenance settings with:\", updateData);\n        // Try update first\n        const { data: updateResult, error: updateError } = await supabase.from(\"maintenance_settings\").update(updateData).eq(\"id\", \"maintenance\").select().single();\n        if (updateError) {\n            console.error(\"Update error:\", updateError);\n            // If update fails, try insert\n            const { data: insertResult, error: insertError } = await supabase.from(\"maintenance_settings\").insert([\n                {\n                    id: \"maintenance\",\n                    is_maintenance_mode: settings.is_maintenance_mode ?? false,\n                    drop_date: settings.drop_date ?? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n                    maintenance_message: settings.maintenance_message ?? \"We are currently performing maintenance. Please check back later.\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                }\n            ]).select().single();\n            if (insertError) {\n                console.error(\"Insert error:\", insertError);\n                throw insertError;\n            }\n            console.log(\"Supabase: Created maintenance settings\");\n            return insertResult;\n        }\n        console.log(\"Supabase: Updated maintenance settings\");\n        return updateResult;\n    } catch (error) {\n        console.error(\"Supabase updateMaintenanceSettings error:\", error);\n        throw error;\n    }\n}\n// Customers methods\nasync function getCustomers() {\n    try {\n        const { data, error } = await supabase.from(\"customers\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getCustomers error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Fetched\", data?.length || 0, \"customers\");\n        return data || [];\n    } catch (error) {\n        console.error(\"Supabase getCustomers error:\", error);\n        throw error;\n    }\n}\nasync function addCustomer(customerData) {\n    try {\n        const now = new Date().toISOString();\n        const customer = {\n            ...customerData,\n            id: `customer_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n            created_at: now,\n            updated_at: now\n        };\n        const { data, error } = await supabase.from(\"customers\").insert([\n            customer\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addCustomer error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Created customer:\", data.id);\n        return {\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            phone: data.phone,\n            address: data.address,\n            city: data.city,\n            wilaya: data.wilaya,\n            createdAt: new Date(data.created_at),\n            updatedAt: new Date(data.updated_at)\n        };\n    } catch (error) {\n        console.error(\"Supabase addCustomer error:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2tJLE9BQU87WUFDckJDLE1BQU1uSSxLQUFLbUksSUFBSTtZQUNmQyxRQUFRcEksS0FBS29JLE1BQU07WUFDbkJoSixXQUFXLElBQUlDLEtBQUtXLEtBQUtWLFVBQVU7WUFDbkNDLFdBQVcsSUFBSUYsS0FBS1csS0FBS1IsVUFBVTtRQUNyQztJQUNGLEVBQUUsT0FBT1MsT0FBTztRQUNkN0MsUUFBUTZDLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL3N1cGFiYXNlRGF0YWJhc2UudHM/ZjQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEYXRhYmFzZSBzZXJ2aWNlIHVzaW5nIFN1cGFiYXNlIChmcmVlIHRpZXIpXG4vLyBUaGlzIHByb3ZpZGVzIHBlcnNpc3RlbnQgc3RvcmFnZSB3aXRoIGEgcmVhbCBkYXRhYmFzZVxuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgUHJvZHVjdCwgT3JkZXIgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gQ3VzdG9tZXIgaW50ZXJmYWNlXG5pbnRlcmZhY2UgQ3VzdG9tZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBob25lOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgY2l0eTogc3RyaW5nO1xuICB3aWxheWE6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbi8vIFN1cGFiYXNlIGNvbmZpZ3VyYXRpb24gLSBNVVNUIHVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VLZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcy4gUGxlYXNlIHNldCBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYW5kIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJyk7XG59XG5cbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSk7XG5cbi8vIEV4cG9ydCB0aGUgc3VwYWJhc2UgY2xpZW50IGZvciBkaXJlY3QgdXNlXG5leHBvcnQgeyBzdXBhYmFzZSB9O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBkYXRhYmFzZSBwcm9kdWN0IHRvIFByb2R1Y3QgaW50ZXJmYWNlXG5mdW5jdGlvbiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRiUHJvZHVjdDogYW55KTogUHJvZHVjdCB7XG4gIC8vIERlYnVnIGxvZ2dpbmdcbiAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IFJhdyBwcmljZSBmcm9tIERCOicsIGRiUHJvZHVjdC5wcmljZSwgJ1R5cGU6JywgdHlwZW9mIGRiUHJvZHVjdC5wcmljZSk7XG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBQYXJzZWQgcHJpY2U6JywgcGFyc2VGbG9hdChkYlByb2R1Y3QucHJpY2UpLCAnVHlwZTonLCB0eXBlb2YgcGFyc2VGbG9hdChkYlByb2R1Y3QucHJpY2UpKTtcbiAgXG4gIGNvbnN0IGNvbnZlcnRlZFByb2R1Y3QgPSB7XG4gICAgaWQ6IGRiUHJvZHVjdC5pZCxcbiAgICBuYW1lOiBkYlByb2R1Y3QubmFtZSxcbiAgICBkZXNjcmlwdGlvbjogZGJQcm9kdWN0LmRlc2NyaXB0aW9uLFxuICAgIHByaWNlOiBwYXJzZUZsb2F0KGRiUHJvZHVjdC5wcmljZSksXG4gICAgb3JpZ2luYWxQcmljZTogZGJQcm9kdWN0Lm9yaWdpbmFsX3ByaWNlID8gcGFyc2VGbG9hdChkYlByb2R1Y3Qub3JpZ2luYWxfcHJpY2UpIDogdW5kZWZpbmVkLFxuICAgIGltYWdlOiBkYlByb2R1Y3QuaW1hZ2UsXG4gICAgaW1hZ2VzOiBkYlByb2R1Y3QuaW1hZ2VzIHx8IFtdLFxuICAgIHN0b2NrOiBkYlByb2R1Y3Quc3RvY2sgfHwge30sXG4gICAgY2F0ZWdvcnk6IGRiUHJvZHVjdC5jYXRlZ29yeSxcbiAgICBzaXplczogZGJQcm9kdWN0LnNpemVzIHx8IFtdLFxuICAgIGNvbG9yczogZGJQcm9kdWN0LmNvbG9ycyB8fCBbXSxcbiAgICBpblN0b2NrOiBkYlByb2R1Y3QuaW5fc3RvY2ssXG4gICAgcmF0aW5nOiBwYXJzZUZsb2F0KGRiUHJvZHVjdC5yYXRpbmcgfHwgMCksXG4gICAgcmV2aWV3czogZGJQcm9kdWN0LnJldmlld3MgfHwgMCxcbiAgICBza3U6IGRiUHJvZHVjdC5za3UsXG4gICAgd2VpZ2h0OiBkYlByb2R1Y3Qud2VpZ2h0ID8gcGFyc2VGbG9hdChkYlByb2R1Y3Qud2VpZ2h0KSA6IHVuZGVmaW5lZCxcbiAgICBkaW1lbnNpb25zOiBkYlByb2R1Y3QuZGltZW5zaW9ucyxcbiAgICB0YWdzOiBkYlByb2R1Y3QudGFncyB8fCBbXSxcbiAgICBmZWF0dXJlZDogZGJQcm9kdWN0LmZlYXR1cmVkIHx8IGZhbHNlLFxuICAgIHNpemVDaGFydENhdGVnb3J5OiBkYlByb2R1Y3Quc2l6ZV9jaGFydF9jYXRlZ29yeSB8fCAnVC1TaGlydHMnLFxuICAgIGN1c3RvbVNpemVDaGFydDogZGJQcm9kdWN0LmN1c3RvbV9zaXplX2NoYXJ0IHx8IHVuZGVmaW5lZCxcbiAgICB1c2VDdXN0b21TaXplQ2hhcnQ6IGRiUHJvZHVjdC51c2VfY3VzdG9tX3NpemVfY2hhcnQgfHwgZmFsc2UsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShkYlByb2R1Y3QuY3JlYXRlZF9hdCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShkYlByb2R1Y3QudXBkYXRlZF9hdClcbiAgfTtcbiAgXG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBGaW5hbCBjb252ZXJ0ZWQgcHJvZHVjdCBwcmljZTonLCBjb252ZXJ0ZWRQcm9kdWN0LnByaWNlLCAnVHlwZTonLCB0eXBlb2YgY29udmVydGVkUHJvZHVjdC5wcmljZSk7XG4gIHJldHVybiBjb252ZXJ0ZWRQcm9kdWN0O1xufVxuXG4vLyBDYWNoZSBmb3IgcHJvZHVjdHMgdG8gcmVkdWNlIGRhdGFiYXNlIGNhbGxzXG5sZXQgcHJvZHVjdHNDYWNoZTogUHJvZHVjdFtdIHwgbnVsbCA9IG51bGw7XG5sZXQgcHJvZHVjdHNDYWNoZVRpbWUgPSAwO1xuY29uc3QgQ0FDSEVfRFVSQVRJT04gPSAzMDAwMDsgLy8gMzAgc2Vjb25kc1xuXG4vLyBDbGVhciBjYWNoZSBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUHJvZHVjdHNDYWNoZSgpOiB2b2lkIHtcbiAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XG4gIHByb2R1Y3RzQ2FjaGVUaW1lID0gMDtcbiAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBQcm9kdWN0cyBjYWNoZSBjbGVhcmVkJyk7XG59XG5cbi8vIEZvcmNlIGNsZWFyIGNhY2hlIGltbWVkaWF0ZWx5IHRvIGZpeCBwcmljZSBmb3JtYXR0aW5nIGlzc3VlXG5jbGVhclByb2R1Y3RzQ2FjaGUoKTtcblxuLy8gQWRkIHRpbWVzdGFtcCB0byBmb3JjZSBjYWNoZSBpbnZhbGlkYXRpb25cbmNvbnN0IENBQ0hFX0JVU1RFUiA9IERhdGUubm93KCk7XG5jb25zb2xlLmxvZygn8J+agCBDYWNoZSBidXN0ZXIgdGltZXN0YW1wOicsIENBQ0hFX0JVU1RFUik7XG5cbi8vIFByb2R1Y3RzIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cygpOiBQcm9taXNlPFByb2R1Y3RbXT4ge1xuICB0cnkge1xuICAgIC8vIFJldHVybiBjYWNoZWQgZGF0YSBpZiBzdGlsbCBmcmVzaFxuICAgIGlmIChwcm9kdWN0c0NhY2hlICYmIERhdGUubm93KCkgLSBwcm9kdWN0c0NhY2hlVGltZSA8IENBQ0hFX0RVUkFUSU9OKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFJldHVybmluZyBjYWNoZWQgcHJvZHVjdHMnKTtcbiAgICAgIHJldHVybiBwcm9kdWN0c0NhY2hlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0cyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcHJvZHVjdHMgPSAoZGF0YSB8fCBbXSkubWFwKGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjYWNoZVxuICAgIHByb2R1Y3RzQ2FjaGUgPSBwcm9kdWN0cztcbiAgICBwcm9kdWN0c0NhY2hlVGltZSA9IERhdGUubm93KCk7XG4gICAgXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFByb2R1Y3RzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdChpZDogc3RyaW5nKTogUHJvbWlzZTxQcm9kdWN0IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udmVydERiUHJvZHVjdFRvUHJvZHVjdChkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUHJvZHVjdChwcm9kdWN0OiBQcm9kdWN0KTogUHJvbWlzZTxQcm9kdWN0PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflKcgU3VwYWJhc2UgYWRkUHJvZHVjdDogU3RhcnRpbmcgdG8gYWRkIHByb2R1Y3Q6JywgcHJvZHVjdC5pZCwgcHJvZHVjdC5uYW1lKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBTdXBhYmFzZSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFN1cGFiYXNlOiBDbGllbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ29udmVydCBjYW1lbENhc2UgdG8gc25ha2VfY2FzZSBmb3IgZGF0YWJhc2VcbiAgICAvLyBPbmx5IGluY2x1ZGUgY29sdW1ucyB0aGF0IGV4aXN0IGluIHRoZSBjdXJyZW50IGRhdGFiYXNlIHNjaGVtYVxuICAgIGNvbnN0IGRiUHJvZHVjdCA9IHtcbiAgICAgIGlkOiBwcm9kdWN0LmlkLFxuICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QuZGVzY3JpcHRpb24sXG4gICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgIG9yaWdpbmFsX3ByaWNlOiBwcm9kdWN0Lm9yaWdpbmFsUHJpY2UsXG4gICAgICBpbWFnZTogcHJvZHVjdC5pbWFnZSxcbiAgICAgIGltYWdlczogcHJvZHVjdC5pbWFnZXMgfHwgW10sXG4gICAgICBzdG9jazogcHJvZHVjdC5zdG9jayxcbiAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LmNhdGVnb3J5LFxuICAgICAgc2l6ZXM6IHByb2R1Y3Quc2l6ZXMgfHwgW10sXG4gICAgICBjb2xvcnM6IHByb2R1Y3QuY29sb3JzIHx8IFtdLFxuICAgICAgaW5fc3RvY2s6IHByb2R1Y3QuaW5TdG9jayxcbiAgICAgIHJhdGluZzogcHJvZHVjdC5yYXRpbmcsXG4gICAgICByZXZpZXdzOiBwcm9kdWN0LnJldmlld3MsXG4gICAgICBza3U6IHByb2R1Y3Quc2t1LFxuICAgICAgd2VpZ2h0OiBwcm9kdWN0LndlaWdodCxcbiAgICAgIGRpbWVuc2lvbnM6IHByb2R1Y3QuZGltZW5zaW9ucyxcbiAgICAgIHRhZ3M6IHByb2R1Y3QudGFncyB8fCBbXSxcbiAgICAgIGZlYXR1cmVkOiBwcm9kdWN0LmZlYXR1cmVkIHx8IGZhbHNlXG4gICAgICAvLyBOb3RlOiBzaXplX2NoYXJ0X2NhdGVnb3J5LCBjdXN0b21fc2l6ZV9jaGFydCwgYW5kIHVzZV9jdXN0b21fc2l6ZV9jaGFydCBjb2x1bW5zIG1heSBub3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlIHlldFxuICAgICAgLy8gY3JlYXRlZF9hdCBhbmQgdXBkYXRlZF9hdCBhcmUgYXV0b21hdGljYWxseSBzZXQgYnkgdGhlIGRhdGFiYXNlXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SnIFN1cGFiYXNlIGFkZFByb2R1Y3Q6IERhdGFiYXNlIHByb2R1Y3Qgb2JqZWN0OicsIEpTT04uc3RyaW5naWZ5KGRiUHJvZHVjdCwgbnVsbCwgMikpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SnIFN1cGFiYXNlIGFkZFByb2R1Y3Q6IEF0dGVtcHRpbmcgdG8gaW5zZXJ0IGludG8gcHJvZHVjdHMgdGFibGUuLi4nKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLmluc2VydChbZGJQcm9kdWN0XSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SnIFN1cGFiYXNlIGFkZFByb2R1Y3Q6IEluc2VydCByZXN1bHQgLSBkYXRhOicsIGRhdGEpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SnIFN1cGFiYXNlIGFkZFByb2R1Y3Q6IEluc2VydCByZXN1bHQgLSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvciBkZXRhaWxzOicsIEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKSk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU3VwYWJhc2UgYWRkUHJvZHVjdCBlcnJvciBjb2RlOicsIGVycm9yLmNvZGUpO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFN1cGFiYXNlIGFkZFByb2R1Y3QgZXJyb3IgbWVzc2FnZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTdXBhYmFzZSBhZGRQcm9kdWN0IGVycm9yIGhpbnQ6JywgZXJyb3IuaGludCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFN1cGFiYXNlIGluc2VydCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX0gKENvZGU6ICR7ZXJyb3IuY29kZX0pYCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogQWRkZWQgcHJvZHVjdDonLCBwcm9kdWN0LmlkKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGludmVudG9yeSBmb3IgdGhlIG5ldyBwcm9kdWN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkgfSA9IGF3YWl0IGltcG9ydCgnLi9pbnZlbnRvcnlTZXJ2aWNlJyk7XG4gICAgICBhd2FpdCBpbml0aWFsaXplUHJvZHVjdEludmVudG9yeShwcm9kdWN0LmlkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogSW5pdGlhbGl6ZWQgaW52ZW50b3J5IGZvciBwcm9kdWN0OicsIHByb2R1Y3QuaWQpO1xuICAgIH0gY2F0Y2ggKGludmVudG9yeUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogRmFpbGVkIHRvIGluaXRpYWxpemUgaW52ZW50b3J5IGZvciBwcm9kdWN0OicsIHByb2R1Y3QuaWQsIGludmVudG9yeUVycm9yKTtcbiAgICAgIC8vIERvbid0IHRocm93IGVycm9yIGhlcmUsIHByb2R1Y3QgY3JlYXRpb24gc2hvdWxkIHN0aWxsIHN1Y2NlZWRcbiAgICB9XG4gICAgXG4gICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxuICAgIHByb2R1Y3RzQ2FjaGUgPSBudWxsO1xuICAgIFxuICAgIC8vIENvbnZlcnQgYmFjayB0byBjYW1lbENhc2VcbiAgICByZXR1cm4gY29udmVydERiUHJvZHVjdFRvUHJvZHVjdChkYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZHVjdChpZDogc3RyaW5nLCBwcm9kdWN0OiBQYXJ0aWFsPFByb2R1Y3Q+KTogUHJvbWlzZTxQcm9kdWN0IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIENvbnZlcnQgY2FtZWxDYXNlIHRvIHNuYWtlX2Nhc2UgZm9yIGRhdGFiYXNlXG4gICAgY29uc3QgZGJQcm9kdWN0OiBhbnkgPSB7fTtcbiAgICBcbiAgICBpZiAocHJvZHVjdC5uYW1lICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5uYW1lID0gcHJvZHVjdC5uYW1lO1xuICAgIGlmIChwcm9kdWN0LmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5kZXNjcmlwdGlvbiA9IHByb2R1Y3QuZGVzY3JpcHRpb247XG4gICAgaWYgKHByb2R1Y3QucHJpY2UgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnByaWNlID0gcHJvZHVjdC5wcmljZTtcbiAgICBpZiAocHJvZHVjdC5vcmlnaW5hbFByaWNlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5vcmlnaW5hbF9wcmljZSA9IHByb2R1Y3Qub3JpZ2luYWxQcmljZTtcbiAgICBpZiAocHJvZHVjdC5pbWFnZSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuaW1hZ2UgPSBwcm9kdWN0LmltYWdlO1xuICAgIGlmIChwcm9kdWN0LmltYWdlcyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuaW1hZ2VzID0gcHJvZHVjdC5pbWFnZXM7XG4gICAgaWYgKHByb2R1Y3Quc3RvY2sgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnN0b2NrID0gcHJvZHVjdC5zdG9jaztcbiAgICBpZiAocHJvZHVjdC5jYXRlZ29yeSAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuY2F0ZWdvcnkgPSBwcm9kdWN0LmNhdGVnb3J5O1xuICAgIGlmIChwcm9kdWN0LnNpemVzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5zaXplcyA9IHByb2R1Y3Quc2l6ZXM7XG4gICAgaWYgKHByb2R1Y3QuY29sb3JzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5jb2xvcnMgPSBwcm9kdWN0LmNvbG9ycztcbiAgICBpZiAocHJvZHVjdC5pblN0b2NrICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5pbl9zdG9jayA9IHByb2R1Y3QuaW5TdG9jaztcbiAgICBpZiAocHJvZHVjdC5yYXRpbmcgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnJhdGluZyA9IHByb2R1Y3QucmF0aW5nO1xuICAgIGlmIChwcm9kdWN0LnJldmlld3MgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnJldmlld3MgPSBwcm9kdWN0LnJldmlld3M7XG4gICAgaWYgKHByb2R1Y3Quc2t1ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5za3UgPSBwcm9kdWN0LnNrdTtcbiAgICBpZiAocHJvZHVjdC53ZWlnaHQgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LndlaWdodCA9IHByb2R1Y3Qud2VpZ2h0O1xuICAgIGlmIChwcm9kdWN0LmRpbWVuc2lvbnMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmRpbWVuc2lvbnMgPSBwcm9kdWN0LmRpbWVuc2lvbnM7XG4gICAgaWYgKHByb2R1Y3QudGFncyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QudGFncyA9IHByb2R1Y3QudGFncztcbiAgICBpZiAocHJvZHVjdC5mZWF0dXJlZCAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3QuZmVhdHVyZWQgPSBwcm9kdWN0LmZlYXR1cmVkO1xuICAgIGlmIChwcm9kdWN0LnNpemVDaGFydENhdGVnb3J5ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5zaXplX2NoYXJ0X2NhdGVnb3J5ID0gcHJvZHVjdC5zaXplQ2hhcnRDYXRlZ29yeTtcbiAgICBpZiAocHJvZHVjdC5jdXN0b21TaXplQ2hhcnQgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmN1c3RvbV9zaXplX2NoYXJ0ID0gcHJvZHVjdC5jdXN0b21TaXplQ2hhcnQ7XG4gICAgaWYgKHByb2R1Y3QudXNlQ3VzdG9tU2l6ZUNoYXJ0ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC51c2VfY3VzdG9tX3NpemVfY2hhcnQgPSBwcm9kdWN0LnVzZUN1c3RvbVNpemVDaGFydDtcbiAgICBcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC51cGRhdGUoZGJQcm9kdWN0KVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgcHJvZHVjdDonLCBpZCk7XG4gICAgXG4gICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxuICAgIHByb2R1Y3RzQ2FjaGUgPSBudWxsO1xuICAgIFxuICAgIHJldHVybiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9kdWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmVxKCdpZCcsIGlkKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IERlbGV0ZWQgcHJvZHVjdDonLCBpZCk7XG4gICAgXG4gICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxuICAgIHByb2R1Y3RzQ2FjaGUgPSBudWxsO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBkYXRhYmFzZSBvcmRlciB0byBPcmRlciBpbnRlcmZhY2VcbmZ1bmN0aW9uIGNvbnZlcnREYk9yZGVyVG9PcmRlcihkYk9yZGVyOiBhbnkpOiBPcmRlciB7XG4gIC8vIEV4dHJhY3QgY3VzdG9tZXIgaW5mbyBmcm9tIGl0ZW1zIG9yIHVzZSBkZWZhdWx0c1xuICBjb25zdCBmaXJzdEl0ZW0gPSBkYk9yZGVyLml0ZW1zICYmIGRiT3JkZXIuaXRlbXMubGVuZ3RoID4gMCA/IGRiT3JkZXIuaXRlbXNbMF0gOiB7fTtcbiAgXG4gIHJldHVybiB7XG4gICAgaWQ6IGRiT3JkZXIuaWQsXG4gICAgcHJvZHVjdElkOiBmaXJzdEl0ZW0ucHJvZHVjdElkIHx8ICcnLFxuICAgIHByb2R1Y3ROYW1lOiBmaXJzdEl0ZW0ucHJvZHVjdE5hbWUgfHwgJycsXG4gICAgcHJvZHVjdEltYWdlOiBmaXJzdEl0ZW0ucHJvZHVjdEltYWdlIHx8ICcnLFxuICAgIGN1c3RvbWVyTmFtZTogZmlyc3RJdGVtLmN1c3RvbWVyTmFtZSB8fCAnJyxcbiAgICBjdXN0b21lclBob25lOiBmaXJzdEl0ZW0uY3VzdG9tZXJQaG9uZSB8fCAnJyxcbiAgICBjdXN0b21lckVtYWlsOiBmaXJzdEl0ZW0uY3VzdG9tZXJFbWFpbCB8fCAnJyxcbiAgICBjdXN0b21lckFkZHJlc3M6IGZpcnN0SXRlbS5jdXN0b21lckFkZHJlc3MgfHwgJycsXG4gICAgY3VzdG9tZXJDaXR5OiBmaXJzdEl0ZW0uY3VzdG9tZXJDaXR5IHx8ICcnLFxuICAgIHdpbGF5YUlkOiBmaXJzdEl0ZW0ud2lsYXlhSWQgfHwgMCxcbiAgICB3aWxheWFOYW1lOiBmaXJzdEl0ZW0ud2lsYXlhTmFtZSB8fCAnJyxcbiAgICBzaGlwcGluZ1R5cGU6IGRiT3JkZXIuc2hpcHBpbmdfdHlwZSB8fCAnaG9tZURlbGl2ZXJ5JyxcbiAgICBzaGlwcGluZ0Nvc3Q6IE51bWJlcihkYk9yZGVyLnNoaXBwaW5nX2Nvc3QpIHx8IDAsXG4gICAgcXVhbnRpdHk6IGZpcnN0SXRlbS5xdWFudGl0eSB8fCAxLFxuICAgIHNlbGVjdGVkU2l6ZTogZmlyc3RJdGVtLnNlbGVjdGVkU2l6ZSB8fCAnJyxcbiAgICBzZWxlY3RlZENvbG9yOiBmaXJzdEl0ZW0uc2VsZWN0ZWRDb2xvciB8fCAnJyxcbiAgICBzdWJ0b3RhbDogTnVtYmVyKGRiT3JkZXIudG90YWwpIC0gTnVtYmVyKGRiT3JkZXIuc2hpcHBpbmdfY29zdCkgfHwgMCxcbiAgICB0b3RhbDogTnVtYmVyKGRiT3JkZXIudG90YWwpIHx8IDAsXG4gICAgb3JkZXJEYXRlOiBuZXcgRGF0ZShkYk9yZGVyLm9yZGVyX2RhdGUpLFxuICAgIHN0YXR1czogZGJPcmRlci5zdGF0dXMgfHwgJ3BlbmRpbmcnLFxuICAgIHRyYWNraW5nTnVtYmVyOiBkYk9yZGVyLnRyYWNraW5nX251bWJlcixcbiAgICBub3RlczogZmlyc3RJdGVtLm5vdGVzLFxuICAgIHBheW1lbnRNZXRob2Q6IGRiT3JkZXIucGF5bWVudF9tZXRob2QgfHwgJ2NvZCcsXG4gICAgcGF5bWVudFN0YXR1czogZGJPcmRlci5wYXltZW50X3N0YXR1cyB8fCAncGVuZGluZycsXG4gICAgZXN0aW1hdGVkRGVsaXZlcnk6IGZpcnN0SXRlbS5lc3RpbWF0ZWREZWxpdmVyeSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRiT3JkZXIuY3JlYXRlZF9hdCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShkYk9yZGVyLnVwZGF0ZWRfYXQpXG4gIH07XG59XG5cbi8vIENhY2hlIGZvciBvcmRlcnMgdG8gcmVkdWNlIGRhdGFiYXNlIGNhbGxzXG5sZXQgb3JkZXJzQ2FjaGU6IE9yZGVyW10gfCBudWxsID0gbnVsbDtcbmxldCBvcmRlcnNDYWNoZVRpbWUgPSAwO1xuXG4vLyBPcmRlcnMgb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yZGVycygpOiBQcm9taXNlPE9yZGVyW10+IHtcbiAgdHJ5IHtcbiAgICAvLyBSZXR1cm4gY2FjaGVkIGRhdGEgaWYgc3RpbGwgZnJlc2hcbiAgICBpZiAob3JkZXJzQ2FjaGUgJiYgRGF0ZS5ub3coKSAtIG9yZGVyc0NhY2hlVGltZSA8IENBQ0hFX0RVUkFUSU9OKSB7XG4gICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFJldHVybmluZyBjYWNoZWQgb3JkZXJzJyk7XG4gICAgICByZXR1cm4gb3JkZXJzQ2FjaGU7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ29yZGVyX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRPcmRlcnMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG9yZGVyc0NhY2hlIHx8IFtdO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBvcmRlcnMgPSAoZGF0YSB8fCBbXSkubWFwKGNvbnZlcnREYk9yZGVyVG9PcmRlcik7XG4gICAgXG4gICAgLy8gVXBkYXRlIGNhY2hlXG4gICAgb3JkZXJzQ2FjaGUgPSBvcmRlcnM7XG4gICAgb3JkZXJzQ2FjaGVUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICByZXR1cm4gb3JkZXJzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVycyBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG9yZGVyc0NhY2hlIHx8IFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlcihpZDogc3RyaW5nKTogUHJvbWlzZTxPcmRlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udmVydERiT3JkZXJUb09yZGVyKGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkT3JkZXIob3JkZXI6IE9yZGVyKTogUHJvbWlzZTxPcmRlcj4ge1xuICB0cnkge1xuICAgIC8vIENvbnZlcnQgT3JkZXIgaW50ZXJmYWNlIHRvIGRhdGFiYXNlIGZvcm1hdFxuICAgIGNvbnN0IGRiT3JkZXIgPSB7XG4gICAgICBpZDogb3JkZXIuaWQsXG4gICAgICBjdXN0b21lcl9pZDogYENVU1QtJHtEYXRlLm5vdygpfWAsIC8vIEdlbmVyYXRlIGN1c3RvbWVyIElEXG4gICAgICBpdGVtczogW3tcbiAgICAgICAgcHJvZHVjdElkOiBvcmRlci5wcm9kdWN0SWQsXG4gICAgICAgIHByb2R1Y3ROYW1lOiBvcmRlci5wcm9kdWN0TmFtZSxcbiAgICAgICAgcHJvZHVjdEltYWdlOiBvcmRlci5wcm9kdWN0SW1hZ2UsXG4gICAgICAgIGN1c3RvbWVyTmFtZTogb3JkZXIuY3VzdG9tZXJOYW1lLFxuICAgICAgICBjdXN0b21lclBob25lOiBvcmRlci5jdXN0b21lclBob25lLFxuICAgICAgICBjdXN0b21lckVtYWlsOiBvcmRlci5jdXN0b21lckVtYWlsLFxuICAgICAgICBjdXN0b21lckFkZHJlc3M6IG9yZGVyLmN1c3RvbWVyQWRkcmVzcyxcbiAgICAgICAgY3VzdG9tZXJDaXR5OiBvcmRlci5jdXN0b21lckNpdHksXG4gICAgICAgIHdpbGF5YUlkOiBvcmRlci53aWxheWFJZCxcbiAgICAgICAgd2lsYXlhTmFtZTogb3JkZXIud2lsYXlhTmFtZSxcbiAgICAgICAgcXVhbnRpdHk6IG9yZGVyLnF1YW50aXR5LFxuICAgICAgICBzZWxlY3RlZFNpemU6IG9yZGVyLnNlbGVjdGVkU2l6ZSxcbiAgICAgICAgc2VsZWN0ZWRDb2xvcjogb3JkZXIuc2VsZWN0ZWRDb2xvcixcbiAgICAgICAgbm90ZXM6IG9yZGVyLm5vdGVzLFxuICAgICAgICBlc3RpbWF0ZWREZWxpdmVyeTogb3JkZXIuZXN0aW1hdGVkRGVsaXZlcnlcbiAgICAgIH1dLFxuICAgICAgdG90YWw6IG9yZGVyLnRvdGFsLFxuICAgICAgc2hpcHBpbmdfY29zdDogb3JkZXIuc2hpcHBpbmdDb3N0LFxuICAgICAgc2hpcHBpbmdfdHlwZTogb3JkZXIuc2hpcHBpbmdUeXBlLFxuICAgICAgcGF5bWVudF9tZXRob2Q6IG9yZGVyLnBheW1lbnRNZXRob2QsXG4gICAgICBwYXltZW50X3N0YXR1czogb3JkZXIucGF5bWVudFN0YXR1cyxcbiAgICAgIHN0YXR1czogb3JkZXIuc3RhdHVzLFxuICAgICAgdHJhY2tpbmdfbnVtYmVyOiBvcmRlci50cmFja2luZ051bWJlcixcbiAgICAgIG9yZGVyX2RhdGU6IG9yZGVyLm9yZGVyRGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgY3JlYXRlZF9hdDogb3JkZXIuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBvcmRlci51cGRhdGVkQXQudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLmluc2VydChbZGJPcmRlcl0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZE9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IEFkZGVkIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICByZXR1cm4gY29udmVydERiT3JkZXJUb09yZGVyKGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZE9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlT3JkZXIoaWQ6IHN0cmluZywgb3JkZXI6IFBhcnRpYWw8T3JkZXI+KTogUHJvbWlzZTxPcmRlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBDb252ZXJ0IHBhcnRpYWwgT3JkZXIgdG8gZGF0YWJhc2UgZm9ybWF0XG4gICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0ge1xuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBcbiAgICBpZiAob3JkZXIuc3RhdHVzICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuc3RhdHVzID0gb3JkZXIuc3RhdHVzO1xuICAgIGlmIChvcmRlci5wYXltZW50U3RhdHVzICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEucGF5bWVudF9zdGF0dXMgPSBvcmRlci5wYXltZW50U3RhdHVzO1xuICAgIGlmIChvcmRlci50cmFja2luZ051bWJlciAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnRyYWNraW5nX251bWJlciA9IG9yZGVyLnRyYWNraW5nTnVtYmVyO1xuICAgIGlmIChvcmRlci5zaGlwcGluZ1R5cGUgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zaGlwcGluZ190eXBlID0gb3JkZXIuc2hpcHBpbmdUeXBlO1xuICAgIGlmIChvcmRlci5zaGlwcGluZ0Nvc3QgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zaGlwcGluZ19jb3N0ID0gb3JkZXIuc2hpcHBpbmdDb3N0O1xuICAgIGlmIChvcmRlci50b3RhbCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnRvdGFsID0gb3JkZXIudG90YWw7XG4gICAgaWYgKG9yZGVyLnBheW1lbnRNZXRob2QgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5wYXltZW50X21ldGhvZCA9IG9yZGVyLnBheW1lbnRNZXRob2Q7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIG9yZGVyOicsIGlkKTtcbiAgICByZXR1cm4gY29udmVydERiT3JkZXJUb09yZGVyKGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZU9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlT3JkZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0LCBnZXQgdGhlIG9yZGVyIGRldGFpbHMgdG8gcmVzdG9yZSBpbnZlbnRvcnlcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IGdldE9yZGVyKGlkKTtcbiAgICBpZiAoIW9yZGVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlcjogT3JkZXIgbm90IGZvdW5kOicsIGlkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBSZXN0b3JlIGludmVudG9yeSBxdWFudGl0eVxuICAgIGlmIChvcmRlci5wcm9kdWN0SWQgJiYgb3JkZXIuc2VsZWN0ZWRTaXplICYmIG9yZGVyLnNlbGVjdGVkQ29sb3IgJiYgb3JkZXIucXVhbnRpdHkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgYWRkSW52ZW50b3J5IH0gPSBhd2FpdCBpbXBvcnQoJy4vaW52ZW50b3J5U2VydmljZScpO1xuICAgICAgICBjb25zdCBpbnZlbnRvcnlSZXN0b3JlZCA9IGF3YWl0IGFkZEludmVudG9yeShcbiAgICAgICAgICBvcmRlci5wcm9kdWN0SWQsXG4gICAgICAgICAgb3JkZXIuc2VsZWN0ZWRTaXplLFxuICAgICAgICAgIG9yZGVyLnNlbGVjdGVkQ29sb3IsXG4gICAgICAgICAgb3JkZXIucXVhbnRpdHksXG4gICAgICAgICAgYE9yZGVyICR7aWR9IGRlbGV0ZWQgLSBpbnZlbnRvcnkgcmVzdG9yZWRgLFxuICAgICAgICAgICdhZG1pbidcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbnZlbnRvcnlSZXN0b3JlZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZSBkZWxldGVPcmRlcjogSW52ZW50b3J5IHJlc3RvcmVkIGZvciBvcmRlcjonLCBpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdTdXBhYmFzZSBkZWxldGVPcmRlcjogRmFpbGVkIHRvIHJlc3RvcmUgaW52ZW50b3J5IGZvciBvcmRlcjonLCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGludmVudG9yeUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyOiBJbnZlbnRvcnkgcmVzdG9yYXRpb24gZXJyb3I6JywgaW52ZW50b3J5RXJyb3IpO1xuICAgICAgICAvLyBDb250aW51ZSB3aXRoIG9yZGVyIGRlbGV0aW9uIGV2ZW4gaWYgaW52ZW50b3J5IHJlc3RvcmF0aW9uIGZhaWxzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIHRoZSBvcmRlclxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmVxKCdpZCcsIGlkKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZU9yZGVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBEZWxldGVkIG9yZGVyOicsIGlkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cblxuLy8gV2lsYXlhIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXaWxheWFUYXJpZmZzKCk6IFByb21pc2U8YW55W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3dpbGF5YV90YXJpZmZzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm9yZGVyKCdvcmRlcicsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0V2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0gKGRhdGEgfHwgW10pLm1hcCh0YXJpZmYgPT4gKHtcbiAgICAgIGlkOiB0YXJpZmYuaWQudG9TdHJpbmcoKSxcbiAgICAgIHdpbGF5YV9pZDogdGFyaWZmLndpbGF5YV9pZCxcbiAgICAgIG5hbWU6IHRhcmlmZi5uYW1lLFxuICAgICAgZG9taWNpbGVfZWNvbW1lcmNlOiB0YXJpZmYuZG9taWNpbGVfZWNvbW1lcmNlLFxuICAgICAgc3RvcF9kZXNrX2Vjb21tZXJjZTogdGFyaWZmLnN0b3BfZGVza19lY29tbWVyY2UsXG4gICAgICBvcmRlcjogdGFyaWZmLm9yZGVyLFxuICAgICAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgIGhvbWVfZGVsaXZlcnk6IHRhcmlmZi5kb21pY2lsZV9lY29tbWVyY2UsXG4gICAgICBzdG9wX2Rlc2s6IHRhcmlmZi5zdG9wX2Rlc2tfZWNvbW1lcmNlLFxuICAgICAgaG9tZURlbGl2ZXJ5OiB0YXJpZmYuZG9taWNpbGVfZWNvbW1lcmNlLFxuICAgICAgc3RvcERlc2s6IHRhcmlmZi5zdG9wX2Rlc2tfZWNvbW1lcmNlLFxuICAgICAgZG9taWNpbGVFY29tbWVyY2U6IHRhcmlmZi5kb21pY2lsZV9lY29tbWVyY2UsXG4gICAgICBzdG9wRGVza0Vjb21tZXJjZTogdGFyaWZmLnN0b3BfZGVza19lY29tbWVyY2VcbiAgICB9KSk7XG4gICAgXG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkRGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRXaWxheWFUYXJpZmZzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdpbGF5YVRhcmlmZnModGFyaWZmczogYW55W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBEZWxldGUgYWxsIGV4aXN0aW5nIHRhcmlmZnNcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3dpbGF5YV90YXJpZmZzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLm5lcSgnaWQnLCAwKTsgLy8gRGVsZXRlIGFsbCByZWNvcmRzXG4gICAgXG4gICAgLy8gSW5zZXJ0IG5ldyB0YXJpZmZzXG4gICAgaWYgKHRhcmlmZnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVHJhbnNmb3JtIHRoZSBkYXRhIHRvIG1hdGNoIGRhdGFiYXNlIHN0cnVjdHVyZVxuICAgICAgY29uc3QgdHJhbnNmb3JtZWRUYXJpZmZzID0gdGFyaWZmcy5tYXAodGFyaWZmID0+ICh7XG4gICAgICAgIHdpbGF5YV9pZDogdGFyaWZmLndpbGF5YV9pZCB8fCB0YXJpZmYuaWQsXG4gICAgICAgIG5hbWU6IHRhcmlmZi5uYW1lLFxuICAgICAgICBkb21pY2lsZV9lY29tbWVyY2U6IHRhcmlmZi5kb21pY2lsZV9lY29tbWVyY2UgfHwgdGFyaWZmLmRvbWljaWxlRWNvbW1lcmNlIHx8IHRhcmlmZi5ob21lX2RlbGl2ZXJ5IHx8IHRhcmlmZi5ob21lRGVsaXZlcnkgfHwgMCxcbiAgICAgICAgc3RvcF9kZXNrX2Vjb21tZXJjZTogdGFyaWZmLnN0b3BfZGVza19lY29tbWVyY2UgfHwgdGFyaWZmLnN0b3BEZXNrRWNvbW1lcmNlIHx8IHRhcmlmZi5zdG9wX2Rlc2sgfHwgdGFyaWZmLnN0b3BEZXNrIHx8IDAsXG4gICAgICAgIG9yZGVyOiB0YXJpZmYub3JkZXIgfHwgMVxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnd2lsYXlhX3RhcmlmZnMnKVxuICAgICAgICAuaW5zZXJ0KHRyYW5zZm9ybWVkVGFyaWZmcyk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVXaWxheWFUYXJpZmZzIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogVXBkYXRlZCB3aWxheWEgdGFyaWZmcycpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVdpbGF5YVRhcmlmZnMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEludmVudG9yeSBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW52ZW50b3J5KCk6IFByb21pc2U8YW55W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBza3UsIHN0b2NrLCBzaXplcywgY29sb3JzLCBpbl9zdG9jaywgY2F0ZWdvcnknKVxuICAgICAgLm9yZGVyKCduYW1lJyk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcmFuc2Zvcm0gZGF0YSBmb3IgaW52ZW50b3J5IG1hbmFnZW1lbnRcbiAgICByZXR1cm4gKGRhdGEgfHwgW10pLm1hcChwcm9kdWN0ID0+ICh7XG4gICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcbiAgICAgIHNrdTogcHJvZHVjdC5za3UsXG4gICAgICBjYXRlZ29yeTogcHJvZHVjdC5jYXRlZ29yeSxcbiAgICAgIGluU3RvY2s6IHByb2R1Y3QuaW5fc3RvY2ssXG4gICAgICBzdG9jazogcHJvZHVjdC5zdG9jayB8fCB7fSxcbiAgICAgIHNpemVzOiBwcm9kdWN0LnNpemVzIHx8IFtdLFxuICAgICAgY29sb3JzOiBwcm9kdWN0LmNvbG9ycyB8fCBbXSxcbiAgICAgIHRvdGFsU3RvY2s6IGNhbGN1bGF0ZVRvdGFsU3RvY2socHJvZHVjdC5zdG9jayB8fCB7fSksXG4gICAgICBzdG9ja0J5U2l6ZTogY2FsY3VsYXRlU3RvY2tCeVNpemUocHJvZHVjdC5zdG9jayB8fCB7fSwgcHJvZHVjdC5zaXplcyB8fCBbXSwgcHJvZHVjdC5jb2xvcnMgfHwgW10pXG4gICAgfSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVJbnZlbnRvcnkocHJvZHVjdElkOiBzdHJpbmcsIHN0b2NrRGF0YTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cGRhdGVPYmo6IGFueSA9IHtcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgaWYgKHN0b2NrRGF0YS5zdG9jaykge1xuICAgICAgdXBkYXRlT2JqLnN0b2NrID0gc3RvY2tEYXRhLnN0b2NrO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3RvY2tEYXRhLmluU3RvY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlT2JqLmluX3N0b2NrID0gc3RvY2tEYXRhLmluU3RvY2s7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVPYmopXG4gICAgICAuZXEoJ2lkJywgcHJvZHVjdElkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogVXBkYXRlZCBpbnZlbnRvcnkgZm9yIHByb2R1Y3Q6JywgcHJvZHVjdElkKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBzdG9jazogZGF0YS5zdG9jayxcbiAgICAgIGluU3RvY2s6IGRhdGEuaW5fc3RvY2ssXG4gICAgICB0b3RhbFN0b2NrOiBjYWxjdWxhdGVUb3RhbFN0b2NrKGRhdGEuc3RvY2spXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGludmVudG9yeSBjYWxjdWxhdGlvbnNcbmZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFsU3RvY2soc3RvY2s6IGFueSk6IG51bWJlciB7XG4gIGlmICghc3RvY2sgfHwgdHlwZW9mIHN0b2NrICE9PSAnb2JqZWN0JykgcmV0dXJuIDA7XG4gIFxuICBsZXQgdG90YWwgPSAwO1xuICBmb3IgKGNvbnN0IHNpemUgaW4gc3RvY2spIHtcbiAgICBpZiAodHlwZW9mIHN0b2NrW3NpemVdID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yIChjb25zdCBjb2xvciBpbiBzdG9ja1tzaXplXSkge1xuICAgICAgICB0b3RhbCArPSBOdW1iZXIoc3RvY2tbc2l6ZV1bY29sb3JdKSB8fCAwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdG90YWw7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0b2NrQnlTaXplKHN0b2NrOiBhbnksIHNpemVzOiBzdHJpbmdbXSwgY29sb3JzOiBzdHJpbmdbXSk6IGFueSB7XG4gIGNvbnN0IHJlc3VsdDogYW55ID0ge307XG4gIFxuICBzaXplcy5mb3JFYWNoKHNpemUgPT4ge1xuICAgIHJlc3VsdFtzaXplXSA9IHt9O1xuICAgIGNvbG9ycy5mb3JFYWNoKGNvbG9yID0+IHtcbiAgICAgIHJlc3VsdFtzaXplXVtjb2xvcl0gPSBOdW1iZXIoc3RvY2tbc2l6ZV0/Lltjb2xvcl0pIHx8IDA7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gU3RvY2sgZGVkdWN0aW9uIGZ1bmN0aW9uIGZvciBvcmRlcnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWR1Y3RTdG9ja0Zyb21PcmRlcihvcmRlcjogT3JkZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IERlZHVjdGluZyBzdG9jayBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgIFxuICAgIC8vIEdldCB0aGUgcHJvZHVjdFxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBnZXRQcm9kdWN0KG9yZGVyLnByb2R1Y3RJZCk7XG4gICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogUHJvZHVjdCBub3QgZm91bmQgZm9yIG9yZGVyOicsIG9yZGVyLnByb2R1Y3RJZCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgZW5vdWdoIHN0b2NrXG4gICAgY29uc3QgY3VycmVudFN0b2NrID0gcHJvZHVjdC5zdG9jaz8uW29yZGVyLnNlbGVjdGVkU2l6ZV0/LltvcmRlci5zZWxlY3RlZENvbG9yXSB8fCAwO1xuICAgIGlmIChjdXJyZW50U3RvY2sgPCBvcmRlci5xdWFudGl0eSkge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEluc3VmZmljaWVudCBzdG9jayBmb3Igb3JkZXI6Jywge1xuICAgICAgICBwcm9kdWN0SWQ6IG9yZGVyLnByb2R1Y3RJZCxcbiAgICAgICAgc2l6ZTogb3JkZXIuc2VsZWN0ZWRTaXplLFxuICAgICAgICBjb2xvcjogb3JkZXIuc2VsZWN0ZWRDb2xvcixcbiAgICAgICAgcmVxdWVzdGVkOiBvcmRlci5xdWFudGl0eSxcbiAgICAgICAgYXZhaWxhYmxlOiBjdXJyZW50U3RvY2tcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZWR1Y3QgdGhlIHN0b2NrIGZyb20gcHJvZHVjdFxuICAgIGNvbnN0IG5ld1N0b2NrID0ge1xuICAgICAgLi4ucHJvZHVjdC5zdG9jayxcbiAgICAgIFtvcmRlci5zZWxlY3RlZFNpemVdOiB7XG4gICAgICAgIC4uLnByb2R1Y3Quc3RvY2s/LltvcmRlci5zZWxlY3RlZFNpemVdLFxuICAgICAgICBbb3JkZXIuc2VsZWN0ZWRDb2xvcl06IGN1cnJlbnRTdG9jayAtIG9yZGVyLnF1YW50aXR5XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIHByb2R1Y3Qgc3RvY2tcbiAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHVwZGF0ZVByb2R1Y3Qob3JkZXIucHJvZHVjdElkLCB7XG4gICAgICBzdG9jazogbmV3U3RvY2ssXG4gICAgICBpblN0b2NrOiBjYWxjdWxhdGVUb3RhbFN0b2NrKG5ld1N0b2NrKSA+IDBcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXVwZGF0ZWRQcm9kdWN0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogRmFpbGVkIHRvIHVwZGF0ZSBwcm9kdWN0IHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQWxzbyBkZWR1Y3QgZnJvbSBpbnZlbnRvcnkgc3lzdGVtXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYWRkSW52ZW50b3J5IH0gPSBhd2FpdCBpbXBvcnQoJy4vaW52ZW50b3J5U2VydmljZScpO1xuICAgICAgY29uc3QgaW52ZW50b3J5RGVkdWN0ZWQgPSBhd2FpdCBhZGRJbnZlbnRvcnkoXG4gICAgICAgIG9yZGVyLnByb2R1Y3RJZCxcbiAgICAgICAgb3JkZXIuc2VsZWN0ZWRTaXplLFxuICAgICAgICBvcmRlci5zZWxlY3RlZENvbG9yLFxuICAgICAgICAtb3JkZXIucXVhbnRpdHksIC8vIE5lZ2F0aXZlIHF1YW50aXR5IHRvIGRlZHVjdFxuICAgICAgICBgT3JkZXIgJHtvcmRlci5pZH0gY3JlYXRlZCAtIHN0b2NrIGRlZHVjdGVkYCxcbiAgICAgICAgJ3N5c3RlbSdcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChpbnZlbnRvcnlEZWR1Y3RlZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFN1Y2Nlc3NmdWxseSBkZWR1Y3RlZCBpbnZlbnRvcnkgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU3VwYWJhc2U6IEZhaWxlZCB0byBkZWR1Y3QgaW52ZW50b3J5IGZvciBvcmRlcjonLCBvcmRlci5pZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoaW52ZW50b3J5RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBJbnZlbnRvcnkgZGVkdWN0aW9uIGVycm9yOicsIGludmVudG9yeUVycm9yKTtcbiAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgaW52ZW50b3J5IHVwZGF0ZSBmYWlsc1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFN1Y2Nlc3NmdWxseSBkZWR1Y3RlZCBzdG9jayBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBFcnJvciBkZWR1Y3Rpbmcgc3RvY2sgZm9yIG9yZGVyOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gTWFpbnRlbmFuY2Ugc2V0dGluZ3Mgb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1haW50ZW5hbmNlU2V0dGluZ3MoKTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21haW50ZW5hbmNlX3NldHRpbmdzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsICdtYWludGVuYW5jZScpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRNYWludGVuYW5jZVNldHRpbmdzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIC8vIElmIHRhYmxlIGRvZXNuJ3QgZXhpc3QsIHJldHVybiBkZWZhdWx0IHNldHRpbmdzXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMjA1Jykge1xuICAgICAgICBjb25zb2xlLmxvZygnTWFpbnRlbmFuY2Ugc2V0dGluZ3MgdGFibGUgbm90IGZvdW5kLCB1c2luZyBkZWZhdWx0IHNldHRpbmdzJyk7XG4gICAgICB9XG4gICAgICAvLyBSZXR1cm4gZGVmYXVsdCBzZXR0aW5ncyBpZiBubyBkYXRhIGV4aXN0c1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGlzX21haW50ZW5hbmNlX21vZGU6IGZhbHNlLFxuICAgICAgICBkcm9wX2RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDMwIGRheXMgZnJvbSBub3dcbiAgICAgICAgbWFpbnRlbmFuY2VfbWVzc2FnZTogJ1dlIGFyZSBjdXJyZW50bHkgcGVyZm9ybWluZyBtYWludGVuYW5jZS4gUGxlYXNlIGNoZWNrIGJhY2sgbGF0ZXIuJyxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhIHx8IHtcbiAgICAgIGlkOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgaXNfbWFpbnRlbmFuY2VfbW9kZTogZmFsc2UsXG4gICAgICBkcm9wX2RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBtYWludGVuYW5jZV9tZXNzYWdlOiAnV2UgYXJlIGN1cnJlbnRseSBwZXJmb3JtaW5nIG1haW50ZW5hbmNlLiBQbGVhc2UgY2hlY2sgYmFjayBsYXRlci4nLFxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRNYWludGVuYW5jZVNldHRpbmdzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6ICdtYWludGVuYW5jZScsXG4gICAgICBpc19tYWludGVuYW5jZV9tb2RlOiBmYWxzZSxcbiAgICAgIGRyb3BfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1haW50ZW5hbmNlX21lc3NhZ2U6ICdXZSBhcmUgY3VycmVudGx5IHBlcmZvcm1pbmcgbWFpbnRlbmFuY2UuIFBsZWFzZSBjaGVjayBiYWNrIGxhdGVyLicsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVNYWludGVuYW5jZVNldHRpbmdzKHNldHRpbmdzOiB7XG4gIGlzX21haW50ZW5hbmNlX21vZGU/OiBib29sZWFuO1xuICBkcm9wX2RhdGU/OiBzdHJpbmc7XG4gIG1haW50ZW5hbmNlX21lc3NhZ2U/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGlmIChzZXR0aW5ncy5pc19tYWludGVuYW5jZV9tb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZURhdGEuaXNfbWFpbnRlbmFuY2VfbW9kZSA9IHNldHRpbmdzLmlzX21haW50ZW5hbmNlX21vZGU7XG4gICAgfVxuICAgIFxuICAgIGlmIChzZXR0aW5ncy5kcm9wX2RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5kcm9wX2RhdGUgPSBzZXR0aW5ncy5kcm9wX2RhdGU7XG4gICAgfVxuICAgIFxuICAgIGlmIChzZXR0aW5ncy5tYWludGVuYW5jZV9tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZURhdGEubWFpbnRlbmFuY2VfbWVzc2FnZSA9IHNldHRpbmdzLm1haW50ZW5hbmNlX21lc3NhZ2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBtYWludGVuYW5jZSBzZXR0aW5ncyB3aXRoOicsIHVwZGF0ZURhdGEpO1xuICAgIFxuICAgIC8vIFRyeSB1cGRhdGUgZmlyc3RcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZVJlc3VsdCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ21haW50ZW5hbmNlX3NldHRpbmdzJylcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgIC5lcSgnaWQnLCAnbWFpbnRlbmFuY2UnKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVcGRhdGUgZXJyb3I6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBJZiB1cGRhdGUgZmFpbHMsIHRyeSBpbnNlcnRcbiAgICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0UmVzdWx0LCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdtYWludGVuYW5jZV9zZXR0aW5ncycpXG4gICAgICAgIC5pbnNlcnQoW3tcbiAgICAgICAgICBpZDogJ21haW50ZW5hbmNlJyxcbiAgICAgICAgICBpc19tYWludGVuYW5jZV9tb2RlOiBzZXR0aW5ncy5pc19tYWludGVuYW5jZV9tb2RlID8/IGZhbHNlLFxuICAgICAgICAgIGRyb3BfZGF0ZTogc2V0dGluZ3MuZHJvcF9kYXRlID8/IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgbWFpbnRlbmFuY2VfbWVzc2FnZTogc2V0dGluZ3MubWFpbnRlbmFuY2VfbWVzc2FnZSA/PyAnV2UgYXJlIGN1cnJlbnRseSBwZXJmb3JtaW5nIG1haW50ZW5hbmNlLiBQbGVhc2UgY2hlY2sgYmFjayBsYXRlci4nLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJbnNlcnQgZXJyb3I6JywgaW5zZXJ0RXJyb3IpO1xuICAgICAgICB0aHJvdyBpbnNlcnRFcnJvcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBDcmVhdGVkIG1haW50ZW5hbmNlIHNldHRpbmdzJyk7XG4gICAgICByZXR1cm4gaW5zZXJ0UmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgbWFpbnRlbmFuY2Ugc2V0dGluZ3MnKTtcbiAgICByZXR1cm4gdXBkYXRlUmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZU1haW50ZW5hbmNlU2V0dGluZ3MgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEN1c3RvbWVycyBtZXRob2RzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzKCk6IFByb21pc2U8Q3VzdG9tZXJbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY3VzdG9tZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0Q3VzdG9tZXJzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IEZldGNoZWQnLCBkYXRhPy5sZW5ndGggfHwgMCwgJ2N1c3RvbWVycycpO1xuICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEN1c3RvbWVycyBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEN1c3RvbWVyKGN1c3RvbWVyRGF0YTogT21pdDxDdXN0b21lciwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxDdXN0b21lciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgY3VzdG9tZXIgPSB7XG4gICAgICAuLi5jdXN0b21lckRhdGEsXG4gICAgICBpZDogYGN1c3RvbWVyXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5vdyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5vd1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjdXN0b21lcnMnKVxuICAgICAgLmluc2VydChbY3VzdG9tZXJdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRDdXN0b21lciBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBDcmVhdGVkIGN1c3RvbWVyOicsIGRhdGEuaWQpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgcGhvbmU6IGRhdGEucGhvbmUsXG4gICAgICBhZGRyZXNzOiBkYXRhLmFkZHJlc3MsXG4gICAgICBjaXR5OiBkYXRhLmNpdHksXG4gICAgICB3aWxheWE6IGRhdGEud2lsYXlhLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRfYXQpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRfYXQpXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRDdXN0b21lciBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSIsImNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QiLCJkYlByb2R1Y3QiLCJjb25zb2xlIiwibG9nIiwicHJpY2UiLCJwYXJzZUZsb2F0IiwiY29udmVydGVkUHJvZHVjdCIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwib3JpZ2luYWxQcmljZSIsIm9yaWdpbmFsX3ByaWNlIiwidW5kZWZpbmVkIiwiaW1hZ2UiLCJpbWFnZXMiLCJzdG9jayIsImNhdGVnb3J5Iiwic2l6ZXMiLCJjb2xvcnMiLCJpblN0b2NrIiwiaW5fc3RvY2siLCJyYXRpbmciLCJyZXZpZXdzIiwic2t1Iiwid2VpZ2h0IiwiZGltZW5zaW9ucyIsInRhZ3MiLCJmZWF0dXJlZCIsInNpemVDaGFydENhdGVnb3J5Iiwic2l6ZV9jaGFydF9jYXRlZ29yeSIsImN1c3RvbVNpemVDaGFydCIsImN1c3RvbV9zaXplX2NoYXJ0IiwidXNlQ3VzdG9tU2l6ZUNoYXJ0IiwidXNlX2N1c3RvbV9zaXplX2NoYXJ0IiwiY3JlYXRlZEF0IiwiRGF0ZSIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkX2F0IiwicHJvZHVjdHNDYWNoZSIsInByb2R1Y3RzQ2FjaGVUaW1lIiwiQ0FDSEVfRFVSQVRJT04iLCJjbGVhclByb2R1Y3RzQ2FjaGUiLCJDQUNIRV9CVVNURVIiLCJub3ciLCJnZXRQcm9kdWN0cyIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsInByb2R1Y3RzIiwibWFwIiwiZ2V0UHJvZHVjdCIsImVxIiwic2luZ2xlIiwiYWRkUHJvZHVjdCIsInByb2R1Y3QiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5zZXJ0IiwiY29kZSIsIm1lc3NhZ2UiLCJoaW50IiwiaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkiLCJpbnZlbnRvcnlFcnJvciIsInVwZGF0ZVByb2R1Y3QiLCJ1cGRhdGUiLCJkZWxldGVQcm9kdWN0IiwiZGVsZXRlIiwiY29udmVydERiT3JkZXJUb09yZGVyIiwiZGJPcmRlciIsImZpcnN0SXRlbSIsIml0ZW1zIiwibGVuZ3RoIiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJwcm9kdWN0SW1hZ2UiLCJjdXN0b21lck5hbWUiLCJjdXN0b21lclBob25lIiwiY3VzdG9tZXJFbWFpbCIsImN1c3RvbWVyQWRkcmVzcyIsImN1c3RvbWVyQ2l0eSIsIndpbGF5YUlkIiwid2lsYXlhTmFtZSIsInNoaXBwaW5nVHlwZSIsInNoaXBwaW5nX3R5cGUiLCJzaGlwcGluZ0Nvc3QiLCJOdW1iZXIiLCJzaGlwcGluZ19jb3N0IiwicXVhbnRpdHkiLCJzZWxlY3RlZFNpemUiLCJzZWxlY3RlZENvbG9yIiwic3VidG90YWwiLCJ0b3RhbCIsIm9yZGVyRGF0ZSIsIm9yZGVyX2RhdGUiLCJzdGF0dXMiLCJ0cmFja2luZ051bWJlciIsInRyYWNraW5nX251bWJlciIsIm5vdGVzIiwicGF5bWVudE1ldGhvZCIsInBheW1lbnRfbWV0aG9kIiwicGF5bWVudFN0YXR1cyIsInBheW1lbnRfc3RhdHVzIiwiZXN0aW1hdGVkRGVsaXZlcnkiLCJvcmRlcnNDYWNoZSIsIm9yZGVyc0NhY2hlVGltZSIsImdldE9yZGVycyIsIm9yZGVycyIsImdldE9yZGVyIiwiYWRkT3JkZXIiLCJjdXN0b21lcl9pZCIsInRvSVNPU3RyaW5nIiwidXBkYXRlT3JkZXIiLCJ1cGRhdGVEYXRhIiwiZGVsZXRlT3JkZXIiLCJhZGRJbnZlbnRvcnkiLCJpbnZlbnRvcnlSZXN0b3JlZCIsIndhcm4iLCJnZXRXaWxheWFUYXJpZmZzIiwidHJhbnNmb3JtZWREYXRhIiwidGFyaWZmIiwidG9TdHJpbmciLCJ3aWxheWFfaWQiLCJkb21pY2lsZV9lY29tbWVyY2UiLCJzdG9wX2Rlc2tfZWNvbW1lcmNlIiwiaG9tZV9kZWxpdmVyeSIsInN0b3BfZGVzayIsImhvbWVEZWxpdmVyeSIsInN0b3BEZXNrIiwiZG9taWNpbGVFY29tbWVyY2UiLCJzdG9wRGVza0Vjb21tZXJjZSIsInVwZGF0ZVdpbGF5YVRhcmlmZnMiLCJ0YXJpZmZzIiwibmVxIiwidHJhbnNmb3JtZWRUYXJpZmZzIiwiZ2V0SW52ZW50b3J5IiwidG90YWxTdG9jayIsImNhbGN1bGF0ZVRvdGFsU3RvY2siLCJzdG9ja0J5U2l6ZSIsImNhbGN1bGF0ZVN0b2NrQnlTaXplIiwidXBkYXRlSW52ZW50b3J5Iiwic3RvY2tEYXRhIiwidXBkYXRlT2JqIiwic2l6ZSIsImNvbG9yIiwicmVzdWx0IiwiZm9yRWFjaCIsImRlZHVjdFN0b2NrRnJvbU9yZGVyIiwiY3VycmVudFN0b2NrIiwicmVxdWVzdGVkIiwiYXZhaWxhYmxlIiwibmV3U3RvY2siLCJ1cGRhdGVkUHJvZHVjdCIsImludmVudG9yeURlZHVjdGVkIiwiZ2V0TWFpbnRlbmFuY2VTZXR0aW5ncyIsImlzX21haW50ZW5hbmNlX21vZGUiLCJkcm9wX2RhdGUiLCJtYWludGVuYW5jZV9tZXNzYWdlIiwidXBkYXRlTWFpbnRlbmFuY2VTZXR0aW5ncyIsInNldHRpbmdzIiwidXBkYXRlUmVzdWx0IiwidXBkYXRlRXJyb3IiLCJpbnNlcnRSZXN1bHQiLCJpbnNlcnRFcnJvciIsImdldEN1c3RvbWVycyIsImFkZEN1c3RvbWVyIiwiY3VzdG9tZXJEYXRhIiwiY3VzdG9tZXIiLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwiZW1haWwiLCJwaG9uZSIsImFkZHJlc3MiLCJjaXR5Iiwid2lsYXlhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseDatabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validation.ts":
/*!*******************************!*\
  !*** ./src/lib/validation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationUtils: () => (/* binding */ ValidationUtils)\n/* harmony export */ });\n// Input validation and sanitization utilities\nclass ValidationUtils {\n    // Sanitize HTML input to prevent XSS\n    static sanitizeHtml(input) {\n        if (typeof input !== \"string\") return \"\";\n        return input.replace(/[<>]/g, \"\") // Remove < and >\n        .replace(/javascript:/gi, \"\") // Remove javascript: protocol\n        .replace(/on\\w+=/gi, \"\") // Remove event handlers\n        .trim();\n    }\n    // Validate email format\n    static isValidEmail(email) {\n        if (typeof email !== \"string\") return false;\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }\n    // Validate phone number (basic)\n    static isValidPhone(phone) {\n        if (typeof phone !== \"string\") return false;\n        const phoneRegex = /^[\\+]?[0-9\\s\\-\\(\\)]{8,}$/;\n        return phoneRegex.test(phone.trim());\n    }\n    // Validate required fields\n    static validateRequired(data, fields) {\n        const missingFields = [];\n        for (const field of fields){\n            if (!data[field] || typeof data[field] === \"string\" && data[field].trim() === \"\") {\n                missingFields.push(field);\n            }\n        }\n        return {\n            isValid: missingFields.length === 0,\n            missingFields\n        };\n    }\n    // Validate string length\n    static validateLength(input, min, max) {\n        if (typeof input !== \"string\") return false;\n        const length = input.trim().length;\n        return length >= min && length <= max;\n    }\n    // Validate numeric input\n    static isValidNumber(input, min, max) {\n        const num = Number(input);\n        if (isNaN(num)) return false;\n        if (min !== undefined && num < min) return false;\n        if (max !== undefined && num > max) return false;\n        return true;\n    }\n    // Sanitize product data\n    static sanitizeProductData(data) {\n        return {\n            ...data,\n            name: this.sanitizeHtml(data.name || \"\"),\n            description: this.sanitizeHtml(data.description || \"\"),\n            category: this.sanitizeHtml(data.category || \"\"),\n            price: this.isValidNumber(data.price, 0, 999999) ? Number(data.price) : 0,\n            stock: data.stock || {},\n            image: this.sanitizeHtml(data.image || \"\"),\n            colors: Array.isArray(data.colors) ? data.colors.map((c)=>this.sanitizeHtml(c)) : [],\n            sizes: Array.isArray(data.sizes) ? data.sizes.map((s)=>this.sanitizeHtml(s)) : []\n        };\n    }\n    // Sanitize order data\n    static sanitizeOrderData(data) {\n        return {\n            ...data,\n            customerName: this.sanitizeHtml(data.customerName || \"\"),\n            customerEmail: this.isValidEmail(data.customerEmail) ? data.customerEmail.trim() : \"\",\n            customerPhone: this.isValidPhone(data.customerPhone) ? data.customerPhone.trim() : \"\",\n            customerAddress: this.sanitizeHtml(data.customerAddress || \"\"),\n            productName: this.sanitizeHtml(data.productName || \"\"),\n            selectedSize: this.sanitizeHtml(data.selectedSize || \"\"),\n            selectedColor: this.sanitizeHtml(data.selectedColor || \"\"),\n            notes: this.sanitizeHtml(data.notes || \"\"),\n            quantity: this.isValidNumber(data.quantity, 1, 100) ? Number(data.quantity) : 1,\n            total: this.isValidNumber(data.total, 0, 999999) ? Number(data.total) : 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2xpYi92YWxpZGF0aW9uLnRzPzQ2MGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW5wdXQgdmFsaWRhdGlvbiBhbmQgc2FuaXRpemF0aW9uIHV0aWxpdGllc1xyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblV0aWxzIHtcclxuICAvLyBTYW5pdGl6ZSBIVE1MIGlucHV0IHRvIHByZXZlbnQgWFNTXHJcbiAgc3RhdGljIHNhbml0aXplSHRtbChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIHJldHVybiBpbnB1dFxyXG4gICAgICAucmVwbGFjZSgvWzw+XS9nLCAnJykgLy8gUmVtb3ZlIDwgYW5kID5cclxuICAgICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gUmVtb3ZlIGphdmFzY3JpcHQ6IHByb3RvY29sXHJcbiAgICAgIC5yZXBsYWNlKC9vblxcdys9L2dpLCAnJykgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIC50cmltKCk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXRcclxuICBzdGF0aWMgaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgZW1haWwgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XHJcbiAgICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsLnRyaW0oKSk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXIgKGJhc2ljKVxyXG4gIHN0YXRpYyBpc1ZhbGlkUGhvbmUocGhvbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHR5cGVvZiBwaG9uZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IHBob25lUmVnZXggPSAvXltcXCtdP1swLTlcXHNcXC1cXChcXCldezgsfSQvO1xyXG4gICAgcmV0dXJuIHBob25lUmVnZXgudGVzdChwaG9uZS50cmltKCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgc3RhdGljIHZhbGlkYXRlUmVxdWlyZWQoZGF0YTogYW55LCBmaWVsZHM6IHN0cmluZ1tdKTogeyBpc1ZhbGlkOiBib29sZWFuOyBtaXNzaW5nRmllbGRzOiBzdHJpbmdbXSB9IHtcclxuICAgIGNvbnN0IG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XHJcbiAgICAgIGlmICghZGF0YVtmaWVsZF0gfHwgKHR5cGVvZiBkYXRhW2ZpZWxkXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtmaWVsZF0udHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICBtaXNzaW5nRmllbGRzLnB1c2goZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmFsaWQ6IG1pc3NpbmdGaWVsZHMubGVuZ3RoID09PSAwLFxyXG4gICAgICBtaXNzaW5nRmllbGRzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgc3RyaW5nIGxlbmd0aFxyXG4gIHN0YXRpYyB2YWxpZGF0ZUxlbmd0aChpbnB1dDogc3RyaW5nLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC50cmltKCkubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGxlbmd0aCA+PSBtaW4gJiYgbGVuZ3RoIDw9IG1heDtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIG51bWVyaWMgaW5wdXRcclxuICBzdGF0aWMgaXNWYWxpZE51bWJlcihpbnB1dDogYW55LCBtaW4/OiBudW1iZXIsIG1heD86IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgbnVtID0gTnVtYmVyKGlucHV0KTtcclxuICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbnVtIDwgbWluKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbnVtID4gbWF4KSByZXR1cm4gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIHByb2R1Y3QgZGF0YVxyXG4gIHN0YXRpYyBzYW5pdGl6ZVByb2R1Y3REYXRhKGRhdGE6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICBuYW1lOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLm5hbWUgfHwgJycpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyksXHJcbiAgICAgIGNhdGVnb3J5OiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmNhdGVnb3J5IHx8ICcnKSxcclxuICAgICAgcHJpY2U6IHRoaXMuaXNWYWxpZE51bWJlcihkYXRhLnByaWNlLCAwLCA5OTk5OTkpID8gTnVtYmVyKGRhdGEucHJpY2UpIDogMCxcclxuICAgICAgc3RvY2s6IGRhdGEuc3RvY2sgfHwge30sXHJcbiAgICAgIGltYWdlOiB0aGlzLnNhbml0aXplSHRtbChkYXRhLmltYWdlIHx8ICcnKSxcclxuICAgICAgY29sb3JzOiBBcnJheS5pc0FycmF5KGRhdGEuY29sb3JzKSA/IGRhdGEuY29sb3JzLm1hcCgoYzogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChjKSkgOiBbXSxcclxuICAgICAgc2l6ZXM6IEFycmF5LmlzQXJyYXkoZGF0YS5zaXplcykgPyBkYXRhLnNpemVzLm1hcCgoczogYW55KSA9PiB0aGlzLnNhbml0aXplSHRtbChzKSkgOiBbXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNhbml0aXplIG9yZGVyIGRhdGFcclxuICBzdGF0aWMgc2FuaXRpemVPcmRlckRhdGEoZGF0YTogYW55KTogYW55IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmRhdGEsXHJcbiAgICAgIGN1c3RvbWVyTmFtZTogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5jdXN0b21lck5hbWUgfHwgJycpLFxyXG4gICAgICBjdXN0b21lckVtYWlsOiB0aGlzLmlzVmFsaWRFbWFpbChkYXRhLmN1c3RvbWVyRW1haWwpID8gZGF0YS5jdXN0b21lckVtYWlsLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lclBob25lOiB0aGlzLmlzVmFsaWRQaG9uZShkYXRhLmN1c3RvbWVyUGhvbmUpID8gZGF0YS5jdXN0b21lclBob25lLnRyaW0oKSA6ICcnLFxyXG4gICAgICBjdXN0b21lckFkZHJlc3M6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuY3VzdG9tZXJBZGRyZXNzIHx8ICcnKSxcclxuICAgICAgcHJvZHVjdE5hbWU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEucHJvZHVjdE5hbWUgfHwgJycpLFxyXG4gICAgICBzZWxlY3RlZFNpemU6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEuc2VsZWN0ZWRTaXplIHx8ICcnKSxcclxuICAgICAgc2VsZWN0ZWRDb2xvcjogdGhpcy5zYW5pdGl6ZUh0bWwoZGF0YS5zZWxlY3RlZENvbG9yIHx8ICcnKSxcclxuICAgICAgbm90ZXM6IHRoaXMuc2FuaXRpemVIdG1sKGRhdGEubm90ZXMgfHwgJycpLFxyXG4gICAgICBxdWFudGl0eTogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEucXVhbnRpdHksIDEsIDEwMCkgPyBOdW1iZXIoZGF0YS5xdWFudGl0eSkgOiAxLFxyXG4gICAgICB0b3RhbDogdGhpcy5pc1ZhbGlkTnVtYmVyKGRhdGEudG90YWwsIDAsIDk5OTk5OSkgPyBOdW1iZXIoZGF0YS50b3RhbCkgOiAwXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvblV0aWxzIiwic2FuaXRpemVIdG1sIiwiaW5wdXQiLCJyZXBsYWNlIiwidHJpbSIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwiZW1haWxSZWdleCIsInRlc3QiLCJpc1ZhbGlkUGhvbmUiLCJwaG9uZSIsInBob25lUmVnZXgiLCJ2YWxpZGF0ZVJlcXVpcmVkIiwiZGF0YSIsImZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWVsZCIsInB1c2giLCJpc1ZhbGlkIiwibGVuZ3RoIiwidmFsaWRhdGVMZW5ndGgiLCJtaW4iLCJtYXgiLCJpc1ZhbGlkTnVtYmVyIiwibnVtIiwiTnVtYmVyIiwiaXNOYU4iLCJ1bmRlZmluZWQiLCJzYW5pdGl6ZVByb2R1Y3REYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcmljZSIsInN0b2NrIiwiaW1hZ2UiLCJjb2xvcnMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJjIiwic2l6ZXMiLCJzIiwic2FuaXRpemVPcmRlckRhdGEiLCJjdXN0b21lck5hbWUiLCJjdXN0b21lckVtYWlsIiwiY3VzdG9tZXJQaG9uZSIsImN1c3RvbWVyQWRkcmVzcyIsInByb2R1Y3ROYW1lIiwic2VsZWN0ZWRTaXplIiwic2VsZWN0ZWRDb2xvciIsIm5vdGVzIiwicXVhbnRpdHkiLCJ0b3RhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();