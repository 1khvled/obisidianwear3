"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/[id]/route";
exports.ids = ["app/api/orders/[id]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Desktop_projectt_src_app_api_orders_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/[id]/route.ts */ \"(rsc)/./src/app/api/orders/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/[id]/route\",\n        pathname: \"/api/orders/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Desktop\\\\projectt\\\\src\\\\app\\\\api\\\\orders\\\\[id]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Desktop_projectt_src_app_api_orders_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb3JkZXJzJTJGJTVCaWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rlc2t0b3AlNUNwcm9qZWN0dCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSFAlNUNEZXNrdG9wJTVDcHJvamVjdHQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3VCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8/ZjgzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXHByb2plY3R0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxbaWRdXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzL1tpZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmRlcnMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL1tpZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEZXNrdG9wXFxcXHByb2plY3R0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxbaWRdXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yZGVycy9baWRdL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/[id]/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/orders/[id]/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\");\n/* harmony import */ var _lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authMiddleware */ \"(rsc)/./src/lib/authMiddleware.ts\");\n\n\n\n// Ensure we use Node.js runtime for Supabase compatibility\nconst runtime = \"nodejs\";\n// GET /api/orders/[id] - Get single order\nasync function GET(request, { params }) {\n    try {\n        const { id } = params;\n        // Check if Supabase is available\n        if (false) {}\n        const order = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrder)(id);\n        if (!order) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Order not found\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(\"Orders API: GET single order:\", id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: order,\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: GET single error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch order\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT /api/orders/[id] - Update order\nasync function PUT(request, { params }) {\n    try {\n        const { id } = params;\n        const updateData = await request.json();\n        // Check if Supabase is available\n        if (false) {}\n        // Get the current order to check if status is changing to cancelled\n        const currentOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrder)(id);\n        if (currentOrder && updateData.status === \"cancelled\" && currentOrder.status !== \"cancelled\") {\n            // Return stock when order is cancelled\n            const { returnStockFromOrder } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_optimizedDatabase_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/optimizedDatabase */ \"(rsc)/./src/lib/optimizedDatabase.ts\"));\n            await returnStockFromOrder(currentOrder);\n            console.log(\"Orders API: Returned stock for cancelled order:\", id);\n        }\n        const updatedOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.updateOrder)(id, updateData);\n        if (!updatedOrder) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Order not found\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(\"Orders API: PUT request - updated order:\", id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: updatedOrder,\n            message: updateData.status === \"cancelled\" ? \"Order cancelled and stock returned to inventory\" : \"Order updated successfully\",\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: PUT error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to update order\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE /api/orders/[id] - Delete order (requires authentication)\nconst DELETE = (0,_lib_authMiddleware__WEBPACK_IMPORTED_MODULE_2__.createAuthenticatedHandler)(async (request, { params })=>{\n    try {\n        const { id } = params;\n        // Check if Supabase is available\n        if (false) {}\n        const deletedOrder = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.getOrder)(id);\n        if (!deletedOrder) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Order not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Delete the order (this will automatically return stock)\n        const success = await (0,_lib_supabaseDatabase__WEBPACK_IMPORTED_MODULE_1__.deleteOrder)(id);\n        if (!success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Failed to delete order\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"Orders API: DELETE request - deleted order and returned stock:\", id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: deletedOrder,\n            message: \"Order deleted successfully and stock returned to inventory\",\n            timestamp: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Orders API: DELETE error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to delete order\"\n        }, {\n            status: 500\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQixPQUFPaEMsa0ZBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPRixPQUFPO1lBQWtCLEdBQzNDO2dCQUFFRyxRQUFRO1lBQUk7UUFFbEI7UUFFQSwwREFBMEQ7UUFDMUQsTUFBTUQsVUFBVSxNQUFNZCxrRUFBV0EsQ0FBQ007UUFDbEMsSUFBSSxDQUFDUSxTQUFTO1lBQ1osT0FBT2pCLGtGQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0YsT0FBTztZQUF5QixHQUNsRDtnQkFBRUcsUUFBUTtZQUFJO1FBRWxCO1FBRUFKLFFBQVFNLEdBQUcsQ0FBQyxrRUFBa0VYO1FBRTlFLE9BQU9ULGtGQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RJLE1BQU1XO1lBQ05GLFNBQVM7WUFDVFIsV0FBV0MsS0FBS0MsR0FBRztRQUNyQjtJQUNGLEVBQUUsT0FBT1QsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPZixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPRixPQUFPO1FBQXlCLEdBQ2xEO1lBQUVHLFFBQVE7UUFBSTtJQUVsQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYnNpZGlhbi13ZWFyLy4vc3JjL2FwcC9hcGkvb3JkZXJzL1tpZF0vcm91dGUudHM/ZGVlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBPcmRlciB9IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyBnZXRPcmRlciwgdXBkYXRlT3JkZXIsIGRlbGV0ZU9yZGVyIH0gZnJvbSAnQC9saWIvc3VwYWJhc2VEYXRhYmFzZSc7XHJcbmltcG9ydCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRIYW5kbGVyLCBBdXRoZW50aWNhdGVkUmVxdWVzdCB9IGZyb20gJ0AvbGliL2F1dGhNaWRkbGV3YXJlJztcclxuXHJcbi8vIEVuc3VyZSB3ZSB1c2UgTm9kZS5qcyBydW50aW1lIGZvciBTdXBhYmFzZSBjb21wYXRpYmlsaXR5XHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XHJcblxyXG4vLyBHRVQgL2FwaS9vcmRlcnMvW2lkXSAtIEdldCBzaW5nbGUgb3JkZXJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcclxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcclxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfVxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiBTdXBhYmFzZSBpcyBhdmFpbGFibGVcclxuICAgIGlmICghcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdEYXRhYmFzZSBjb25maWd1cmF0aW9uIG1pc3NpbmcnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgZ2V0T3JkZXIoaWQpO1xyXG4gICAgXHJcbiAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnT3JkZXJzIEFQSTogR0VUIHNpbmdsZSBvcmRlcjonLCBpZCk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IG9yZGVyLFxyXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgQVBJOiBHRVQgc2luZ2xlIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggb3JkZXInIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBVVCAvYXBpL29yZGVycy9baWRdIC0gVXBkYXRlIG9yZGVyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQoXHJcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcclxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgU3VwYWJhc2UgaXMgYXZhaWxhYmxlXHJcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRGF0YWJhc2UgY29uZmlndXJhdGlvbiBtaXNzaW5nJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgb3JkZXIgdG8gY2hlY2sgaWYgc3RhdHVzIGlzIGNoYW5naW5nIHRvIGNhbmNlbGxlZFxyXG4gICAgY29uc3QgY3VycmVudE9yZGVyID0gYXdhaXQgZ2V0T3JkZXIoaWQpO1xyXG4gICAgaWYgKGN1cnJlbnRPcmRlciAmJiB1cGRhdGVEYXRhLnN0YXR1cyA9PT0gJ2NhbmNlbGxlZCcgJiYgY3VycmVudE9yZGVyLnN0YXR1cyAhPT0gJ2NhbmNlbGxlZCcpIHtcclxuICAgICAgLy8gUmV0dXJuIHN0b2NrIHdoZW4gb3JkZXIgaXMgY2FuY2VsbGVkXHJcbiAgICAgIGNvbnN0IHsgcmV0dXJuU3RvY2tGcm9tT3JkZXIgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvb3B0aW1pemVkRGF0YWJhc2UnKTtcclxuICAgICAgYXdhaXQgcmV0dXJuU3RvY2tGcm9tT3JkZXIoY3VycmVudE9yZGVyKTtcclxuICAgICAgY29uc29sZS5sb2coJ09yZGVycyBBUEk6IFJldHVybmVkIHN0b2NrIGZvciBjYW5jZWxsZWQgb3JkZXI6JywgaWQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCB1cGRhdGVPcmRlcihpZCwgdXBkYXRlRGF0YSk7XHJcbiAgICBcclxuICAgIGlmICghdXBkYXRlZE9yZGVyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ09yZGVycyBBUEk6IFBVVCByZXF1ZXN0IC0gdXBkYXRlZCBvcmRlcjonLCBpZCk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHVwZGF0ZWRPcmRlcixcclxuICAgICAgbWVzc2FnZTogdXBkYXRlRGF0YS5zdGF0dXMgPT09ICdjYW5jZWxsZWQnID8gJ09yZGVyIGNhbmNlbGxlZCBhbmQgc3RvY2sgcmV0dXJuZWQgdG8gaW52ZW50b3J5JyA6ICdPcmRlciB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVycyBBUEk6IFBVVCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBvcmRlcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gREVMRVRFIC9hcGkvb3JkZXJzL1tpZF0gLSBEZWxldGUgb3JkZXIgKHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uKVxyXG5leHBvcnQgY29uc3QgREVMRVRFID0gY3JlYXRlQXV0aGVudGljYXRlZEhhbmRsZXIoYXN5bmMgKHJlcXVlc3Q6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBpZDogc3RyaW5nIH0gfSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXM7XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIFN1cGFiYXNlIGlzIGF2YWlsYWJsZVxyXG4gICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVycyBBUEk6IE1pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RhdGFiYXNlIGNvbmZpZ3VyYXRpb24gbWlzc2luZycgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZGVsZXRlZE9yZGVyID0gYXdhaXQgZ2V0T3JkZXIoaWQpO1xyXG4gICAgaWYgKCFkZWxldGVkT3JkZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlbGV0ZSB0aGUgb3JkZXIgKHRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IHJldHVybiBzdG9jaylcclxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBkZWxldGVPcmRlcihpZCk7XHJcbiAgICBpZiAoIXN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBvcmRlcicgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ09yZGVycyBBUEk6IERFTEVURSByZXF1ZXN0IC0gZGVsZXRlZCBvcmRlciBhbmQgcmV0dXJuZWQgc3RvY2s6JywgaWQpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBkZWxldGVkT3JkZXIsXHJcbiAgICAgIG1lc3NhZ2U6ICdPcmRlciBkZWxldGVkIHN1Y2Nlc3NmdWxseSBhbmQgc3RvY2sgcmV0dXJuZWQgdG8gaW52ZW50b3J5JyxcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignT3JkZXJzIEFQSTogREVMRVRFIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIG9yZGVyJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldE9yZGVyIiwidXBkYXRlT3JkZXIiLCJkZWxldGVPcmRlciIsImNyZWF0ZUF1dGhlbnRpY2F0ZWRIYW5kbGVyIiwicnVudGltZSIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJpZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsImpzb24iLCJzdWNjZXNzIiwic3RhdHVzIiwib3JkZXIiLCJsb2ciLCJkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIlBVVCIsInVwZGF0ZURhdGEiLCJjdXJyZW50T3JkZXIiLCJyZXR1cm5TdG9ja0Zyb21PcmRlciIsInVwZGF0ZWRPcmRlciIsIm1lc3NhZ2UiLCJERUxFVEUiLCJkZWxldGVkT3JkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authMiddleware.ts":
/*!***********************************!*\
  !*** ./src/lib/authMiddleware.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthenticatedHandler: () => (/* binding */ createAuthenticatedHandler),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nasync function requireAuth(request) {\n    try {\n        // Get session ID from request headers or cookies\n        const sessionId = request.headers.get(\"x-session-id\") || request.cookies.get(\"obsidian-admin-session-id\")?.value;\n        if (!sessionId) {\n            console.log(\"No session ID found in request\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"Checking session:\", sessionId);\n        // Verify session with database using the session ID from the request\n        const session = await verifySessionById(sessionId);\n        if (!session || !session.isActive) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid or expired session\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if session is expired\n        const now = new Date();\n        const expiresAt = new Date(session.expiresAt);\n        if (now > expiresAt) {\n            await deactivateSessionById(sessionId);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Session expired\"\n            }, {\n                status: 401\n            });\n        }\n        // Add user info to request for use in route handlers\n        request.user = {\n            username: session.username,\n            sessionId: session.sessionId\n        };\n        return null; // Authentication successful, continue to route handler\n    } catch (error) {\n        console.error(\"Authentication error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to verify session by ID\nasync function verifySessionById(sessionId) {\n    try {\n        const { supabase } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\"));\n        if (!supabase) return null;\n        const { data, error } = await supabase.from(\"admin_sessions\").select(\"*\").eq(\"session_id\", sessionId).eq(\"is_active\", true).single();\n        if (error && error.code !== \"PGRST116\") {\n            console.error(\"Error fetching session:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Error verifying session:\", error);\n        return null;\n    }\n}\n// Helper function to deactivate session by ID\nasync function deactivateSessionById(sessionId) {\n    try {\n        const { supabase } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./supabaseDatabase */ \"(rsc)/./src/lib/supabaseDatabase.ts\"));\n        if (!supabase) return false;\n        const { error } = await supabase.from(\"admin_sessions\").update({\n            is_active: false\n        }).eq(\"session_id\", sessionId);\n        return !error;\n    } catch (error) {\n        console.error(\"Error deactivating session:\", error);\n        return false;\n    }\n}\nfunction createAuthenticatedHandler(handler) {\n    return async (request, context)=>{\n        const authError = await requireAuth(request);\n        if (authError) {\n            return authError;\n        }\n        return handler(request, context);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsQyxNQUFNQyxZQUFZLE1BQU1qQyxZQUFZQztRQUNwQyxJQUFJZ0MsV0FBVztZQUNiLE9BQU9BO1FBQ1Q7UUFFQSxPQUFPRixRQUFROUIsU0FBaUMrQjtJQUNsRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2JzaWRpYW4td2Vhci8uL3NyYy9saWIvYXV0aE1pZGRsZXdhcmUudHM/YjI2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgc2Vzc2lvblNlcnZpY2UgZnJvbSAnLi9zZXNzaW9uU2VydmljZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0IGV4dGVuZHMgTmV4dFJlcXVlc3Qge1xyXG4gIHVzZXI/OiB7XHJcbiAgICB1c2VybmFtZTogc3RyaW5nO1xyXG4gICAgc2Vzc2lvbklkOiBzdHJpbmc7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2UgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBzZXNzaW9uIElEIGZyb20gcmVxdWVzdCBoZWFkZXJzIG9yIGNvb2tpZXNcclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtc2Vzc2lvbi1pZCcpIHx8IFxyXG4gICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdvYnNpZGlhbi1hZG1pbi1zZXNzaW9uLWlkJyk/LnZhbHVlO1xyXG5cclxuICAgIGlmICghc2Vzc2lvbklkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyBzZXNzaW9uIElEIGZvdW5kIGluIHJlcXVlc3QnKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgc2Vzc2lvbjonLCBzZXNzaW9uSWQpO1xyXG5cclxuICAgIC8vIFZlcmlmeSBzZXNzaW9uIHdpdGggZGF0YWJhc2UgdXNpbmcgdGhlIHNlc3Npb24gSUQgZnJvbSB0aGUgcmVxdWVzdFxyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHZlcmlmeVNlc3Npb25CeUlkKHNlc3Npb25JZCk7XHJcbiAgICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24uaXNBY3RpdmUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIG9yIGV4cGlyZWQgc2Vzc2lvbicgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBzZXNzaW9uIGlzIGV4cGlyZWRcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShzZXNzaW9uLmV4cGlyZXNBdCk7XHJcbiAgICBpZiAobm93ID4gZXhwaXJlc0F0KSB7XHJcbiAgICAgIGF3YWl0IGRlYWN0aXZhdGVTZXNzaW9uQnlJZChzZXNzaW9uSWQpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1Nlc3Npb24gZXhwaXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgdXNlciBpbmZvIHRvIHJlcXVlc3QgZm9yIHVzZSBpbiByb3V0ZSBoYW5kbGVyc1xyXG4gICAgKHJlcXVlc3QgYXMgQXV0aGVudGljYXRlZFJlcXVlc3QpLnVzZXIgPSB7XHJcbiAgICAgIHVzZXJuYW1lOiBzZXNzaW9uLnVzZXJuYW1lLFxyXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb24uc2Vzc2lvbklkXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBudWxsOyAvLyBBdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsLCBjb250aW51ZSB0byByb3V0ZSBoYW5kbGVyXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHZlcmlmeSBzZXNzaW9uIGJ5IElEXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVNlc3Npb25CeUlkKHNlc3Npb25JZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IGF3YWl0IGltcG9ydCgnLi9zdXBhYmFzZURhdGFiYXNlJyk7XHJcbiAgICBpZiAoIXN1cGFiYXNlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdzZXNzaW9uX2lkJywgc2Vzc2lvbklkKVxyXG4gICAgICAuZXEoJ2lzX2FjdGl2ZScsIHRydWUpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzZXNzaW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyBzZXNzaW9uOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRlYWN0aXZhdGUgc2Vzc2lvbiBieSBJRFxyXG5hc3luYyBmdW5jdGlvbiBkZWFjdGl2YXRlU2Vzc2lvbkJ5SWQoc2Vzc2lvbklkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzdXBhYmFzZSB9ID0gYXdhaXQgaW1wb3J0KCcuL3N1cGFiYXNlRGF0YWJhc2UnKTtcclxuICAgIGlmICghc3VwYWJhc2UpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgaXNfYWN0aXZlOiBmYWxzZSB9KVxyXG4gICAgICAuZXEoJ3Nlc3Npb25faWQnLCBzZXNzaW9uSWQpO1xyXG5cclxuICAgIHJldHVybiAhZXJyb3I7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlYWN0aXZhdGluZyBzZXNzaW9uOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBdXRoZW50aWNhdGVkSGFuZGxlcihcclxuICBoYW5kbGVyOiAocmVxdWVzdDogQXV0aGVudGljYXRlZFJlcXVlc3QsIGNvbnRleHQ/OiBhbnkpID0+IFByb21pc2U8TmV4dFJlc3BvbnNlPlxyXG4pIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBjb250ZXh0PzogYW55KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+ID0+IHtcclxuICAgIGNvbnN0IGF1dGhFcnJvciA9IGF3YWl0IHJlcXVpcmVBdXRoKHJlcXVlc3QpO1xyXG4gICAgaWYgKGF1dGhFcnJvcikge1xyXG4gICAgICByZXR1cm4gYXV0aEVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcXVlc3QgYXMgQXV0aGVudGljYXRlZFJlcXVlc3QsIGNvbnRleHQpO1xyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInJlcXVpcmVBdXRoIiwicmVxdWVzdCIsInNlc3Npb25JZCIsImhlYWRlcnMiLCJnZXQiLCJjb29raWVzIiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2Vzc2lvbiIsInZlcmlmeVNlc3Npb25CeUlkIiwiaXNBY3RpdmUiLCJub3ciLCJEYXRlIiwiZXhwaXJlc0F0IiwiZGVhY3RpdmF0ZVNlc3Npb25CeUlkIiwidXNlciIsInVzZXJuYW1lIiwic3VwYWJhc2UiLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY29kZSIsInVwZGF0ZSIsImlzX2FjdGl2ZSIsImNyZWF0ZUF1dGhlbnRpY2F0ZWRIYW5kbGVyIiwiaGFuZGxlciIsImNvbnRleHQiLCJhdXRoRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authMiddleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseDatabase.ts":
/*!*************************************!*\
  !*** ./src/lib/supabaseDatabase.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCustomer: () => (/* binding */ addCustomer),\n/* harmony export */   addOrder: () => (/* binding */ addOrder),\n/* harmony export */   addProduct: () => (/* binding */ addProduct),\n/* harmony export */   deductStockFromOrder: () => (/* binding */ deductStockFromOrder),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getCustomers: () => (/* binding */ getCustomers),\n/* harmony export */   getInventory: () => (/* binding */ getInventory),\n/* harmony export */   getMaintenanceStatus: () => (/* binding */ getMaintenanceStatus),\n/* harmony export */   getOrder: () => (/* binding */ getOrder),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getProduct: () => (/* binding */ getProduct),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getWilayaTariffs: () => (/* binding */ getWilayaTariffs),\n/* harmony export */   returnStockFromOrder: () => (/* binding */ returnStockFromOrder),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateInventory: () => (/* binding */ updateInventory),\n/* harmony export */   updateMaintenanceStatus: () => (/* binding */ updateMaintenanceStatus),\n/* harmony export */   updateOrder: () => (/* binding */ updateOrder),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateWilayaTariffs: () => (/* binding */ updateWilayaTariffs)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// Database service using Supabase (free tier)\n// This provides persistent storage with a real database\n\n// Supabase configuration - MUST use environment variables\nconst supabaseUrl = \"https://zrmxcjklkthpyanfslsw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpybXhjamtsa3RocHlhbmZzbHN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MDYxMzAsImV4cCI6MjA3MjQ4MjEzMH0.2Tjh9pPzc6BUGoV3lDUBymXzE_dvAGs1O_WewTdetE0\";\n// Only throw error during server-side rendering, not during build or client-side\nif (!supabaseUrl || !supabaseKey) {\n    // Only throw error during server-side rendering, not during build or client-side\n    if (true) {\n        const missingVars = [];\n        if (!supabaseUrl) missingVars.push(\"NEXT_PUBLIC_SUPABASE_URL\");\n        if (!supabaseKey) missingVars.push(\"NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n        throw new Error(`Missing Supabase environment variables: ${missingVars.join(\", \")}. Please set these in your Vercel environment variables or .env.local file.`);\n    }\n}\n// Create supabase client with fallback for build time\nconst supabase = supabaseUrl && supabaseKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey) : null;\n// Export the supabase client for direct use\n\n// Helper function to convert database product to Product interface\nfunction convertDbProductToProduct(dbProduct) {\n    return {\n        id: dbProduct.id,\n        name: dbProduct.name || \"\",\n        description: dbProduct.description || \"\",\n        price: Number(dbProduct.price) || 0,\n        originalPrice: Number(dbProduct.original_price) || 0,\n        image: dbProduct.image || \"\",\n        images: dbProduct.images || [],\n        stock: dbProduct.stock || {},\n        category: dbProduct.category || \"\",\n        sizes: dbProduct.sizes || [],\n        colors: dbProduct.colors || [],\n        inStock: dbProduct.in_stock || false,\n        status: dbProduct.status || \"available\",\n        rating: Number(dbProduct.rating) || 0,\n        reviews: Number(dbProduct.reviews) || 0,\n        sku: dbProduct.sku || \"\",\n        weight: Number(dbProduct.weight) || 0,\n        dimensions: dbProduct.dimensions || null,\n        tags: dbProduct.tags || [],\n        featured: dbProduct.featured || false,\n        createdAt: dbProduct.created_at ? new Date(dbProduct.created_at) : new Date(),\n        updatedAt: dbProduct.updated_at ? new Date(dbProduct.updated_at) : new Date()\n    };\n}\n// Cache for products to reduce database calls\nlet productsCache = null;\nlet productsCacheTime = 0;\nconst CACHE_DURATION = 30000; // 30 seconds\n// Products operations\nasync function getProducts() {\n    try {\n        // Return cached data if still fresh\n        if (productsCache && Date.now() - productsCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached products\");\n            return productsCache;\n        }\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return productsCache || [];\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getProducts error:\", error);\n            return productsCache || [];\n        }\n        const products = (data || []).map(convertDbProductToProduct);\n        // Update cache\n        productsCache = products;\n        productsCacheTime = Date.now();\n        return products;\n    } catch (error) {\n        console.error(\"Supabase getProducts error:\", error);\n        return productsCache || [];\n    }\n}\nasync function getProduct(id) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return null;\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getProduct error:\", error);\n            return null;\n        }\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase getProduct error:\", error);\n        return null;\n    }\n}\nasync function addProduct(product) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            throw new Error(\"Database not available\");\n        }\n        // Convert camelCase to snake_case for database\n        const dbProduct = {\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            price: product.price,\n            original_price: product.originalPrice,\n            image: product.image,\n            images: product.images || [],\n            stock: product.stock,\n            category: product.category,\n            sizes: product.sizes || [],\n            colors: product.colors || [],\n            in_stock: product.inStock,\n            rating: product.rating,\n            reviews: product.reviews,\n            sku: product.sku,\n            weight: product.weight,\n            dimensions: product.dimensions,\n            tags: product.tags || [],\n            featured: product.featured || false\n        };\n        const { data, error } = await supabase.from(\"products\").insert([\n            dbProduct\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addProduct error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added product:\", product.id);\n        // Invalidate cache\n        productsCache = null;\n        // Convert back to camelCase\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase addProduct error:\", error);\n        throw error;\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return null;\n        }\n        // Convert camelCase to snake_case for database\n        const dbProduct = {};\n        if (product.name !== undefined) dbProduct.name = product.name;\n        if (product.description !== undefined) dbProduct.description = product.description;\n        if (product.price !== undefined) dbProduct.price = product.price;\n        if (product.originalPrice !== undefined) dbProduct.original_price = product.originalPrice;\n        if (product.image !== undefined) dbProduct.image = product.image;\n        if (product.images !== undefined) dbProduct.images = product.images;\n        if (product.stock !== undefined) dbProduct.stock = product.stock;\n        if (product.category !== undefined) dbProduct.category = product.category;\n        if (product.sizes !== undefined) dbProduct.sizes = product.sizes;\n        if (product.colors !== undefined) dbProduct.colors = product.colors;\n        if (product.inStock !== undefined) dbProduct.in_stock = product.inStock;\n        if (product.rating !== undefined) dbProduct.rating = product.rating;\n        if (product.reviews !== undefined) dbProduct.reviews = product.reviews;\n        if (product.sku !== undefined) dbProduct.sku = product.sku;\n        if (product.weight !== undefined) dbProduct.weight = product.weight;\n        if (product.dimensions !== undefined) dbProduct.dimensions = product.dimensions;\n        if (product.tags !== undefined) dbProduct.tags = product.tags;\n        if (product.featured !== undefined) dbProduct.featured = product.featured;\n        const { data, error } = await supabase.from(\"products\").update(dbProduct).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateProduct error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return convertDbProductToProduct(data);\n    } catch (error) {\n        console.error(\"Supabase updateProduct error:\", error);\n        return null;\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return false;\n        }\n        const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteProduct error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted product:\", id);\n        // Invalidate cache\n        productsCache = null;\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteProduct error:\", error);\n        return false;\n    }\n}\n// Helper function to convert database order to Order interface\nfunction convertDbOrderToOrder(dbOrder) {\n    // Handle both old and new schema\n    const isOldSchema = dbOrder.items && Array.isArray(dbOrder.items);\n    if (isOldSchema) {\n        // Old schema with items array\n        const firstItem = dbOrder.items && dbOrder.items.length > 0 ? dbOrder.items[0] : {};\n        return {\n            id: dbOrder.id,\n            productId: firstItem.productId || \"\",\n            productName: firstItem.productName || \"\",\n            productImage: firstItem.productImage || \"\",\n            customerName: firstItem.customerName || \"\",\n            customerPhone: firstItem.customerPhone || \"\",\n            customerEmail: firstItem.customerEmail || \"\",\n            customerAddress: firstItem.customerAddress || \"\",\n            wilayaId: firstItem.wilayaId || 0,\n            wilayaName: firstItem.wilayaName || \"\",\n            shippingType: dbOrder.shipping_type || \"homeDelivery\",\n            shippingCost: Number(dbOrder.shipping_cost) || 0,\n            quantity: firstItem.quantity || 1,\n            selectedSize: firstItem.selectedSize || \"\",\n            selectedColor: firstItem.selectedColor || \"\",\n            subtotal: Number(dbOrder.total) - Number(dbOrder.shipping_cost) || 0,\n            total: Number(dbOrder.total) || 0,\n            orderDate: new Date(dbOrder.order_date),\n            status: dbOrder.status || \"pending\",\n            trackingNumber: dbOrder.tracking_number || \"\",\n            notes: firstItem.notes || \"\",\n            paymentMethod: dbOrder.payment_method || \"cod\",\n            paymentStatus: dbOrder.payment_status || \"pending\",\n            estimatedDelivery: firstItem.estimatedDelivery || \"\",\n            createdAt: new Date(dbOrder.created_at),\n            updatedAt: new Date(dbOrder.updated_at)\n        };\n    } else {\n        // New schema with direct fields\n        return {\n            id: dbOrder.id,\n            productId: dbOrder.product_id || \"\",\n            productName: dbOrder.product_name || \"\",\n            productImage: dbOrder.product_image || \"\",\n            customerName: dbOrder.customer_name || \"\",\n            customerPhone: dbOrder.customer_phone || \"\",\n            customerEmail: dbOrder.customer_email || \"\",\n            customerAddress: dbOrder.customer_address || \"\",\n            wilayaId: dbOrder.wilaya_id || 0,\n            wilayaName: dbOrder.wilaya_name || \"\",\n            shippingType: dbOrder.shipping_type || \"homeDelivery\",\n            shippingCost: Number(dbOrder.shipping_cost) || 0,\n            quantity: dbOrder.quantity || 1,\n            selectedSize: dbOrder.selected_size || \"\",\n            selectedColor: dbOrder.selected_color || \"\",\n            subtotal: Number(dbOrder.subtotal) || 0,\n            total: Number(dbOrder.total) || 0,\n            orderDate: new Date(dbOrder.order_date),\n            status: dbOrder.status || \"pending\",\n            trackingNumber: dbOrder.tracking_number || \"\",\n            notes: dbOrder.notes || \"\",\n            paymentMethod: dbOrder.payment_method || \"cod\",\n            paymentStatus: dbOrder.payment_status || \"pending\",\n            estimatedDelivery: dbOrder.estimated_delivery || \"\",\n            createdAt: new Date(dbOrder.created_at),\n            updatedAt: new Date(dbOrder.updated_at)\n        };\n    }\n}\n// Cache for orders to reduce database calls\nlet ordersCache = null;\nlet ordersCacheTime = 0;\n// Orders operations\nasync function getOrders() {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return ordersCache || [];\n        }\n        // Return cached data if still fresh\n        if (ordersCache && Date.now() - ordersCacheTime < CACHE_DURATION) {\n            console.log(\"Supabase: Returning cached orders\");\n            return ordersCache;\n        }\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").order(\"order_date\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getOrders error:\", error);\n            return ordersCache || [];\n        }\n        const orders = (data || []).map(convertDbOrderToOrder);\n        // Update cache\n        ordersCache = orders;\n        ordersCacheTime = Date.now();\n        return orders;\n    } catch (error) {\n        console.error(\"Supabase getOrders error:\", error);\n        return ordersCache || [];\n    }\n}\nasync function getOrder(id) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return null;\n        }\n        const { data, error } = await supabase.from(\"orders\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(\"Supabase getOrder error:\", error);\n            return null;\n        }\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase getOrder error:\", error);\n        return null;\n    }\n}\nasync function addOrder(order) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            throw new Error(\"Database not available\");\n        }\n        // Convert Order interface to database format (matching the orders table schema)\n        const dbOrder = {\n            id: order.id,\n            customer_name: order.customerName,\n            customer_email: order.customerEmail,\n            customer_phone: order.customerPhone,\n            customer_address: order.customerAddress,\n            wilaya_id: order.wilayaId,\n            wilaya_name: order.wilayaName,\n            product_id: order.productId,\n            product_name: order.productName,\n            product_image: order.productImage,\n            selected_size: order.selectedSize,\n            selected_color: order.selectedColor,\n            quantity: order.quantity,\n            subtotal: order.subtotal,\n            shipping_cost: order.shippingCost,\n            total: order.total,\n            shipping_type: order.shippingType,\n            payment_method: order.paymentMethod,\n            payment_status: order.paymentStatus,\n            status: order.status,\n            order_date: order.orderDate.toISOString(),\n            notes: order.notes,\n            tracking_number: order.trackingNumber,\n            estimated_delivery: order.estimatedDelivery,\n            created_at: order.createdAt.toISOString(),\n            updated_at: order.updatedAt.toISOString()\n        };\n        const { data, error } = await supabase.from(\"orders\").insert([\n            dbOrder\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addOrder error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Added order:\", order.id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase addOrder error:\", error);\n        throw error;\n    }\n}\nasync function updateOrder(id, order) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return null;\n        }\n        // Convert partial Order to database format\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (order.status !== undefined) updateData.status = order.status;\n        if (order.paymentStatus !== undefined) updateData.payment_status = order.paymentStatus;\n        if (order.trackingNumber !== undefined) updateData.tracking_number = order.trackingNumber;\n        if (order.shippingType !== undefined) updateData.shipping_type = order.shippingType;\n        if (order.shippingCost !== undefined) updateData.shipping_cost = order.shippingCost;\n        if (order.total !== undefined) updateData.total = order.total;\n        if (order.paymentMethod !== undefined) updateData.payment_method = order.paymentMethod;\n        const { data, error } = await supabase.from(\"orders\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase updateOrder error:\", error);\n            return null;\n        }\n        console.log(\"Supabase: Updated order:\", id);\n        return convertDbOrderToOrder(data);\n    } catch (error) {\n        console.error(\"Supabase updateOrder error:\", error);\n        return null;\n    }\n}\nasync function deleteOrder(id) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return false;\n        }\n        const { error } = await supabase.from(\"orders\").delete().eq(\"id\", id);\n        if (error) {\n            console.error(\"Supabase deleteOrder error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Deleted order:\", id);\n        return true;\n    } catch (error) {\n        console.error(\"Supabase deleteOrder error:\", error);\n        return false;\n    }\n}\n// Customers operations\nasync function getCustomers() {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return [];\n        }\n        const { data, error } = await supabase.from(\"customers\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Supabase getCustomers error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Supabase getCustomers error:\", error);\n        return [];\n    }\n}\nasync function addCustomer(customer) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            throw new Error(\"Database not available\");\n        }\n        const { data, error } = await supabase.from(\"customers\").insert([\n            customer\n        ]).select().single();\n        if (error) {\n            console.error(\"Supabase addCustomer error:\", error);\n            throw error;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Supabase addCustomer error:\", error);\n        throw error;\n    }\n}\n// Maintenance operations\nasync function getMaintenanceStatus() {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return {\n                is_maintenance: false,\n                drop_date: null\n            };\n        }\n        const { data, error } = await supabase.from(\"maintenance_status\").select(\"*\").eq(\"id\", \"maintenance\").single();\n        if (error) {\n            console.error(\"Supabase getMaintenanceStatus error:\", error);\n            return {\n                is_maintenance: false,\n                drop_date: null\n            };\n        }\n        return data || {\n            is_maintenance: false,\n            drop_date: null\n        };\n    } catch (error) {\n        console.error(\"Supabase getMaintenanceStatus error:\", error);\n        return {\n            is_maintenance: false,\n            drop_date: null\n        };\n    }\n}\nasync function updateMaintenanceStatus(isMaintenance, dropDate) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return false;\n        }\n        const updateData = {\n            is_maintenance: isMaintenance,\n            updated_at: new Date().toISOString()\n        };\n        if (dropDate) {\n            updateData.drop_date = dropDate;\n        }\n        const { error } = await supabase.from(\"maintenance_status\").update(updateData).eq(\"id\", \"maintenance\");\n        if (error) {\n            console.error(\"Supabase updateMaintenanceStatus error:\", error);\n            return false;\n        }\n        console.log(\"Supabase: Updated maintenance status\");\n        return true;\n    } catch (error) {\n        console.error(\"Supabase updateMaintenanceStatus error:\", error);\n        return false;\n    }\n}\n// Wilaya operations\nasync function getWilayaTariffs() {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return [];\n        }\n        const { data, error } = await supabase.from(\"wilaya_tariffs\").select(\"*\").order(\"wilaya_code\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Supabase getWilayaTariffs error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Supabase getWilayaTariffs error:\", error);\n        return [];\n    }\n}\nasync function updateWilayaTariffs(tariffs) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            throw new Error(\"Database not available\");\n        }\n        // Delete all existing tariffs\n        await supabase.from(\"wilaya_tariffs\").delete().neq(\"id\", 0); // Delete all records\n        // Insert new tariffs\n        if (tariffs.length > 0) {\n            const { error } = await supabase.from(\"wilaya_tariffs\").insert(tariffs);\n            if (error) {\n                console.error(\"Supabase updateWilayaTariffs error:\", error);\n                throw error;\n            }\n        }\n        console.log(\"Supabase: Updated wilaya tariffs\");\n    } catch (error) {\n        console.error(\"Supabase updateWilayaTariffs error:\", error);\n        throw error;\n    }\n}\n// Inventory operations\nasync function getInventory() {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            return [];\n        }\n        const { data, error } = await supabase.from(\"products\").select(\"id, name, sku, stock, sizes, colors, in_stock, category\").order(\"name\");\n        if (error) {\n            console.error(\"Supabase getInventory error:\", error);\n            return [];\n        }\n        // Transform data for inventory management\n        return (data || []).map((product)=>({\n                id: product.id,\n                name: product.name,\n                sku: product.sku,\n                category: product.category,\n                inStock: product.in_stock,\n                stock: product.stock || {},\n                sizes: product.sizes || [],\n                colors: product.colors || [],\n                totalStock: calculateTotalStock(product.stock || {}),\n                stockBySize: calculateStockBySize(product.stock || {}, product.sizes || [], product.colors || [])\n            }));\n    } catch (error) {\n        console.error(\"Supabase getInventory error:\", error);\n        return [];\n    }\n}\nasync function updateInventory(productId, stockData) {\n    try {\n        if (!supabase) {\n            console.error(\"Supabase client not initialized\");\n            throw new Error(\"Database not available\");\n        }\n        const updateObj = {\n            updated_at: new Date().toISOString()\n        };\n        if (stockData.stock) {\n            updateObj.stock = stockData.stock;\n        }\n        if (stockData.inStock !== undefined) {\n            updateObj.in_stock = stockData.inStock;\n        }\n        const { data, error } = await supabase.from(\"products\").update(updateObj).eq(\"id\", productId).select().single();\n        if (error) {\n            console.error(\"Supabase updateInventory error:\", error);\n            throw error;\n        }\n        console.log(\"Supabase: Updated inventory for product:\", productId);\n        return {\n            id: data.id,\n            name: data.name,\n            stock: data.stock,\n            inStock: data.in_stock,\n            totalStock: calculateTotalStock(data.stock)\n        };\n    } catch (error) {\n        console.error(\"Supabase updateInventory error:\", error);\n        throw error;\n    }\n}\n// Helper functions for inventory calculations\nfunction calculateTotalStock(stock) {\n    if (!stock || typeof stock !== \"object\") return 0;\n    let total = 0;\n    for(const size in stock){\n        if (typeof stock[size] === \"object\") {\n            for(const color in stock[size]){\n                total += Number(stock[size][color]) || 0;\n            }\n        }\n    }\n    return total;\n}\nfunction calculateStockBySize(stock, sizes, colors) {\n    const result = {};\n    sizes.forEach((size)=>{\n        result[size] = {};\n        colors.forEach((color)=>{\n            result[size][color] = Number(stock[size]?.[color]) || 0;\n        });\n    });\n    return result;\n}\n// Stock deduction function for orders\nasync function deductStockFromOrder(order) {\n    try {\n        console.log(\"Supabase: Deducting stock for order:\", order.id);\n        // Get the product\n        const product = await getProduct(order.productId);\n        if (!product) {\n            console.error(\"Supabase: Product not found for order:\", order.productId);\n            return false;\n        }\n        // Check if we have enough stock\n        const currentStock = product.stock?.[order.selectedSize]?.[order.selectedColor] || 0;\n        if (currentStock < order.quantity) {\n            console.error(\"Supabase: Insufficient stock for order:\", {\n                productId: order.productId,\n                size: order.selectedSize,\n                color: order.selectedColor,\n                requested: order.quantity,\n                available: currentStock\n            });\n            return false;\n        }\n        // Deduct the stock\n        const newStock = {\n            ...product.stock,\n            [order.selectedSize]: {\n                ...product.stock?.[order.selectedSize],\n                [order.selectedColor]: currentStock - order.quantity\n            }\n        };\n        // Update the product stock\n        const updatedProduct = await updateProduct(order.productId, {\n            stock: newStock,\n            inStock: calculateTotalStock(newStock) > 0\n        });\n        if (updatedProduct) {\n            console.log(\"Supabase: Successfully deducted stock for order:\", order.id);\n            return true;\n        } else {\n            console.error(\"Supabase: Failed to update product stock for order:\", order.id);\n            return false;\n        }\n    } catch (error) {\n        console.error(\"Supabase: Error deducting stock for order:\", error);\n        return false;\n    }\n}\n// Stock return function for cancelled/deleted orders\nasync function returnStockFromOrder(order) {\n    try {\n        console.log(\"Supabase: Returning stock for order:\", order.id);\n        // Get the product\n        const product = await getProduct(order.productId);\n        if (!product) {\n            console.error(\"Supabase: Product not found for order:\", order.productId);\n            return false;\n        }\n        // Get current stock\n        const currentStock = product.stock?.[order.selectedSize]?.[order.selectedColor] || 0;\n        // Return the stock\n        const newStock = {\n            ...product.stock,\n            [order.selectedSize]: {\n                ...product.stock?.[order.selectedSize],\n                [order.selectedColor]: currentStock + order.quantity\n            }\n        };\n        // Update the product stock\n        const updatedProduct = await updateProduct(order.productId, {\n            stock: newStock,\n            inStock: calculateTotalStock(newStock) > 0\n        });\n        if (updatedProduct) {\n            console.log(\"Supabase: Successfully returned stock for order:\", order.id, {\n                productId: order.productId,\n                size: order.selectedSize,\n                color: order.selectedColor,\n                quantity: order.quantity,\n                newTotalStock: calculateTotalStock(newStock)\n            });\n            return true;\n        } else {\n            console.error(\"Supabase: Failed to return product stock for order:\", order.id);\n            return false;\n        }\n    } catch (error) {\n        console.error(\"Supabase: Error returning stock for order:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDLHVEQUF1REksTUFBTXZDLEVBQUU7WUFDN0UsT0FBTztRQUNUO0lBQ0YsRUFBRSxPQUFPbUMsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsOENBQThDQTtRQUM1RCxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29ic2lkaWFuLXdlYXIvLi9zcmMvbGliL3N1cGFiYXNlRGF0YWJhc2UudHM/ZjQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEYXRhYmFzZSBzZXJ2aWNlIHVzaW5nIFN1cGFiYXNlIChmcmVlIHRpZXIpXHJcbi8vIFRoaXMgcHJvdmlkZXMgcGVyc2lzdGVudCBzdG9yYWdlIHdpdGggYSByZWFsIGRhdGFiYXNlXHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgeyBQcm9kdWN0LCBPcmRlciB9IGZyb20gJ0AvdHlwZXMnO1xyXG5cclxuLy8gU3VwYWJhc2UgY29uZmlndXJhdGlvbiAtIE1VU1QgdXNlIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbi8vIE9ubHkgdGhyb3cgZXJyb3IgZHVyaW5nIHNlcnZlci1zaWRlIHJlbmRlcmluZywgbm90IGR1cmluZyBidWlsZCBvciBjbGllbnQtc2lkZVxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xyXG4gIC8vIE9ubHkgdGhyb3cgZXJyb3IgZHVyaW5nIHNlcnZlci1zaWRlIHJlbmRlcmluZywgbm90IGR1cmluZyBidWlsZCBvciBjbGllbnQtc2lkZVxyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICBjb25zdCBtaXNzaW5nVmFycyA9IFtdO1xyXG4gICAgaWYgKCFzdXBhYmFzZVVybCkgbWlzc2luZ1ZhcnMucHVzaCgnTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJyk7XHJcbiAgICBpZiAoIXN1cGFiYXNlS2V5KSBtaXNzaW5nVmFycy5wdXNoKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWScpO1xyXG4gICAgXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzOiAke21pc3NpbmdWYXJzLmpvaW4oJywgJyl9LiBQbGVhc2Ugc2V0IHRoZXNlIGluIHlvdXIgVmVyY2VsIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciAuZW52LmxvY2FsIGZpbGUuYCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgc3VwYWJhc2UgY2xpZW50IHdpdGggZmFsbGJhY2sgZm9yIGJ1aWxkIHRpbWVcclxuY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZVVybCAmJiBzdXBhYmFzZUtleSA/IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpIDogbnVsbDtcclxuXHJcbi8vIEV4cG9ydCB0aGUgc3VwYWJhc2UgY2xpZW50IGZvciBkaXJlY3QgdXNlXHJcbmV4cG9ydCB7IHN1cGFiYXNlIH07XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBkYXRhYmFzZSBwcm9kdWN0IHRvIFByb2R1Y3QgaW50ZXJmYWNlXHJcbmZ1bmN0aW9uIGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QoZGJQcm9kdWN0OiBhbnkpOiBQcm9kdWN0IHtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGRiUHJvZHVjdC5pZCxcclxuICAgIG5hbWU6IGRiUHJvZHVjdC5uYW1lIHx8ICcnLFxyXG4gICAgZGVzY3JpcHRpb246IGRiUHJvZHVjdC5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgIHByaWNlOiBOdW1iZXIoZGJQcm9kdWN0LnByaWNlKSB8fCAwLFxyXG4gICAgb3JpZ2luYWxQcmljZTogTnVtYmVyKGRiUHJvZHVjdC5vcmlnaW5hbF9wcmljZSkgfHwgMCxcclxuICAgIGltYWdlOiBkYlByb2R1Y3QuaW1hZ2UgfHwgJycsXHJcbiAgICBpbWFnZXM6IGRiUHJvZHVjdC5pbWFnZXMgfHwgW10sXHJcbiAgICBzdG9jazogZGJQcm9kdWN0LnN0b2NrIHx8IHt9LFxyXG4gICAgY2F0ZWdvcnk6IGRiUHJvZHVjdC5jYXRlZ29yeSB8fCAnJyxcclxuICAgIHNpemVzOiBkYlByb2R1Y3Quc2l6ZXMgfHwgW10sXHJcbiAgICBjb2xvcnM6IGRiUHJvZHVjdC5jb2xvcnMgfHwgW10sXHJcbiAgICBpblN0b2NrOiBkYlByb2R1Y3QuaW5fc3RvY2sgfHwgZmFsc2UsXHJcbiAgICBzdGF0dXM6IGRiUHJvZHVjdC5zdGF0dXMgfHwgJ2F2YWlsYWJsZScsXHJcbiAgICByYXRpbmc6IE51bWJlcihkYlByb2R1Y3QucmF0aW5nKSB8fCAwLFxyXG4gICAgcmV2aWV3czogTnVtYmVyKGRiUHJvZHVjdC5yZXZpZXdzKSB8fCAwLFxyXG4gICAgc2t1OiBkYlByb2R1Y3Quc2t1IHx8ICcnLFxyXG4gICAgd2VpZ2h0OiBOdW1iZXIoZGJQcm9kdWN0LndlaWdodCkgfHwgMCxcclxuICAgIGRpbWVuc2lvbnM6IGRiUHJvZHVjdC5kaW1lbnNpb25zIHx8IG51bGwsXHJcbiAgICB0YWdzOiBkYlByb2R1Y3QudGFncyB8fCBbXSxcclxuICAgIGZlYXR1cmVkOiBkYlByb2R1Y3QuZmVhdHVyZWQgfHwgZmFsc2UsXHJcbiAgICBjcmVhdGVkQXQ6IGRiUHJvZHVjdC5jcmVhdGVkX2F0ID8gbmV3IERhdGUoZGJQcm9kdWN0LmNyZWF0ZWRfYXQpIDogbmV3IERhdGUoKSxcclxuICAgIHVwZGF0ZWRBdDogZGJQcm9kdWN0LnVwZGF0ZWRfYXQgPyBuZXcgRGF0ZShkYlByb2R1Y3QudXBkYXRlZF9hdCkgOiBuZXcgRGF0ZSgpXHJcbiAgfTtcclxufVxyXG5cclxuLy8gQ2FjaGUgZm9yIHByb2R1Y3RzIHRvIHJlZHVjZSBkYXRhYmFzZSBjYWxsc1xyXG5sZXQgcHJvZHVjdHNDYWNoZTogUHJvZHVjdFtdIHwgbnVsbCA9IG51bGw7XHJcbmxldCBwcm9kdWN0c0NhY2hlVGltZSA9IDA7XHJcbmNvbnN0IENBQ0hFX0RVUkFUSU9OID0gMzAwMDA7IC8vIDMwIHNlY29uZHNcclxuXHJcbi8vIFByb2R1Y3RzIG9wZXJhdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCk6IFByb21pc2U8UHJvZHVjdFtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFJldHVybiBjYWNoZWQgZGF0YSBpZiBzdGlsbCBmcmVzaFxyXG4gICAgaWYgKHByb2R1Y3RzQ2FjaGUgJiYgRGF0ZS5ub3coKSAtIHByb2R1Y3RzQ2FjaGVUaW1lIDwgQ0FDSEVfRFVSQVRJT04pIHtcclxuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBSZXR1cm5pbmcgY2FjaGVkIHByb2R1Y3RzJyk7XHJcbiAgICAgIHJldHVybiBwcm9kdWN0c0NhY2hlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0UHJvZHVjdHMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgcHJvZHVjdHMgPSAoZGF0YSB8fCBbXSkubWFwKGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QpO1xyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgY2FjaGVcclxuICAgIHByb2R1Y3RzQ2FjaGUgPSBwcm9kdWN0cztcclxuICAgIHByb2R1Y3RzQ2FjaGVUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0cyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcHJvZHVjdHNDYWNoZSB8fCBbXTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPFByb2R1Y3QgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByb2R1Y3QocHJvZHVjdDogUHJvZHVjdCk6IFByb21pc2U8UHJvZHVjdD4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBub3QgYXZhaWxhYmxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udmVydCBjYW1lbENhc2UgdG8gc25ha2VfY2FzZSBmb3IgZGF0YWJhc2VcclxuICAgIGNvbnN0IGRiUHJvZHVjdCA9IHtcclxuICAgICAgaWQ6IHByb2R1Y3QuaWQsXHJcbiAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QuZGVzY3JpcHRpb24sXHJcbiAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4gICAgICBvcmlnaW5hbF9wcmljZTogcHJvZHVjdC5vcmlnaW5hbFByaWNlLFxyXG4gICAgICBpbWFnZTogcHJvZHVjdC5pbWFnZSxcclxuICAgICAgaW1hZ2VzOiBwcm9kdWN0LmltYWdlcyB8fCBbXSxcclxuICAgICAgc3RvY2s6IHByb2R1Y3Quc3RvY2ssXHJcbiAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LmNhdGVnb3J5LFxyXG4gICAgICBzaXplczogcHJvZHVjdC5zaXplcyB8fCBbXSxcclxuICAgICAgY29sb3JzOiBwcm9kdWN0LmNvbG9ycyB8fCBbXSxcclxuICAgICAgaW5fc3RvY2s6IHByb2R1Y3QuaW5TdG9jayxcclxuICAgICAgcmF0aW5nOiBwcm9kdWN0LnJhdGluZyxcclxuICAgICAgcmV2aWV3czogcHJvZHVjdC5yZXZpZXdzLFxyXG4gICAgICBza3U6IHByb2R1Y3Quc2t1LFxyXG4gICAgICB3ZWlnaHQ6IHByb2R1Y3Qud2VpZ2h0LFxyXG4gICAgICBkaW1lbnNpb25zOiBwcm9kdWN0LmRpbWVuc2lvbnMsXHJcbiAgICAgIHRhZ3M6IHByb2R1Y3QudGFncyB8fCBbXSxcclxuICAgICAgZmVhdHVyZWQ6IHByb2R1Y3QuZmVhdHVyZWQgfHwgZmFsc2VcclxuICAgICAgLy8gY3JlYXRlZF9hdCBhbmQgdXBkYXRlZF9hdCBhcmUgYXV0b21hdGljYWxseSBzZXQgYnkgdGhlIGRhdGFiYXNlXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgIC5pbnNlcnQoW2RiUHJvZHVjdF0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogQWRkZWQgcHJvZHVjdDonLCBwcm9kdWN0LmlkKTtcclxuICAgIFxyXG4gICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxyXG4gICAgcHJvZHVjdHNDYWNoZSA9IG51bGw7XHJcbiAgICBcclxuICAgIC8vIENvbnZlcnQgYmFjayB0byBjYW1lbENhc2VcclxuICAgIHJldHVybiBjb252ZXJ0RGJQcm9kdWN0VG9Qcm9kdWN0KGRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QoaWQ6IHN0cmluZywgcHJvZHVjdDogUGFydGlhbDxQcm9kdWN0Pik6IFByb21pc2U8UHJvZHVjdCB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnZlcnQgY2FtZWxDYXNlIHRvIHNuYWtlX2Nhc2UgZm9yIGRhdGFiYXNlXHJcbiAgICBjb25zdCBkYlByb2R1Y3Q6IGFueSA9IHt9O1xyXG4gICAgXHJcbiAgICBpZiAocHJvZHVjdC5uYW1lICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5uYW1lID0gcHJvZHVjdC5uYW1lO1xyXG4gICAgaWYgKHByb2R1Y3QuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmRlc2NyaXB0aW9uID0gcHJvZHVjdC5kZXNjcmlwdGlvbjtcclxuICAgIGlmIChwcm9kdWN0LnByaWNlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5wcmljZSA9IHByb2R1Y3QucHJpY2U7XHJcbiAgICBpZiAocHJvZHVjdC5vcmlnaW5hbFByaWNlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5vcmlnaW5hbF9wcmljZSA9IHByb2R1Y3Qub3JpZ2luYWxQcmljZTtcclxuICAgIGlmIChwcm9kdWN0LmltYWdlICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5pbWFnZSA9IHByb2R1Y3QuaW1hZ2U7XHJcbiAgICBpZiAocHJvZHVjdC5pbWFnZXMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmltYWdlcyA9IHByb2R1Y3QuaW1hZ2VzO1xyXG4gICAgaWYgKHByb2R1Y3Quc3RvY2sgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnN0b2NrID0gcHJvZHVjdC5zdG9jaztcclxuICAgIGlmIChwcm9kdWN0LmNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5jYXRlZ29yeSA9IHByb2R1Y3QuY2F0ZWdvcnk7XHJcbiAgICBpZiAocHJvZHVjdC5zaXplcyAhPT0gdW5kZWZpbmVkKSBkYlByb2R1Y3Quc2l6ZXMgPSBwcm9kdWN0LnNpemVzO1xyXG4gICAgaWYgKHByb2R1Y3QuY29sb3JzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5jb2xvcnMgPSBwcm9kdWN0LmNvbG9ycztcclxuICAgIGlmIChwcm9kdWN0LmluU3RvY2sgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmluX3N0b2NrID0gcHJvZHVjdC5pblN0b2NrO1xyXG4gICAgaWYgKHByb2R1Y3QucmF0aW5nICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC5yYXRpbmcgPSBwcm9kdWN0LnJhdGluZztcclxuICAgIGlmIChwcm9kdWN0LnJldmlld3MgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnJldmlld3MgPSBwcm9kdWN0LnJldmlld3M7XHJcbiAgICBpZiAocHJvZHVjdC5za3UgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LnNrdSA9IHByb2R1Y3Quc2t1O1xyXG4gICAgaWYgKHByb2R1Y3Qud2VpZ2h0ICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC53ZWlnaHQgPSBwcm9kdWN0LndlaWdodDtcclxuICAgIGlmIChwcm9kdWN0LmRpbWVuc2lvbnMgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmRpbWVuc2lvbnMgPSBwcm9kdWN0LmRpbWVuc2lvbnM7XHJcbiAgICBpZiAocHJvZHVjdC50YWdzICE9PSB1bmRlZmluZWQpIGRiUHJvZHVjdC50YWdzID0gcHJvZHVjdC50YWdzO1xyXG4gICAgaWYgKHByb2R1Y3QuZmVhdHVyZWQgIT09IHVuZGVmaW5lZCkgZGJQcm9kdWN0LmZlYXR1cmVkID0gcHJvZHVjdC5mZWF0dXJlZDtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLnVwZGF0ZShkYlByb2R1Y3QpXHJcbiAgICAgIC5lcSgnaWQnLCBpZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIHByb2R1Y3Q6JywgaWQpO1xyXG4gICAgXHJcbiAgICAvLyBJbnZhbGlkYXRlIGNhY2hlXHJcbiAgICBwcm9kdWN0c0NhY2hlID0gbnVsbDtcclxuICAgIFxyXG4gICAgcmV0dXJuIGNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QoZGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZVByb2R1Y3QgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnaWQnLCBpZCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVQcm9kdWN0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IERlbGV0ZWQgcHJvZHVjdDonLCBpZCk7XHJcbiAgICBcclxuICAgIC8vIEludmFsaWRhdGUgY2FjaGVcclxuICAgIHByb2R1Y3RzQ2FjaGUgPSBudWxsO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZGVsZXRlUHJvZHVjdCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBkYXRhYmFzZSBvcmRlciB0byBPcmRlciBpbnRlcmZhY2VcclxuZnVuY3Rpb24gY29udmVydERiT3JkZXJUb09yZGVyKGRiT3JkZXI6IGFueSk6IE9yZGVyIHtcclxuICAvLyBIYW5kbGUgYm90aCBvbGQgYW5kIG5ldyBzY2hlbWFcclxuICBjb25zdCBpc09sZFNjaGVtYSA9IGRiT3JkZXIuaXRlbXMgJiYgQXJyYXkuaXNBcnJheShkYk9yZGVyLml0ZW1zKTtcclxuICBcclxuICBpZiAoaXNPbGRTY2hlbWEpIHtcclxuICAgIC8vIE9sZCBzY2hlbWEgd2l0aCBpdGVtcyBhcnJheVxyXG4gICAgY29uc3QgZmlyc3RJdGVtID0gZGJPcmRlci5pdGVtcyAmJiBkYk9yZGVyLml0ZW1zLmxlbmd0aCA+IDAgPyBkYk9yZGVyLml0ZW1zWzBdIDoge307XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBkYk9yZGVyLmlkLFxyXG4gICAgICBwcm9kdWN0SWQ6IGZpcnN0SXRlbS5wcm9kdWN0SWQgfHwgJycsXHJcbiAgICAgIHByb2R1Y3ROYW1lOiBmaXJzdEl0ZW0ucHJvZHVjdE5hbWUgfHwgJycsXHJcbiAgICAgIHByb2R1Y3RJbWFnZTogZmlyc3RJdGVtLnByb2R1Y3RJbWFnZSB8fCAnJyxcclxuICAgICAgY3VzdG9tZXJOYW1lOiBmaXJzdEl0ZW0uY3VzdG9tZXJOYW1lIHx8ICcnLFxyXG4gICAgICBjdXN0b21lclBob25lOiBmaXJzdEl0ZW0uY3VzdG9tZXJQaG9uZSB8fCAnJyxcclxuICAgICAgY3VzdG9tZXJFbWFpbDogZmlyc3RJdGVtLmN1c3RvbWVyRW1haWwgfHwgJycsXHJcbiAgICAgIGN1c3RvbWVyQWRkcmVzczogZmlyc3RJdGVtLmN1c3RvbWVyQWRkcmVzcyB8fCAnJyxcclxuICAgICAgd2lsYXlhSWQ6IGZpcnN0SXRlbS53aWxheWFJZCB8fCAwLFxyXG4gICAgICB3aWxheWFOYW1lOiBmaXJzdEl0ZW0ud2lsYXlhTmFtZSB8fCAnJyxcclxuICAgICAgc2hpcHBpbmdUeXBlOiBkYk9yZGVyLnNoaXBwaW5nX3R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXHJcbiAgICAgIHNoaXBwaW5nQ29zdDogTnVtYmVyKGRiT3JkZXIuc2hpcHBpbmdfY29zdCkgfHwgMCxcclxuICAgICAgcXVhbnRpdHk6IGZpcnN0SXRlbS5xdWFudGl0eSB8fCAxLFxyXG4gICAgICBzZWxlY3RlZFNpemU6IGZpcnN0SXRlbS5zZWxlY3RlZFNpemUgfHwgJycsXHJcbiAgICAgIHNlbGVjdGVkQ29sb3I6IGZpcnN0SXRlbS5zZWxlY3RlZENvbG9yIHx8ICcnLFxyXG4gICAgICBzdWJ0b3RhbDogTnVtYmVyKGRiT3JkZXIudG90YWwpIC0gTnVtYmVyKGRiT3JkZXIuc2hpcHBpbmdfY29zdCkgfHwgMCxcclxuICAgICAgdG90YWw6IE51bWJlcihkYk9yZGVyLnRvdGFsKSB8fCAwLFxyXG4gICAgICBvcmRlckRhdGU6IG5ldyBEYXRlKGRiT3JkZXIub3JkZXJfZGF0ZSksXHJcbiAgICAgIHN0YXR1czogZGJPcmRlci5zdGF0dXMgfHwgJ3BlbmRpbmcnLFxyXG4gICAgICB0cmFja2luZ051bWJlcjogZGJPcmRlci50cmFja2luZ19udW1iZXIgfHwgJycsXHJcbiAgICAgIG5vdGVzOiBmaXJzdEl0ZW0ubm90ZXMgfHwgJycsXHJcbiAgICAgIHBheW1lbnRNZXRob2Q6IGRiT3JkZXIucGF5bWVudF9tZXRob2QgfHwgJ2NvZCcsXHJcbiAgICAgIHBheW1lbnRTdGF0dXM6IGRiT3JkZXIucGF5bWVudF9zdGF0dXMgfHwgJ3BlbmRpbmcnLFxyXG4gICAgICBlc3RpbWF0ZWREZWxpdmVyeTogZmlyc3RJdGVtLmVzdGltYXRlZERlbGl2ZXJ5IHx8ICcnLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRiT3JkZXIuY3JlYXRlZF9hdCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoZGJPcmRlci51cGRhdGVkX2F0KVxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gTmV3IHNjaGVtYSB3aXRoIGRpcmVjdCBmaWVsZHNcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBkYk9yZGVyLmlkLFxyXG4gICAgICBwcm9kdWN0SWQ6IGRiT3JkZXIucHJvZHVjdF9pZCB8fCAnJyxcclxuICAgICAgcHJvZHVjdE5hbWU6IGRiT3JkZXIucHJvZHVjdF9uYW1lIHx8ICcnLFxyXG4gICAgICBwcm9kdWN0SW1hZ2U6IGRiT3JkZXIucHJvZHVjdF9pbWFnZSB8fCAnJyxcclxuICAgICAgY3VzdG9tZXJOYW1lOiBkYk9yZGVyLmN1c3RvbWVyX25hbWUgfHwgJycsXHJcbiAgICAgIGN1c3RvbWVyUGhvbmU6IGRiT3JkZXIuY3VzdG9tZXJfcGhvbmUgfHwgJycsXHJcbiAgICAgIGN1c3RvbWVyRW1haWw6IGRiT3JkZXIuY3VzdG9tZXJfZW1haWwgfHwgJycsXHJcbiAgICAgIGN1c3RvbWVyQWRkcmVzczogZGJPcmRlci5jdXN0b21lcl9hZGRyZXNzIHx8ICcnLFxyXG4gICAgICB3aWxheWFJZDogZGJPcmRlci53aWxheWFfaWQgfHwgMCxcclxuICAgICAgd2lsYXlhTmFtZTogZGJPcmRlci53aWxheWFfbmFtZSB8fCAnJyxcclxuICAgICAgc2hpcHBpbmdUeXBlOiBkYk9yZGVyLnNoaXBwaW5nX3R5cGUgfHwgJ2hvbWVEZWxpdmVyeScsXHJcbiAgICAgIHNoaXBwaW5nQ29zdDogTnVtYmVyKGRiT3JkZXIuc2hpcHBpbmdfY29zdCkgfHwgMCxcclxuICAgICAgcXVhbnRpdHk6IGRiT3JkZXIucXVhbnRpdHkgfHwgMSxcclxuICAgICAgc2VsZWN0ZWRTaXplOiBkYk9yZGVyLnNlbGVjdGVkX3NpemUgfHwgJycsXHJcbiAgICAgIHNlbGVjdGVkQ29sb3I6IGRiT3JkZXIuc2VsZWN0ZWRfY29sb3IgfHwgJycsXHJcbiAgICAgIHN1YnRvdGFsOiBOdW1iZXIoZGJPcmRlci5zdWJ0b3RhbCkgfHwgMCxcclxuICAgICAgdG90YWw6IE51bWJlcihkYk9yZGVyLnRvdGFsKSB8fCAwLFxyXG4gICAgICBvcmRlckRhdGU6IG5ldyBEYXRlKGRiT3JkZXIub3JkZXJfZGF0ZSksXHJcbiAgICAgIHN0YXR1czogZGJPcmRlci5zdGF0dXMgfHwgJ3BlbmRpbmcnLFxyXG4gICAgICB0cmFja2luZ051bWJlcjogZGJPcmRlci50cmFja2luZ19udW1iZXIgfHwgJycsXHJcbiAgICAgIG5vdGVzOiBkYk9yZGVyLm5vdGVzIHx8ICcnLFxyXG4gICAgICBwYXltZW50TWV0aG9kOiBkYk9yZGVyLnBheW1lbnRfbWV0aG9kIHx8ICdjb2QnLFxyXG4gICAgICBwYXltZW50U3RhdHVzOiBkYk9yZGVyLnBheW1lbnRfc3RhdHVzIHx8ICdwZW5kaW5nJyxcclxuICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IGRiT3JkZXIuZXN0aW1hdGVkX2RlbGl2ZXJ5IHx8ICcnLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRiT3JkZXIuY3JlYXRlZF9hdCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoZGJPcmRlci51cGRhdGVkX2F0KVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENhY2hlIGZvciBvcmRlcnMgdG8gcmVkdWNlIGRhdGFiYXNlIGNhbGxzXHJcbmxldCBvcmRlcnNDYWNoZTogT3JkZXJbXSB8IG51bGwgPSBudWxsO1xyXG5sZXQgb3JkZXJzQ2FjaGVUaW1lID0gMDtcclxuXHJcbi8vIE9yZGVycyBvcGVyYXRpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmRlcnMoKTogUHJvbWlzZTxPcmRlcltdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICByZXR1cm4gb3JkZXJzQ2FjaGUgfHwgW107XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIGNhY2hlZCBkYXRhIGlmIHN0aWxsIGZyZXNoXHJcbiAgICBpZiAob3JkZXJzQ2FjaGUgJiYgRGF0ZS5ub3coKSAtIG9yZGVyc0NhY2hlVGltZSA8IENBQ0hFX0RVUkFUSU9OKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogUmV0dXJuaW5nIGNhY2hlZCBvcmRlcnMnKTtcclxuICAgICAgcmV0dXJuIG9yZGVyc0NhY2hlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdvcmRlcl9kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0T3JkZXJzIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG9yZGVyc0NhY2hlIHx8IFtdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBvcmRlcnMgPSAoZGF0YSB8fCBbXSkubWFwKGNvbnZlcnREYk9yZGVyVG9PcmRlcik7XHJcbiAgICBcclxuICAgIC8vIFVwZGF0ZSBjYWNoZVxyXG4gICAgb3JkZXJzQ2FjaGUgPSBvcmRlcnM7XHJcbiAgICBvcmRlcnNDYWNoZVRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gb3JkZXJzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBnZXRPcmRlcnMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG9yZGVyc0NhY2hlIHx8IFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE9yZGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZE9yZGVyKG9yZGVyOiBPcmRlcik6IFByb21pc2U8T3JkZXI+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugbm90IGF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnZlcnQgT3JkZXIgaW50ZXJmYWNlIHRvIGRhdGFiYXNlIGZvcm1hdCAobWF0Y2hpbmcgdGhlIG9yZGVycyB0YWJsZSBzY2hlbWEpXHJcbiAgICBjb25zdCBkYk9yZGVyID0ge1xyXG4gICAgICBpZDogb3JkZXIuaWQsXHJcbiAgICAgIGN1c3RvbWVyX25hbWU6IG9yZGVyLmN1c3RvbWVyTmFtZSxcclxuICAgICAgY3VzdG9tZXJfZW1haWw6IG9yZGVyLmN1c3RvbWVyRW1haWwsXHJcbiAgICAgIGN1c3RvbWVyX3Bob25lOiBvcmRlci5jdXN0b21lclBob25lLFxyXG4gICAgICBjdXN0b21lcl9hZGRyZXNzOiBvcmRlci5jdXN0b21lckFkZHJlc3MsXHJcbiAgICAgIHdpbGF5YV9pZDogb3JkZXIud2lsYXlhSWQsXHJcbiAgICAgIHdpbGF5YV9uYW1lOiBvcmRlci53aWxheWFOYW1lLFxyXG4gICAgICBwcm9kdWN0X2lkOiBvcmRlci5wcm9kdWN0SWQsXHJcbiAgICAgIHByb2R1Y3RfbmFtZTogb3JkZXIucHJvZHVjdE5hbWUsXHJcbiAgICAgIHByb2R1Y3RfaW1hZ2U6IG9yZGVyLnByb2R1Y3RJbWFnZSxcclxuICAgICAgc2VsZWN0ZWRfc2l6ZTogb3JkZXIuc2VsZWN0ZWRTaXplLFxyXG4gICAgICBzZWxlY3RlZF9jb2xvcjogb3JkZXIuc2VsZWN0ZWRDb2xvcixcclxuICAgICAgcXVhbnRpdHk6IG9yZGVyLnF1YW50aXR5LFxyXG4gICAgICBzdWJ0b3RhbDogb3JkZXIuc3VidG90YWwsXHJcbiAgICAgIHNoaXBwaW5nX2Nvc3Q6IG9yZGVyLnNoaXBwaW5nQ29zdCxcclxuICAgICAgdG90YWw6IG9yZGVyLnRvdGFsLFxyXG4gICAgICBzaGlwcGluZ190eXBlOiBvcmRlci5zaGlwcGluZ1R5cGUsXHJcbiAgICAgIHBheW1lbnRfbWV0aG9kOiBvcmRlci5wYXltZW50TWV0aG9kLFxyXG4gICAgICBwYXltZW50X3N0YXR1czogb3JkZXIucGF5bWVudFN0YXR1cyxcclxuICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXHJcbiAgICAgIG9yZGVyX2RhdGU6IG9yZGVyLm9yZGVyRGF0ZS50b0lTT1N0cmluZygpLFxyXG4gICAgICBub3Rlczogb3JkZXIubm90ZXMsXHJcbiAgICAgIHRyYWNraW5nX251bWJlcjogb3JkZXIudHJhY2tpbmdOdW1iZXIsXHJcbiAgICAgIGVzdGltYXRlZF9kZWxpdmVyeTogb3JkZXIuZXN0aW1hdGVkRGVsaXZlcnksXHJcbiAgICAgIGNyZWF0ZWRfYXQ6IG9yZGVyLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBvcmRlci51cGRhdGVkQXQudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC5pbnNlcnQoW2RiT3JkZXJdKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBBZGRlZCBvcmRlcjonLCBvcmRlci5pZCk7XHJcbiAgICByZXR1cm4gY29udmVydERiT3JkZXJUb09yZGVyKGRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZGRPcmRlciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlcihpZDogc3RyaW5nLCBvcmRlcjogUGFydGlhbDxPcmRlcj4pOiBQcm9taXNlPE9yZGVyIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29udmVydCBwYXJ0aWFsIE9yZGVyIHRvIGRhdGFiYXNlIGZvcm1hdFxyXG4gICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0ge1xyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChvcmRlci5zdGF0dXMgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zdGF0dXMgPSBvcmRlci5zdGF0dXM7XHJcbiAgICBpZiAob3JkZXIucGF5bWVudFN0YXR1cyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnBheW1lbnRfc3RhdHVzID0gb3JkZXIucGF5bWVudFN0YXR1cztcclxuICAgIGlmIChvcmRlci50cmFja2luZ051bWJlciAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnRyYWNraW5nX251bWJlciA9IG9yZGVyLnRyYWNraW5nTnVtYmVyO1xyXG4gICAgaWYgKG9yZGVyLnNoaXBwaW5nVHlwZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnNoaXBwaW5nX3R5cGUgPSBvcmRlci5zaGlwcGluZ1R5cGU7XHJcbiAgICBpZiAob3JkZXIuc2hpcHBpbmdDb3N0ICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuc2hpcHBpbmdfY29zdCA9IG9yZGVyLnNoaXBwaW5nQ29zdDtcclxuICAgIGlmIChvcmRlci50b3RhbCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnRvdGFsID0gb3JkZXIudG90YWw7XHJcbiAgICBpZiAob3JkZXIucGF5bWVudE1ldGhvZCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnBheW1lbnRfbWV0aG9kID0gb3JkZXIucGF5bWVudE1ldGhvZDtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ29yZGVycycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcclxuICAgICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlT3JkZXIgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIG9yZGVyOicsIGlkKTtcclxuICAgIHJldHVybiBjb252ZXJ0RGJPcmRlclRvT3JkZXIoZGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZU9yZGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnb3JkZXJzJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnaWQnLCBpZCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBEZWxldGVkIG9yZGVyOicsIGlkKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBkZWxldGVPcmRlciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDdXN0b21lcnMgb3BlcmF0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzKCk6IFByb21pc2U8YW55W10+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY3VzdG9tZXJzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEN1c3RvbWVycyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEN1c3RvbWVycyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ3VzdG9tZXIoY3VzdG9tZXI6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIG5vdCBhdmFpbGFibGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY3VzdG9tZXJzJylcclxuICAgICAgLmluc2VydChbY3VzdG9tZXJdKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgYWRkQ3VzdG9tZXIgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGFkZEN1c3RvbWVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLy8gTWFpbnRlbmFuY2Ugb3BlcmF0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFpbnRlbmFuY2VTdGF0dXMoKTogUHJvbWlzZTxhbnk+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiB7IGlzX21haW50ZW5hbmNlOiBmYWxzZSwgZHJvcF9kYXRlOiBudWxsIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21haW50ZW5hbmNlX3N0YXR1cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgJ21haW50ZW5hbmNlJylcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0TWFpbnRlbmFuY2VTdGF0dXMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBpc19tYWludGVuYW5jZTogZmFsc2UsIGRyb3BfZGF0ZTogbnVsbCB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZGF0YSB8fCB7IGlzX21haW50ZW5hbmNlOiBmYWxzZSwgZHJvcF9kYXRlOiBudWxsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldE1haW50ZW5hbmNlU3RhdHVzIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7IGlzX21haW50ZW5hbmNlOiBmYWxzZSwgZHJvcF9kYXRlOiBudWxsIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWFpbnRlbmFuY2VTdGF0dXMoaXNNYWludGVuYW5jZTogYm9vbGVhbiwgZHJvcERhdGU/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XHJcbiAgICAgIGlzX21haW50ZW5hbmNlOiBpc01haW50ZW5hbmNlLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChkcm9wRGF0ZSkge1xyXG4gICAgICB1cGRhdGVEYXRhLmRyb3BfZGF0ZSA9IGRyb3BEYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbWFpbnRlbmFuY2Vfc3RhdHVzJylcclxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxyXG4gICAgICAuZXEoJ2lkJywgJ21haW50ZW5hbmNlJyk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVNYWludGVuYW5jZVN0YXR1cyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIG1haW50ZW5hbmNlIHN0YXR1cycpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZU1haW50ZW5hbmNlU3RhdHVzIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFdpbGF5YSBvcGVyYXRpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXaWxheWFUYXJpZmZzKCk6IFByb21pc2U8YW55W10+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnd2lsYXlhX3RhcmlmZnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCd3aWxheWFfY29kZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0V2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldFdpbGF5YVRhcmlmZnMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdpbGF5YVRhcmlmZnModGFyaWZmczogYW55W10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugbm90IGF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERlbGV0ZSBhbGwgZXhpc3RpbmcgdGFyaWZmc1xyXG4gICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3dpbGF5YV90YXJpZmZzJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5uZXEoJ2lkJywgMCk7IC8vIERlbGV0ZSBhbGwgcmVjb3Jkc1xyXG4gICAgXHJcbiAgICAvLyBJbnNlcnQgbmV3IHRhcmlmZnNcclxuICAgIGlmICh0YXJpZmZzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnd2lsYXlhX3RhcmlmZnMnKVxyXG4gICAgICAgIC5pbnNlcnQodGFyaWZmcyk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVXaWxheWFUYXJpZmZzIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFVwZGF0ZWQgd2lsYXlhIHRhcmlmZnMnKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgdXBkYXRlV2lsYXlhVGFyaWZmcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEludmVudG9yeSBvcGVyYXRpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZlbnRvcnkoKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBza3UsIHN0b2NrLCBzaXplcywgY29sb3JzLCBpbl9zdG9jaywgY2F0ZWdvcnknKVxyXG4gICAgICAub3JkZXIoJ25hbWUnKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGdldEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJhbnNmb3JtIGRhdGEgZm9yIGludmVudG9yeSBtYW5hZ2VtZW50XHJcbiAgICByZXR1cm4gKGRhdGEgfHwgW10pLm1hcChwcm9kdWN0ID0+ICh7XHJcbiAgICAgIGlkOiBwcm9kdWN0LmlkLFxyXG4gICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgIHNrdTogcHJvZHVjdC5za3UsXHJcbiAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LmNhdGVnb3J5LFxyXG4gICAgICBpblN0b2NrOiBwcm9kdWN0LmluX3N0b2NrLFxyXG4gICAgICBzdG9jazogcHJvZHVjdC5zdG9jayB8fCB7fSxcclxuICAgICAgc2l6ZXM6IHByb2R1Y3Quc2l6ZXMgfHwgW10sXHJcbiAgICAgIGNvbG9yczogcHJvZHVjdC5jb2xvcnMgfHwgW10sXHJcbiAgICAgIHRvdGFsU3RvY2s6IGNhbGN1bGF0ZVRvdGFsU3RvY2socHJvZHVjdC5zdG9jayB8fCB7fSksXHJcbiAgICAgIHN0b2NrQnlTaXplOiBjYWxjdWxhdGVTdG9ja0J5U2l6ZShwcm9kdWN0LnN0b2NrIHx8IHt9LCBwcm9kdWN0LnNpemVzIHx8IFtdLCBwcm9kdWN0LmNvbG9ycyB8fCBbXSlcclxuICAgIH0pKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZ2V0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVJbnZlbnRvcnkocHJvZHVjdElkOiBzdHJpbmcsIHN0b2NrRGF0YTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2Ugbm90IGF2YWlsYWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZU9iajogYW55ID0ge1xyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChzdG9ja0RhdGEuc3RvY2spIHtcclxuICAgICAgdXBkYXRlT2JqLnN0b2NrID0gc3RvY2tEYXRhLnN0b2NrO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc3RvY2tEYXRhLmluU3RvY2sgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVPYmouaW5fc3RvY2sgPSBzdG9ja0RhdGEuaW5TdG9jaztcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcclxuICAgICAgLnVwZGF0ZSh1cGRhdGVPYmopXHJcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSB1cGRhdGVJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBVcGRhdGVkIGludmVudG9yeSBmb3IgcHJvZHVjdDonLCBwcm9kdWN0SWQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IGRhdGEuaWQsXHJcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgc3RvY2s6IGRhdGEuc3RvY2ssXHJcbiAgICAgIGluU3RvY2s6IGRhdGEuaW5fc3RvY2ssXHJcbiAgICAgIHRvdGFsU3RvY2s6IGNhbGN1bGF0ZVRvdGFsU3RvY2soZGF0YS5zdG9jaylcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwZGF0ZUludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGludmVudG9yeSBjYWxjdWxhdGlvbnNcclxuZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxTdG9jayhzdG9jazogYW55KTogbnVtYmVyIHtcclxuICBpZiAoIXN0b2NrIHx8IHR5cGVvZiBzdG9jayAhPT0gJ29iamVjdCcpIHJldHVybiAwO1xyXG4gIFxyXG4gIGxldCB0b3RhbCA9IDA7XHJcbiAgZm9yIChjb25zdCBzaXplIGluIHN0b2NrKSB7XHJcbiAgICBpZiAodHlwZW9mIHN0b2NrW3NpemVdID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBmb3IgKGNvbnN0IGNvbG9yIGluIHN0b2NrW3NpemVdKSB7XHJcbiAgICAgICAgdG90YWwgKz0gTnVtYmVyKHN0b2NrW3NpemVdW2NvbG9yXSkgfHwgMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdG90YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0b2NrQnlTaXplKHN0b2NrOiBhbnksIHNpemVzOiBzdHJpbmdbXSwgY29sb3JzOiBzdHJpbmdbXSk6IGFueSB7XHJcbiAgY29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcclxuICBcclxuICBzaXplcy5mb3JFYWNoKHNpemUgPT4ge1xyXG4gICAgcmVzdWx0W3NpemVdID0ge307XHJcbiAgICBjb2xvcnMuZm9yRWFjaChjb2xvciA9PiB7XHJcbiAgICAgIHJlc3VsdFtzaXplXVtjb2xvcl0gPSBOdW1iZXIoc3RvY2tbc2l6ZV0/Lltjb2xvcl0pIHx8IDA7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vLyBTdG9jayBkZWR1Y3Rpb24gZnVuY3Rpb24gZm9yIG9yZGVyc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVkdWN0U3RvY2tGcm9tT3JkZXIob3JkZXI6IE9yZGVyKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogRGVkdWN0aW5nIHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCk7XHJcbiAgICBcclxuICAgIC8vIEdldCB0aGUgcHJvZHVjdFxyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IGdldFByb2R1Y3Qob3JkZXIucHJvZHVjdElkKTtcclxuICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogUHJvZHVjdCBub3QgZm91bmQgZm9yIG9yZGVyOicsIG9yZGVyLnByb2R1Y3RJZCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBlbm91Z2ggc3RvY2tcclxuICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Quc3RvY2s/LltvcmRlci5zZWxlY3RlZFNpemVdPy5bb3JkZXIuc2VsZWN0ZWRDb2xvcl0gfHwgMDtcclxuICAgIGlmIChjdXJyZW50U3RvY2sgPCBvcmRlci5xdWFudGl0eSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogSW5zdWZmaWNpZW50IHN0b2NrIGZvciBvcmRlcjonLCB7XHJcbiAgICAgICAgcHJvZHVjdElkOiBvcmRlci5wcm9kdWN0SWQsXHJcbiAgICAgICAgc2l6ZTogb3JkZXIuc2VsZWN0ZWRTaXplLFxyXG4gICAgICAgIGNvbG9yOiBvcmRlci5zZWxlY3RlZENvbG9yLFxyXG4gICAgICAgIHJlcXVlc3RlZDogb3JkZXIucXVhbnRpdHksXHJcbiAgICAgICAgYXZhaWxhYmxlOiBjdXJyZW50U3RvY2tcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRGVkdWN0IHRoZSBzdG9ja1xyXG4gICAgY29uc3QgbmV3U3RvY2sgPSB7XHJcbiAgICAgIC4uLnByb2R1Y3Quc3RvY2ssXHJcbiAgICAgIFtvcmRlci5zZWxlY3RlZFNpemVdOiB7XHJcbiAgICAgICAgLi4ucHJvZHVjdC5zdG9jaz8uW29yZGVyLnNlbGVjdGVkU2l6ZV0sXHJcbiAgICAgICAgW29yZGVyLnNlbGVjdGVkQ29sb3JdOiBjdXJyZW50U3RvY2sgLSBvcmRlci5xdWFudGl0eVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgdGhlIHByb2R1Y3Qgc3RvY2tcclxuICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgdXBkYXRlUHJvZHVjdChvcmRlci5wcm9kdWN0SWQsIHtcclxuICAgICAgc3RvY2s6IG5ld1N0b2NrLFxyXG4gICAgICBpblN0b2NrOiBjYWxjdWxhdGVUb3RhbFN0b2NrKG5ld1N0b2NrKSA+IDBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAodXBkYXRlZFByb2R1Y3QpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlOiBTdWNjZXNzZnVsbHkgZGVkdWN0ZWQgc3RvY2sgZm9yIG9yZGVyOicsIG9yZGVyLmlkKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZTogRmFpbGVkIHRvIHVwZGF0ZSBwcm9kdWN0IHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEVycm9yIGRlZHVjdGluZyBzdG9jayBmb3Igb3JkZXI6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU3RvY2sgcmV0dXJuIGZ1bmN0aW9uIGZvciBjYW5jZWxsZWQvZGVsZXRlZCBvcmRlcnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHVyblN0b2NrRnJvbU9yZGVyKG9yZGVyOiBPcmRlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnU3VwYWJhc2U6IFJldHVybmluZyBzdG9jayBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgdGhlIHByb2R1Y3RcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBnZXRQcm9kdWN0KG9yZGVyLnByb2R1Y3RJZCk7XHJcbiAgICBpZiAoIXByb2R1Y3QpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IFByb2R1Y3Qgbm90IGZvdW5kIGZvciBvcmRlcjonLCBvcmRlci5wcm9kdWN0SWQpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEdldCBjdXJyZW50IHN0b2NrXHJcbiAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBwcm9kdWN0LnN0b2NrPy5bb3JkZXIuc2VsZWN0ZWRTaXplXT8uW29yZGVyLnNlbGVjdGVkQ29sb3JdIHx8IDA7XHJcbiAgICBcclxuICAgIC8vIFJldHVybiB0aGUgc3RvY2tcclxuICAgIGNvbnN0IG5ld1N0b2NrID0ge1xyXG4gICAgICAuLi5wcm9kdWN0LnN0b2NrLFxyXG4gICAgICBbb3JkZXIuc2VsZWN0ZWRTaXplXToge1xyXG4gICAgICAgIC4uLnByb2R1Y3Quc3RvY2s/LltvcmRlci5zZWxlY3RlZFNpemVdLFxyXG4gICAgICAgIFtvcmRlci5zZWxlY3RlZENvbG9yXTogY3VycmVudFN0b2NrICsgb3JkZXIucXVhbnRpdHlcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIHRoZSBwcm9kdWN0IHN0b2NrXHJcbiAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHVwZGF0ZVByb2R1Y3Qob3JkZXIucHJvZHVjdElkLCB7XHJcbiAgICAgIHN0b2NrOiBuZXdTdG9jayxcclxuICAgICAgaW5TdG9jazogY2FsY3VsYXRlVG90YWxTdG9jayhuZXdTdG9jaykgPiAwXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKHVwZGF0ZWRQcm9kdWN0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdXBhYmFzZTogU3VjY2Vzc2Z1bGx5IHJldHVybmVkIHN0b2NrIGZvciBvcmRlcjonLCBvcmRlci5pZCwge1xyXG4gICAgICAgIHByb2R1Y3RJZDogb3JkZXIucHJvZHVjdElkLFxyXG4gICAgICAgIHNpemU6IG9yZGVyLnNlbGVjdGVkU2l6ZSxcclxuICAgICAgICBjb2xvcjogb3JkZXIuc2VsZWN0ZWRDb2xvcixcclxuICAgICAgICBxdWFudGl0eTogb3JkZXIucXVhbnRpdHksXHJcbiAgICAgICAgbmV3VG90YWxTdG9jazogY2FsY3VsYXRlVG90YWxTdG9jayhuZXdTdG9jaylcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2U6IEZhaWxlZCB0byByZXR1cm4gcHJvZHVjdCBzdG9jayBmb3Igb3JkZXI6Jywgb3JkZXIuaWQpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlOiBFcnJvciByZXR1cm5pbmcgc3RvY2sgZm9yIG9yZGVyOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJtaXNzaW5nVmFycyIsInB1c2giLCJFcnJvciIsImpvaW4iLCJzdXBhYmFzZSIsImNvbnZlcnREYlByb2R1Y3RUb1Byb2R1Y3QiLCJkYlByb2R1Y3QiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiTnVtYmVyIiwib3JpZ2luYWxQcmljZSIsIm9yaWdpbmFsX3ByaWNlIiwiaW1hZ2UiLCJpbWFnZXMiLCJzdG9jayIsImNhdGVnb3J5Iiwic2l6ZXMiLCJjb2xvcnMiLCJpblN0b2NrIiwiaW5fc3RvY2siLCJzdGF0dXMiLCJyYXRpbmciLCJyZXZpZXdzIiwic2t1Iiwid2VpZ2h0IiwiZGltZW5zaW9ucyIsInRhZ3MiLCJmZWF0dXJlZCIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidXBkYXRlZEF0IiwidXBkYXRlZF9hdCIsInByb2R1Y3RzQ2FjaGUiLCJwcm9kdWN0c0NhY2hlVGltZSIsIkNBQ0hFX0RVUkFUSU9OIiwiZ2V0UHJvZHVjdHMiLCJub3ciLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicHJvZHVjdHMiLCJtYXAiLCJnZXRQcm9kdWN0IiwiZXEiLCJzaW5nbGUiLCJhZGRQcm9kdWN0IiwicHJvZHVjdCIsImluc2VydCIsInVwZGF0ZVByb2R1Y3QiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiLCJkZWxldGVQcm9kdWN0IiwiZGVsZXRlIiwiY29udmVydERiT3JkZXJUb09yZGVyIiwiZGJPcmRlciIsImlzT2xkU2NoZW1hIiwiaXRlbXMiLCJBcnJheSIsImlzQXJyYXkiLCJmaXJzdEl0ZW0iLCJsZW5ndGgiLCJwcm9kdWN0SWQiLCJwcm9kdWN0TmFtZSIsInByb2R1Y3RJbWFnZSIsImN1c3RvbWVyTmFtZSIsImN1c3RvbWVyUGhvbmUiLCJjdXN0b21lckVtYWlsIiwiY3VzdG9tZXJBZGRyZXNzIiwid2lsYXlhSWQiLCJ3aWxheWFOYW1lIiwic2hpcHBpbmdUeXBlIiwic2hpcHBpbmdfdHlwZSIsInNoaXBwaW5nQ29zdCIsInNoaXBwaW5nX2Nvc3QiLCJxdWFudGl0eSIsInNlbGVjdGVkU2l6ZSIsInNlbGVjdGVkQ29sb3IiLCJzdWJ0b3RhbCIsInRvdGFsIiwib3JkZXJEYXRlIiwib3JkZXJfZGF0ZSIsInRyYWNraW5nTnVtYmVyIiwidHJhY2tpbmdfbnVtYmVyIiwibm90ZXMiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudF9tZXRob2QiLCJwYXltZW50U3RhdHVzIiwicGF5bWVudF9zdGF0dXMiLCJlc3RpbWF0ZWREZWxpdmVyeSIsInByb2R1Y3RfaWQiLCJwcm9kdWN0X25hbWUiLCJwcm9kdWN0X2ltYWdlIiwiY3VzdG9tZXJfbmFtZSIsImN1c3RvbWVyX3Bob25lIiwiY3VzdG9tZXJfZW1haWwiLCJjdXN0b21lcl9hZGRyZXNzIiwid2lsYXlhX2lkIiwid2lsYXlhX25hbWUiLCJzZWxlY3RlZF9zaXplIiwic2VsZWN0ZWRfY29sb3IiLCJlc3RpbWF0ZWRfZGVsaXZlcnkiLCJvcmRlcnNDYWNoZSIsIm9yZGVyc0NhY2hlVGltZSIsImdldE9yZGVycyIsIm9yZGVycyIsImdldE9yZGVyIiwiYWRkT3JkZXIiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZU9yZGVyIiwidXBkYXRlRGF0YSIsImRlbGV0ZU9yZGVyIiwiZ2V0Q3VzdG9tZXJzIiwiYWRkQ3VzdG9tZXIiLCJjdXN0b21lciIsImdldE1haW50ZW5hbmNlU3RhdHVzIiwiaXNfbWFpbnRlbmFuY2UiLCJkcm9wX2RhdGUiLCJ1cGRhdGVNYWludGVuYW5jZVN0YXR1cyIsImlzTWFpbnRlbmFuY2UiLCJkcm9wRGF0ZSIsImdldFdpbGF5YVRhcmlmZnMiLCJ1cGRhdGVXaWxheWFUYXJpZmZzIiwidGFyaWZmcyIsIm5lcSIsImdldEludmVudG9yeSIsInRvdGFsU3RvY2siLCJjYWxjdWxhdGVUb3RhbFN0b2NrIiwic3RvY2tCeVNpemUiLCJjYWxjdWxhdGVTdG9ja0J5U2l6ZSIsInVwZGF0ZUludmVudG9yeSIsInN0b2NrRGF0YSIsInVwZGF0ZU9iaiIsInNpemUiLCJjb2xvciIsInJlc3VsdCIsImZvckVhY2giLCJkZWR1Y3RTdG9ja0Zyb21PcmRlciIsImN1cnJlbnRTdG9jayIsInJlcXVlc3RlZCIsImF2YWlsYWJsZSIsIm5ld1N0b2NrIiwidXBkYXRlZFByb2R1Y3QiLCJyZXR1cm5TdG9ja0Zyb21PcmRlciIsIm5ld1RvdGFsU3RvY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseDatabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Cprojectt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();