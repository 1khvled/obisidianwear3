"use strict";(()=>{var e={};e.id=87,e.ids=[87],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},883:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>x,patchFetch:()=>O,requestAsyncStorage:()=>w,routeModule:()=>h,serverHooks:()=>q,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>T});var s={};t.r(s),t.d(s,{DELETE:()=>m,GET:()=>l,PUT:()=>p,runtime:()=>c});var o=t(5419),a=t(9108),n=t(9678),i=t(8070),u=t(4750),d=t(4627);let c="nodejs";async function l(e,{params:r}){try{let{id:e}=r,t=await (0,u.co)(e);if(!t)return i.Z.json({success:!1,error:"Order not found"},{status:404});return console.log("Orders API: GET single order:",e),i.Z.json({success:!0,data:t,timestamp:Date.now()})}catch(e){return console.error("Orders API: GET single error:",e),i.Z.json({success:!1,error:"Failed to fetch order"},{status:500})}}let p=(0,d.QO)(async(e,{params:r})=>{try{let{id:t}=r,s=await e.json(),o=await (0,u.Cs)(t,s);if(!o)return i.Z.json({success:!1,error:"Order not found"},{status:404});return console.log("Orders API: PUT request - updated order:",t),i.Z.json({success:!0,data:o,message:"Order updated successfully",timestamp:Date.now()})}catch(e){return console.error("Orders API: PUT error:",e),i.Z.json({success:!1,error:"Failed to update order"},{status:500})}}),m=(0,d.QO)(async(e,{params:r})=>{try{let{id:e}=r,t=await (0,u.co)(e);if(!t)return i.Z.json({success:!1,error:"Order not found"},{status:404});if(!await (0,u.wH)(e))return i.Z.json({success:!1,error:"Failed to delete order"},{status:500});return console.log("Orders API: DELETE request - deleted order:",e),i.Z.json({success:!0,data:t,message:"Order deleted successfully",timestamp:Date.now()})}catch(e){return console.error("Orders API: DELETE error:",e),i.Z.json({success:!1,error:"Failed to delete order"},{status:500})}}),h=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/orders/[id]/route",pathname:"/api/orders/[id]",filename:"route",bundlePath:"app/api/orders/[id]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\orders\\[id]\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:w,staticGenerationAsyncStorage:g,serverHooks:q,headerHooks:f,staticGenerationBailout:T}=h,x="/api/orders/[id]/route";function O(){return(0,n.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:g})}},4627:(e,r,t)=>{t.d(r,{QO:()=>n});var s=t(8070);class o{constructor(e=6e4,r=100){this.requests=new Map,this.windowMs=e,this.maxRequests=r}isAllowed(e){let r=Date.now(),t=this.requests.get(e);return!t||r>t.resetTime?(this.requests.set(e,{count:1,resetTime:r+this.windowMs}),{allowed:!0,remaining:this.maxRequests-1,resetTime:r+this.windowMs}):t.count>=this.maxRequests?{allowed:!1,remaining:0,resetTime:t.resetTime}:(t.count++,this.requests.set(e,t),{allowed:!0,remaining:this.maxRequests-t.count,resetTime:t.resetTime})}cleanup(){let e=Date.now();this.requests.forEach((r,t)=>{e>r.resetTime&&this.requests.delete(t)})}}let a=new o(6e4,100);function n(e){return async(r,...t)=>{let o=new URL(r.url);if(["/api/maintenance","/api/test-db","/api/test-supabase"].some(e=>o.pathname.startsWith(e)))return e(r,...t);let n=function(e,r){let t=r.isAllowed(e);.01>Math.random()&&r.cleanup();let s={"X-RateLimit-Limit":r.maxRequests.toString(),"X-RateLimit-Remaining":t.remaining.toString(),"X-RateLimit-Reset":new Date(t.resetTime).toISOString()};return{allowed:t.allowed,headers:s}}(r.ip||r.headers.get("x-forwarded-for")||"unknown",a);return n.allowed?!function(e){let r=e.headers.get("authorization");return!!(r&&r.startsWith("Bearer "))&&r.substring(7)===(process.env.API_AUTH_TOKEN||"obsidian-api-token-2025")}(r)?s.Z.json({success:!1,error:"Unauthorized",message:"Authentication required"},{status:401,headers:n.headers}):e(r,...t):s.Z.json({success:!1,error:"Too Many Requests",message:"Rate limit exceeded. Please try again later."},{status:429,headers:n.headers})}}new o(3e5,5)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,206,290,750],()=>t(883));module.exports=s})();