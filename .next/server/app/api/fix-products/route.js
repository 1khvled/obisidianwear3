"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},4283:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>P,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>f});var o={};t.r(o),t.d(o,{POST:()=>d,runtime:()=>n});var s=t(5419),c=t(9108),u=t(9678),i=t(8070),a=t(4750);let n="nodejs";async function d(){try{console.log("Fix Products API: Starting product fix...");let{data:e,error:r}=await a.OQ.from("products").select("*");if(r)return console.error("Fix Products API: Error fetching products:",r),i.Z.json({success:!1,error:"Failed to fetch products"},{status:500});console.log(`Fix Products API: Found ${e.length} products`);let t=0,o=[];for(let r of e){let e={},s=!1;if(r.colors&&0!==r.colors.length||(e.colors=["Black"],s=!0,console.log(`Fix Products API: Fixing colors for product: ${r.name}`)),(!r.stock||0===Object.keys(r.stock).length||Object.values(r.stock).every(e=>!e||0===Object.keys(e).length))&&(e.stock={S:{Black:10},M:{Black:15},L:{Black:12},XL:{Black:8}},s=!0,console.log(`Fix Products API: Fixing stock for product: ${r.name}`)),r.sizes&&0!==r.sizes.length||(e.sizes=["S","M","L","XL"],s=!0,console.log(`Fix Products API: Fixing sizes for product: ${r.name}`)),s){let{error:s}=await a.OQ.from("products").update(e).eq("id",r.id);s?(console.error(`Fix Products API: Error updating product ${r.name}:`,s),o.push({product:r.name,status:"error",error:s.message})):(console.log(`Fix Products API: ✅ Updated product: ${r.name}`),o.push({product:r.name,status:"success"}),t++)}else o.push({product:r.name,status:"no_changes_needed"})}return console.log(`Fix Products API: ✅ Fixed ${t} products successfully!`),i.Z.json({success:!0,message:`Fixed ${t} products successfully`,totalProducts:e.length,fixedCount:t,results:o,timestamp:Date.now()})}catch(e){return console.error("Fix Products API: Error:",e),i.Z.json({success:!1,error:"Failed to fix products"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:c.x.APP_ROUTE,page:"/api/fix-products/route",pathname:"/api/fix-products",filename:"route",bundlePath:"app/api/fix-products/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\fix-products\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:x,serverHooks:P,headerHooks:g,staticGenerationBailout:f}=l,h="/api/fix-products/route";function m(){return(0,u.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:x})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,206,409,750],()=>t(4283));module.exports=o})();