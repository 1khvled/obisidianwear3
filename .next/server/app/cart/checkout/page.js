(()=>{var e={};e.id=1308,e.ids=[1308],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},40682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var i=s(50482),a=s(69108),r=s(62563),l=s.n(r),o=s(68300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["cart",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,49074)),"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\cart\\checkout\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,74322)),"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,24117)),"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,92793)),"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,19435)),"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\cart\\checkout\\page.tsx"],p="/cart/checkout/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cart/checkout/page",pathname:"/cart/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},71738:(e,t,s)=>{Promise.resolve().then(s.bind(s,42171))},18822:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},42171:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var i=s(95344),a=s(3729),r=s(22254),l=s(49596),o=s(22041),n=s(84192),d=s(729),c=s(63024),p=s(18822),u=s(16278),h=s(72086);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,s(69224).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var m=s(91917),j=s(62312);function b(){let e=(0,r.useRouter)(),{items:t,getTotalPrice:s,clearCart:b}=(0,l.useCart)(),[g,v]=(0,a.useState)(!0),[f,k]=(0,a.useState)(!1),[y,w]=(0,a.useState)(0),[N,_]=(0,a.useState)(!1),[S,C]=(0,a.useState)(""),[D,O]=(0,a.useState)(null),[M,P]=(0,a.useState)([]),[E,A]=(0,a.useState)("domicile"),[T,B]=(0,a.useState)({name:"",phone:"",email:"",address:"",wilaya:""});(0,a.useEffect)(()=>{if(y>0){let e=setTimeout(()=>{w(e=>e-1)},1e3);return()=>clearTimeout(e)}0===y&&N&&e.push("/")},[y,N,e]),(0,a.useEffect)(()=>{v(!1)},[t,e]);let q=async()=>{let e=[];for(let s of t)try{let t=await fetch(`/api/products/${s.productId}?t=${Date.now()}`,{cache:"no-store"});if(t.ok){let i=await t.json();if(i.success&&i.data){let t=i.data,a=t.stock?.[s.selectedSize]?.[s.selectedColor]||0;0===a?e.push(`${s.name} - Size ${s.selectedSize} in ${s.selectedColor} is OUT OF STOCK`):s.quantity>a&&e.push(`${s.name} - Size ${s.selectedSize} in ${s.selectedColor}: Only ${a} available (requested ${s.quantity})`)}}}catch(t){e.push(`${s.name} - Could not verify stock availability`)}return e},z=async e=>{if(e.preventDefault(),f)return;if(!/^0\d{9}$/.test(T.phone)){alert("Please enter a valid phone number");return}if(!T.name||!T.phone||!T.wilaya){alert("Please fill in all required customer information");return}if(!E){alert("Please select a delivery option");return}if("domicile"===E&&!T.address){alert("Please provide your address for home delivery");return}k(!0);let i=await q();if(i.length>0){P(i),k(!1),alert(`❌ Stock validation failed:

${i.join("\n")}

Please remove out-of-stock items from your cart.`);return}let a=R(),r=s();try{let e={items:t.map(e=>({id:e.productId,name:e.name,price:e.price,type:"collection",selectedSize:e.selectedSize,selectedColor:e.selectedColor,quantity:e.quantity,subtotal:e.price*e.quantity})),customer:{name:T.name,phone:T.phone,email:T.email,address:T.address,wilaya:T.wilaya},delivery:{option:E,cost:a},total:r+a,subtotal:r},s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await s.json();i.success?(C(i.order.id),O(e),_(!0),w(10),b()):alert("Failed to place order: "+i.error)}catch(e){alert("Failed to place order. Please try again.")}finally{k(!1)}},R=()=>{if(!T.wilaya||!E)return 0;let e={Alger:{domicile:400,stop_desk:200},Oran:{domicile:600,stop_desk:300},Constantine:{domicile:800,stop_desk:400},Blida:{domicile:500,stop_desk:250},Setif:{domicile:700,stop_desk:350},Annaba:{domicile:900,stop_desk:450},Batna:{domicile:1e3,stop_desk:500},Djelfa:{domicile:1200,stop_desk:600},"Sidi Bel Abbes":{domicile:800,stop_desk:400},Biskra:{domicile:1e3,stop_desk:500},Tebessa:{domicile:1100,stop_desk:550},"El Oued":{domicile:1200,stop_desk:600},Khenchela:{domicile:1100,stop_desk:550},"Oum El Bouaghi":{domicile:1e3,stop_desk:500},Bouira:{domicile:500,stop_desk:250},Mostaganem:{domicile:800,stop_desk:400},Tlemcen:{domicile:900,stop_desk:450},Tiaret:{domicile:800,stop_desk:400},Chlef:{domicile:600,stop_desk:300},Laghouat:{domicile:1e3,stop_desk:500},Ouargla:{domicile:1200,stop_desk:600},Jijel:{domicile:800,stop_desk:400},Mila:{domicile:700,stop_desk:350},"Ain Defla":{domicile:500,stop_desk:250},Naama:{domicile:1e3,stop_desk:500},"Ain Temouchent":{domicile:800,stop_desk:400},Ghardaia:{domicile:1200,stop_desk:600},Relizane:{domicile:600,stop_desk:300},Timimoun:{domicile:1400,stop_desk:700},"Bordj Badji Mokhtar":{domicile:1600,stop_desk:800},"Ouled Djellal":{domicile:1200,stop_desk:600},"Beni Abbes":{domicile:1400,stop_desk:700},"In Salah":{domicile:1500,stop_desk:750},"In Guezzam":{domicile:1800,stop_desk:900},Touggourt:{domicile:1200,stop_desk:600},Djanet:{domicile:1600,stop_desk:800},"El M'Ghair":{domicile:1200,stop_desk:600},"El Menia":{domicile:1300,stop_desk:650}}[T.wilaya];return e?e[E]:0};if(g)return(0,i.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[i.jsx(o.default,{}),i.jsx("div",{className:"pt-24 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"Loading checkout..."})]})})]});let I=R(),$=s();return(0,i.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[i.jsx(o.default,{}),i.jsx("div",{className:"pt-20 pb-8 px-4",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 text-white hover:text-purple-400 transition-colors mb-6",children:[i.jsx(c.Z,{size:20}),"Back"]}),i.jsx("h1",{className:"text-2xl font-black text-white mb-6 text-center",children:"CART CHECKOUT"}),(0,i.jsxs)("form",{onSubmit:z,className:"grid lg:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,i.jsxs)("h2",{className:"text-lg font-black text-white mb-3 flex items-center gap-2",children:[i.jsx(p.Z,{className:"w-5 h-5"}),"CUSTOMER INFORMATION"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-white font-bold uppercase tracking-wider mb-2",children:"FULL NAME *"}),i.jsx("input",{type:"text",value:T.name,onChange:e=>B({...T,name:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-black border-2 border-white text-white rounded-lg focus:border-purple-500 focus:outline-none",placeholder:"Your full name"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-white font-bold uppercase tracking-wider mb-2",children:"PHONE NUMBER *"}),i.jsx("input",{type:"tel",value:T.phone,onChange:e=>B({...T,phone:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-black border-2 border-white text-white rounded-lg focus:border-purple-500 focus:outline-none",placeholder:"0123456789"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-white font-bold uppercase tracking-wider mb-2",children:"EMAIL"}),i.jsx("input",{type:"email",value:T.email,onChange:e=>B({...T,email:e.target.value}),className:"w-full px-4 py-3 bg-black border-2 border-white text-white rounded-lg focus:border-purple-500 focus:outline-none",placeholder:"your@email.com"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-white font-bold uppercase tracking-wider mb-2",children:"WILAYA *"}),(0,i.jsxs)("select",{value:T.wilaya,onChange:e=>B({...T,wilaya:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-black border-2 border-white text-white rounded-lg focus:border-purple-500 focus:outline-none",children:[i.jsx("option",{value:"",children:"Select your wilaya"}),i.jsx("option",{value:"Alger",children:"Alger"}),i.jsx("option",{value:"Oran",children:"Oran"}),i.jsx("option",{value:"Constantine",children:"Constantine"}),i.jsx("option",{value:"Blida",children:"Blida"}),i.jsx("option",{value:"Setif",children:"Setif"}),i.jsx("option",{value:"Annaba",children:"Annaba"}),i.jsx("option",{value:"Batna",children:"Batna"}),i.jsx("option",{value:"Djelfa",children:"Djelfa"}),i.jsx("option",{value:"Sidi Bel Abbes",children:"Sidi Bel Abbes"}),i.jsx("option",{value:"Biskra",children:"Biskra"}),i.jsx("option",{value:"Tebessa",children:"Tebessa"}),i.jsx("option",{value:"El Oued",children:"El Oued"}),i.jsx("option",{value:"Khenchela",children:"Khenchela"}),i.jsx("option",{value:"Oum El Bouaghi",children:"Oum El Bouaghi"}),i.jsx("option",{value:"Bouira",children:"Bouira"}),i.jsx("option",{value:"Mostaganem",children:"Mostaganem"}),i.jsx("option",{value:"Tlemcen",children:"Tlemcen"}),i.jsx("option",{value:"Tiaret",children:"Tiaret"}),i.jsx("option",{value:"Chlef",children:"Chlef"}),i.jsx("option",{value:"Laghouat",children:"Laghouat"}),i.jsx("option",{value:"Ouargla",children:"Ouargla"}),i.jsx("option",{value:"Jijel",children:"Jijel"}),i.jsx("option",{value:"Mila",children:"Mila"}),i.jsx("option",{value:"Ain Defla",children:"Ain Defla"}),i.jsx("option",{value:"Naama",children:"Naama"}),i.jsx("option",{value:"Ain Temouchent",children:"Ain Temouchent"}),i.jsx("option",{value:"Ghardaia",children:"Ghardaia"}),i.jsx("option",{value:"Relizane",children:"Relizane"}),i.jsx("option",{value:"Timimoun",children:"Timimoun"}),i.jsx("option",{value:"Bordj Badji Mokhtar",children:"Bordj Badji Mokhtar"}),i.jsx("option",{value:"Ouled Djellal",children:"Ouled Djellal"}),i.jsx("option",{value:"Beni Abbes",children:"Beni Abbes"}),i.jsx("option",{value:"In Salah",children:"In Salah"}),i.jsx("option",{value:"In Guezzam",children:"In Guezzam"}),i.jsx("option",{value:"Touggourt",children:"Touggourt"}),i.jsx("option",{value:"Djanet",children:"Djanet"}),i.jsx("option",{value:"El M'Ghair",children:"El M'Ghair"}),i.jsx("option",{value:"El Menia",children:"El Menia"})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-white font-bold uppercase tracking-wider mb-2",children:"ADDRESS"}),i.jsx("textarea",{value:T.address,onChange:e=>B({...T,address:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-black border-2 border-white text-white rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Your full address"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,i.jsxs)("h2",{className:"text-lg font-black text-white mb-3 flex items-center gap-2",children:[i.jsx(u.Z,{className:"w-5 h-5"}),"DELIVERY OPTIONS"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${"domicile"===E?"border-purple-500 bg-purple-500/20":"border-gray-600 hover:border-gray-500"}`,onClick:()=>A("domicile"),children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx(h.Z,{className:"w-5 h-5 text-purple-400"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-bold text-white",children:"Home Delivery"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Delivered to your address"})]})]})}),i.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${"stop_desk"===E?"border-purple-500 bg-purple-500/20":"border-gray-600 hover:border-gray-500"}`,onClick:()=>A("stop_desk"),children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx(x,{className:"w-5 h-5 text-purple-400"}),(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-bold text-white",children:"Stop Desk"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Pick up from nearest stop desk"})]})]})})]})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,i.jsxs)("h2",{className:"text-lg font-black text-white mb-3 flex items-center gap-2",children:[i.jsx(m.Z,{className:"w-5 h-5"}),"ORDER ITEMS"]}),i.jsx("div",{className:"space-y-4",children:t.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-white/5 border border-white/20 rounded",children:[i.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded"}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-white",children:e.name}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Size: ",e.selectedSize," • Color: ",e.selectedColor]}),(0,i.jsxs)("p",{className:"text-gray-400 text-sm",children:["Quantity: ",e.quantity]})]}),i.jsx("div",{className:"text-right",children:(0,i.jsxs)("p",{className:"font-bold text-white",children:[(e.price*e.quantity).toFixed(0)," DZD"]})})]},e.id))})]}),(0,i.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-black text-white mb-3",children:"ORDER SUMMARY"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Subtotal:"}),(0,i.jsxs)("span",{className:"text-white font-medium",children:[$.toFixed(0)," DZD"]})]}),E&&T.wilaya&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-gray-400",children:["Delivery (","domicile"===E?"Home":"Stop Desk","):"]}),(0,i.jsxs)("span",{className:"text-white font-medium",children:[I.toFixed(0)," DZD"]})]}),i.jsx("div",{className:"border-t border-gray-700 pt-4",children:(0,i.jsxs)("div",{className:"flex justify-between text-lg font-black",children:[i.jsx("span",{children:"Total:"}),(0,i.jsxs)("span",{children:[($+I).toFixed(0)," DZD"]})]})})]})]}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white font-black py-4 px-6 rounded transition-colors flex items-center justify-center gap-2 disabled:cursor-not-allowed",children:f?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"PLACING ORDER..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(j.Z,{size:20}),"PLACE ORDER"]})})]})]})]})}),i.jsx(n.default,{}),i.jsx(d.Z,{isOpen:N,onClose:()=>_(!1),orderId:S,orderData:D,redirectCountdown:y})]})}},49074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>a,default:()=>l});let i=(0,s(86843).createProxy)(String.raw`C:\Users\HP\Desktop\Obsidian wear\projectt\src\app\cart\checkout\page.tsx`),{__esModule:a,$$typeof:r}=i,l=i.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[1638,2207,1685,5581],()=>s(40682));module.exports=i})();