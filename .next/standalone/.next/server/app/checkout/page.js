(()=>{var e={};e.id=285,e.ids=[285],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3532:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>c.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>n,routeModule:()=>u,tree:()=>d});var r=t(482),a=t(9108),l=t(2563),c=t.n(l),o=t(8300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4123)),"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\checkout\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2988)),"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4117)),"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,2793)),"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,3521)),"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\not-found.tsx"]}],n=["C:\\Users\\HP\\Desktop\\projectt\\src\\app\\checkout\\page.tsx"],m="/checkout/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9506:(e,s,t)=>{Promise.resolve().then(t.bind(t,8542))},3024:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5674:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(9224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8542:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var r=t(2295),a=t(3729),l=t(2254),c=t(1223),o=t.n(c),i=t(8242),d=t(4192),n=t(5731),m=t(7602),x=t(3883),u=t(3613),h=t(3024),p=t(6278),g=t(5674),b=t(7060),y=t(6138),j=t(8822),f=t(508);function N(){let e=(0,l.useSearchParams)(),s=(0,l.useRouter)(),{getProduct:t,updateProduct:c}=(0,n.useProducts)(),{t:N}=(0,m.useLanguage)(),[v,k]=(0,a.useState)(null),[w,D]=(0,a.useState)({name:"",phone:"",email:"",address:"",city:"",wilaya:"",notes:""}),[P,S]=(0,a.useState)(!1),[E,C]=(0,a.useState)("idle"),[I,q]=(0,a.useState)(""),[A,_]=(0,a.useState)(""),[O,Z]=(0,a.useState)("stopDeskEcommerce"),[z,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let s=e.get("productId"),r=e.get("productData");if(s){if(r)try{let e=JSON.parse(decodeURIComponent(r));k(e)}catch(e){console.error("Error parsing product data from URL:",e),k(t(s)||null)}else k(t(s)||null)}M()},[e,t]);let M=()=>{try{let e=localStorage.getItem("checkoutFormData");if(e){let s=JSON.parse(e);D(e=>({...e,...s}))}let s=localStorage.getItem("checkoutShippingMethod");s&&("stopDeskEcommerce"===s||"domicileEcommerce"===s)&&Z(s)}catch(e){console.error("Error loading saved form data:",e)}},$=e=>{try{localStorage.setItem("checkoutFormData",JSON.stringify(e)),F(!0),setTimeout(()=>F(!1),2e3)}catch(e){console.error("Error saving form data:",e)}},H=()=>{try{localStorage.removeItem("checkoutFormData"),localStorage.removeItem("checkoutShippingMethod")}catch(e){console.error("Error clearing saved form data:",e)}},U=e=>{let{name:s,value:t}=e.target,r={...w,[s]:t};D(r),$(r)},R=async t=>{if(t.preventDefault(),!v){C("error"),q("Product information is missing");return}if(!w.city.trim()){C("error"),q("Please enter your city");return}if(!w.wilaya){C("error"),q("Please select a wilaya for shipping");return}S(!0),C("idle");try{let t=parseInt(e.get("quantity")||"1"),r=e.get("size")||"M",a=e.get("color")||"Black",l=x.rA.find(e=>e.id.toString()===w.wilaya);if(!l)throw Error("Invalid wilaya selection");let o=l[O],i=v.stock?.[r]?.[a]??0;if(i<t){C("error"),q("Selected quantity exceeds available stock. Please adjust."),S(!1);return}let d={customerName:w.name,customerEmail:w.email,customerPhone:w.phone,customerAddress:w.address,customerCity:w.city,wilayaId:l.id,wilayaName:l.name,productId:v.id,selectedSize:r,selectedColor:a,quantity:t,subtotal:v.price*t,shippingCost:o,total:v.price*t+o,shippingType:O,paymentMethod:"cod",notes:w.notes},n=await u.X.createOrder(d,v);if(n.success&&n.orderId){let e={...v.stock};e[r]&&e[r][a]&&(e[r][a]=i-t);let l=Object.values(e).reduce((e,s)=>e+Object.values(s).reduce((e,s)=>e+s,0),0),o={...v,stock:e,inStock:l>0,updatedAt:new Date};c(v.id,o),console.log("\uD83D\uDD04 Stock reduced:",r,a,"from",i,"to",i-t),C("success"),_(n.orderId),q(`Order #${n.orderId} placed successfully! ðŸŽ‰

We'll contact you within 24 hours via WhatsApp.`),H(),setTimeout(()=>{s.push(`/order-success?orderId=${n.orderId}`)},3e3)}else throw Error(n.error||"Failed to place order")}catch(e){console.error("Order submission error:",e),C("error"),q("Failed to place order. Please check your information and try again.")}finally{S(!1)}};if(!v)return(0,r.jsxs)("div",{className:"min-h-screen bg-black",children:[r.jsx(i.default,{}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Product Not Found"}),r.jsx("button",{onClick:()=>s.push("/"),className:"text-white hover:text-gray-300",children:"â† Back to Home"})]})}),r.jsx(d.Z,{})]});let L=parseInt(e.get("quantity")||"1"),T=e.get("size")||"",G=e.get("color")||"",W=v.price*L,J=x.rA.find(e=>e.id.toString()===w.wilaya),B=J?J[O]:0,X=W+B;return(0,r.jsxs)("div",{className:"min-h-screen bg-black",children:[r.jsx(i.default,{}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("button",{onClick:()=>s.back(),className:"flex items-center text-white hover:text-gray-300 mb-8 transition-colors",children:[r.jsx(h.Z,{size:20,className:"mr-2"}),N("checkout.backToProduct")]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:N("checkout.orderSummary")}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(o(),{src:v.image,alt:v.name,width:80,height:80,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-white font-semibold text-lg",children:v.name}),r.jsx("p",{className:"text-gray-400",children:v.category}),(0,r.jsxs)("div",{className:"mt-2 space-y-1",children:[T&&(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[N("checkout.size"),": ",T]}),G&&(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[N("checkout.color"),": ",G]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[N("checkout.quantity"),": ",L]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-white font-semibold",children:[v.price," DZD"]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["x",L]})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-white font-semibold text-lg mb-2 flex items-center",children:[r.jsx(p.Z,{size:20,className:"mr-2"}),N("checkout.deliveryOptions")," ",r.jsx("span",{className:"text-red-400 ml-2",children:"*"})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:N("checkout.selectDeliveryOption")}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:`flex items-center space-x-4 cursor-pointer p-4 rounded-lg border-2 transition-all duration-200 ${"stopDeskEcommerce"===O?"border-blue-500 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/30"}`,children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"radio",name:"shipping",value:"stopDeskEcommerce",checked:"stopDeskEcommerce"===O,onChange:e=>{console.log("Radio clicked:",e.target.value);let s=e.target.value;Z(s),localStorage.setItem("checkoutShippingMethod",s)},className:"w-5 h-5 text-blue-500 accent-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900"}),"stopDeskEcommerce"===O&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"text-white font-semibold text-lg",children:N("checkout.stopDesk")}),"stopDeskEcommerce"===O&&r.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:N("checkout.selected")})]}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:N("checkout.stopDeskDescription")})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"text-white font-bold text-lg",children:J?`${J.stopDeskEcommerce} DZD`:"--"})})]}),(0,r.jsxs)("label",{className:`flex items-center space-x-4 cursor-pointer p-4 rounded-lg border-2 transition-all duration-200 ${"domicileEcommerce"===O?"border-blue-500 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/30"}`,children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"radio",name:"shipping",value:"domicileEcommerce",checked:"domicileEcommerce"===O,onChange:e=>{console.log("Radio clicked:",e.target.value);let s=e.target.value;Z(s),localStorage.setItem("checkoutShippingMethod",s)},className:"w-5 h-5 text-blue-500 accent-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900"}),"domicileEcommerce"===O&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"text-white font-semibold text-lg",children:N("checkout.homeDelivery")}),"domicileEcommerce"===O&&r.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:N("checkout.selected")})]}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:N("checkout.homeDeliveryDescription")})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"text-white font-bold text-lg",children:J?`${J.domicileEcommerce} DZD`:"--"})})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[r.jsx(g.Z,{size:20,className:"mr-2"}),"Mode de Paiement"]}),r.jsx("div",{className:"bg-green-900 border border-green-700 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:"âœ“"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-green-300 font-semibold",children:"Paiement \xe0 la Livraison (COD)"}),r.jsx("p",{className:"text-green-400 text-sm",children:"Payez quand votre commande arrive"})]})]})})]}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:N("checkout.subtotal")}),(0,r.jsxs)("span",{className:"text-white",children:[W.toFixed(0)," DA"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:N("checkout.shipping")}),(0,r.jsxs)("span",{className:"text-white",children:[B.toFixed(0)," DA"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:N("stopDeskEcommerce"===O?"checkout.stopDesk":"checkout.homeDelivery")}),r.jsx("span",{className:"text-gray-500",children:J?J.name:N("checkout.selectWilaya")})]}),r.jsx("div",{className:"border-t border-gray-700 pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-white font-semibold text-lg",children:N("checkout.total")}),(0,r.jsxs)("span",{className:"text-white font-bold text-xl",children:[X.toFixed(0)," DA"]})]})})]})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:N("checkout.deliveryInformation")}),"success"===E&&r.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(b.Z,{className:"w-5 h-5 text-green-400 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-green-300 font-semibold",children:"Order Placed Successfully!"}),r.jsx("p",{className:"text-green-200 text-sm whitespace-pre-line",children:I})]})]})}),"error"===E&&r.jsx("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(y.Z,{className:"w-5 h-5 text-red-400 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-red-300 font-semibold",children:"Order Failed"}),r.jsx("p",{className:"text-red-200 text-sm",children:I})]})]})}),(0,r.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[r.jsx(j.Z,{size:20,className:"mr-2"}),N("checkout.personalInformation")]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.fullName")," *"]}),r.jsx("input",{type:"text",name:"name",value:w.name,onChange:U,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:N("checkout.enterFullName")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.phoneNumber")," *"]}),r.jsx("input",{type:"tel",name:"phone",value:w.phone,onChange:U,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:N("checkout.enterPhoneNumber")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.emailAddress")," (",N("checkout.optional"),")"]}),r.jsx("input",{type:"email",name:"email",value:w.email,onChange:U,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:N("checkout.enterEmailAddress")})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[r.jsx(f.Z,{size:20,className:"mr-2"}),N("domicileEcommerce"===O?"checkout.deliveryAddress":"checkout.pickupLocation")]}),(0,r.jsxs)("div",{className:"space-y-4",children:["domicileEcommerce"===O&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.streetAddress")," *"]}),r.jsx("input",{type:"text",name:"address",value:w.address,onChange:U,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:N("checkout.enterStreetAddress")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.city")," *"]}),r.jsx("input",{type:"text",name:"city",value:w.city,onChange:U,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:N("checkout.enterCity")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[N("checkout.wilaya")," *"]}),(0,r.jsxs)("select",{name:"wilaya",value:w.wilaya,onChange:U,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-white",children:[r.jsx("option",{value:"",children:N("checkout.selectWilaya")}),x.rA.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (#",e.id,")"]},e.id))]})]})]}),"stopDeskEcommerce"===O&&r.jsx("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-blue-300 text-sm",children:"\uD83D\uDCCD You will pick up your order at the nearest stop desk in your selected wilaya"})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:N("checkout.deliveryNotes")}),r.jsx("textarea",{name:"notes",value:w.notes,onChange:U,rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white resize-none",placeholder:N("checkout.deliveryInstructionsPlaceholder")})]})]})]}),r.jsx("button",{type:"submit",disabled:P,className:"w-full bg-white text-black py-4 px-6 rounded-lg font-semibold text-lg hover:bg-gray-200 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:P?N("checkout.placingOrder"):`${N("checkout.placeOrder")} - ${X.toFixed(0)} DA`})]})]})]})]}),r.jsx(d.Z,{})]})}},4123:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>c});let r=(0,t(6843).createProxy)(String.raw`C:\Users\HP\Desktop\projectt\src\app\checkout\page.tsx`),{__esModule:a,$$typeof:l}=r,c=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,158,653,154],()=>t(3532));module.exports=r})();