"use strict";(()=>{var e={};e.id=946,e.ids=[946],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},5760:(e,t,i)=>{i.r(t),i.d(t,{headerHooks:()=>F,originalPathname:()=>S,patchFetch:()=>k,requestAsyncStorage:()=>y,routeModule:()=>w,serverHooks:()=>D,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var r={};i.r(r),i.d(r,{POST:()=>p});var a=i(5419),s=i(9108),o=i(9678),n=i(8070);let d=require("fs");var l=i.n(d),c=i(1017),u=i.n(c);class h{ensureDataDir(){l().existsSync(this.dataDir)||l().mkdirSync(this.dataDir,{recursive:!0})}readJsonFile(e,t){try{if(this.ensureDataDir(),!l().existsSync(e))return t;let i=l().readFileSync(e,"utf8");return JSON.parse(i)}catch(i){return console.error(`Error reading ${e}:`,i),t}}writeJsonFile(e,t){try{this.ensureDataDir(),l().writeFileSync(e,JSON.stringify(t,null,2))}catch(t){throw console.error(`Error writing ${e}:`,t),t}}async getProducts(){return this.readJsonFile(this.productsFile,[]).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}async getProduct(e){return(await this.getProducts()).find(t=>t.id===e)||null}async addProduct(e){let t=await this.getProducts();return t.push(e),this.writeJsonFile(this.productsFile,t),console.log("FileStorage: Added product:",e.id),e}async updateProduct(e,t){let i=await this.getProducts(),r=i.findIndex(t=>t.id===e);return -1===r?null:(i[r]={...i[r],...t},this.writeJsonFile(this.productsFile,i),console.log("FileStorage: Updated product:",e),i[r])}async deleteProduct(e){let t=(await this.getProducts()).filter(t=>t.id!==e);return this.writeJsonFile(this.productsFile,t),console.log("FileStorage: Deleted product:",e),!0}async getOrders(){return this.readJsonFile(this.ordersFile,[]).map(e=>({...e,orderDate:new Date(e.orderDate),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}async getOrder(e){return(await this.getOrders()).find(t=>t.id===e)||null}async addOrder(e){let t=await this.getOrders();return t.push(e),this.writeJsonFile(this.ordersFile,t),console.log("FileStorage: Added order:",e.id),e}async updateOrder(e,t){let i=await this.getOrders(),r=i.findIndex(t=>t.id===e);return -1===r?null:(i[r]={...i[r],...t},this.writeJsonFile(this.ordersFile,i),console.log("FileStorage: Updated order:",e),i[r])}async deleteOrder(e){let t=(await this.getOrders()).filter(t=>t.id!==e);return this.writeJsonFile(this.ordersFile,t),console.log("FileStorage: Deleted order:",e),!0}async getCustomers(){return this.readJsonFile(this.customersFile,[]).map(e=>({...e,firstOrderDate:new Date(e.firstOrderDate),lastOrderDate:new Date(e.lastOrderDate)}))}async addCustomer(e){let t=await this.getCustomers();return t.push(e),this.writeJsonFile(this.customersFile,t),console.log("FileStorage: Added customer:",e.id),e}async getWilayaTariffs(){return this.readJsonFile(this.wilayaFile,[])}async updateWilayaTariffs(e){return this.writeJsonFile(this.wilayaFile,e),console.log("FileStorage: Updated wilaya tariffs"),e}async initializeDefaultData(){try{let e=await this.getWilayaTariffs();0===e.length&&(await this.updateWilayaTariffs([{id:"1",name:"Alger",homeDelivery:400,stopDesk:200,order:1},{id:"2",name:"Oran",homeDelivery:500,stopDesk:300,order:2},{id:"3",name:"Constantine",homeDelivery:600,stopDesk:400,order:3},{id:"4",name:"Annaba",homeDelivery:700,stopDesk:500,order:4},{id:"5",name:"Blida",homeDelivery:450,stopDesk:350,order:5}]),console.log("FileStorage: Initialized default wilaya tariffs"));let t=await this.getProducts();if(0===t.length){for(let e of[{id:"1",name:"Classic T-Shirt",description:"Comfortable cotton t-shirt",price:2500,originalPrice:3e3,image:"/images/tshirt1.jpg",images:["/images/tshirt1.jpg"],stock:{M:{Black:5,White:3,Gray:2},L:{Black:8,White:4,Gray:3},XL:{Black:3,White:3,Gray:2}},category:"T-Shirts",sizes:["M","L","XL"],colors:["Black","White","Gray"],inStock:!0,rating:4.5,reviews:25,sku:"TSH-001",weight:.2,dimensions:{length:50,width:70,height:1},tags:["casual","cotton","basic"],featured:!0,createdAt:new Date,updatedAt:new Date},{id:"2",name:"Hoodie Premium",description:"Warm and cozy hoodie",price:4500,originalPrice:5500,image:"/images/hoodie1.jpg",images:["/images/hoodie1.jpg"],stock:{M:{Black:3,Gray:2},L:{Black:5,Gray:3},XL:{Black:2,Gray:1}},category:"Hoodies",sizes:["M","L","XL"],colors:["Black","Gray"],inStock:!0,rating:4.8,reviews:18,sku:"HOD-001",weight:.6,dimensions:{length:60,width:80,height:2},tags:["warm","casual","premium"],featured:!0,createdAt:new Date,updatedAt:new Date}])await this.addProduct(e);console.log("FileStorage: Initialized default products")}}catch(e){console.error("FileStorage initializeDefaultData error:",e)}}constructor(){this.dataDir=u().join(process.cwd(),"data"),this.productsFile=u().join(this.dataDir,"products.json"),this.ordersFile=u().join(this.dataDir,"orders.json"),this.customersFile=u().join(this.dataDir,"customers.json"),this.wilayaFile=u().join(this.dataDir,"wilaya.json")}}let g=new h;async function p(){try{return await g.initializeDefaultData(),n.Z.json({success:!0,message:"Default data initialized successfully",timestamp:Date.now()})}catch(e){return console.error("Init API error:",e),n.Z.json({success:!1,error:"Failed to initialize default data"},{status:500})}}let w=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/init/route",pathname:"/api/init",filename:"route",bundlePath:"app/api/init/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\init\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:m,serverHooks:D,headerHooks:F,staticGenerationBailout:f}=w,S="/api/init/route";function k(){return(0,o.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[638,206],()=>i(5760));module.exports=r})();