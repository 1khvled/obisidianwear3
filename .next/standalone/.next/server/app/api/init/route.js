"use strict";(()=>{var e={};e.id=6946,e.ids=[6946],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},45418:(e,t,i)=>{i.r(t),i.d(t,{headerHooks:()=>f,originalPathname:()=>k,patchFetch:()=>P,requestAsyncStorage:()=>g,routeModule:()=>w,serverHooks:()=>D,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>F});var r={};i.r(r),i.d(r,{POST:()=>p});var a=i(95419),s=i(69108),n=i(99678),d=i(78070),o=i(57147),c=i.n(o),l=i(71017),u=i.n(l);class h{ensureDataDir(){c().existsSync(this.dataDir)||c().mkdirSync(this.dataDir,{recursive:!0})}readJsonFile(e,t){try{if(this.ensureDataDir(),!c().existsSync(e))return t;let i=c().readFileSync(e,"utf8");return JSON.parse(i)}catch(e){return t}}writeJsonFile(e,t){try{this.ensureDataDir(),c().writeFileSync(e,JSON.stringify(t,null,2))}catch(e){throw e}}async getProducts(){return this.readJsonFile(this.productsFile,[]).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}async getProduct(e){return(await this.getProducts()).find(t=>t.id===e)||null}async addProduct(e){let t=await this.getProducts();return t.push(e),this.writeJsonFile(this.productsFile,t),e}async updateProduct(e,t){let i=await this.getProducts(),r=i.findIndex(t=>t.id===e);return -1===r?null:(i[r]={...i[r],...t},this.writeJsonFile(this.productsFile,i),i[r])}async deleteProduct(e){let t=(await this.getProducts()).filter(t=>t.id!==e);return this.writeJsonFile(this.productsFile,t),!0}async getOrders(){return this.readJsonFile(this.ordersFile,[]).map(e=>({...e,orderDate:new Date(e.orderDate),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}))}async getOrder(e){return(await this.getOrders()).find(t=>t.id===e)||null}async addOrder(e){let t=await this.getOrders();return t.push(e),this.writeJsonFile(this.ordersFile,t),e}async updateOrder(e,t){let i=await this.getOrders(),r=i.findIndex(t=>t.id===e);return -1===r?null:(i[r]={...i[r],...t},this.writeJsonFile(this.ordersFile,i),i[r])}async deleteOrder(e){let t=(await this.getOrders()).filter(t=>t.id!==e);return this.writeJsonFile(this.ordersFile,t),!0}async getCustomers(){return this.readJsonFile(this.customersFile,[]).map(e=>({...e,firstOrderDate:new Date(e.firstOrderDate),lastOrderDate:new Date(e.lastOrderDate)}))}async addCustomer(e){let t=await this.getCustomers();return t.push(e),this.writeJsonFile(this.customersFile,t),e}async getWilayaTariffs(){return this.readJsonFile(this.wilayaFile,[])}async updateWilayaTariffs(e){return this.writeJsonFile(this.wilayaFile,e),e}async initializeDefaultData(){try{let e=await this.getWilayaTariffs();0===e.length&&await this.updateWilayaTariffs([{id:"1",wilaya_id:1,name:"Alger",domicile_ecommerce:400,stop_desk_ecommerce:200,order:1},{id:"2",wilaya_id:2,name:"Oran",domicile_ecommerce:500,stop_desk_ecommerce:300,order:2},{id:"3",wilaya_id:3,name:"Constantine",domicile_ecommerce:600,stop_desk_ecommerce:400,order:3},{id:"4",wilaya_id:4,name:"Annaba",domicile_ecommerce:700,stop_desk_ecommerce:500,order:4},{id:"5",wilaya_id:5,name:"Blida",domicile_ecommerce:450,stop_desk_ecommerce:350,order:5}]);let t=await this.getProducts();if(0===t.length)for(let e of[{id:"1",name:"Classic T-Shirt",description:"Comfortable cotton t-shirt",price:2500,originalPrice:3e3,image:"/images/tshirt1.jpg",images:["/images/tshirt1.jpg"],stock:{M:{Black:5,White:3,Gray:2},L:{Black:8,White:4,Gray:3},XL:{Black:3,White:3,Gray:2}},category:"T-Shirts",sizes:["M","L","XL"],colors:["Black","White","Gray"],inStock:!0,rating:4.5,reviews:25,sku:"TSH-001",weight:.2,dimensions:{length:50,width:70,height:1},tags:["casual","cotton","basic"],featured:!0,createdAt:new Date,updatedAt:new Date},{id:"2",name:"Hoodie Premium",description:"Warm and cozy hoodie",price:4500,originalPrice:5500,image:"/images/hoodie1.jpg",images:["/images/hoodie1.jpg"],stock:{M:{Black:3,Gray:2},L:{Black:5,Gray:3},XL:{Black:2,Gray:1}},category:"Hoodies",sizes:["M","L","XL"],colors:["Black","Gray"],inStock:!0,rating:4.8,reviews:18,sku:"HOD-001",weight:.6,dimensions:{length:60,width:80,height:2},tags:["warm","casual","premium"],featured:!0,createdAt:new Date,updatedAt:new Date}])await this.addProduct(e)}catch(e){}}constructor(){this.dataDir=u().join(process.cwd(),"data"),this.productsFile=u().join(this.dataDir,"products.json"),this.ordersFile=u().join(this.dataDir,"orders.json"),this.customersFile=u().join(this.dataDir,"customers.json"),this.wilayaFile=u().join(this.dataDir,"wilaya.json")}}let m=new h;async function p(){try{return await m.initializeDefaultData(),d.Z.json({success:!0,message:"Default data initialized successfully",timestamp:Date.now()})}catch(e){return d.Z.json({success:!1,error:"Failed to initialize default data"},{status:500})}}let w=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/init/route",pathname:"/api/init",filename:"route",bundlePath:"app/api/init/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\api\\init\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:y,serverHooks:D,headerHooks:f,staticGenerationBailout:F}=w,k="/api/init/route";function P(){return(0,n.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:y})}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[1638,6206],()=>i(45418));module.exports=r})();