"use strict";(()=>{var e={};e.id=3898,e.ids=[3898],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},95113:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>m,originalPathname:()=>P,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>D});var o={};t.r(o),t.d(o,{DELETE:()=>l,GET:()=>c,PUT:()=>d});var s=t(95419),u=t(69108),a=t(99678),i=t(78070),n=t(4750);async function c(e,{params:r}){try{let e=r.id;if(!e)return i.Z.json({error:"Product ID is required"},{status:400});console.log("\uD83D\uDD0D Fetching product from database:",e);let{data:t,error:o}=await n.OQ.from("products").select("*").eq("id",e).single();if(o)return console.error("❌ Error fetching product:",o),i.Z.json({error:"Product not found"},{status:404});if(!t)return i.Z.json({error:"Product not found"},{status:404});console.log("\uD83D\uDD0D Fetching REAL-TIME inventory data for product:",e);let{data:s,error:u}=await n.OQ.from("inventory").select("size, color, available_quantity").eq("product_id",e);if(u)return console.error("❌ Error fetching inventory:",u),console.log("\uD83D\uDCE6 Using product stock as fallback:",t.stock),i.Z.json(t);let a={};s&&s.length>0&&s.forEach(e=>{a[e.size]||(a[e.size]={}),a[e.size][e.color]=e.available_quantity}),console.log("✅ REAL-TIME inventory data:",a);let c={...t,stock:a};return i.Z.json(c)}catch(e){return console.error("❌ Error in product API:",e),i.Z.json({error:"Internal server error"},{status:500})}}async function d(e,{params:r}){try{let t=r.id,o=await e.json();if(!t)return i.Z.json({error:"Product ID is required"},{status:400});console.log("\uD83D\uDD27 Updating product:",t,{name:o.name,customSizeChart:o.customSizeChart,useCustomSizeChart:o.useCustomSizeChart,sizeChartCategory:o.sizeChartCategory});let{data:s,error:u}=await n.OQ.from("products").update({name:o.name,description:o.description,price:o.price,category:o.category,image:o.image,images:o.images,sizes:o.sizes,colors:o.colors,stock:o.stock,in_stock:o.inStock,rating:o.rating,reviews:o.reviews,sku:o.sku,weight:o.weight,dimensions:o.dimensions,tags:o.tags,featured:o.featured,custom_size_chart:o.customSizeChart,use_custom_size_chart:o.useCustomSizeChart,size_chart_category:o.sizeChartCategory,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(u)return console.error("❌ Error updating product:",u),i.Z.json({error:"Failed to update product"},{status:500});if(!s)return i.Z.json({error:"Product not found"},{status:404});return console.log("✅ Product updated successfully:",s.id),i.Z.json({success:!0,data:s,message:"Product updated successfully"})}catch(e){return console.error("❌ Error in product update API:",e),i.Z.json({error:"Internal server error"},{status:500})}}async function l(e,{params:r}){try{let e=r.id;if(!e)return i.Z.json({error:"Product ID is required"},{status:400});if(console.log("\uD83D\uDD27 Products API: DELETE request for product ID:",e),await (0,n.Ir)(e))return console.log("✅ Products API: Product deleted successfully"),i.Z.json({success:!0,message:"Product deleted successfully",deletedId:e});return console.error("❌ Products API: Failed to delete product"),i.Z.json({success:!1,error:"Failed to delete product"},{status:500})}catch(e){return console.error("❌ Products API: DELETE error:",e),i.Z.json({success:!1,error:"Failed to delete product",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:m,staticGenerationBailout:D}=p,P="/api/products/[id]/route";function y(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206,2409,4750],()=>t(95113));module.exports=o})();