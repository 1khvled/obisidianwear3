"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},5113:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>q,originalPathname:()=>T,patchFetch:()=>x,requestAsyncStorage:()=>w,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>P,staticGenerationBailout:()=>f});var r={};s.r(r),s.d(r,{DELETE:()=>m,GET:()=>l,PUT:()=>p,runtime:()=>d});var o=s(5419),a=s(9108),u=s(9678),n=s(8070),i=s(4750),c=s(4627);let d="nodejs";async function l(e,{params:t}){try{let{id:e}=t,s=await (0,i.wv)(e);if(!s)return n.Z.json({success:!1,error:"Product not found"},{status:404});return console.log("Products API: GET single product:",e),n.Z.json({success:!0,data:s,timestamp:Date.now()})}catch(e){return console.error("Products API: GET single error:",e),n.Z.json({success:!1,error:"Failed to fetch product"},{status:500})}}let p=(0,c.QO)(async(e,{params:t})=>{try{let{id:s}=t,r=await e.json(),o=await (0,i.nM)(s,{...r,updatedAt:new Date});if(!o)return n.Z.json({success:!1,error:"Product not found"},{status:404});return console.log("Products API: PUT request - updated product:",s),n.Z.json({success:!0,data:o,message:"Product updated successfully",timestamp:Date.now()})}catch(e){return console.error("Products API: PUT error:",e),n.Z.json({success:!1,error:"Failed to update product"},{status:500})}}),m=(0,c.QO)(async(e,{params:t})=>{try{let{id:e}=t,s=await (0,i.wv)(e);if(!s)return n.Z.json({success:!1,error:"Product not found"},{status:404});if(!await (0,i.Ir)(e))return n.Z.json({success:!1,error:"Failed to delete product"},{status:500});return console.log("Products API: DELETE request - deleted product:",e),n.Z.json({success:!0,data:s,message:"Product deleted successfully",timestamp:Date.now()})}catch(e){return console.error("Products API: DELETE error:",e),n.Z.json({success:!1,error:"Failed to delete product"},{status:500})}}),h=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:w,staticGenerationAsyncStorage:P,serverHooks:g,headerHooks:q,staticGenerationBailout:f}=h,T="/api/products/[id]/route";function x(){return(0,u.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:P})}},4627:(e,t,s)=>{s.d(t,{QO:()=>u});var r=s(8070);class o{constructor(e=6e4,t=100){this.requests=new Map,this.windowMs=e,this.maxRequests=t}isAllowed(e){let t=Date.now(),s=this.requests.get(e);return!s||t>s.resetTime?(this.requests.set(e,{count:1,resetTime:t+this.windowMs}),{allowed:!0,remaining:this.maxRequests-1,resetTime:t+this.windowMs}):s.count>=this.maxRequests?{allowed:!1,remaining:0,resetTime:s.resetTime}:(s.count++,this.requests.set(e,s),{allowed:!0,remaining:this.maxRequests-s.count,resetTime:s.resetTime})}cleanup(){let e=Date.now();this.requests.forEach((t,s)=>{e>t.resetTime&&this.requests.delete(s)})}}let a=new o(6e4,100);function u(e){return async(t,...s)=>{let o=new URL(t.url);if(["/api/maintenance","/api/test-db","/api/test-supabase"].some(e=>o.pathname.startsWith(e)))return e(t,...s);let u=function(e,t){let s=t.isAllowed(e);.01>Math.random()&&t.cleanup();let r={"X-RateLimit-Limit":t.maxRequests.toString(),"X-RateLimit-Remaining":s.remaining.toString(),"X-RateLimit-Reset":new Date(s.resetTime).toISOString()};return{allowed:s.allowed,headers:r}}(t.ip||t.headers.get("x-forwarded-for")||"unknown",a);return u.allowed?!function(e){let t=e.headers.get("authorization");return!!(t&&t.startsWith("Bearer "))&&t.substring(7)===(process.env.API_AUTH_TOKEN||"obsidian-api-token-2025")}(t)?r.Z.json({success:!1,error:"Unauthorized",message:"Authentication required"},{status:401,headers:u.headers}):e(t,...s):r.Z.json({success:!1,error:"Too Many Requests",message:"Rate limit exceeded. Please try again later."},{status:429,headers:u.headers})}}new o(3e5,5)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,206,290,750],()=>s(5113));module.exports=r})();