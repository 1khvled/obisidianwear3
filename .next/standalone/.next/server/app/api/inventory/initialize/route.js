"use strict";(()=>{var e={};e.id=8580,e.ids=[8580],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},83402:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>I,patchFetch:()=>z,requestAsyncStorage:()=>v,routeModule:()=>y,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var o={};t.r(o),t.d(o,{POST:()=>p});var i=t(95419),n=t(69108),s=t(99678),a=t(78070),c=t(32409);let l="https://twlegtqcyydgjkycxngw.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0";if(!l||!u)throw Error("Missing Supabase environment variables");let d=(0,c.eI)(l,u);async function p(){try{console.log("\uD83D\uDD04 Initializing inventory from products...");let{data:e,error:r}=await d.from("products").select("id, name, image, price, sizes, colors, stock").order("name");if(r)return console.error("âŒ Error fetching products:",r),a.Z.json({success:!1,error:"Failed to fetch products"},{status:500});if(!e||0===e.length)return a.Z.json({success:!1,error:"No products found to initialize inventory"},{status:404});console.log(`ðŸ“¦ Found ${e.length} products to process`);let t=[];for(let r of e){let e=r.sizes||[],o=r.colors||[],i=r.stock||{};for(let n of e)for(let e of o){let o=i[n]?.[e]||0;t.push({id:`INV-${r.id}-${n}-${e}`,product_id:r.id,size:n,color:e,quantity:o,reserved_quantity:0,available_quantity:o,min_stock_level:5,max_stock_level:100})}}if(console.log(`ðŸ“ Created ${t.length} inventory records`),!(t.length>0))return a.Z.json({success:!1,error:"No inventory records to create"},{status:400});{let{error:r}=await d.from("inventory").delete().neq("id","dummy");r&&console.error("âŒ Error clearing existing inventory:",r);let{data:o,error:i}=await d.from("inventory").upsert(t).select();if(i)return console.error("âŒ Error inserting inventory records:",i),a.Z.json({success:!1,error:"Failed to insert inventory records"},{status:500});return console.log(`âœ… Successfully initialized ${o?.length||t.length} inventory records`),a.Z.json({success:!0,data:{productsProcessed:e.length,inventoryRecordsCreated:o?.length||t.length,message:"Inventory initialized successfully"},timestamp:Date.now()})}}catch(e){return console.error("âŒ Inventory initialization error:",e),a.Z.json({success:!1,error:"Failed to initialize inventory"},{status:500})}}let y=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/inventory/initialize/route",pathname:"/api/inventory/initialize",filename:"route",bundlePath:"app/api/inventory/initialize/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\Obsidian wear\\projectt\\src\\app\\api\\inventory\\initialize\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:m,headerHooks:h,staticGenerationBailout:f}=y,I="/api/inventory/initialize/route";function z(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206,2409],()=>t(83402));module.exports=o})();