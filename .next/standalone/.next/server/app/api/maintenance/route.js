"use strict";(()=>{var e={};e.id=986,e.ids=[986],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},47711:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>g,originalPathname:()=>q,patchFetch:()=>T,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>w});var r={};s.r(r),s.d(r,{GET:()=>c,POST:()=>l});var n=s(95419),a=s(69108),i=s(99678),o=s(78070),u=s(4750);async function c(){try{console.log("API GET maintenance settings - environment check:",{hasSupabaseUrl:!0,hasSupabaseKey:!0,supabaseUrl:"https://twlegtqcyydgjkycxngw.supabase.co",supabaseKey:"Set"});let e=await (0,u.Qu)();return o.Z.json(e)}catch(e){return console.error("API GET maintenance settings error:",e),o.Z.json({error:"Failed to fetch maintenance settings",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=(0,s(4627).QO)(async e=>{try{let{is_maintenance_mode:t,drop_date:s,maintenance_message:r}=await e.json();console.log("API POST maintenance settings request:",{is_maintenance_mode:t,drop_date:s,maintenance_message:r});let n=await (0,u.Qc)({is_maintenance_mode:t,drop_date:s,maintenance_message:r});return console.log("API POST maintenance settings result:",n),o.Z.json(n)}catch(e){return console.error("API POST maintenance settings error:",e),o.Z.json({error:"Failed to update maintenance settings",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}),m=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/maintenance/route",pathname:"/api/maintenance",filename:"route",bundlePath:"app/api/maintenance/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\projectt\\src\\app\\api\\maintenance\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:h,headerHooks:g,staticGenerationBailout:w}=m,q="/api/maintenance/route";function T(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}},4627:(e,t,s)=>{s.d(t,{QO:()=>i});var r=s(78070);class n{constructor(e=6e4,t=100){this.requests=new Map,this.windowMs=e,this.maxRequests=t}isAllowed(e){let t=Date.now(),s=this.requests.get(e);return!s||t>s.resetTime?(this.requests.set(e,{count:1,resetTime:t+this.windowMs}),{allowed:!0,remaining:this.maxRequests-1,resetTime:t+this.windowMs}):s.count>=this.maxRequests?{allowed:!1,remaining:0,resetTime:s.resetTime}:(s.count++,this.requests.set(e,s),{allowed:!0,remaining:this.maxRequests-s.count,resetTime:s.resetTime})}cleanup(){let e=Date.now();this.requests.forEach((t,s)=>{e>t.resetTime&&this.requests.delete(s)})}}let a=new n(6e4,100);function i(e){return async(t,...s)=>{let n=new URL(t.url);if(["/api/maintenance","/api/test-db","/api/test-supabase"].some(e=>n.pathname.startsWith(e)))return e(t,...s);let i=function(e,t){let s=t.isAllowed(e);.01>Math.random()&&t.cleanup();let r={"X-RateLimit-Limit":t.maxRequests.toString(),"X-RateLimit-Remaining":s.remaining.toString(),"X-RateLimit-Reset":new Date(s.resetTime).toISOString()};return{allowed:s.allowed,headers:r}}(t.ip||t.headers.get("x-forwarded-for")||"unknown",a);return i.allowed?!function(e){let t=e.headers.get("authorization");return!!(t&&t.startsWith("Bearer "))&&t.substring(7)===(process.env.NEXT_PUBLIC_API_AUTH_TOKEN||"obsidian-api-token-2025")}(t)?r.Z.json({success:!1,error:"Unauthorized",message:"Authentication required"},{status:401,headers:i.headers}):e(t,...s):r.Z.json({success:!1,error:"Too Many Requests",message:"Rate limit exceeded. Please try again later."},{status:429,headers:i.headers})}}new n(3e5,5)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,6206,2409,4750],()=>s(47711));module.exports=r})();