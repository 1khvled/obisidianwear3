"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{5454:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var o=r(7437),a=r(6712),n=r(2549),i=r(8004),s=r(2265),l=r(1396),c=r.n(l),d=r(9298),h=r(2095),u=r(8956);function m(){let{language:e,setLanguage:t}=(0,d.useLanguage)();return(0,o.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-800 rounded-lg px-3 py-2",children:[(0,o.jsx)(u.Z,{size:16,className:"text-white"}),(0,o.jsx)("button",{onClick:()=>{let r="en"===e?"fr":"en";console.log("\uD83C\uDF0D Language switching from",e,"to",r),t(r)},className:"text-white hover:text-gray-300 transition-colors font-medium text-sm min-w-[32px] touch-target",type:"button",children:"en"===e?"FR":"EN"}),(0,o.jsx)("span",{className:"text-gray-400 text-xs",children:"|"}),(0,o.jsx)("button",{onClick:()=>{console.log("\uD83C\uDF0D Setting to EN"),t("en")},className:"text-xs px-2 py-1 rounded transition-colors touch-target ".concat("en"===e?"bg-white text-black":"text-gray-400 hover:text-white"),type:"button",children:"EN"}),(0,o.jsx)("button",{onClick:()=>{console.log("\uD83C\uDF0D Setting to FR"),t("fr")},className:"text-xs px-2 py-1 rounded transition-colors touch-target ".concat("fr"===e?"bg-white text-black":"text-gray-400 hover:text-white"),type:"button",children:"FR"})]})}var x=r(5343);function g(){let[e,t]=(0,s.useState)(!1),{t:r}=(0,d.useLanguage)(),{getTotalItems:l}=(0,h.useCart)();return(0,o.jsx)("header",{className:"bg-black/95 backdrop-blur-md border-b border-gray-800/50 sticky top-0 z-50",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto container-padding",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16 md:h-20",children:[(0,o.jsx)(x.default,{}),(0,o.jsxs)("nav",{className:"hidden lg:flex items-center space-x-8 xl:space-x-12",children:[(0,o.jsx)(c(),{href:"/",className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium",onClick:()=>{console.log("\uD83C\uDFE0 Home navigation clicked"),window.location.href="/"},children:r("nav.home")}),(0,o.jsx)(c(),{href:"/#products",className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium",children:r("nav.collection")}),(0,o.jsxs)(c(),{href:"/made-to-order",className:"bg-gradient-to-r from-white to-gray-100 text-black hover:from-gray-100 hover:to-white px-4 py-2 rounded-lg font-bold text-sm xl:text-base transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-white/20 border border-white/30",children:["✨ ",r("nav.madeToOrder")," ✨"]}),(0,o.jsx)(c(),{href:"/cart",className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium",children:"Cart"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,o.jsx)("div",{className:"hidden sm:block",children:(0,o.jsx)(m,{})}),(0,o.jsxs)("div",{className:"flex flex-col items-end",children:[(0,o.jsxs)(c(),{href:"/cart",className:"relative touch-target text-white hover:text-gray-300 transition-colors rounded-lg p-1",children:[(0,o.jsx)(a.Z,{size:18,className:"sm:w-5 sm:h-5 md:w-6 md:h-6"}),(0,o.jsx)("span",{className:"absolute -top-1 -right-1 bg-white text-black text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-semibold text-[10px] sm:text-xs",children:l()})]}),(0,o.jsx)("div",{className:"hidden sm:block mt-1"})]}),(0,o.jsx)("button",{className:"lg:hidden touch-target text-white hover:text-gray-300 transition-colors rounded-lg p-1",onClick:()=>t(!e),children:e?(0,o.jsx)(n.Z,{size:18,className:"sm:w-5 sm:h-5"}):(0,o.jsx)(i.Z,{size:18,className:"sm:w-5 sm:h-5"})})]})]}),e&&(0,o.jsx)("div",{className:"lg:hidden border-t border-gray-800/50 py-4 animate-in slide-in-from-top-2 duration-200",children:(0,o.jsxs)("nav",{className:"flex flex-col space-y-2",children:[(0,o.jsx)("button",{className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-4 rounded-lg font-medium text-left touch-target",onClick:()=>{console.log("\uD83C\uDFE0 Mobile Home clicked"),t(!1),window.location.href="/"},children:r("nav.home")}),(0,o.jsx)(c(),{href:"/#products",className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-4 rounded-lg font-medium text-left block touch-target",onClick:()=>t(!1),children:r("nav.collection")}),(0,o.jsxs)(c(),{href:"/made-to-order",className:"bg-gradient-to-r from-white to-gray-100 text-black hover:from-gray-100 hover:to-white font-bold py-3 px-4 rounded-lg text-left block touch-target transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-white/20 border border-white/30",onClick:()=>t(!1),children:["✨ ",r("nav.madeToOrder")," ✨"]}),(0,o.jsx)(c(),{href:"/cart",className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-4 rounded-lg font-medium text-left block touch-target",onClick:()=>t(!1),children:"Cart"}),(0,o.jsx)("div",{className:"sm:hidden pt-2 mt-2 border-t border-gray-800/50",children:(0,o.jsx)(m,{})})]})})]})})}},5343:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var o=r(7437),a=r(6691),n=r.n(a),i=r(1396),s=r.n(i);function l(e){let{className:t="",showText:r=!0,size:a="md"}=e,i={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,o.jsxs)(s(),{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity ".concat(t),children:[(0,o.jsx)("div",{className:"".concat(i[a]," relative"),children:(0,o.jsx)(n(),{src:"/Logo Obsidian Wear sur fond noir.png",alt:"OBSIDIAN WEAR",width:"sm"===a?32:"md"===a?48:64,height:"sm"===a?32:"md"===a?48:64,className:"".concat(i[a]," object-contain"),priority:!0})}),r&&(0,o.jsx)("span",{className:"".concat({sm:"text-lg",md:"text-2xl",lg:"text-3xl"}[a]," font-bold font-poppins text-white tracking-wider"),children:"OBSIDIAN WEAR"})]})}},2095:function(e,t,r){r.r(t),r.d(t,{CartProvider:function(){return i},useCart:function(){return s}});var o=r(7437),a=r(2265);let n=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("obsidian-cart");if(e){let t=JSON.parse(e);if(Array.isArray(t)){let e=t.map(e=>({...e,addedAt:e.addedAt||new Date().toISOString()}));i(e),console.log("Cart loaded from localStorage:",e.length,"items")}else console.warn("Invalid cart data structure, clearing cart"),localStorage.removeItem("obsidian-cart")}d(null)}catch(e){console.error("Error loading cart from localStorage:",e),d("Failed to load cart data"),localStorage.removeItem("obsidian-cart")}finally{l(!0)}})()},[]),(0,a.useEffect)(()=>{if(s)try{localStorage.setItem("obsidian-cart",JSON.stringify(r)),console.log("Cart saved to localStorage:",r.length,"items"),d(null)}catch(e){console.error("Error saving cart to localStorage:",e),d("Failed to save cart data")}},[r,s]);let h=async(e,t,r,o)=>{console.log("CartContext: addToCart called with:",{product:e,selectedSize:t,selectedColor:r,quantity:o});let a="".concat(e.id,"-").concat(t,"-").concat(r);try{var n,s;let l=(null===(s=e.stock)||void 0===s?void 0:null===(n=s[t])||void 0===n?void 0:n[r])||0;if(e.stock){if(0===l){alert("❌ Size ".concat(t," in ").concat(r," is OUT OF STOCK!"));return}if(o>l){alert("❌ Not enough stock available in ".concat(t," ").concat(r,"!"));return}}else if(!e.inStock){alert("❌ This product is out of stock!");return}let c=await fetch("/api/inventory/reserve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,size:t,color:r,quantity:o})});if(!c.ok){let e=await c.json();alert("❌ Inventory reservation failed: ".concat(e.error||"Unknown error"));return}i(n=>{let i=n.find(e=>e.id===a);if(i){let e=i.quantity+o;return n.map(t=>t.id===a?{...t,quantity:e}:t)}{let i={id:a,productId:e.id,name:e.name,price:e.price,image:e.image,selectedSize:t,selectedColor:r,quantity:o,addedAt:new Date().toISOString()};return[...n,i]}}),console.log("✅ Item added to cart and inventory reserved")}catch(e){console.error("❌ Error adding to cart:",e),alert("❌ Failed to add item to cart. Please try again.")}},u=async e=>{let t=r.find(t=>t.id===e);if(t)try{(await fetch("/api/inventory/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t.productId,size:t.selectedSize,color:t.selectedColor,quantity:t.quantity})})).ok||console.error("❌ Failed to restore inventory, but removing from cart anyway"),i(t=>t.filter(t=>t.id!==e)),console.log("✅ Item removed from cart and inventory restored")}catch(t){console.error("❌ Error removing from cart:",t),i(t=>t.filter(t=>t.id!==e))}},m=async(e,t)=>{if(t<=0){await u(e);return}let o=r.find(t=>t.id===e);if(!o)return;let a=t-o.quantity;if(0!==a)try{if(a>0){let e=await fetch("/api/inventory/reserve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:o.productId,size:o.selectedSize,color:o.selectedColor,quantity:a})});if(!e.ok){let t=await e.json();alert("❌ Cannot increase quantity: ".concat(t.error||"Unknown error"));return}}else(await fetch("/api/inventory/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:o.productId,size:o.selectedSize,color:o.selectedColor,quantity:Math.abs(a)})})).ok||console.error("❌ Failed to restore inventory, but updating quantity anyway");i(r=>r.map(r=>r.id===e?{...r,quantity:t}:r)),console.log("✅ Quantity updated and inventory synced")}catch(e){console.error("❌ Error updating quantity:",e),alert("❌ Failed to update quantity. Please try again.")}},x=async()=>{for(let e of r)try{await fetch("/api/inventory/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.productId,size:e.selectedSize,color:e.selectedColor,quantity:e.quantity})})}catch(t){console.error("❌ Failed to restore inventory for item:",e.id,t)}i([]),localStorage.removeItem("obsidian-cart"),console.log("✅ Cart cleared and all inventory restored")};return(0,o.jsx)(n.Provider,{value:{items:r,addToCart:h,removeFromCart:u,updateQuantity:m,clearCart:x,getTotalItems:()=>r.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>r.reduce((e,t)=>e+t.price*t.quantity,0),isCartLoaded:s,cartError:c},children:t})},s=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}}]);