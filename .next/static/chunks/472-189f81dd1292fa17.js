"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{7023:function(e,r,o){o.r(r),o.d(r,{ProductProvider:function(){return s},useProducts:function(){return d}});var t=o(7437),c=o(2265),m=o(3325),i=o(3917);let a=(0,c.createContext)(void 0),s=e=>{let{children:r}=e,[o,s]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{try{console.log("ProductContext: Loading products...");let e=await i.K.getProducts();if(e.length>0)console.log("ProductContext: Using cached products:",e.length),s(e);else{console.log("ProductContext: No cache, fetching from server...");let e=await m.k.getProducts();console.log("ProductContext: Loaded products from server:",e.length),s(e),i.K.setCache({products:e})}}catch(e){console.error("ProductContext: Error loading products:",e),0===o.length&&s([])}})();let e=e=>{let r=e.detail;r&&r.products&&s(r.products)},r=e=>{let r=e.detail;r&&r.products&&s(r.products)};return window.addEventListener("data-updated",e),window.addEventListener("data-sync",r),()=>{window.removeEventListener("data-updated",e),window.removeEventListener("data-sync",r)}},[]);let d=async e=>{let r=await m.k.addProduct(e);r&&s(e=>[...e,r])},n=async(e,r)=>{let o=r.stock?Object.values(r.stock).reduce((e,r)=>e+Object.values(r).reduce((e,r)=>e+r,0),0):0,t={...r,inStock:o>0};console.log("ProductContext: Updating product",e,t.name,"Stock:",o,"InStock:",t.inStock);let c=await m.k.updateProduct(e,t);c&&s(r=>r.map(r=>r.id===e?c:r))},l=async e=>{try{console.log("ProductContext: Deleting product:",e),await m.k.deleteProduct(e)?(console.log("ProductContext: Product deleted successfully:",e),s(r=>r.filter(r=>r.id!==e))):console.error("ProductContext: Failed to delete product:",e)}catch(e){console.error("ProductContext: Error deleting product:",e)}},u=async()=>{if(0===o.length){let e=[{id:"1",name:"OBSIDIAN HOODIE BLACK",price:4500,originalPrice:5e3,image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=500&h=600&fit=crop",description:"Premium black hoodie with embroidered OBSIDIAN logo. Made from 100% cotton for ultimate comfort.",category:"Hoodies",sizes:["S","M","L","XL"],colors:["Black"],inStock:!0,rating:4.9,reviews:127,stock:{S:{Black:15},M:{Black:20},L:{Black:18},XL:{Black:12}},sku:"OBS-HOODIE-001",weight:.8,tags:["hoodie","black","premium"],featured:!0,createdAt:new Date("2025-01-01"),updatedAt:new Date("2025-01-15")},{id:"2",name:"OBSIDIAN TEE WHITE",price:2500,originalPrice:3e3,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500&h=600&fit=crop",description:"Premium white t-shirt with subtle OBSIDIAN branding. 100% cotton oversized fit.",category:"T-Shirts",sizes:["S","M","L","XL"],colors:["White","Black"],inStock:!0,rating:4.8,reviews:89,stock:{S:{White:25,Black:20},M:{White:30,Black:25},L:{White:22,Black:18},XL:{White:18,Black:15}},sku:"OBS-TEE-002",weight:.3,tags:["tshirt","white","black"],featured:!1,createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-01-10")}];for(let r of e){let{id:e,...o}=r;await m.k.addProduct(o)}s(e)}};return(0,t.jsx)(a.Provider,{value:{products:o,setProducts:s,addProduct:d,updateProduct:n,deleteProduct:l,getProduct:e=>o.find(r=>r.id===e),initializeDefaultProducts:u},children:r})},d=()=>{let e=(0,c.useContext)(a);if(void 0===e)throw Error("useProducts must be used within a ProductProvider");return e}},5109:function(e,r,o){o.d(r,{rA:function(){return t}});let t=[{id:1,name:"Adrar",nameAr:"أدرار",stopDeskEcommerce:800,domicileEcommerce:1200},{id:2,name:"Chlef",nameAr:"الشلف",stopDeskEcommerce:300,domicileEcommerce:500},{id:3,name:"Laghouat",nameAr:"الأغواط",stopDeskEcommerce:500,domicileEcommerce:800},{id:4,name:"Oum El Bouaghi",nameAr:"أم البواقي",stopDeskEcommerce:450,domicileEcommerce:700},{id:5,name:"Batna",nameAr:"باتنة",stopDeskEcommerce:500,domicileEcommerce:800},{id:6,name:"B\xe9ja\xefa",nameAr:"بجاية",stopDeskEcommerce:400,domicileEcommerce:600},{id:7,name:"Biskra",nameAr:"بسكرة",stopDeskEcommerce:600,domicileEcommerce:900},{id:8,name:"B\xe9char",nameAr:"بشار",stopDeskEcommerce:1e3,domicileEcommerce:1500},{id:9,name:"Blida",nameAr:"البليدة",stopDeskEcommerce:250,domicileEcommerce:400},{id:10,name:"Bouira",nameAr:"البويرة",stopDeskEcommerce:300,domicileEcommerce:500},{id:11,name:"Tamanrasset",nameAr:"تمنراست",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:12,name:"T\xe9bessa",nameAr:"تبسة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:13,name:"Tlemcen",nameAr:"تلمسان",stopDeskEcommerce:450,domicileEcommerce:700},{id:14,name:"Tiaret",nameAr:"تيارت",stopDeskEcommerce:400,domicileEcommerce:600},{id:15,name:"Tizi Ouzou",nameAr:"تيزي وزو",stopDeskEcommerce:300,domicileEcommerce:450},{id:16,name:"Alger",nameAr:"الجزائر",stopDeskEcommerce:200,domicileEcommerce:300},{id:17,name:"Djelfa",nameAr:"الجلفة",stopDeskEcommerce:450,domicileEcommerce:700},{id:18,name:"Jijel",nameAr:"جيجل",stopDeskEcommerce:350,domicileEcommerce:550},{id:19,name:"S\xe9tif",nameAr:"سطيف",stopDeskEcommerce:400,domicileEcommerce:600},{id:20,name:"Sa\xefda",nameAr:"سعيدة",stopDeskEcommerce:400,domicileEcommerce:600},{id:21,name:"Skikda",nameAr:"سكيكدة",stopDeskEcommerce:400,domicileEcommerce:650},{id:22,name:"Sidi Bel Abb\xe8s",nameAr:"سيدي بلعباس",stopDeskEcommerce:450,domicileEcommerce:700},{id:23,name:"Annaba",nameAr:"عنابة",stopDeskEcommerce:450,domicileEcommerce:700},{id:24,name:"Guelma",nameAr:"قالمة",stopDeskEcommerce:400,domicileEcommerce:650},{id:25,name:"Constantine",nameAr:"قسنطينة",stopDeskEcommerce:400,domicileEcommerce:600},{id:26,name:"M\xe9d\xe9a",nameAr:"المدية",stopDeskEcommerce:300,domicileEcommerce:500},{id:27,name:"Mostaganem",nameAr:"مستغانم",stopDeskEcommerce:400,domicileEcommerce:600},{id:28,name:"M'Sila",nameAr:"المسيلة",stopDeskEcommerce:450,domicileEcommerce:700},{id:29,name:"Mascara",nameAr:"معسكر",stopDeskEcommerce:400,domicileEcommerce:650},{id:30,name:"Ouargla",nameAr:"ورقلة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:31,name:"Oran",nameAr:"وهران",stopDeskEcommerce:250,domicileEcommerce:400},{id:32,name:"El Bayadh",nameAr:"البيض",stopDeskEcommerce:500,domicileEcommerce:800},{id:33,name:"Illizi",nameAr:"إليزي",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:34,name:"Bordj Bou Arr\xe9ridj",nameAr:"برج بوعريريج",stopDeskEcommerce:400,domicileEcommerce:600},{id:35,name:"Boumerd\xe8s",nameAr:"بومرداس",stopDeskEcommerce:300,domicileEcommerce:450},{id:36,name:"El Tarf",nameAr:"الطارف",stopDeskEcommerce:450,domicileEcommerce:700},{id:37,name:"Tindouf",nameAr:"تندوف",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:38,name:"Tissemsilt",nameAr:"تيسمسيلت",stopDeskEcommerce:350,domicileEcommerce:550},{id:39,name:"El Oued",nameAr:"الوادي",stopDeskEcommerce:600,domicileEcommerce:900},{id:40,name:"Khenchela",nameAr:"خنشلة",stopDeskEcommerce:500,domicileEcommerce:800},{id:41,name:"Souk Ahras",nameAr:"سوق أهراس",stopDeskEcommerce:450,domicileEcommerce:700},{id:42,name:"Tipaza",nameAr:"تيبازة",stopDeskEcommerce:250,domicileEcommerce:400},{id:43,name:"Mila",nameAr:"ميلة",stopDeskEcommerce:400,domicileEcommerce:600},{id:44,name:"A\xefn Defla",nameAr:"عين الدفلى",stopDeskEcommerce:300,domicileEcommerce:500},{id:45,name:"Na\xe2ma",nameAr:"النعامة",stopDeskEcommerce:500,domicileEcommerce:800},{id:46,name:"A\xefn T\xe9mouchent",nameAr:"عين تيموشنت",stopDeskEcommerce:400,domicileEcommerce:650},{id:47,name:"Gharda\xefa",nameAr:"غرداية",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:48,name:"Relizane",nameAr:"غليزان",stopDeskEcommerce:400,domicileEcommerce:600},{id:49,name:"Timimoun",nameAr:"تيميمون",stopDeskEcommerce:900,domicileEcommerce:1400},{id:50,name:"Bordj Badji Mokhtar",nameAr:"برج باجي مختار",stopDeskEcommerce:1100,domicileEcommerce:1600},{id:51,name:"Ouled Djellal",nameAr:"أولاد جلال",stopDeskEcommerce:700,domicileEcommerce:1100},{id:52,name:"Beni Abbes",nameAr:"بني عباس",stopDeskEcommerce:850,domicileEcommerce:1300},{id:53,name:"In Salah",nameAr:"عين صالح",stopDeskEcommerce:1150,domicileEcommerce:1700},{id:54,name:"In Guezzam",nameAr:"عين قزام",stopDeskEcommerce:1250,domicileEcommerce:1900},{id:55,name:"Touggourt",nameAr:"تقرت",stopDeskEcommerce:600,domicileEcommerce:950},{id:56,name:"Djanet",nameAr:"جانت",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:57,name:"El M'Ghair",nameAr:"المغير",stopDeskEcommerce:800,domicileEcommerce:1200},{id:58,name:"El Meniaa",nameAr:"المنيعة",stopDeskEcommerce:900,domicileEcommerce:1400}].sort((e,r)=>e.id-r.id)},4401:function(e,r,o){o.d(r,{X:function(){return m}});var t=o(3325);class c{async initializeOrders(){await this.loadOrders()}async loadOrders(){this.orders=await t.k.getOrders()}setupDataSync(){window.addEventListener("data-updated",e=>{let r=e.detail;r&&r.orders&&(this.orders=r.orders)})}generateOrderId(){let e=Date.now().toString(),r=Math.random().toString(36).substr(2,4).toUpperCase();return"OBS".concat(e.slice(-6)).concat(r)}async createOrder(e,r){try{let o=this.generateOrderId(),c=new Date,m={id:o,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone,customerAddress:e.customerAddress,customerCity:e.customerCity||"",wilayaId:e.wilayaId,wilayaName:e.wilayaName,productId:e.productId,productName:r.name,productImage:r.image,selectedSize:e.selectedSize,selectedColor:e.selectedColor,quantity:e.quantity,subtotal:e.subtotal,shippingCost:e.shippingCost,total:e.total,shippingType:"domicileEcommerce"===e.shippingType?"homeDelivery":"stopDesk",paymentMethod:e.paymentMethod,paymentStatus:"pending",status:"pending",orderDate:c,notes:e.notes||"",trackingNumber:"",estimatedDelivery:this.calculateEstimatedDelivery(e.shippingType),createdAt:c,updatedAt:c};return await t.k.addOrder(m),this.orders.unshift(m),console.log("✅ Order created successfully, email will be sent via API"),{success:!0,orderId:o}}catch(e){return console.error("❌ Failed to create order:",e),{success:!1,error:"Failed to create order. Please try again."}}}getOrders(){return this.orders}getOrder(e){return this.orders.find(r=>r.id===e)}async updateOrderStatus(e,r,o){try{let c=this.orders.findIndex(r=>r.id===e);if(-1===c)return!1;let m={...this.orders[c],status:r,trackingNumber:o||this.orders[c].trackingNumber,updatedAt:new Date};return await t.k.updateOrder(e,m),this.orders[c]=m,!0}catch(e){return console.error("Failed to update order status:",e),!1}}calculateEstimatedDelivery(e){let r=new Date;return r.setDate(r.getDate()+("domicileEcommerce"===e?3:2)),r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getOrderStats(){let e=this.orders.length,r=this.orders.filter(e=>"pending"===e.status).length,o=this.orders.filter(e=>"confirmed"===e.status).length,t=this.orders.filter(e=>"shipped"===e.status).length;return{total:e,pending:r,confirmed:o,shipped:t,delivered:this.orders.filter(e=>"delivered"===e.status).length,cancelled:this.orders.filter(e=>"cancelled"===e.status).length,totalRevenue:this.orders.filter(e=>"delivered"===e.status).reduce((e,r)=>e+r.total,0)}}setOrders(e){this.orders=e}exportOrdersCSV(){return[["Order ID","Date","Customer","Email","Phone","Product","Size","Color","Quantity","Total","Status","Wilaya","Shipping"],...this.orders.map(e=>{let r="";try{if(e.orderDate instanceof Date)r=e.orderDate.toISOString().split("T")[0];else if("string"==typeof e.orderDate){let o=new Date(e.orderDate);r=isNaN(o.getTime())?e.orderDate:o.toISOString().split("T")[0]}else r="Unknown"}catch(o){console.warn("Error formatting date for order:",e.id,o),r="Unknown"}return[e.id||"N/A",r,e.customerName||"N/A",e.customerEmail||"N/A",e.customerPhone||"N/A",e.productName||"N/A",e.selectedSize||"N/A",e.selectedColor||"N/A",e.quantity||0,e.total||0,e.status||"N/A",e.wilayaName||"N/A",e.shippingType||"N/A"]})].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n")}clearOrders(){this.orders=[]}constructor(){this.orders=[],this.initializeOrders(),this.setupDataSync()}}let m=new c}}]);