"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{7023:function(t,e,r){r.d(e,{R:function(){return d},V:function(){return o}});var a=r(7437),i=r(2265),s=r(3325),c=r(2671);let n=(0,i.createContext)(void 0),o=t=>{let{children:e}=t,[r,o]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let t=await s.k.getProducts();o(t)}catch(t){o([])}})();let t=t=>{let e=t.detail;e&&e.products&&o(e.products)},e=t=>{let e=t.detail;e&&e.products&&o(e.products)};return window.addEventListener("data-updated",t),window.addEventListener("data-sync",e),()=>{window.removeEventListener("data-updated",t),window.removeEventListener("data-sync",e)}},[]);let d=async t=>{try{await s.k.addProduct(t)&&await h()}catch(t){}},u=async(t,e)=>{try{let r=e.stock&&"object"==typeof e.stock?Object.values(e.stock).reduce((t,e)=>e&&"object"==typeof e?t+Object.values(e).reduce((t,e)=>t+("number"==typeof e?e:0),0):t,0):0,a={...e,inStock:r>0};if(await s.k.updateProduct(t,a))await h();else throw Error("Failed to update product")}catch(t){throw t}},l=async t=>{try{await s.k.deleteProduct(t)&&await h()}catch(t){}},h=async()=>{try{(0,c.f0)();let t=await s.k.getProducts();o(t),window.dispatchEvent(new CustomEvent("data-sync",{detail:{products:t}}))}catch(t){}},p=async()=>{if(0===r.length){let t=[{id:"1",name:"OBSIDIAN HOODIE BLACK",price:4500,originalPrice:5e3,image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=500&h=600&fit=crop",description:"Premium black hoodie with embroidered OBSIDIAN logo. Made from 100% cotton for ultimate comfort.",category:"Hoodies",sizes:["S","M","L","XL"],colors:["Black"],inStock:!0,rating:4.9,reviews:127,stock:{S:{Black:15},M:{Black:20},L:{Black:18},XL:{Black:12}},sku:"OBS-HOODIE-001",weight:.8,tags:["hoodie","black","premium"],featured:!0,createdAt:new Date("2025-01-01"),updatedAt:new Date("2025-01-15")},{id:"2",name:"OBSIDIAN TEE WHITE",price:2500,originalPrice:3e3,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500&h=600&fit=crop",description:"Premium white t-shirt with subtle OBSIDIAN branding. 100% cotton oversized fit.",category:"T-Shirts",sizes:["S","M","L","XL"],colors:["White","Black"],inStock:!0,rating:4.8,reviews:89,stock:{S:{White:25,Black:20},M:{White:30,Black:25},L:{White:22,Black:18},XL:{White:18,Black:15}},sku:"OBS-TEE-002",weight:.3,tags:["tshirt","white","black"],featured:!1,createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-01-10")}];for(let e of t){let{id:t,...r}=e;await s.k.addProduct(r)}o(t)}};return(0,a.jsx)(n.Provider,{value:{products:r,setProducts:o,addProduct:d,updateProduct:u,deleteProduct:l,getProduct:t=>r.find(e=>e.id===t),initializeDefaultProducts:p,refreshProducts:h},children:e})},d=()=>{let t=(0,i.useContext)(n);if(void 0===t)throw Error("useAdminProducts must be used within an AdminProductProvider");return t}},2671:function(t,e,r){r.d(e,{f0:function(){return n},nM:function(){return o}});var a=r(7440);let i="https://twlegtqcyydgjkycxngw.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0";if(!i||!s)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let c=(0,a.eI)(i,s);function n(){}async function o(t,e){try{let r={};void 0!==e.name&&(r.name=e.name),void 0!==e.description&&(r.description=e.description),void 0!==e.price&&(r.price=e.price),void 0!==e.originalPrice&&(r.original_price=e.originalPrice),void 0!==e.image&&(r.image=e.image),void 0!==e.images&&(r.images=e.images),void 0!==e.stock&&(r.stock=e.stock),void 0!==e.category&&(r.category=e.category),void 0!==e.sizes&&(r.sizes=e.sizes),void 0!==e.colors&&(r.colors=e.colors),void 0!==e.inStock&&(r.in_stock=e.inStock),void 0!==e.rating&&(r.rating=e.rating),void 0!==e.reviews&&(r.reviews=e.reviews),void 0!==e.sku&&(r.sku=e.sku),void 0!==e.weight&&(r.weight=e.weight),void 0!==e.dimensions&&(r.dimensions=e.dimensions),void 0!==e.tags&&(r.tags=e.tags),void 0!==e.featured&&(r.featured=e.featured),void 0!==e.sizeChartCategory&&(r.size_chart_category=e.sizeChartCategory),void 0!==e.customSizeChart&&(r.custom_size_chart=e.customSizeChart),void 0!==e.useCustomSizeChart&&(r.use_custom_size_chart=e.useCustomSizeChart);let{data:a,error:i}=await c.from("products").update(r).eq("id",t).select().single();if(i)return null;return{id:a.id,name:a.name,description:a.description,price:parseFloat(a.price),originalPrice:a.original_price?parseFloat(a.original_price):void 0,image:a.image,images:a.images||[],stock:a.stock||{},category:a.category,sizes:a.sizes||[],colors:a.colors||[],inStock:a.in_stock,rating:parseFloat(a.rating||0),reviews:a.reviews||0,sku:a.sku,weight:a.weight?parseFloat(a.weight):void 0,dimensions:a.dimensions,tags:a.tags||[],featured:a.featured||!1,sizeChartCategory:a.size_chart_category||"T-Shirts",customSizeChart:a.custom_size_chart||void 0,useCustomSizeChart:a.use_custom_size_chart||!1,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)}}catch(t){return null}}Date.now()},3325:function(t,e,r){r.d(e,{k:function(){return s}});var a=r(2601);class i{getApiUrl(t){return"".concat(this.baseUrl).concat(t)}isBrowser(){return"undefined"!=typeof fetch}getAuthHeaders(){let t=a.env.NEXT_PUBLIC_API_AUTH_TOKEN||"obsidian-api-token-2025";return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}async getProducts(){try{let t=await fetch(this.getApiUrl("/products"),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"max-age=30"},next:{revalidate:30}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let e=await t.json();if(e.success)return e.data||[];return[]}catch(t){return[]}}async getProduct(t){try{let e=await fetch(this.getApiUrl("/products/".concat(t))),r=await e.json();if(r.success)return r.data;return null}catch(t){return null}}async addProduct(t){try{let e=await fetch(this.getApiUrl("/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await e.json();if(r.success)return r.data;return null}catch(t){return null}}async updateProduct(t,e){try{let r=await fetch(this.getApiUrl("/products/".concat(t)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await r.json();if(a.success)return a.data;return null}catch(t){return null}}async deleteProduct(t){try{let e=await fetch(this.getApiUrl("/products/".concat(t)),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok)return await e.text(),!1;if((await e.json()).success)return!0;return!1}catch(t){return!1}}async getOrders(){try{let t=await fetch(this.getApiUrl("/orders"),{method:"GET",headers:this.getAuthHeaders(),next:{revalidate:30}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let e=t.headers.get("content-type");if(!e||!e.includes("application/json"))return await t.text(),[];let r=await t.json();if(r.success)return r.orders||r.data||[];return[]}catch(t){return[]}}async getOrder(t){try{let e=await fetch(this.getApiUrl("/orders/".concat(t)),{headers:this.getAuthHeaders()}),r=await e.json();if(r.success)return r.data;return null}catch(t){return null}}async addOrder(t){try{let e=await fetch(this.getApiUrl("/orders"),{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)}),r=await e.json();if(r.success)return r.data;return null}catch(t){return null}}async updateOrder(t,e){try{let r=await fetch(this.getApiUrl("/orders/".concat(t)),{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(e)}),a=await r.json();if(a.success)return a.data;return null}catch(t){return null}}async deleteOrder(t){try{let e=await fetch(this.getApiUrl("/orders/".concat(t)),{method:"DELETE",headers:this.getAuthHeaders()});if((await e.json()).success)return!0;return!1}catch(t){return!1}}async getCustomers(){try{let t=await fetch(this.getApiUrl("/customers")),e=await t.json();if(e.success)return e.data||[];return[]}catch(t){return[]}}async addCustomer(t){try{let e=await fetch(this.getApiUrl("/customers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await e.json();if(r.success)return r.data;return null}catch(t){return null}}async getWilayaTariffs(){try{let t=await fetch(this.getApiUrl("/wilaya")),e=await t.json();if(e.success)return e.data||[];return[]}catch(t){return[]}}async updateWilayaTariffs(t){try{let e=await fetch(this.getApiUrl("/wilaya"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if((await e.json()).success)return!0;return!1}catch(t){return!1}}constructor(){this.baseUrl="/api"}}let s=new i}}]);