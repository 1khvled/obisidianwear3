(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2601:function(e,t,r){"use strict";var o,n;e.exports=(null==(o=r.g.process)?void 0:o.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(8960)},6105:function(e,t,r){Promise.resolve().then(r.t.bind(r,5975,23)),Promise.resolve().then(r.t.bind(r,9979,23)),Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.bind(r,573)),Promise.resolve().then(r.bind(r,8628)),Promise.resolve().then(r.bind(r,2095)),Promise.resolve().then(r.bind(r,9298)),Promise.resolve().then(r.bind(r,7023)),Promise.resolve().then(r.bind(r,6713))},573:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var o=r(2265),n=r(4033);function a(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),[r,a]=(0,o.useState)(!1);(0,o.useEffect)(()=>{i()},[e]);let i=async()=>{if(e.startsWith("/admin")||"/maintenance"===e||e.startsWith("/_next")||e.includes(".")){a(!0);return}try{let r=await fetch("/api/maintenance"),o=await r.json();!0===o.is_maintenance_mode&&"/maintenance"!==e&&(console.log("\uD83D\uDD34 Store is OFF - Redirecting to maintenance page"),t.push("/maintenance"))}catch(e){console.error("Error checking store status:",e)}finally{a(!0)}};return null}},8628:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return s},useAuth:function(){return l}});var o=r(7437),n=r(2265),a=r(2601);let i=(0,n.createContext)(void 0),c={username:a.env.NEXT_PUBLIC_ADMIN_USERNAME||"admin",password:a.env.NEXT_PUBLIC_ADMIN_PASSWORD||"admin123"},s=e=>{let{children:t}=e,[r,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)("");return(0,n.useEffect)(()=>{{let e=localStorage.getItem("obsidian-admin-auth"),t=localStorage.getItem("obsidian-admin-username");"true"===e&&t&&(a(!0),l(t))}},[]),(0,o.jsx)(i.Provider,{value:{isAuthenticated:r,login:(e,t)=>e===c.username&&t===c.password&&(a(!0),l(e),localStorage.setItem("obsidian-admin-auth","true"),localStorage.setItem("obsidian-admin-username",e),!0),logout:()=>{a(!1),l(""),localStorage.removeItem("obsidian-admin-auth"),localStorage.removeItem("obsidian-admin-username")},username:s},children:t})},l=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2095:function(e,t,r){"use strict";r.r(t),r.d(t,{CartProvider:function(){return i},useCart:function(){return c}});var o=r(7437),n=r(2265);let a=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)([]),[c,s]=(0,n.useState)(!1),[l,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("obsidian-cart");if(e){let t=JSON.parse(e);if(Array.isArray(t)){let e=t.map(e=>({...e,addedAt:e.addedAt||new Date().toISOString()}));i(e),console.log("Cart loaded from localStorage:",e.length,"items")}else console.warn("Invalid cart data structure, clearing cart"),localStorage.removeItem("obsidian-cart")}u(null)}catch(e){console.error("Error loading cart from localStorage:",e),u("Failed to load cart data"),localStorage.removeItem("obsidian-cart")}finally{s(!0)}})()},[]),(0,n.useEffect)(()=>{if(c)try{localStorage.setItem("obsidian-cart",JSON.stringify(r)),console.log("Cart saved to localStorage:",r.length,"items"),u(null)}catch(e){console.error("Error saving cart to localStorage:",e),u("Failed to save cart data")}},[r,c]);let d=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,o.jsx)(a.Provider,{value:{items:r,addToCart:(e,t,r,o)=>{console.log("CartContext: addToCart called with:",{product:e,selectedSize:t,selectedColor:r,quantity:o});let n="".concat(e.id,"-").concat(t,"-").concat(r);i(a=>{var i,c,s,l;let u=a.find(e=>e.id===n);if(u){let s=u.quantity+o;return s<=((null===(c=e.stock)||void 0===c?void 0:null===(i=c[t])||void 0===i?void 0:i[r])||999)?a.map(e=>e.id===n?{...e,quantity:s}:e):(alert("This item is not available in the selected size and color!"),a)}{let i=(null===(l=e.stock)||void 0===l?void 0:null===(s=l[t])||void 0===s?void 0:s[r])||0;return!e.stock||0===i&&e.stock[t]&&Math.max(...Object.values(e.stock[t]))>0?[...a,{id:n,productId:e.id,name:e.name,price:e.price,image:e.image,selectedSize:t,selectedColor:r,quantity:o,addedAt:new Date().toISOString()}]:o<=i?[...a,{id:n,productId:e.id,name:e.name,price:e.price,image:e.image,selectedSize:t,selectedColor:r,quantity:o,addedAt:new Date().toISOString()}]:(alert("This item is not available in the selected size and color!"),a)}})},removeFromCart:d,updateQuantity:(e,t)=>{if(t<=0){d(e);return}i(r=>r.map(r=>{if(r.id===e){if(t<=10)return{...r,quantity:t};alert("Maximum ".concat(10," items allowed per product!"))}return r}))},clearCart:()=>{i([]),localStorage.removeItem("obsidian-cart")},getTotalItems:()=>r.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>r.reduce((e,t)=>e+t.price*t.quantity,0),isCartLoaded:c,cartError:l},children:t})},c=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},7023:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductProvider:function(){return s},useProducts:function(){return l}});var o=r(7437),n=r(2265),a=r(3325),i=r(3917);let c=(0,n.createContext)(void 0),s=e=>{let{children:t}=e,[r,s]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{console.log("ProductContext: Loading products...");let e=await i.K.getProducts();if(e.length>0)console.log("ProductContext: Using cached products:",e.length),s(e);else{console.log("ProductContext: No cache, fetching from server...");let e=await a.k.getProducts();console.log("ProductContext: Loaded products from server:",e.length),s(e),i.K.setCache({products:e})}}catch(e){console.error("ProductContext: Error loading products:",e),0===r.length&&s([])}})();let e=e=>{let t=e.detail;t&&t.products&&s(t.products)},t=e=>{let t=e.detail;t&&t.products&&s(t.products)};return window.addEventListener("data-updated",e),window.addEventListener("data-sync",t),()=>{window.removeEventListener("data-updated",e),window.removeEventListener("data-sync",t)}},[]);let l=async e=>{let t=await a.k.addProduct(e);t&&s(e=>[...e,t])},u=async(e,t)=>{let r=t.stock?Object.values(t.stock).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t,0),0):0,o={...t,inStock:r>0};console.log("ProductContext: Updating product",e,o.name,"Stock:",r,"InStock:",o.inStock);let n=await a.k.updateProduct(e,o);n&&s(t=>t.map(t=>t.id===e?n:t))},d=async e=>{try{console.log("ProductContext: Deleting product:",e),await a.k.deleteProduct(e)?(console.log("ProductContext: Product deleted successfully:",e),s(t=>t.filter(t=>t.id!==e))):console.error("ProductContext: Failed to delete product:",e)}catch(e){console.error("ProductContext: Error deleting product:",e)}},f=async()=>{if(0===r.length){let e=[{id:"1",name:"OBSIDIAN HOODIE BLACK",price:4500,originalPrice:5e3,image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=500&h=600&fit=crop",description:"Premium black hoodie with embroidered OBSIDIAN logo. Made from 100% cotton for ultimate comfort.",category:"Hoodies",sizes:["S","M","L","XL"],colors:["Black"],inStock:!0,rating:4.9,reviews:127,stock:{S:{Black:15},M:{Black:20},L:{Black:18},XL:{Black:12}},sku:"OBS-HOODIE-001",weight:.8,tags:["hoodie","black","premium"],featured:!0,createdAt:new Date("2025-01-01"),updatedAt:new Date("2025-01-15")},{id:"2",name:"OBSIDIAN TEE WHITE",price:2500,originalPrice:3e3,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500&h=600&fit=crop",description:"Premium white t-shirt with subtle OBSIDIAN branding. 100% cotton oversized fit.",category:"T-Shirts",sizes:["S","M","L","XL"],colors:["White","Black"],inStock:!0,rating:4.8,reviews:89,stock:{S:{White:25,Black:20},M:{White:30,Black:25},L:{White:22,Black:18},XL:{White:18,Black:15}},sku:"OBS-TEE-002",weight:.3,tags:["tshirt","white","black"],featured:!1,createdAt:new Date("2025-01-05"),updatedAt:new Date("2025-01-10")}];for(let t of e){let{id:e,...r}=t;await a.k.addProduct(r)}s(e)}};return(0,o.jsx)(c.Provider,{value:{products:r,setProducts:s,addProduct:l,updateProduct:u,deleteProduct:d,getProduct:e=>r.find(t=>t.id===e),initializeDefaultProducts:f},children:t})},l=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useProducts must be used within a ProductProvider");return e}},6713:function(e,t,r){"use strict";r.r(t),r.d(t,{ThemeProvider:function(){return i},useTheme:function(){return c}});var o=r(7437),n=r(2265);let a=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)("dark");return(0,n.useEffect)(()=>{let e=localStorage.getItem("admin-theme");e&&i(e)},[]),(0,n.useEffect)(()=>{localStorage.setItem("admin-theme",r),document.documentElement.setAttribute("data-theme",r);let e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content","dark"===r?"#000000":"#ffffff")},[r]),(0,o.jsx)(a.Provider,{value:{theme:r,toggleTheme:()=>{i(e=>"dark"===e?"light":"dark")},setTheme:e=>{i(e)}},children:t})}function c(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3385:function(){},5975:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},9979:function(e){e.exports={style:{fontFamily:"'__Poppins_51684b', '__Poppins_Fallback_51684b'",fontStyle:"normal"},className:"__className_51684b",variable:"__variable_51684b"}},8960:function(e){!function(){var t={229:function(e){var t,r,o,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s=[],l=!1,u=-1;function d(){l&&o&&(l=!1,o.length?s=o.concat(s):u=-1,s.length&&f())}function f(){if(!l){var e=c(d);l=!0;for(var t=s.length;t;){for(o=s,s=[];++u<t;)o&&o[u].run();u=-1,t=s.length}o=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new m(e,t)),1!==s.length||l||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,o),i=!1}finally{i&&delete r[e]}return a.exports}o.ab="//";var n=o(229);e.exports=n}()},622:function(e,t,r){"use strict";var o=r(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var o,a={},l=null,u=null;for(o in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,o)&&!s.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:u,props:a,_owner:c.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[298,868,971,938,744],function(){return e(e.s=6105)}),_N_E=e.O()}]);