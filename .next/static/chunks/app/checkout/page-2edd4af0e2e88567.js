(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{2442:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s(2898).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1133:function(e,t,s){Promise.resolve().then(s.bind(s,645))},645:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var l=s(7437),a=s(2265),i=s(4033),r=s(5518),o=s(8722),n=s(9970),d=s(8340),c=s(3067),h=s(2442);function u(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[m,p]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[f,w]=(0,a.useState)(1),[v,g]=(0,a.useState)(!0),[A,N]=(0,a.useState)(""),[y,k]=(0,a.useState)({name:"",phone:"",email:"",address:"",wilaya:""}),[C,S]=(0,a.useState)(!1),[E,O]=(0,a.useState)(""),[B,D]=(0,a.useState)(null),[K,T]=(0,a.useState)(!1),[_,I]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(_>0){let e=setTimeout(()=>{I(e=>e-1)},1e3);return()=>clearTimeout(e)}0===_&&C&&e.push("/")},[_,C,e]),(0,a.useEffect)(()=>{let e=sessionStorage.getItem("checkoutProduct");if(e)try{let t=JSON.parse(e);s(t),"made-to-order"!==t.type&&P(t.id,t.type||"collection"),sessionStorage.removeItem("checkoutProduct")}catch(e){}g(!1)},[]);let P=async(e,t)=>{try{let s=await fetch("/api/check-stock?productId=".concat(e,"&type=").concat(t));if(s.ok){let e=await s.json();e.success&&e.data&&x(e.data)}}catch(e){}},F=(e,t)=>{var s,l;if(!u)return!0;let a=null===(l=u.stock)||void 0===l?void 0:null===(s=l[t])||void 0===s?void 0:s[e];return a&&a>0},R=async e=>{var s,l;if(e.preventDefault(),K)return;if(!t){alert("No product selected");return}if(!m||!b){alert("Please select size and color");return}if(!F(b,m)){alert("Sorry, this item is out of stock. Please select a different size or color.");return}let a=(null==u?void 0:null===(l=u.stock)||void 0===l?void 0:null===(s=l[m])||void 0===s?void 0:s[b])||0;if(f>a){alert("Sorry, only ".concat(a," items are available in this size and color."));return}if(!/^0\d{9}$/.test(y.phone)){alert("Please enter a valid phone number");return}if(!y.name||!y.phone||!y.wilaya){alert("Please fill in all required customer information");return}if(!A){alert("Please select a delivery option");return}if("domicile"===A&&!y.address){alert("Please provide your address for home delivery");return}T(!0);let i=Q(),r=t.price*f;try{let e={product:{id:t.id,name:t.name,price:t.price,type:t.type||"collection",selectedSize:m,selectedColor:b,quantity:f,subtotal:r,total:r+i},customer:{name:y.name,phone:y.phone,email:y.email,address:y.address,wilaya:y.wilaya},delivery:{option:A,cost:i}},s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await s.json();l.success?(O(l.order.id),D(e),S(!0),I(10)):alert("Failed to place order: "+l.error)}catch(e){alert("Failed to place order. Please try again.")}finally{T(!1)}},Q=()=>{var e;return y.wilaya&&A&&(null===(e=({Alger:{domicile:400,stop_desk:200},Oran:{domicile:600,stop_desk:300},Constantine:{domicile:800,stop_desk:400},Blida:{domicile:500,stop_desk:250},Setif:{domicile:700,stop_desk:350},Annaba:{domicile:900,stop_desk:450},Batna:{domicile:1e3,stop_desk:500},Djelfa:{domicile:1200,stop_desk:600},"Sidi Bel Abbes":{domicile:800,stop_desk:400},Biskra:{domicile:1e3,stop_desk:500},Tebessa:{domicile:1100,stop_desk:550},"El Oued":{domicile:1200,stop_desk:600},Khenchela:{domicile:1100,stop_desk:550},"Oum El Bouaghi":{domicile:1e3,stop_desk:500},Bouira:{domicile:500,stop_desk:250},Tamanrasset:{domicile:2500,stop_desk:1250}})[y.wilaya])||void 0===e?void 0:e[A])||0};if(v)return(0,l.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,l.jsx)(r.default,{}),(0,l.jsx)("div",{className:"pt-20 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("p",{className:"text-xl font-black uppercase tracking-wider",children:"Loading checkout..."})})})]});if(!t)return(0,l.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,l.jsx)(r.default,{}),(0,l.jsxs)("div",{className:"pt-20 flex flex-col items-center justify-center p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-black uppercase tracking-wider mb-4 text-center",children:"No Product Selected"}),(0,l.jsx)("p",{className:"text-white/70 mb-6 text-center",children:"Please go back and select a product to order."}),(0,l.jsxs)("button",{onClick:()=>e.push("/"),className:"bg-purple-600 hover:bg-purple-700 text-white font-black py-3 px-6 rounded transition-colors flex items-center gap-2",children:[(0,l.jsx)(c.Z,{size:20}),"Go Back"]})]})]});let L=Q(),Y=t.price*f;return(0,l.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,l.jsx)(r.default,{}),(0,l.jsx)("div",{className:"pt-20 pb-8 px-4",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 text-white hover:text-purple-400 transition-colors mb-6",children:[(0,l.jsx)(c.Z,{size:20}),"Back"]}),(0,l.jsx)("h1",{className:"text-2xl font-black text-white mb-6 text-center",children:"CHECKOUT"}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[t.image&&(0,l.jsx)(n.Z,{src:t.image,alt:t.name,width:120,height:120,className:"w-24 h-24 object-cover rounded border border-white/20"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white",children:t.name}),(0,l.jsxs)("p",{className:"text-xl font-black text-purple-400",children:[t.price.toFixed(0)," DZD"]}),t.category&&(0,l.jsx)("span",{className:"text-xs text-purple-400 font-black uppercase tracking-wider",children:t.category})]})]})}),t.sizes&&t.sizes.length>0&&(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-3",children:"SELECT SIZE"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:t.sizes.map(e=>{var t,s;let a=(b?(null==u?void 0:null===(s=u.stock)||void 0===s?void 0:null===(t=s[e])||void 0===t?void 0:t[b])||0:u?1:0)>0;return(0,l.jsxs)("button",{onClick:()=>{a&&p(e)},disabled:!a,className:"p-2 border-2 rounded text-center font-black transition-colors relative ".concat(m===e?"border-purple-500 bg-purple-500/20 text-purple-400":a?"border-white/20 text-white hover:border-purple-400":"bg-red-900/50 text-red-400 border-red-500 cursor-not-allowed opacity-75"),children:[e,!a&&b&&(0,l.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-xs font-bold",children:"\xd7"})})]},e)})})]}),t.colors&&t.colors.length>0&&(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-3",children:"SELECT COLOR"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:t.colors.map(e=>(0,l.jsx)("button",{onClick:()=>{var t,s;j(e),m&&(null==u?void 0:null===(s=u.stock)||void 0===s?void 0:null===(t=s[m])||void 0===t?void 0:t[e])===0&&p("")},className:"p-2 border-2 rounded text-center font-black transition-colors ".concat(b===e?"border-purple-500 bg-purple-500/20 text-purple-400":"border-white/20 text-white hover:border-purple-400"),children:e},e))}),(0,l.jsx)("p",{className:"text-white/50 text-xs mt-2",children:"Color selection is for visual reference only"})]}),m&&b&&(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-3",children:"STOCK STATUS"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-white font-medium",children:"Availability:"}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:F(b,m)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,l.jsx)("span",{className:"text-green-400 font-bold",children:"In Stock"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,l.jsx)("span",{className:"text-red-400 font-bold",children:"Out of Stock"})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-3",children:"QUANTITY"}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>w(Math.max(1,f-1)),className:"w-8 h-8 border border-white/20 rounded flex items-center justify-center text-white hover:border-purple-400",children:"-"}),(0,l.jsx)("span",{className:"text-lg font-black text-white",children:f}),(0,l.jsx)("button",{onClick:()=>w(f+1),className:"w-8 h-8 border border-white/20 rounded flex items-center justify-center text-white hover:border-purple-400",children:"+"})]})]}),(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-3",children:"DELIVERY OPTIONS"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("button",{onClick:()=>N("domicile"),className:"w-full p-3 border-2 rounded text-left transition-colors ".concat("domicile"===A?"border-purple-500 bg-purple-500/20 text-purple-400":"border-white/20 text-white hover:border-purple-400"),children:[(0,l.jsx)("div",{className:"font-black",children:"\uD83C\uDFE0 HOME DELIVERY"}),(0,l.jsx)("div",{className:"text-sm",children:"Delivered to your address"})]}),(0,l.jsxs)("button",{onClick:()=>N("stop_desk"),className:"w-full p-3 border-2 rounded text-left transition-colors ".concat("stop_desk"===A?"border-purple-500 bg-purple-500/20 text-purple-400":"border-white/20 text-white hover:border-purple-400"),children:[(0,l.jsx)("div",{className:"font-black",children:"\uD83D\uDCE6 STOP DESK"}),(0,l.jsx)("div",{className:"text-sm",children:"Pick up from nearest location"})]})]})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-4",children:"CUSTOMER INFORMATION"}),(0,l.jsxs)("form",{onSubmit:R,className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-white font-medium mb-1",children:"Full Name *"}),(0,l.jsx)("input",{type:"text",required:!0,value:y.name,onChange:e=>k({...y,name:e.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-white/50 focus:border-purple-500 focus:outline-none",placeholder:"Enter your full name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-white font-medium mb-1",children:"Phone Number *"}),(0,l.jsx)("input",{type:"tel",required:!0,value:y.phone,onChange:e=>k({...y,phone:e.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-white/50 focus:border-purple-500 focus:outline-none",placeholder:"Enter your phone number"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-white font-medium mb-1",children:"Email (Optional)"}),(0,l.jsx)("input",{type:"email",value:y.email,onChange:e=>k({...y,email:e.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-white/50 focus:border-purple-500 focus:outline-none",placeholder:"Enter your email address"})]}),"domicile"===A&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-white font-medium mb-1",children:"Address *"}),(0,l.jsx)("textarea",{required:!0,value:y.address,onChange:e=>k({...y,address:e.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-white/50 focus:border-purple-500 focus:outline-none",placeholder:"Enter your full address",rows:2})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-white font-medium mb-1",children:"Wilaya *"}),(0,l.jsxs)("select",{required:!0,value:y.wilaya,onChange:e=>k({...y,wilaya:e.target.value}),className:"w-full px-3 py-2 bg-black border border-white/20 rounded text-white focus:border-purple-500 focus:outline-none",children:[(0,l.jsx)("option",{value:"",children:"Select your wilaya"}),(0,l.jsx)("option",{value:"Alger",children:"Alger"}),(0,l.jsx)("option",{value:"Oran",children:"Oran"}),(0,l.jsx)("option",{value:"Constantine",children:"Constantine"}),(0,l.jsx)("option",{value:"Blida",children:"Blida"}),(0,l.jsx)("option",{value:"Setif",children:"Setif"}),(0,l.jsx)("option",{value:"Annaba",children:"Annaba"}),(0,l.jsx)("option",{value:"Batna",children:"Batna"}),(0,l.jsx)("option",{value:"Djelfa",children:"Djelfa"}),(0,l.jsx)("option",{value:"Sidi Bel Abbes",children:"Sidi Bel Abbes"}),(0,l.jsx)("option",{value:"Biskra",children:"Biskra"}),(0,l.jsx)("option",{value:"Tebessa",children:"Tebessa"}),(0,l.jsx)("option",{value:"El Oued",children:"El Oued"}),(0,l.jsx)("option",{value:"Khenchela",children:"Khenchela"}),(0,l.jsx)("option",{value:"Oum El Bouaghi",children:"Oum El Bouaghi"}),(0,l.jsx)("option",{value:"Bouira",children:"Bouira"}),(0,l.jsx)("option",{value:"Tamanrasset",children:"Tamanrasset"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white/5 border border-white/20 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-black text-white mb-4",children:"ORDER SUMMARY"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-white/70",children:"Product:"}),(0,l.jsx)("span",{className:"text-white font-medium",children:t.name})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-white/70",children:"Size:"}),(0,l.jsx)("span",{className:"text-white font-medium",children:m||"Not selected"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-white/70",children:"Color:"}),(0,l.jsx)("span",{className:"text-white font-medium",children:b||"Not selected"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-white/70",children:"Quantity:"}),(0,l.jsx)("span",{className:"text-white font-medium",children:f})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-white/70",children:"Subtotal:"}),(0,l.jsxs)("span",{className:"text-white font-medium",children:[Y.toFixed(0)," DZD"]})]}),A&&(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"text-white/70",children:["Delivery (","domicile"===A?"Home":"Stop Desk","):"]}),(0,l.jsxs)("span",{className:"text-white font-medium",children:[L.toFixed(0)," DZD"]})]}),(0,l.jsx)("div",{className:"border-t border-white/20 pt-2",children:(0,l.jsxs)("div",{className:"flex justify-between text-lg font-black",children:[(0,l.jsx)("span",{children:"Total:"}),(0,l.jsxs)("span",{children:[(Y+L).toFixed(0)," DZD"]})]})})]})]}),(0,l.jsx)("button",{onClick:R,disabled:!m||!b||!A||!F(b,m)||K,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white font-black py-3 px-6 rounded transition-colors flex items-center justify-center gap-2 disabled:cursor-not-allowed",children:K?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"PLACING ORDER..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{size:20}),m&&b?F(b,m)?A?"PLACE ORDER":"SELECT DELIVERY OPTION":"OUT OF STOCK":"SELECT SIZE & COLOR"]})})]})]})]})}),(0,l.jsx)(o.default,{}),(0,l.jsx)(d.Z,{isOpen:C,onClose:()=>S(!1),orderId:E,orderData:B,redirectCountdown:_})]})}},9970:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var l=s(7437),a=s(2265),i=s(6691),r=s.n(i);function o(e){let{src:t,alt:s,width:i=400,height:o=400,className:n="",priority:d=!1,quality:c=75}=e,[h,u]=(0,a.useState)(!0),[x,m]=(0,a.useState)(!1),p=()=>{u(!1)},b=()=>{u(!1),m(!0)};return!t||""===t.trim()||x?(0,l.jsx)("div",{className:"bg-gray-800 flex items-center justify-center ".concat(n),style:{width:i,height:o},children:(0,l.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,l.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCF7"}),(0,l.jsx)("div",{className:"text-sm",children:"Image not available"})]})}):t.startsWith("data:")?(0,l.jsxs)("div",{className:"relative overflow-hidden ".concat(n),children:[h&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse flex items-center justify-center",style:{width:i,height:o},children:(0,l.jsx)("div",{className:"text-gray-400",children:"Loading..."})}),(0,l.jsx)("img",{src:t,alt:s,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(h?"opacity-0":"opacity-100"),onLoad:p,onError:b})]}):(0,l.jsxs)("div",{className:"relative overflow-hidden ".concat(n),children:[h&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse flex items-center justify-center",style:{width:i,height:o},children:(0,l.jsx)("div",{className:"text-gray-400",children:"Loading..."})}),(0,l.jsx)(r(),{src:t,alt:s,width:i,height:o,quality:c,priority:d,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=",className:"transition-opacity duration-300 ".concat(h?"opacity-0":"opacity-100"),onLoad:p,onError:b,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:d?"eager":"lazy"})]})}}},function(e){e.O(0,[192,691,518,994,971,938,744],function(){return e(e.s=1133)}),_N_E=e.O()}]);