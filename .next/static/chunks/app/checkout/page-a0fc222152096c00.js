(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{1981:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3008:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1738:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6142:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},1961:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},7972:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},851:function(e,r,t){Promise.resolve().then(t.bind(t,645))},645:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return E}});var s=t(7437),c=t(2265),a=t(4033),o=t(6691),i=t.n(o),l=t(5454),m=t(8722),d=t(3471),n=t(9298),u=t(5109),h=t(4401),x=t(3067),p=t(1961),g=t(1738),y=t(3008),b=t(1981),f=t(7972),k=t(6142),j=t(2831);function E(){let e=(0,a.useSearchParams)(),r=(0,a.useRouter)(),{getProduct:t}=(0,d.useProducts)(),{t:o}=(0,n.useLanguage)(),[E,N]=(0,c.useState)(null),[v,D]=(0,c.useState)({name:"",phone:"",email:"",address:"",city:"",wilaya:"",notes:""}),[w,A]=(0,c.useState)(!1),[S,O]=(0,c.useState)("idle"),[C,I]=(0,c.useState)(""),[Z,z]=(0,c.useState)(""),[M,T]=(0,c.useState)("stopDeskEcommerce"),[P,q]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let r=e.get("productId"),s=e.get("productData");if(r){if(s)try{let e=JSON.parse(decodeURIComponent(s));N(e)}catch(e){console.error("Error parsing product data from URL:",e),N(t(r)||null)}else N(t(r)||null)}B()},[e,t]);let B=()=>{try{let e=localStorage.getItem("checkoutFormData");if(e){let r=JSON.parse(e);D(e=>({...e,...r}))}let r=localStorage.getItem("checkoutShippingMethod");r&&("stopDeskEcommerce"===r||"domicileEcommerce"===r)&&T(r)}catch(e){console.error("Error loading saved form data:",e)}},F=e=>{try{localStorage.setItem("checkoutFormData",JSON.stringify(e)),q(!0),setTimeout(()=>q(!1),2e3)}catch(e){console.error("Error saving form data:",e)}},L=()=>{try{localStorage.removeItem("checkoutFormData"),localStorage.removeItem("checkoutShippingMethod")}catch(e){console.error("Error clearing saved form data:",e)}},R=e=>{let{name:r,value:t}=e.target,s={...v,[r]:t};D(s),F(s)},U=async t=>{if(t.preventDefault(),!E){O("error"),I("Product information is missing");return}if(!v.city.trim()){O("error"),I("Please enter your city");return}if(!v.wilaya){O("error"),I("Please select a wilaya for shipping");return}A(!0),O("idle");try{var s,c,a;let t=parseInt(e.get("quantity")||"1"),o=e.get("size")||"M",i=e.get("color")||"Black",l=u.rA.find(e=>e.id.toString()===v.wilaya);if(!l)throw Error("Invalid wilaya selection");let m=l[M];if((null!==(a=null===(c=E.stock)||void 0===c?void 0:null===(s=c[o])||void 0===s?void 0:s[i])&&void 0!==a?a:0)<t){O("error"),I("Selected quantity exceeds available stock. Please adjust."),A(!1);return}let d={customerName:v.name,customerEmail:v.email,customerPhone:v.phone,customerAddress:v.address,customerCity:v.city,wilayaId:l.id,wilayaName:l.name,productId:E.id,selectedSize:o,selectedColor:i,quantity:t,subtotal:E.price*t,shippingCost:m,total:E.price*t+m,shippingType:M,paymentMethod:"cod",notes:v.notes},n=await h.X.createOrder(d,E);if(n.success&&n.orderId)console.log("✅ Order created successfully, stock will be deducted automatically"),O("success"),z(n.orderId),I("Order #".concat(n.orderId," placed successfully! \uD83C\uDF89\n\nWe'll contact you within 24 hours via WhatsApp.")),L(),setTimeout(()=>{r.push("/order-success?orderId=".concat(n.orderId))},3e3);else throw Error(n.error||"Failed to place order")}catch(e){console.error("Order submission error:",e),O("error"),I("Failed to place order. Please check your information and try again.")}finally{A(!1)}};if(!E)return(0,s.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(j.sr,{message:"Loading product details..."}),(0,s.jsxs)("button",{onClick:()=>r.push("/"),className:"mt-8 text-white hover:text-gray-300 flex items-center justify-center mx-auto",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]})}),(0,s.jsx)(m.Z,{})]});let _=parseInt(e.get("quantity")||"1"),H=e.get("size")||"",W=e.get("color")||"",G=E.price*_,J=u.rA.find(e=>e.id.toString()===v.wilaya),V=J?J[M]:0,X=G+V;return(0,s.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,s.jsx)(l.default,{}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("button",{onClick:()=>r.back(),className:"flex items-center text-white hover:text-gray-300 mb-8 transition-colors",children:[(0,s.jsx)(x.Z,{size:20,className:"mr-2"}),o("checkout.backToProduct")]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:o("checkout.orderSummary")}),(0,s.jsx)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gray-800 rounded-lg overflow-hidden flex-shrink-0",children:(0,s.jsx)(i(),{src:E.image,alt:E.name,width:80,height:80,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-white font-semibold text-lg",children:E.name}),(0,s.jsx)("p",{className:"text-gray-400",children:E.category}),(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[H&&(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:[o("checkout.size"),": ",H]}),W&&(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:[o("checkout.color"),": ",W]}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:[o("checkout.quantity"),": ",_]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-white font-semibold",children:[E.price," DZD"]}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["x",_]})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,s.jsxs)("h3",{className:"text-white font-semibold text-lg mb-2 flex items-center",children:[(0,s.jsx)(p.Z,{size:20,className:"mr-2"}),o("checkout.deliveryOptions")," ",(0,s.jsx)("span",{className:"text-red-400 ml-2",children:"*"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:o("checkout.selectDeliveryOption")}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-4 cursor-pointer p-4 rounded-lg border-2 transition-all duration-200 ".concat("stopDeskEcommerce"===M?"border-blue-500 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/30"),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"radio",name:"shipping",value:"stopDeskEcommerce",checked:"stopDeskEcommerce"===M,onChange:e=>{console.log("Radio clicked:",e.target.value);let r=e.target.value;T(r),localStorage.setItem("checkoutShippingMethod",r)},className:"w-5 h-5 text-blue-500 accent-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900"}),"stopDeskEcommerce"===M&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-white font-semibold text-lg",children:o("checkout.stopDesk")}),"stopDeskEcommerce"===M&&(0,s.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:o("checkout.selected")})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:o("checkout.stopDeskDescription")})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:J?"".concat(J.stopDeskEcommerce," DZD"):"--"})})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-4 cursor-pointer p-4 rounded-lg border-2 transition-all duration-200 ".concat("domicileEcommerce"===M?"border-blue-500 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/30"),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"radio",name:"shipping",value:"domicileEcommerce",checked:"domicileEcommerce"===M,onChange:e=>{console.log("Radio clicked:",e.target.value);let r=e.target.value;T(r),localStorage.setItem("checkoutShippingMethod",r)},className:"w-5 h-5 text-blue-500 accent-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900"}),"domicileEcommerce"===M&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-white font-semibold text-lg",children:o("checkout.homeDelivery")}),"domicileEcommerce"===M&&(0,s.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:o("checkout.selected")})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:o("checkout.homeDeliveryDescription")})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:J?"".concat(J.domicileEcommerce," DZD"):"--"})})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,s.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[(0,s.jsx)(g.Z,{size:20,className:"mr-2"}),"Mode de Paiement"]}),(0,s.jsx)("div",{className:"bg-green-900 border border-green-700 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-bold",children:"✓"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-300 font-semibold",children:"Paiement \xe0 la Livraison (COD)"}),(0,s.jsx)("p",{className:"text-green-400 text-sm",children:"Payez quand votre commande arrive"})]})]})})]}),(0,s.jsx)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:o("checkout.subtotal")}),(0,s.jsxs)("span",{className:"text-white",children:[G.toFixed(0)," DA"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:o("checkout.shipping")}),(0,s.jsxs)("span",{className:"text-white",children:[V.toFixed(0)," DA"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:o("stopDeskEcommerce"===M?"checkout.stopDesk":"checkout.homeDelivery")}),(0,s.jsx)("span",{className:"text-gray-500",children:J?J.name:o("checkout.selectWilaya")})]}),(0,s.jsx)("div",{className:"border-t border-gray-700 pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-white font-semibold text-lg",children:o("checkout.total")}),(0,s.jsxs)("span",{className:"text-white font-bold text-xl",children:[X.toFixed(0)," DA"]})]})})]})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:o("checkout.deliveryInformation")}),"success"===S&&(0,s.jsx)("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 text-green-400 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-green-300 font-semibold",children:"Order Placed Successfully!"}),(0,s.jsx)("p",{className:"text-green-200 text-sm whitespace-pre-line",children:C})]})]})}),"error"===S&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5 text-red-400 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-red-300 font-semibold",children:"Order Failed"}),(0,s.jsx)("p",{className:"text-red-200 text-sm",children:C})]})]})}),(0,s.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,s.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[(0,s.jsx)(f.Z,{size:20,className:"mr-2"}),o("checkout.personalInformation")]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.fullName")," *"]}),(0,s.jsx)("input",{type:"text",name:"name",value:v.name,onChange:R,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:o("checkout.enterFullName")})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.phoneNumber")," *"]}),(0,s.jsx)("input",{type:"tel",name:"phone",value:v.phone,onChange:R,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:o("checkout.enterPhoneNumber")})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.emailAddress")," (",o("checkout.optional"),")"]}),(0,s.jsx)("input",{type:"email",name:"email",value:v.email,onChange:R,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:o("checkout.enterEmailAddress")})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-800",children:[(0,s.jsxs)("h3",{className:"text-white font-semibold text-lg mb-4 flex items-center",children:[(0,s.jsx)(k.Z,{size:20,className:"mr-2"}),o("domicileEcommerce"===M?"checkout.deliveryAddress":"checkout.pickupLocation")]}),(0,s.jsxs)("div",{className:"space-y-4",children:["domicileEcommerce"===M&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.streetAddress")," *"]}),(0,s.jsx)("input",{type:"text",name:"address",value:v.address,onChange:R,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:o("checkout.enterStreetAddress")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.city")," *"]}),(0,s.jsx)("input",{type:"text",name:"city",value:v.city,onChange:R,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white",placeholder:o("checkout.enterCity")})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:[o("checkout.wilaya")," *"]}),(0,s.jsxs)("select",{name:"wilaya",value:v.wilaya,onChange:R,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-white",children:[(0,s.jsx)("option",{value:"",children:o("checkout.selectWilaya")}),u.rA.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (#",e.id,")"]},e.id))]})]})]}),"stopDeskEcommerce"===M&&(0,s.jsx)("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-blue-300 text-sm",children:"\uD83D\uDCCD You will pick up your order at the nearest stop desk in your selected wilaya"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:o("checkout.deliveryNotes")}),(0,s.jsx)("textarea",{name:"notes",value:v.notes,onChange:R,rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white resize-none",placeholder:o("checkout.deliveryInstructionsPlaceholder")})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:w,className:"w-full bg-white text-black py-4 px-6 rounded-lg font-semibold text-lg hover:bg-gray-200 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-600 border-t-black rounded-full animate-spin"}),(0,s.jsx)("span",{children:o("checkout.placingOrder")})]}):(0,s.jsxs)("span",{children:[o("checkout.placeOrder")," - ",X.toFixed(0)," DA"]})})]})]})]})]}),(0,s.jsx)(m.Z,{})]})}},5109:function(e,r,t){"use strict";t.d(r,{rA:function(){return s}});let s=[{id:1,name:"Adrar",nameAr:"أدرار",stopDeskEcommerce:800,domicileEcommerce:1200},{id:2,name:"Chlef",nameAr:"الشلف",stopDeskEcommerce:300,domicileEcommerce:500},{id:3,name:"Laghouat",nameAr:"الأغواط",stopDeskEcommerce:500,domicileEcommerce:800},{id:4,name:"Oum El Bouaghi",nameAr:"أم البواقي",stopDeskEcommerce:450,domicileEcommerce:700},{id:5,name:"Batna",nameAr:"باتنة",stopDeskEcommerce:500,domicileEcommerce:800},{id:6,name:"B\xe9ja\xefa",nameAr:"بجاية",stopDeskEcommerce:400,domicileEcommerce:600},{id:7,name:"Biskra",nameAr:"بسكرة",stopDeskEcommerce:600,domicileEcommerce:900},{id:8,name:"B\xe9char",nameAr:"بشار",stopDeskEcommerce:1e3,domicileEcommerce:1500},{id:9,name:"Blida",nameAr:"البليدة",stopDeskEcommerce:250,domicileEcommerce:400},{id:10,name:"Bouira",nameAr:"البويرة",stopDeskEcommerce:300,domicileEcommerce:500},{id:11,name:"Tamanrasset",nameAr:"تمنراست",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:12,name:"T\xe9bessa",nameAr:"تبسة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:13,name:"Tlemcen",nameAr:"تلمسان",stopDeskEcommerce:450,domicileEcommerce:700},{id:14,name:"Tiaret",nameAr:"تيارت",stopDeskEcommerce:400,domicileEcommerce:600},{id:15,name:"Tizi Ouzou",nameAr:"تيزي وزو",stopDeskEcommerce:300,domicileEcommerce:450},{id:16,name:"Alger",nameAr:"الجزائر",stopDeskEcommerce:200,domicileEcommerce:300},{id:17,name:"Djelfa",nameAr:"الجلفة",stopDeskEcommerce:450,domicileEcommerce:700},{id:18,name:"Jijel",nameAr:"جيجل",stopDeskEcommerce:350,domicileEcommerce:550},{id:19,name:"S\xe9tif",nameAr:"سطيف",stopDeskEcommerce:400,domicileEcommerce:600},{id:20,name:"Sa\xefda",nameAr:"سعيدة",stopDeskEcommerce:400,domicileEcommerce:600},{id:21,name:"Skikda",nameAr:"سكيكدة",stopDeskEcommerce:400,domicileEcommerce:650},{id:22,name:"Sidi Bel Abb\xe8s",nameAr:"سيدي بلعباس",stopDeskEcommerce:450,domicileEcommerce:700},{id:23,name:"Annaba",nameAr:"عنابة",stopDeskEcommerce:450,domicileEcommerce:700},{id:24,name:"Guelma",nameAr:"قالمة",stopDeskEcommerce:400,domicileEcommerce:650},{id:25,name:"Constantine",nameAr:"قسنطينة",stopDeskEcommerce:400,domicileEcommerce:600},{id:26,name:"M\xe9d\xe9a",nameAr:"المدية",stopDeskEcommerce:300,domicileEcommerce:500},{id:27,name:"Mostaganem",nameAr:"مستغانم",stopDeskEcommerce:400,domicileEcommerce:600},{id:28,name:"M'Sila",nameAr:"المسيلة",stopDeskEcommerce:450,domicileEcommerce:700},{id:29,name:"Mascara",nameAr:"معسكر",stopDeskEcommerce:400,domicileEcommerce:650},{id:30,name:"Ouargla",nameAr:"ورقلة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:31,name:"Oran",nameAr:"وهران",stopDeskEcommerce:250,domicileEcommerce:400},{id:32,name:"El Bayadh",nameAr:"البيض",stopDeskEcommerce:500,domicileEcommerce:800},{id:33,name:"Illizi",nameAr:"إليزي",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:34,name:"Bordj Bou Arr\xe9ridj",nameAr:"برج بوعريريج",stopDeskEcommerce:400,domicileEcommerce:600},{id:35,name:"Boumerd\xe8s",nameAr:"بومرداس",stopDeskEcommerce:300,domicileEcommerce:450},{id:36,name:"El Tarf",nameAr:"الطارف",stopDeskEcommerce:450,domicileEcommerce:700},{id:37,name:"Tindouf",nameAr:"تندوف",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:38,name:"Tissemsilt",nameAr:"تيسمسيلت",stopDeskEcommerce:350,domicileEcommerce:550},{id:39,name:"El Oued",nameAr:"الوادي",stopDeskEcommerce:600,domicileEcommerce:900},{id:40,name:"Khenchela",nameAr:"خنشلة",stopDeskEcommerce:500,domicileEcommerce:800},{id:41,name:"Souk Ahras",nameAr:"سوق أهراس",stopDeskEcommerce:450,domicileEcommerce:700},{id:42,name:"Tipaza",nameAr:"تيبازة",stopDeskEcommerce:250,domicileEcommerce:400},{id:43,name:"Mila",nameAr:"ميلة",stopDeskEcommerce:400,domicileEcommerce:600},{id:44,name:"A\xefn Defla",nameAr:"عين الدفلى",stopDeskEcommerce:300,domicileEcommerce:500},{id:45,name:"Na\xe2ma",nameAr:"النعامة",stopDeskEcommerce:500,domicileEcommerce:800},{id:46,name:"A\xefn T\xe9mouchent",nameAr:"عين تيموشنت",stopDeskEcommerce:400,domicileEcommerce:650},{id:47,name:"Gharda\xefa",nameAr:"غرداية",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:48,name:"Relizane",nameAr:"غليزان",stopDeskEcommerce:400,domicileEcommerce:600},{id:49,name:"Timimoun",nameAr:"تيميمون",stopDeskEcommerce:900,domicileEcommerce:1400},{id:50,name:"Bordj Badji Mokhtar",nameAr:"برج باجي مختار",stopDeskEcommerce:1100,domicileEcommerce:1600},{id:51,name:"Ouled Djellal",nameAr:"أولاد جلال",stopDeskEcommerce:700,domicileEcommerce:1100},{id:52,name:"Beni Abbes",nameAr:"بني عباس",stopDeskEcommerce:850,domicileEcommerce:1300},{id:53,name:"In Salah",nameAr:"عين صالح",stopDeskEcommerce:1150,domicileEcommerce:1700},{id:54,name:"In Guezzam",nameAr:"عين قزام",stopDeskEcommerce:1250,domicileEcommerce:1900},{id:55,name:"Touggourt",nameAr:"تقرت",stopDeskEcommerce:600,domicileEcommerce:950},{id:56,name:"Djanet",nameAr:"جانت",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:57,name:"El M'Ghair",nameAr:"المغير",stopDeskEcommerce:800,domicileEcommerce:1200},{id:58,name:"El Meniaa",nameAr:"المنيعة",stopDeskEcommerce:900,domicileEcommerce:1400}].sort((e,r)=>e.id-r.id)},4401:function(e,r,t){"use strict";t.d(r,{X:function(){return a}});var s=t(3325);class c{async initializeOrders(){await this.loadOrders()}async loadOrders(){this.orders=await s.k.getOrders()}setupDataSync(){window.addEventListener("data-updated",e=>{let r=e.detail;r&&r.orders&&(this.orders=r.orders)})}generateOrderId(){let e=Date.now().toString(),r=Math.random().toString(36).substr(2,4).toUpperCase();return"OBS".concat(e.slice(-6)).concat(r)}async createOrder(e,r){try{let t=this.generateOrderId(),c=new Date,a={id:t,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone,customerAddress:e.customerAddress,customerCity:e.customerCity||"",wilayaId:e.wilayaId,wilayaName:e.wilayaName,productId:e.productId,productName:r.name,productImage:r.image,selectedSize:e.selectedSize,selectedColor:e.selectedColor,quantity:e.quantity,subtotal:e.subtotal,shippingCost:e.shippingCost,total:e.total,shippingType:"domicileEcommerce"===e.shippingType?"homeDelivery":"stopDesk",paymentMethod:e.paymentMethod,paymentStatus:"pending",status:"pending",orderDate:c,notes:e.notes||"",trackingNumber:"",estimatedDelivery:this.calculateEstimatedDelivery(e.shippingType),createdAt:c,updatedAt:c};return await s.k.addOrder(a),this.orders.unshift(a),console.log("✅ Order created successfully, email will be sent via API"),{success:!0,orderId:t}}catch(e){return console.error("❌ Failed to create order:",e),{success:!1,error:"Failed to create order. Please try again."}}}getOrders(){return this.orders}getOrder(e){return this.orders.find(r=>r.id===e)}async updateOrderStatus(e,r,t){try{let c=this.orders.findIndex(r=>r.id===e);if(-1===c)return!1;let a={...this.orders[c],status:r,trackingNumber:t||this.orders[c].trackingNumber,updatedAt:new Date};return await s.k.updateOrder(e,a),this.orders[c]=a,!0}catch(e){return console.error("Failed to update order status:",e),!1}}calculateEstimatedDelivery(e){let r=new Date;return r.setDate(r.getDate()+("domicileEcommerce"===e?3:2)),r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getOrderStats(){let e=this.orders.length,r=this.orders.filter(e=>"pending"===e.status).length,t=this.orders.filter(e=>"confirmed"===e.status).length,s=this.orders.filter(e=>"shipped"===e.status).length;return{total:e,pending:r,confirmed:t,shipped:s,delivered:this.orders.filter(e=>"delivered"===e.status).length,cancelled:this.orders.filter(e=>"cancelled"===e.status).length,totalRevenue:this.orders.filter(e=>"delivered"===e.status).reduce((e,r)=>e+r.total,0)}}setOrders(e){this.orders=e}exportOrdersCSV(){return[["Order ID","Date","Customer","Email","Phone","Product","Size","Color","Quantity","Total","Status","Wilaya","Shipping"],...this.orders.map(e=>{let r="";try{if(e.orderDate instanceof Date)r=e.orderDate.toISOString().split("T")[0];else if("string"==typeof e.orderDate){let t=new Date(e.orderDate);r=isNaN(t.getTime())?e.orderDate:t.toISOString().split("T")[0]}else r="Unknown"}catch(t){console.warn("Error formatting date for order:",e.id,t),r="Unknown"}return[e.id||"N/A",r,e.customerName||"N/A",e.customerEmail||"N/A",e.customerPhone||"N/A",e.productName||"N/A",e.selectedSize||"N/A",e.selectedColor||"N/A",e.quantity||0,e.total||0,e.status||"N/A",e.wilayaName||"N/A",e.shippingType||"N/A"]})].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n")}clearOrders(){this.orders=[]}constructor(){this.orders=[],this.initializeOrders(),this.setupDataSync()}}let a=new c}},function(e){e.O(0,[986,902,440,298,454,137,452,971,938,744],function(){return e(e.s=851)}),_N_E=e.O()}]);