(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{74:function(e,t,s){Promise.resolve().then(s.bind(s,5934))},5934:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eb}});var r=s(7437),a=s(2265),l=s(2457),i=s(4322),o=s(890),n=s(9409),c=s(3505),d=s(2894),m=s(6142),x=s(5305),u=s(3008),h=s(9883),g=s(2549),p=s(6264),b=s(9617),y=s(1138),j=s(3325),v=s(9036),f=s(7972),N=s(5589),w=s(7216),k=s(9670),C=s(8628);function D(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),{login:x}=(0,C.useAuth)(),u=async t=>{t.preventDefault(),m(!0),c("");try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),r=await t.json();t.ok&&r.success?x(e,s):c(r.error||"Invalid username or password")}catch(e){console.error("Login error:",e),c("Network error. Please try again.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(v.Z,{className:"w-8 h-8 text-black"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"OBSIDIAN WEAR"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Admin Panel"})]}),(0,r.jsx)("div",{className:"bg-gray-900 rounded-2xl p-8 border border-gray-800 shadow-2xl",children:(0,r.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white focus:ring-1 focus:ring-white transition-colors",placeholder:"Enter username"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:i?"text":"password",value:s,onChange:e=>l(e.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-white focus:ring-1 focus:ring-white transition-colors",placeholder:"Enter your password"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:i?(0,r.jsx)(w.Z,{className:"w-5 h-5"}):(0,r.jsx)(k.Z,{className:"w-5 h-5"})})]})]}),n&&(0,r.jsx)("div",{className:"p-3 bg-red-900 border border-red-700 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-300 text-sm",children:n})}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-white text-black py-3 px-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black mr-2"}),"Signing in..."]}):"Sign In"})]})})]})})}var A=s(1298),S=s(5750),E=s(8203),P=s(5790),O=s(2245),Z=s(8783);function T(e){let{title:t,value:s,change:a,changeType:l="neutral",icon:i,color:o="blue",loading:n=!1}=e;return n?(0,r.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 animate-pulse",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded w-24"}),(0,r.jsx)("div",{className:"h-8 bg-gray-700 rounded w-16"})]}),(0,r.jsx)("div",{className:"h-12 w-12 bg-gray-700 rounded-lg"})]})}):(0,r.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-gray-600 transition-all duration-200 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm font-medium",children:t}),(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:s}),void 0!==a&&(0,r.jsxs)("div",{className:"flex items-center text-sm ".concat({positive:"text-green-400",negative:"text-red-400",neutral:"text-gray-400"}[l]),children:[(0,r.jsxs)("span",{className:"font-medium",children:["positive"===l?"+":"negative"===l?"-":"",Math.abs(a),"%"]}),(0,r.jsx)("span",{className:"ml-1",children:"vs last month"})]})]}),(0,r.jsx)("div",{className:"p-3 rounded-lg bg-gradient-to-br ".concat({blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600"}[o]," group-hover:scale-110 transition-transform duration-200"),children:(0,r.jsx)(i,{className:"h-6 w-6 text-white"})})]})})}function z(e){let{data:t,type:s="bar",height:l=200,className:i=""}=e,[o,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>n(!0),100);return()=>clearTimeout(e)},[]);let c=Math.max(...t.map(e=>e.value));if("bar"===s)return(0,r.jsx)("div",{className:"space-y-2 ".concat(i),style:{height:l},children:t.map((e,t)=>{let s=c>0?e.value/c*100:0;return(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-400",children:e.label}),(0,r.jsx)("span",{className:"text-white font-medium",children:e.value.toLocaleString()})]}),(0,r.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-1000 ease-out ".concat(o?"w-full":"w-0"),style:{width:o?"".concat(s,"%"):"0%",backgroundColor:e.color||"#3b82f6"}})})]},t)})});if("doughnut"===s){let e=t.reduce((e,t)=>e+t.value,0),s=0;return(0,r.jsxs)("div",{className:"relative ".concat(i),style:{height:l,width:l},children:[(0,r.jsx)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:t.map((t,a)=>{let l=t.value/e*100,i=3.6*s;s+=l;let n=2*Math.PI*40,c="".concat(l/100*n," ").concat(n),d=n-i/360*n;return(0,r.jsx)("circle",{cx:"50",cy:"50",r:40,fill:"none",stroke:t.color||"#3b82f6",strokeWidth:"8",strokeDasharray:c,strokeDashoffset:d,className:"transition-all duration-1000 ease-out",style:{strokeDashoffset:o?d:n}},a)})}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:e}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Total"})]})})]})}return null}function I(e){let{value:t,duration:s=1e3,className:l=""}=e,[i,o]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e,r;let a=l=>{e||(e=l);let i=Math.min((l-e)/s,1);o(Math.floor(t*(1-Math.pow(1-i,4)))),i<1&&(r=requestAnimationFrame(a))};return r=requestAnimationFrame(a),()=>{r&&cancelAnimationFrame(r)}},[t,s]),(0,r.jsx)("span",{className:l,children:i.toLocaleString()})}function L(e){let{products:t,orders:s,customers:l}=e,[o,n]=(0,a.useState)({totalProducts:0,totalOrders:0,totalRevenue:0,totalCustomers:0,lowStockProducts:0,pendingOrders:0,monthlyRevenue:0,averageOrderValue:0}),[m,x]=(0,a.useState)([]),[u,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=t.length,r=s.length,a=s.reduce((e,t)=>e+t.total,0),i=l.length,o=t.filter(e=>!e.stock||10>Object.values(e.stock).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t,0),0)).length,c=s.filter(e=>"pending"===e.status).length,d=new Date;d.setDate(d.getDate()-30),n({totalProducts:e,totalOrders:r,totalRevenue:a,totalCustomers:i,lowStockProducts:o,pendingOrders:c,monthlyRevenue:s.filter(e=>new Date(e.orderDate)>=d).reduce((e,t)=>e+t.total,0),averageOrderValue:r>0?a/r:0}),x(s.slice(0,5)),h(t.map(e=>{let t=s.filter(t=>t.productId===e.id);return{product:e,orders:t.length}}).sort((e,t)=>t.orders-e.orders).slice(0,5))},[t,s,l]);let g=s.length>0?[{label:"This Month",value:o.monthlyRevenue,color:"#10b981"}]:[{label:"No Data",value:0,color:"#6b7280"}],p=Object.entries(t.reduce((e,t)=>{let s=t.category||"Other";return e[s]=(e[s]||0)+1,e},{})).map(e=>{let[t,s]=e;return{label:t,value:s,color:"hsl(".concat(360*Math.random(),", 70%, 50%)")}});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-400 mt-1",children:"Welcome back! Here's what's happening with your store."})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Last updated: ",new Date().toLocaleString()]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(T,{title:"Total Products",value:(0,r.jsx)(I,{value:o.totalProducts}),change:12,changeType:"positive",icon:i.Z,color:"blue"}),(0,r.jsx)(T,{title:"Total Orders",value:(0,r.jsx)(I,{value:o.totalOrders}),change:8,changeType:"positive",icon:c.Z,color:"green"}),(0,r.jsx)(T,{title:"Total Revenue",value:"".concat(o.totalRevenue.toLocaleString()," DA"),change:15,changeType:"positive",icon:A.Z,color:"purple"}),(0,r.jsx)(T,{title:"Total Customers",value:(0,r.jsx)(I,{value:o.totalCustomers}),change:5,changeType:"positive",icon:S.Z,color:"orange"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(T,{title:"Low Stock Products",value:(0,r.jsx)(I,{value:o.lowStockProducts}),icon:d.Z,color:"red"}),(0,r.jsx)(T,{title:"Pending Orders",value:(0,r.jsx)(I,{value:o.pendingOrders}),icon:E.Z,color:"orange"}),(0,r.jsx)(T,{title:"Monthly Revenue",value:"".concat(o.monthlyRevenue.toLocaleString()," DA"),icon:P.Z,color:"green"}),(0,r.jsx)(T,{title:"Avg Order Value",value:"".concat(Math.round(o.averageOrderValue).toLocaleString()," DA"),icon:O.Z,color:"purple"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Revenue Trend"}),(0,r.jsxs)("div",{className:"flex items-center text-green-400 text-sm",children:[(0,r.jsx)(Z.Z,{className:"w-4 h-4 mr-1"}),"+15% from last month"]})]}),(0,r.jsx)(z,{data:g,type:"bar",height:200})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Products by Category"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:[t.length," total"]})]}),(0,r.jsx)(z,{data:p,type:"doughnut",height:200})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Recent Orders"}),(0,r.jsxs)("button",{className:"text-blue-400 hover:text-blue-300 text-sm flex items-center",children:["View all",(0,r.jsx)(Z.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:m.length>0?m.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.customerName}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.productName})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-white font-medium",children:[e.total.toLocaleString()," DA"]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.status})]})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,r.jsx)(c.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No recent orders"})]})})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Top Products"}),(0,r.jsxs)("button",{className:"text-blue-400 hover:text-blue-300 text-sm flex items-center",children:["View all",(0,r.jsx)(Z.Z,{className:"w-4 h-4 ml-1"})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:u.length>0?u.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.product.name}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.product.category})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-white font-medium",children:[e.orders," orders"]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.product.price.toLocaleString()," DA"]})]})]},e.product.id)):(0,r.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,r.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No products yet"})]})})]})]})]})}var M=s(1827),_=s(1813),F=s(4689);function U(e){let{children:t,onClick:s,variant:a="primary",size:l="md",disabled:i=!1,loading:o=!1,className:n="",type:c="button"}=e;return(0,r.jsxs)("button",{type:c,onClick:s,disabled:i||o,className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",outline:"border border-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[l]," ").concat(n),children:[o&&(0,r.jsx)(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),t]})}function R(e){let{isOpen:t,onClose:s,title:l,children:i,size:o="md",className:n=""}=e;return((0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,s]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,r.jsx)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]," ").concat(n),children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 transform transition-all duration-300 scale-100",children:[l&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-white",children:l}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(g.Z,{className:"w-6 h-6"})})]}),(0,r.jsx)("div",{className:"p-6",children:i})]})})]})}):null}function q(e){let{products:t=[],onAddProduct:s=()=>{},onEditProduct:l=()=>{},onDeleteProduct:o=()=>{},onViewProduct:n=()=>{}}=e,[c,m]=(0,a.useState)(""),[x,g]=(0,a.useState)("All"),[p,j]=(0,a.useState)("name"),[v,f]=(0,a.useState)("asc"),[N,w]=(0,a.useState)("grid"),[C,D]=(0,a.useState)([]),[A,S]=(0,a.useState)(!1),[E,P]=(0,a.useState)(!1),[Z,T]=(0,a.useState)(null),z=["All",...Array.from(new Set((t||[]).map(e=>e.category)))],I=(t||[]).filter(e=>{let t=(e.name||"").toLowerCase().includes(c.toLowerCase())||(e.description||"").toLowerCase().includes(c.toLowerCase()),s="All"===x||e.category===x;return t&&s}).sort((e,t)=>{let s=e[p],r=t[p];return void 0===s&&void 0===r?0:void 0===s?"asc"===v?-1:1:void 0===r?"asc"===v?1:-1:("string"==typeof s&&(s=s.toLowerCase()),"string"==typeof r&&(r=r.toLowerCase()),s<r)?"asc"===v?-1:1:s>r?"asc"===v?1:-1:0}),L=e=>{if(!e.stock)return{total:0,status:"out"};let t=Object.values(e.stock).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t,0),0);return 0===t?{total:t,status:"out"}:t<10?{total:t,status:"low"}:{total:t,status:"good"}},q=e=>{D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},B=e=>{T(e),P(!0)};return(0,a.useEffect)(()=>{S(C.length>0)},[C]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Products"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage your product catalog"})]}),(0,r.jsxs)(U,{onClick:s,className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"Add Product"]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(M.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search products...",value:c,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),(0,r.jsx)("select",{value:x,onChange:e=>g(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:z.map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),(0,r.jsxs)("select",{value:"".concat(p,"-").concat(v),onChange:e=>{let[t,s]=e.target.value.split("-");j(t),f(s)},className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,r.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,r.jsx)("option",{value:"price-asc",children:"Price Low-High"}),(0,r.jsx)("option",{value:"price-desc",children:"Price High-Low"}),(0,r.jsx)("option",{value:"createdAt-desc",children:"Newest First"}),(0,r.jsx)("option",{value:"createdAt-asc",children:"Oldest First"})]}),(0,r.jsxs)("div",{className:"flex bg-gray-700 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:()=>w("grid"),className:"p-2 rounded ".concat("grid"===N?"bg-blue-600 text-white":"text-gray-400"),children:(0,r.jsx)(_.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>w("list"),className:"p-2 rounded ".concat("list"===N?"bg-blue-600 text-white":"text-gray-400"),children:(0,r.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),A&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-blue-300 text-sm",children:[C.length," product",1!==C.length?"s":""," selected"]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,r.jsx)(U,{variant:"outline",size:"sm",onClick:()=>D([]),children:"Clear"}),(0,r.jsx)(U,{variant:"danger",size:"sm",onClick:()=>{C.forEach(e=>o(e)),D([]),S(!1)},children:"Delete Selected"})]})]})]}),I.length>0?(0,r.jsx)("div",{className:"grid"===N?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:I.map(e=>{let t=L(e);return"grid"===N?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700 hover:border-gray-600 transition-all duration-200 group",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e.image||"/placeholder-product.jpg",alt:e.name||"Product",className:"w-full h-48 object-cover"}),(0,r.jsx)("div",{className:"absolute top-2 left-2",children:(0,r.jsx)("input",{type:"checkbox",checked:C.includes(e.id),onChange:()=>q(e.id),className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"})}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[(0,r.jsx)("button",{onClick:()=>n(e),className:"p-1 bg-black/50 text-white rounded hover:bg-black/70 transition-colors",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>l(e),className:"p-1 bg-black/50 text-white rounded hover:bg-black/70 transition-colors",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>B(e),className:"p-1 bg-black/50 text-red-400 rounded hover:bg-red-500/20 transition-colors",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2 line-clamp-2",children:e.name||"Unnamed Product"}),(0,r.jsx)("div",{className:"flex items-center gap-1 mb-2",children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>(0,r.jsx)(O.Z,{size:12,className:s<Math.floor(e.rating)?"text-yellow-400 fill-current":"text-gray-600"},s))}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-white",children:[Number(e.price).toFixed(0)," DA"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["out"===t.status&&(0,r.jsx)(d.Z,{className:"w-4 h-4 text-red-400"}),"low"===t.status&&(0,r.jsx)(d.Z,{className:"w-4 h-4 text-yellow-400"}),"good"===t.status&&(0,r.jsx)(u.Z,{className:"w-4 h-4 text-green-400"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,r.jsxs)("div",{children:["Category: ",e.category||"Uncategorized"]}),(0,r.jsxs)("div",{children:["Stock: ",t.total," units"]})]})]})]},e.id):(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:C.includes(e.id),onChange:()=>q(e.id),className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"}),(0,r.jsx)("img",{src:e.image||"/placeholder-product.jpg",alt:e.name||"Product",className:"w-16 h-16 object-cover rounded"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-semibold text-white truncate",children:e.name||"Unnamed Product"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm truncate",children:e.description||"No description"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:e.category||"Uncategorized"}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>(0,r.jsx)(O.Z,{size:12,className:s<Math.floor(e.rating)?"text-yellow-400 fill-current":"text-gray-600"},s))})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-white",children:[e.price," DA"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,r.jsxs)("span",{children:["Stock: ",t.total]}),"out"===t.status&&(0,r.jsx)(d.Z,{className:"w-4 h-4 text-red-400"}),"low"===t.status&&(0,r.jsx)(d.Z,{className:"w-4 h-4 text-yellow-400"}),"good"===t.status&&(0,r.jsx)(u.Z,{className:"w-4 h-4 text-green-400"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>n(e),className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>l(e),className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>B(e),className:"p-2 text-red-400 hover:text-red-300 transition-colors",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})]})},e.id)})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(i.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No products found"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:c||"All"!==x?"Try adjusting your search or filters":"Get started by adding your first product"}),!c&&"All"===x&&(0,r.jsxs)(U,{onClick:s,children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),(0,r.jsx)(R,{isOpen:E,onClose:()=>P(!1),title:"Delete Product",size:"sm",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-300",children:["Are you sure you want to delete ",(0,r.jsx)("strong",{children:null==Z?void 0:Z.name}),"? This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(U,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,r.jsx)(U,{variant:"danger",onClick:()=>{Z&&(o(Z.id),P(!1),T(null))},children:"Delete Product"})]})]})})]})}var B=s(2104),V=s(4280),W=s(2601);function H(e){var t;let{onClose:s}=e,[l,o]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[m,x]=(0,a.useState)(""),[h,g]=(0,a.useState)("all"),[p,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[f,N]=(0,a.useState)(0),[w,k]=(0,a.useState)(""),C=async()=>{try{c(!0);let e=await fetch("/api/inventory"),t=await e.json();t.success?o(t.data):console.error("Failed to load inventory:",t.error)}catch(e){console.error("Error loading inventory:",e)}finally{c(!1)}};(0,a.useEffect)(()=>{C()},[]);let D=l.filter(e=>{var t;let s=(null===(t=e.products)||void 0===t?void 0:t.name.toLowerCase().includes(m.toLowerCase()))||e.size.toLowerCase().includes(m.toLowerCase())||e.color.toLowerCase().includes(m.toLowerCase()),r=!0;return"low"===h?r=e.available_quantity<=e.min_stock_level:"out"===h?r=0===e.available_quantity:"in-stock"===h&&(r=e.available_quantity>e.min_stock_level),s&&r}),A=async(e,t)=>{try{let s=await fetch("/api/inventory/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W.env.NEXT_PUBLIC_API_AUTH_TOKEN||"obsidian-api-token-2025")},body:JSON.stringify({quantity:t,reason:w||"Manual adjustment",createdBy:"admin"})}),r=await s.json();r.success?(o(t=>t.map(t=>t.id===e.id?{...t,quantity:r.data.quantity,available_quantity:r.data.available_quantity,reserved_quantity:r.data.reserved_quantity,updated_at:r.data.updated_at}:t)),y(null),k(""),N(0),console.log("✅ Inventory updated successfully!")):console.error("Failed to update inventory:",r.error)}catch(e){console.error("Error updating inventory:",e)}},S=e=>0===e.available_quantity?"out":e.available_quantity<=e.min_stock_level?"low":"in-stock",E=e=>{switch(e){case"out":return"text-red-400 bg-red-900/20";case"low":return"text-yellow-400 bg-yellow-900/20";case"in-stock":return"text-green-400 bg-green-900/20";default:return"text-gray-400 bg-gray-900/20"}},P=e=>{switch(e){case"out":return(0,r.jsx)(B.Z,{className:"w-4 h-4"});case"low":return(0,r.jsx)(d.Z,{className:"w-4 h-4"});case"in-stock":return(0,r.jsx)(u.Z,{className:"w-4 h-4"});default:return(0,r.jsx)(i.Z,{className:"w-4 h-4"})}};return n?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-gray-900 p-8 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(V.Z,{className:"w-6 h-6 animate-spin text-blue-400"}),(0,r.jsx)("span",{className:"text-white",children:"Loading inventory..."})]})})}):(0,r.jsx)("div",{className:"inventory-manager-modal bg-black/70 p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg w-full max-w-7xl h-[90vh] flex flex-col shadow-2xl border border-gray-700 relative",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(i.Z,{className:"w-8 h-8 text-blue-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Inventory Management"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage product stock levels and track inventory"})]})]}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(B.Z,{className:"w-6 h-6"})})]})}),(0,r.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(M.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search products, sizes, or colors...",value:m,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Items"}),(0,r.jsx)("option",{value:"in-stock",children:"In Stock"}),(0,r.jsx)("option",{value:"low",children:"Low Stock"}),(0,r.jsx)("option",{value:"out",children:"Out of Stock"})]}),(0,r.jsxs)("button",{onClick:C,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Refresh"})]})]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Size"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Color"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Quantity"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Available"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-700",children:D.map(e=>{var t,s;let a=S(e);return(0,r.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(null===(t=e.products)||void 0===t?void 0:t.image)&&(0,r.jsx)("img",{src:e.products.image,alt:e.products.name,className:"w-10 h-10 rounded-lg object-cover mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:(null===(s=e.products)||void 0===s?void 0:s.name)||"Unknown Product"}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["ID: ",e.product_id]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.size}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.color}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.quantity}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.available_quantity}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(E(a)),children:[P(a),(0,r.jsx)("span",{className:"ml-1 capitalize",children:a.replace("-"," ")})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:()=>{y(e),N(e.quantity)},className:"text-blue-400 hover:text-blue-300 mr-3",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})})})]},e.id)})})]})})}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[10000]",style:{zIndex:1e4},children:(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg w-full max-w-md shadow-2xl border border-gray-700",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Update Inventory - ",null===(t=p.products)||void 0===t?void 0:t.name]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Size: ",p.size," | Color: ",p.color]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Current Quantity: ",p.quantity]}),(0,r.jsx)("input",{type:"number",value:f,onChange:e=>N(parseInt(e.target.value)||0),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason (optional)"}),(0,r.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"e.g., Stock received, Manual adjustment",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{y(null),k(""),N(0)},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>A(p,f),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Update"})]})]})]})})]})})}var G=s(6691),J=s.n(G),X=s(1961),K=s(5817),Q=s(4401);function Y(e){let{orders:t=[],onUpdateOrder:s=()=>{},onDeleteOrder:l=()=>{},onViewOrder:o=()=>{}}=e,[n,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(""),[h,p]=(0,a.useState)("All"),[b,j]=(0,a.useState)("All"),[v,N]=(0,a.useState)("orderDate"),[w,C]=(0,a.useState)("desc"),D=e=>e.productImage&&e.productImage.length>100?e.productImage:null,[S,E]=(0,a.useState)([]),[P,O]=(0,a.useState)(!1),[Z,T]=(0,a.useState)(!1),[z,I]=(0,a.useState)(null),[L,_]=(0,a.useState)(null),F=(t||[]).filter(e=>{let t=(e.customerName||"").toLowerCase().includes(x.toLowerCase())||(e.productName||"").toLowerCase().includes(x.toLowerCase())||(e.id||"").toLowerCase().includes(x.toLowerCase()),s="All"===h||e.status===h,r="All"===b||e.paymentStatus===b;return t&&s&&r}).sort((e,t)=>{let s=e[v],r=t[v];return void 0===s&&void 0===r?0:void 0===s?"asc"===w?-1:1:void 0===r?"asc"===w?1:-1:(s instanceof Date&&r instanceof Date&&(s=s.getTime(),r=r.getTime()),s<r)?"asc"===w?-1:1:s>r?"asc"===w?1:-1:0}),q=e=>{switch(e){case"pending":return"text-yellow-400 bg-yellow-900/20";case"processing":return"text-blue-400 bg-blue-900/20";case"shipped":return"text-purple-400 bg-purple-900/20";case"delivered":return"text-green-400 bg-green-900/20";case"cancelled":return"text-red-400 bg-red-900/20";default:return"text-gray-400 bg-gray-900/20"}},B=e=>{switch(e){case"pending":return"text-yellow-400 bg-yellow-900/20";case"paid":return"text-green-400 bg-green-900/20";case"failed":return"text-red-400 bg-red-900/20";default:return"text-gray-400 bg-gray-900/20"}},W=e=>{E(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},H=e=>{S.forEach(t=>s(t,{status:e})),E([]),O(!1)},G=e=>{I(e),T(!0)},Y=(e,t)=>{s(e,{status:t})},$=(e,t)=>{s(e,{paymentStatus:t})},ee=e=>{c(e),m(!0)};(0,a.useEffect)(()=>{O(S.length>0)},[S]);let et=t||[],es={total:et.length,pending:et.filter(e=>"pending"===e.status).length,processing:et.filter(e=>"processing"===e.status).length,shipped:et.filter(e=>"shipped"===e.status).length,delivered:et.filter(e=>"delivered"===e.status).length,totalRevenue:et.reduce((e,t)=>e+(t.total||0),0),averageOrderValue:et.length>0?et.reduce((e,t)=>e+(t.total||0),0)/et.length:0};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Orders"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage customer orders and track fulfillment"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(U,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{try{if(console.log("Starting export with orders:",t.length),!t||0===t.length){alert("No orders to export.");return}Q.X.setOrders(t);let e=Q.X.exportOrdersCSV();if(!e||""===e.trim())throw Error("Generated CSV content is empty");console.log("Generated CSV content length:",e.length);let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a),r.setAttribute("download","orders-export-".concat(new Date().toISOString().split("T")[0],".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>URL.revokeObjectURL(a),100),console.log("Orders exported successfully")}catch(e){console.error("Error exporting orders:",e),alert("Failed to export orders: ".concat(e instanceof Error?e.message:"Unknown error"))}},children:[(0,r.jsx)(K.Z,{className:"w-4 h-4"}),"Export"]}),(0,r.jsxs)(U,{className:"flex items-center gap-2",onClick:()=>{window.location.reload()},children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Refresh"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:es.total}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Total Orders"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:es.pending}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Pending"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:es.processing}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Processing"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:es.shipped}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Shipped"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-400",children:es.delivered}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Delivered"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-white",children:[es.totalRevenue.toLocaleString()," DA"]}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Total Revenue"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(M.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search orders...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),(0,r.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"All",children:"All Statuses"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,r.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"All",children:"All Payments"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"paid",children:"Paid"}),(0,r.jsx)("option",{value:"failed",children:"Failed"})]}),(0,r.jsxs)("select",{value:"".concat(v,"-").concat(w),onChange:e=>{let[t,s]=e.target.value.split("-");N(t),C(s)},className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"orderDate-desc",children:"Newest First"}),(0,r.jsx)("option",{value:"orderDate-asc",children:"Oldest First"}),(0,r.jsx)("option",{value:"total-desc",children:"Highest Value"}),(0,r.jsx)("option",{value:"total-asc",children:"Lowest Value"}),(0,r.jsx)("option",{value:"customerName-asc",children:"Customer A-Z"}),(0,r.jsx)("option",{value:"customerName-desc",children:"Customer Z-A"})]})]}),P&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-blue-300 text-sm",children:[S.length," order",1!==S.length?"s":""," selected"]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,r.jsxs)("select",{onChange:e=>H(e.target.value),className:"px-3 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[(0,r.jsx)("option",{value:"",children:"Update Status"}),(0,r.jsx)("option",{value:"processing",children:"Mark as Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Mark as Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Mark as Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancel Orders"})]}),(0,r.jsx)(U,{variant:"outline",size:"sm",onClick:()=>E([]),children:"Clear"})]})]})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:(0,r.jsx)("input",{type:"checkbox",checked:S.length===F.length&&F.length>0,onChange:()=>{E(S.length===F.length?[]:F.map(e=>e.id))},className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"})}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Order ID"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Customer"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Product"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Shipping"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Payment"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Total"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-white font-medium",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:F.map(e=>{var t;return(0,r.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-gray-700/50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"checkbox",checked:S.includes(e.id),onChange:()=>W(e.id),className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"text-white font-mono text-sm",children:["#",e.id.slice(-8)]})}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.customerName||"Unknown Customer"}),(0,r.jsx)("div",{className:"text-gray-400 text-sm",children:e.customerPhone||"No phone"}),(0,r.jsx)("div",{className:"text-gray-400 text-xs",children:e.customerEmail||"No email"}),e.customerCity&&(0,r.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["\uD83C\uDFD9️ ",e.customerCity]}),e.customerAddress&&(0,r.jsxs)("div",{className:"text-gray-500 text-xs mt-1 truncate max-w-[200px]",title:e.customerAddress,children:["\uD83D\uDCCD ",e.customerAddress]})]}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[D(e)&&(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:(null===(t=D(e))||void 0===t?void 0:t.startsWith("data:"))?(0,r.jsx)("img",{src:D(e),alt:e.productName,className:"w-full h-full object-cover",onLoad:()=>console.log("✅ Order product image loaded:",e.productName),onError:t=>console.error("❌ Order product image failed to load:",e.productName,t)}):(0,r.jsx)(J(),{src:D(e),alt:e.productName,width:48,height:48,className:"w-full h-full object-cover",onLoad:()=>console.log("✅ Order product image loaded:",e.productName),onError:t=>console.error("❌ Order product image failed to load:",e.productName,t)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.productName||"Unknown Product"}),(0,r.jsxs)("div",{className:"text-gray-400 text-sm",children:[e.selectedSize||"N/A"," • ",e.selectedColor||"N/A"]}),(0,r.jsxs)("div",{className:"text-gray-400 text-xs",children:["Qty: ",e.quantity||0]})]})]})}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[(0,r.jsx)("div",{className:"text-white text-sm",children:"homeDelivery"===e.shippingType?"Home Delivery":"Stop Desk"}),(0,r.jsx)("div",{className:"text-gray-400 text-xs",children:e.wilayaName||"Unknown Wilaya"}),(0,r.jsxs)("div",{className:"text-gray-400 text-xs",children:[e.shippingCost||0," DA"]})]}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:e.status,onChange:t=>Y(e.id,t.target.value),className:"px-2 py-1 rounded text-xs font-medium border-0 ".concat(q(e.status)),children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:e.paymentStatus,onChange:t=>$(e.id,t.target.value),className:"px-2 py-1 rounded text-xs font-medium border-0 ".concat(B(e.paymentStatus)),children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"paid",children:"Paid"}),(0,r.jsx)("option",{value:"failed",children:"Failed"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"text-white font-semibold",children:[(e.total||0).toLocaleString()," DA"]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-gray-300 text-sm",children:e.orderDate?new Date(e.orderDate).toLocaleDateString():"Unknown Date"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("button",{onClick:()=>ee(e),className:"p-1 text-gray-400 hover:text-white transition-colors",title:"View Order",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>G(e),className:"p-1 text-red-400 hover:text-red-300 transition-colors",title:"Delete Order",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),0===F.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(i.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-400",children:x||"All"!==h||"All"!==b?"Try adjusting your search or filters":"Orders will appear here when customers make purchases"})]}),(0,r.jsx)(R,{isOpen:Z,onClose:()=>T(!1),title:"Delete Order",size:"sm",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-300",children:["Are you sure you want to delete order ",(0,r.jsx)("strong",{children:null==z?void 0:z.id}),"? This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(U,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,r.jsx)(U,{variant:"danger",onClick:()=>{z&&(l(z.id),T(!1),I(null))},children:"Delete Order"})]})]})}),d&&n&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-gray-800 w-full max-w-4xl max-h-[90vh] overflow-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Order Details"}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(g.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"w-5 h-5"}),"Order Information"]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Order ID:"}),(0,r.jsxs)("span",{className:"text-white font-mono",children:["#",n.id.slice(-8)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Order Date:"}),(0,r.jsx)("span",{className:"text-white",children:new Date(n.orderDate).toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(q(n.status)),children:n.status})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Payment Status:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(B(n.paymentStatus)),children:n.paymentStatus})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(A.Z,{className:"w-5 h-5"}),"Payment Details"]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Subtotal:"}),(0,r.jsxs)("span",{className:"text-white",children:[n.subtotal.toLocaleString()," DA"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Shipping Cost:"}),(0,r.jsxs)("span",{className:"text-white",children:[n.shippingCost.toLocaleString()," DA"]})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t border-gray-700 pt-2",children:[(0,r.jsx)("span",{className:"text-white font-semibold",children:"Total:"}),(0,r.jsxs)("span",{className:"text-white font-semibold text-lg",children:[n.total.toLocaleString()," DA"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),"Customer Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Name"}),(0,r.jsx)("div",{className:"text-white font-medium",children:n.customerName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Phone"}),(0,r.jsx)("div",{className:"text-white",children:n.customerPhone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Email"}),(0,r.jsx)("div",{className:"text-white",children:n.customerEmail||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"City"}),(0,r.jsx)("div",{className:"text-white",children:n.customerCity||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Address"}),(0,r.jsx)("div",{className:"text-white",children:n.customerAddress||"Not provided"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"w-5 h-5"}),"Product Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Product Name"}),(0,r.jsx)("div",{className:"text-white font-medium",children:n.productName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Size & Color"}),(0,r.jsxs)("div",{className:"text-white",children:[n.selectedSize," • ",n.selectedColor]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Quantity"}),(0,r.jsx)("div",{className:"text-white",children:n.quantity})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Unit Price"}),(0,r.jsxs)("div",{className:"text-white",children:[(n.subtotal/n.quantity).toLocaleString()," DA"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(X.Z,{className:"w-5 h-5"}),"Shipping Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Shipping Type"}),(0,r.jsx)("div",{className:"text-white",children:"homeDelivery"===n.shippingType?"Home Delivery":"Stop Desk"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Wilaya"}),(0,r.jsx)("div",{className:"text-white",children:n.wilayaName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Shipping Cost"}),(0,r.jsxs)("div",{className:"text-white",children:[n.shippingCost.toLocaleString()," DA"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Payment Method"}),(0,r.jsx)("div",{className:"text-white",children:"cod"===n.paymentMethod?"Cash on Delivery":"Bank Transfer"})]})]})]}),(n.notes||n.trackingNumber||n.estimatedDelivery)&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"text-white font-semibold mb-3",children:"Additional Information"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[n.trackingNumber&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Tracking Number"}),(0,r.jsx)("div",{className:"text-white font-mono",children:n.trackingNumber})]}),n.estimatedDelivery&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Estimated Delivery"}),(0,r.jsx)("div",{className:"text-white",children:n.estimatedDelivery})]}),n.notes&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-1",children:"Notes"}),(0,r.jsx)("div",{className:"text-white",children:n.notes})]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-800",children:(0,r.jsx)("button",{onClick:()=>m(!1),className:"px-6 py-2 bg-white text-black rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})})]})})]})}var $=s(8068),ee=s(2940);function et(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(!0),[i,o]=(0,a.useState)("00:00"),[n,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{c(!0);let e=await fetch("/api/maintenance"),s=await e.json();if(s.drop_date){let e=new Date(s.drop_date);t(e.toISOString().split("T")[0]),o(e.toTimeString().slice(0,5))}else{let e=new Date,s=new Date(e.getTime()+2592e6);t(s.toISOString().split("T")[0]),o("00:00")}l(!1===s.is_maintenance_mode)}catch(e){console.error("Error loading maintenance settings:",e),t(new Date(new Date().getTime()+2592e6).toISOString().split("T")[0]),o("00:00"),l(!0)}finally{c(!1)}},g=async()=>{try{u(!0);let t="".concat(e,"T").concat(i,":00");if((await fetch("/api/maintenance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({drop_date:t})})).ok)alert("Drop date updated successfully!");else throw Error("Failed to update drop date")}catch(e){console.error("Error updating drop date:",e),alert("Failed to update drop date. Please try again.")}finally{u(!1)}},b=async()=>{try{u(!0);let e=!s;if((await fetch("/api/maintenance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_maintenance_mode:!e})})).ok)l(e),e?alert("Store is now OPEN. Customers can shop normally."):alert("Store is now in MAINTENANCE MODE. Customers will see the maintenance page.");else throw Error("Failed to update store status")}catch(e){console.error("Error updating store status:",e),alert("Failed to update store status. Please try again.")}finally{u(!1)}};return n?(0,r.jsx)("div",{className:"p-4 sm:p-6 flex items-center justify-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(p.Z,{className:"w-6 h-6 animate-spin text-blue-400"}),(0,r.jsx)("span",{className:"text-gray-400",children:"Loading maintenance settings..."})]})}):(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Maintenance & Store Control"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage store availability and drop dates"})]}),(0,r.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-white mb-2 flex items-center",children:[s?(0,r.jsx)($.Z,{className:"w-6 h-6 text-green-400 mr-2"}):(0,r.jsx)(ee.Z,{className:"w-6 h-6 text-red-400 mr-2"}),"Store Status"]}),(0,r.jsx)("p",{className:"text-gray-400",children:s?"Store is currently OPEN - customers can browse and purchase":"Store is in MAINTENANCE MODE - customers see maintenance page"})]}),(0,r.jsxs)("button",{onClick:b,disabled:m,className:"px-6 py-3 rounded-lg font-semibold transition-colors flex items-center space-x-2 ".concat(s?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-800":"bg-green-600 hover:bg-green-700 text-white disabled:bg-green-800"),children:[m&&(0,r.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:s?"Turn OFF Store":"Turn ON Store"})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800/50",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[(0,r.jsx)(E.Z,{className:"w-6 h-6 text-blue-400 mr-2"}),"Drop Date Configuration"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:"Drop Date"}),(0,r.jsx)("input",{type:"date",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-white transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-400 text-sm font-medium mb-2",children:"Drop Time"}),(0,r.jsx)("input",{type:"time",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-white transition-colors"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsxs)("button",{onClick:g,disabled:m,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-blue-800",children:[m?(0,r.jsx)(p.Z,{className:"w-5 h-5 mr-2 animate-spin"}):(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Update Drop Date"]}),(0,r.jsxs)("button",{onClick:()=>{window.open("/maintenance","_blank")},className:"flex items-center justify-center px-6 py-3 bg-gray-700 text-white rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:[(0,r.jsx)(k.Z,{className:"w-5 h-5 mr-2"}),"Preview Maintenance Page"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800/50",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Current Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Store Status"}),(0,r.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(s?"bg-green-900 text-green-300":"bg-red-900 text-red-300"),children:s?"\uD83D\uDFE2 OPEN":"\uD83D\uDD34 MAINTENANCE"})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Next Drop"}),(0,r.jsx)("p",{className:"text-gray-300",children:new Date("".concat(e,"T").concat(i)).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,r.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-yellow-300 font-semibold",children:"Important Notes"}),(0,r.jsxs)("ul",{className:"text-yellow-200/80 text-sm mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"• When store is OFF, all visitors see the maintenance page"}),(0,r.jsx)("li",{children:"• Admin panel remains accessible at /admin"}),(0,r.jsx)("li",{children:"• Drop date shows on maintenance page with live countdown"}),(0,r.jsx)("li",{children:"• Changes take effect immediately"})]})]})]})})]})}var es=s(9298),er=s(9137),ea=s(6713),el=s(8004),ei=s(4135),eo=s(3088),en=s(7480),ec=s(5883);let ed=[{id:"dashboard",icon:l.Z,label:"Dashboard",color:"text-blue-400",bgColor:"bg-blue-500/20"},{id:"products",icon:i.Z,label:"Products",color:"text-emerald-400",bgColor:"bg-emerald-500/20"},{id:"inventory",icon:o.Z,label:"Inventory",color:"text-cyan-400",bgColor:"bg-cyan-500/20"},{id:"orders",icon:c.Z,label:"Orders",color:"text-orange-400",bgColor:"bg-orange-500/20"},{id:"analytics",icon:P.Z,label:"Analytics",color:"text-purple-400",bgColor:"bg-purple-500/20"},{id:"customers",icon:S.Z,label:"Customers",color:"text-pink-400",bgColor:"bg-pink-500/20"},{id:"maintenance",icon:d.Z,label:"Maintenance",color:"text-yellow-400",bgColor:"bg-yellow-500/20"},{id:"wilayas",icon:m.Z,label:"Wilayas",color:"text-red-400",bgColor:"bg-red-500/20"}];function em(e){let{activeTab:t,onTabChange:s,onLogout:l,username:i,children:o}=e,[n,c]=(0,a.useState)(!1),{theme:d,toggleTheme:m}=(0,ea.useTheme)(),x=e=>{s(e),c(!1)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex flex-col",children:[(0,r.jsx)("div",{className:"bg-gray-900/95 backdrop-blur-sm border-b border-gray-800/50 p-4 sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>c(!n),className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(el.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-white",children:"OBSIDIAN"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:"Admin Panel"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:m,className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Switch to ".concat("dark"===d?"light":"dark"," theme"),children:"dark"===d?(0,r.jsx)(ei.Z,{className:"w-5 h-5"}):(0,r.jsx)(eo.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>window.open("/","_blank"),className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Back to Shop",children:(0,r.jsx)(en.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Logout",children:(0,r.jsx)(ec.Z,{className:"w-5 h-5"})})]})]})}),n&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:()=>c(!1),children:(0,r.jsxs)("div",{className:"fixed left-0 top-0 h-full w-80 bg-gray-900 border-r border-gray-800 shadow-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"OBSIDIAN"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Admin Panel"})]}),(0,r.jsx)("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(g.Z,{className:"w-5 h-5"})})]})}),(0,r.jsx)("nav",{className:"p-4",children:(0,r.jsx)("div",{className:"space-y-2",children:ed.map(e=>(0,r.jsxs)("button",{onClick:()=>x(e.id),className:"w-full flex items-center px-4 py-3 rounded-xl text-left transition-all ".concat(t===e.id?"".concat(e.bgColor," ").concat(e.color," shadow-lg border border-current/20"):"text-gray-300 hover:bg-gray-800/50 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5 mr-3 transition-colors ".concat(t===e.id?e.color:e.color+" group-hover:text-white")}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.id))})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-black text-sm font-bold",children:i.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium",children:"Admin"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:i})]})]})})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:o})]})}function ex(e){let{rows:t=5,columns:s=6}=e;return(0,r.jsx)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-800",children:(0,r.jsx)("tr",{children:Array.from({length:s}).map((e,t)=>(0,r.jsx)("th",{className:"text-left text-white font-medium py-4 px-6",children:(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded w-20"})},t))})}),(0,r.jsx)("tbody",{children:Array.from({length:t}).map((e,t)=>(0,r.jsx)("tr",{className:"border-t border-gray-800",children:Array.from({length:s}).map((e,t)=>(0,r.jsx)("td",{className:"py-4 px-6",children:(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded w-16"})},t))},t))})]})})})}var eu=s(1541);function eh(e){let{value:t,onChange:s,placeholder:l="Enter image URL or upload"}=e,[i,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(!1),d=(0,a.useRef)(null),m=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(!r.type.startsWith("image/")){alert("Veuillez s\xe9lectionner un fichier image valide");return}if(r.size>5242880){alert("L'image est trop grande. Taille maximum: 5MB");return}o(!0);let a=new FileReader;a.onload=e=>{var t;s(null===(t=e.target)||void 0===t?void 0:t.result),o(!1)},a.readAsDataURL(r)},x=e=>{s(e)};return(0,r.jsxs)("div",{className:"space-y-4",children:[t&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:t,alt:"Product preview",className:"w-full h-48 object-cover rounded-lg border border-gray-700",onError:e=>{e.currentTarget.src="https://via.placeholder.com/400x300?text=Invalid+Image"}}),(0,r.jsx)("button",{type:"button",onClick:()=>{s("")},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors",children:(0,r.jsx)(g.Z,{size:16})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Image URL"}),(0,r.jsx)("input",{type:"url",value:t,onChange:e=>x(e.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Or Upload File"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:"flex items-center space-x-2 bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(eu.Z,{size:20}),(0,r.jsx)("span",{children:"Choose File"})]}),i&&(0,r.jsx)("span",{className:"text-gray-400",children:"Uploading..."})]})]})]})]})}function eg(e){let{value:t=[],onChange:s,placeholder:l="Upload multiple images",maxImages:i=5}=e,[o,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),m=(0,a.useRef)(null),x=async e=>{if(!e)return;let r=Array.from(e).filter(e=>e.type.startsWith("image/")?!(e.size>5242880)||(alert("File ".concat(e.name," is too large. Maximum size: 5MB")),!1):(alert("File ".concat(e.name," is not a valid image")),!1));if(0!==r.length){if(t.length+r.length>i){alert("Maximum ".concat(i," images allowed"));return}n(!0);try{let e=[];for(let t of r){let s=new FileReader,r=new Promise(e=>{s.onload=t=>{var s;e(null===(s=t.target)||void 0===s?void 0:s.result)}});s.readAsDataURL(t);let a=await r;e.push(a)}s([...t,...e])}catch(e){console.error("Error uploading files:",e),alert("Error uploading some files. Please try again.")}finally{n(!1)}}},u=e=>{s(t.filter((t,s)=>s!==e))},p=(e,r)=>{let a=[...t],[l]=a.splice(e,1);a.splice(r,0,l),s(a)};return(0,r.jsxs)("div",{className:"space-y-4",children:[t.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:e,alt:"Product image ".concat(s+1),className:"w-full h-32 object-cover rounded-lg border border-gray-700",onError:e=>{e.currentTarget.src="https://via.placeholder.com/200x200?text=Invalid+Image"}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[s>0&&(0,r.jsx)("button",{type:"button",onClick:()=>p(s,s-1),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",title:"Move left",children:"←"}),s<t.length-1&&(0,r.jsx)("button",{type:"button",onClick:()=>p(s,s+1),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",title:"Move right",children:"→"}),(0,r.jsx)("button",{type:"button",onClick:()=>u(s),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",title:"Remove image",children:(0,r.jsx)(g.Z,{size:16})})]})}),(0,r.jsx)("div",{className:"absolute top-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded",children:s+1})]},s))}),t.length<i&&(0,r.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(c?"border-white bg-white bg-opacity-10":"border-gray-700 hover:border-gray-600"),onDrop:e=>{e.preventDefault(),d(!1),x(e.dataTransfer.files)},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center",children:o?(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"}):(0,r.jsx)(eu.Z,{className:"w-12 h-12 text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium mb-2",children:o?"Uploading...":"Upload Images"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Drag and drop images here, or click to select files"}),(0,r.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:[t.length,"/",i," images • Max 5MB each"]})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},disabled:o,className:"flex items-center space-x-2 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white hover:bg-gray-700 transition-colors disabled:opacity-50",children:[(0,r.jsx)(eu.Z,{size:16}),(0,r.jsx)("span",{children:"Choose Files"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=prompt("Enter image URL:");if(e&&e.trim()){if(t.length>=i){alert("Maximum ".concat(i," images allowed"));return}s([...t,e.trim()])}},disabled:o,className:"flex items-center space-x-2 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white hover:bg-gray-700 transition-colors disabled:opacity-50",children:[(0,r.jsx)(h.Z,{size:16}),(0,r.jsx)("span",{children:"Add URL"})]})]})]})}),(0,r.jsx)("input",{ref:m,type:"file",accept:"image/*",multiple:!0,onChange:e=>{x(e.target.files)},className:"hidden"}),t.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white font-medium mb-2",children:"Image URLs"}),(0,r.jsx)("div",{className:"space-y-2",children:t.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-gray-400 text-sm w-8",children:[a+1,"."]}),(0,r.jsx)("input",{type:"url",value:e,onChange:e=>{let r=[...t];r[a]=e.target.value,s(r)},className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-700 rounded text-white text-sm focus:outline-none focus:border-white",placeholder:"https://example.com/image.jpg"}),(0,r.jsx)("button",{type:"button",onClick:()=>u(a),className:"p-2 text-red-400 hover:text-red-300 transition-colors",children:(0,r.jsx)(g.Z,{size:16})})]},a))})]})]})}var ep=s(5109);function eb(){let{isAuthenticated:e,logout:t,username:s}=(0,C.useAuth)(),{t:v}=(0,es.useLanguage)(),{products:f,addProduct:N,updateProduct:w,deleteProduct:k,initializeDefaultProducts:A,refreshProducts:S}=(0,er.R)(),{theme:E}=(0,ea.useTheme)(),[P,O]=(0,a.useState)("dashboard"),[Z,T]=(0,a.useState)(ep.rA.map(e=>({...e,tariff:0}))),[z,I]=(0,a.useState)([]),[M,_]=(0,a.useState)([]),[F,U]=(0,a.useState)([]),[R,B]=(0,a.useState)(!1),[V,W]=(0,a.useState)(null),[G,J]=(0,a.useState)({name:"",description:"",basePrice:0,category:"",image:"",images:[],sizes:[],colors:[],allowCustomText:!1,allowCustomDesign:!1,customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date}),[X,K]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(null),[ee,el]=(0,a.useState)({id:"",name:"",description:"",price:0,category:"",image:"",stock:{},images:[],sizes:[],colors:[],inStock:!0,rating:0,reviews:0,customSizeChart:void 0,createdAt:new Date,updatedAt:new Date}),[ei,eo]=(0,a.useState)(!1),en=[{id:"dashboard",icon:l.Z,label:"Dashboard",color:"text-blue-400",bgColor:"bg-blue-500/20"},{id:"products",icon:i.Z,label:"Products",color:"text-emerald-400",bgColor:"bg-emerald-500/20"},{id:"inventory",icon:o.Z,label:"Inventory",color:"text-cyan-400",bgColor:"bg-cyan-500/20"},{id:"made-to-order",icon:n.Z,label:"Made to Order",color:"text-indigo-400",bgColor:"bg-indigo-500/20"},{id:"orders",icon:c.Z,label:"Orders",color:"text-orange-400",bgColor:"bg-orange-500/20"},{id:"maintenance",icon:d.Z,label:"Maintenance",color:"text-yellow-400",bgColor:"bg-yellow-500/20"},{id:"wilayas",icon:m.Z,label:"Wilayas",color:"text-red-400",bgColor:"bg-red-500/20"}];(0,a.useEffect)(()=>{let t=async()=>{try{var e;eo(!0);let t=await j.k.getOrders();I(t);let s=await fetch("/api/made-to-order"),r=await s.json();U(r);let a=await fetch("/api/made-to-order/orders");if(!a.ok)throw console.error("❌ Failed to fetch made-to-order orders:",a.status,a.statusText),Error("Failed to fetch orders: ".concat(a.status));let l=await a.json();console.log("\uD83D\uDD0D Admin Panel - Loaded made-to-order orders:",l.length),console.log("\uD83D\uDD0D Admin Panel - Order data structure:",l[0]?{id:l[0].id,customer_name:l[0].customer_name,product_name:null===(e=l[0].made_to_order_products)||void 0===e?void 0:e.name,total_price:l[0].total_price,status:l[0].status}:"No orders"),_(l);let i=await fetch("/api/wilaya"),o=await i.json();o&&o.length>0&&T(o)}catch(e){console.error("Error loading data:",e)}finally{eo(!1)}};e&&t()},[e]),(0,a.useEffect)(()=>{Q&&el({id:Q.id,name:Q.name||"",description:Q.description||"",price:Q.price||0,category:Q.category||"",image:Q.image||"",stock:Q.stock||{},images:Q.images||[],sizes:Q.sizes||[],colors:Q.colors||[],inStock:void 0===Q.inStock||Q.inStock,rating:Q.rating||0,reviews:Q.reviews||0,customSizeChart:Q.customSizeChart||void 0,createdAt:Q.createdAt||new Date,updatedAt:Q.updatedAt||new Date})},[Q]);let ec=async e=>{e.preventDefault(),eo(!0);try{let e={...ee,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};await N(e),K(!1),el({id:"",name:"",description:"",price:0,category:"",image:"",stock:{},images:[],sizes:[],colors:[],customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date})}catch(e){console.error("Error adding product:",e)}finally{eo(!1)}},ed=async e=>{if(e.preventDefault(),Q){eo(!0);try{let e={...Q,...ee,updatedAt:new Date};await w(Q.id,e),$(null),el({id:"",name:"",description:"",price:0,category:"",image:"",stock:{},images:[],sizes:[],colors:[],customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date})}catch(e){console.error("Error updating product:",e)}finally{eo(!1)}}},eu=async e=>{if(e&&e.preventDefault(),!G.name.trim()){alert("Product name is required");return}try{var t,s;eo(!0);let e={name:G.name,description:G.description,price:G.basePrice,category:G.category,image:G.image||"",images:G.images||[],colors:G.colors||["Noir"],sizes:G.sizes||["S","M","L","XL"],tags:[],displayOrder:0,isActive:G.isActive};console.log("\uD83D\uDCBE Adding made-to-order product with data:",{name:e.name,hasImage:!!e.image,imageLength:null===(t=e.image)||void 0===t?void 0:t.length,hasImages:!!(e.images&&e.images.length>0),imagesCount:null===(s=e.images)||void 0===s?void 0:s.length});let r=await fetch("/api/made-to-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){let e=await r.json();console.log("✅ Product added successfully:",e.id),U(t=>[...t,e]),J({name:"",description:"",basePrice:0,category:"",image:"",images:[],sizes:[],colors:[],allowCustomText:!1,allowCustomDesign:!1,customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date}),B(!1),alert("Product added successfully!")}else{let e=await r.json();throw console.error("❌ Failed to add product:",e),Error(e.error||"Failed to add product")}}catch(e){console.error("Error adding made-to-order product:",e),alert("Error adding product. Please try again.")}finally{eo(!1)}},eb=async e=>{var t,s,r;if(e&&e.preventDefault(),!(null==V?void 0:null===(t=V.name)||void 0===t?void 0:t.trim())){alert("Product name is required");return}try{eo(!0);let e={id:V.id,name:V.name,description:V.description,price:V.basePrice,category:V.category,image:V.image||"",images:V.images||[],colors:V.colors||["Noir"],sizes:V.sizes||["S","M","L","XL"],tags:V.tags||[],displayOrder:V.displayOrder||0,isActive:V.isActive};console.log("\uD83D\uDCBE Updating made-to-order product with data:",{id:e.id,name:e.name,hasImage:!!e.image,imageLength:null===(s=e.image)||void 0===s?void 0:s.length,hasImages:!!(e.images&&e.images.length>0),imagesCount:null===(r=e.images)||void 0===r?void 0:r.length});let t=await fetch("/api/made-to-order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();console.log("✅ Product updated successfully:",e.id),U(t=>t.map(t=>t.id===V.id?e:t)),W(null),alert("Product updated successfully!")}else{let e=await t.json();throw console.error("❌ Failed to update product:",e),Error(e.error||"Failed to update product")}}catch(e){console.error("Error updating made-to-order product:",e),alert("Error updating product. Please try again.")}finally{eo(!1)}},ey=async e=>{if(confirm("Are you sure you want to delete this product?"))try{if(eo(!0),(await fetch("/api/made-to-order?id=".concat(e),{method:"DELETE"})).ok)U(t=>t.filter(t=>t.id!==e));else throw Error("Failed to delete product")}catch(e){console.error("Error deleting made-to-order product:",e),alert("Error deleting product. Please try again.")}finally{eo(!1)}},ej=async e=>{if(confirm("Are you sure you want to delete this order?"))try{if(eo(!0),(await fetch("/api/made-to-order/orders?id=".concat(e),{method:"DELETE"})).ok)_(t=>t.filter(t=>t.id!==e));else throw Error("Failed to delete order")}catch(e){console.error("Error deleting made-to-order order:",e),alert("Error deleting order. Please try again.")}finally{eo(!1)}},ev=async(e,t,s)=>{try{eo(!0);let r=await fetch("/api/made-to-order/orders",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t,notes:s})});if(r.ok){let t=await r.json();_(s=>s.map(s=>s.id===e?t:s))}else throw Error("Failed to update order")}catch(e){console.error("Error updating made-to-order order:",e),alert("Error updating order. Please try again.")}finally{eo(!1)}},ef=async e=>{if(confirm("Are you sure you want to delete this order?"))try{eo(!0),await j.k.deleteOrder(e),I(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting order:",e),alert("Error deleting order. Please try again.")}finally{eo(!1)}},eN=async(e,t)=>{try{if(eo(!0),(await fetch("/api/wilaya",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wilayaId:e,tariff:t})})).ok)T(s=>s.map(s=>s.id===parseInt(e)?{...s,tariff:t}:s));else throw Error("Failed to update tariff")}catch(e){console.error("Error updating wilaya tariff:",e),alert("Error updating tariff. Please try again.")}finally{eo(!1)}};if(!e)return(0,r.jsx)(D,{});let ew=()=>{var e,t,s,a,l;return ei&&0===f.length?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-700 rounded w-48 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded w-32 mb-6"}),(0,r.jsx)(ex,{rows:5,columns:6})]})}):(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:["dashboard"===P&&(0,r.jsx)(L,{products:f,orders:z,customers:[]}),"products"===P&&(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-8",children:[(0,r.jsx)("div",{className:"mb-4 flex justify-between items-center",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Products"})}),(0,r.jsx)(q,{products:f,onAddProduct:()=>K(!0),onEditProduct:e=>$(e),onDeleteProduct:k,onViewProduct:e=>console.log("View product:",e)})]}),"inventory"===P&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Inventory Management"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage product inventory and stock levels"})]}),(0,r.jsx)(H,{onClose:()=>O("dashboard")})]}),"orders"===P&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Order Management"}),(0,r.jsx)("p",{className:"text-gray-400",children:"View and manage customer orders"})]}),(0,r.jsx)(Y,{orders:z,onUpdateOrder:(e,t)=>{console.log("Update order:",e,t)},onDeleteOrder:ef,onViewOrder:e=>console.log("View order:",e)})]}),"maintenance"===P&&(0,r.jsx)(et,{}),"made-to-order"===P&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Made to Order"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage custom products and orders"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Custom Products"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white",children:F.length})]}),(0,r.jsx)(i.Z,{className:"w-8 h-8 text-blue-400"})]})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Production Time"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:"20-18 days"})]}),(0,r.jsx)(x.Z,{className:"w-8 h-8 text-yellow-400"})]})}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Deposit Required"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-400",children:"50%"})]}),(0,r.jsx)(u.Z,{className:"w-8 h-8 text-green-400"})]})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Made-to-Order Products (",F.length,")"]}),(0,r.jsxs)("button",{onClick:()=>B(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4"}),"Add Product"]})]}),(R||V)&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:V?"Edit Product":"Add New Product"}),(0,r.jsx)("button",{onClick:()=>{B(!1),W(null),J({name:"",description:"",basePrice:0,category:"",images:[],customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date})},className:"text-gray-400 hover:text-white",children:(0,r.jsx)(g.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:V?eb:eu,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",value:(null==V?void 0:V.name)||G.name,onChange:e=>{V?W({...V,name:e.target.value}):J({...G,name:e.target.value})},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter product name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),(0,r.jsxs)("select",{value:(null==V?void 0:V.category)||G.category,onChange:e=>{V?W({...V,category:e.target.value}):J({...G,category:e.target.value})},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),(0,r.jsx)("option",{value:"Custom T-Shirts",children:"Custom T-Shirts"}),(0,r.jsx)("option",{value:"Custom Hoodies",children:"Custom Hoodies"}),(0,r.jsx)("option",{value:"Custom Pants",children:"Custom Pants"}),(0,r.jsx)("option",{value:"Custom Accessories",children:"Custom Accessories"}),(0,r.jsx)("option",{value:"Bulk Orders",children:"Bulk Orders"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Base Price (DA) *"}),(0,r.jsx)("input",{type:"number",value:(null==V?void 0:V.basePrice)||G.basePrice,onChange:e=>{V?W({...V,basePrice:parseFloat(e.target.value)||0}):J({...G,basePrice:parseFloat(e.target.value)||0})},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",min:"0",step:"0.01",placeholder:"0.00",required:!0})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:null!==(e=null==V?void 0:V.isActive)&&void 0!==e?e:G.isActive,onChange:e=>{V?W({...V,isActive:e.target.checked}):J({...G,isActive:e.target.checked})},className:"mr-2 w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Active Product"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),(0,r.jsx)("textarea",{value:(null==V?void 0:V.description)||G.description,onChange:e=>{V?W({...V,description:e.target.value}):J({...G,description:e.target.value})},rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Describe the product, materials, customization options...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Images"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Upload Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(s.size>5242880){alert("Image file is too large. Please choose an image smaller than 5MB.");return}if(!s.type.startsWith("image/")){alert("Please select a valid image file.");return}console.log("\uD83D\uDCF8 Processing image upload:",{name:s.name,size:s.size,type:s.type});let e=new FileReader;e.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;console.log("\uD83D\uDCF8 Made-to-order image uploaded, length:",null==s?void 0:s.length),V?W({...V,image:s}):J({...G,image:s})},e.onerror=()=>{console.error("❌ Error reading image file"),alert("Error reading image file. Please try again.")},e.readAsDataURL(s)}},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Max file size: 5MB. Supported formats: JPG, PNG, GIF, WebP"})]}),((null==V?void 0:V.image)||G.image)&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:(null==V?void 0:V.image)||G.image,alt:"Product preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-600",onError:e=>{e.currentTarget.style.display="none"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Additional Images"}),(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>0){let e=t.filter(e=>e.size>5242880?(console.warn("⚠️ File ".concat(e.name," is too large (").concat(e.size," bytes)")),!1):!!e.type.startsWith("image/")||(console.warn("⚠️ File ".concat(e.name," is not a valid image")),!1));if(e.length!==t.length&&alert("Some files were skipped. Only valid image files under 5MB are accepted."),0===e.length)return;console.log("\uD83D\uDCF8 Processing multiple images:",e.length);let s=[];e.forEach(t=>{let r=new FileReader;r.onload=t=>{var r;s.push(null===(r=t.target)||void 0===r?void 0:r.result),s.length===e.length&&(V?W({...V,images:[...V.images||[],...s]}):J({...G,images:[...G.images||[],...s]}))},r.onerror=()=>{console.error("❌ Error reading image file:",t.name)},r.readAsDataURL(t)})}},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-600 file:text-white hover:file:bg-green-700"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select multiple images. Max 5MB each."}),((null==V?void 0:V.images)&&V.images.length>0||G.images&&G.images.length>0)&&(0,r.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:((null==V?void 0:V.images)||G.images||[]).map((e,t)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-16 h-16 object-cover rounded-lg border border-gray-600"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=((null==V?void 0:V.images)||G.images||[]).filter((e,s)=>s!==t);V?W({...V,images:e}):J({...G,images:e})},className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-700",children:"\xd7"})]},t))})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Sizes"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:((null==V?void 0:V.sizes)||G.sizes||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center bg-gray-700 rounded-lg px-3 py-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300 mr-2",children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=((null==V?void 0:V.sizes)||G.sizes||[]).filter((e,s)=>s!==t);V?W({...V,sizes:e}):J({...G,sizes:e})},className:"text-red-400 hover:text-red-300 text-xs",children:"\xd7"})]},t))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add size (e.g., S, M, L, XL)",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target,s=t.value.trim();if(s){let e=(null==V?void 0:V.sizes)||G.sizes||[];if(!e.includes(s)){let t=[...e,s];V?W({...V,sizes:t}):J({...G,sizes:t})}t.value=""}}}}),(0,r.jsx)("button",{type:"button",onClick:e=>{var t;let s=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector("input"),r=s.value.trim();if(r){let e=(null==V?void 0:V.sizes)||G.sizes||[];if(!e.includes(r)){let t=[...e,r];V?W({...V,sizes:t}):J({...G,sizes:t})}s.value=""}},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm transition-colors",children:"Add"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Colors"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:((null==V?void 0:V.colors)||G.colors||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center bg-gray-700 rounded-lg px-3 py-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300 mr-2",children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=((null==V?void 0:V.colors)||G.colors||[]).filter((e,s)=>s!==t);V?W({...V,colors:e}):J({...G,colors:e})},className:"text-red-400 hover:text-red-300 text-xs",children:"\xd7"})]},t))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add color (e.g., Black, White, Red)",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target,s=t.value.trim();if(s){let e=(null==V?void 0:V.colors)||G.colors||[];if(!e.includes(s)){let t=[...e,s];V?W({...V,colors:t}):J({...G,colors:t})}t.value=""}}}}),(0,r.jsx)("button",{type:"button",onClick:e=>{var t;let s=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector("input"),r=s.value.trim();if(r){let e=(null==V?void 0:V.colors)||G.colors||[];if(!e.includes(r)){let t=[...e,r];V?W({...V,colors:t}):J({...G,colors:t})}s.value=""}},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm transition-colors",children:"Add"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Customization Options"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:null!==(s=null!==(t=null==V?void 0:V.allowCustomText)&&void 0!==t?t:G.allowCustomText)&&void 0!==s&&s,onChange:e=>{V?W({...V,allowCustomText:e.target.checked}):J({...G,allowCustomText:e.target.checked})},className:"mr-2 w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Allow custom text/logo"})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:null!==(l=null!==(a=null==V?void 0:V.allowCustomDesign)&&void 0!==a?a:G.allowCustomDesign)&&void 0!==l&&l,onChange:e=>{V?W({...V,allowCustomDesign:e.target.checked}):J({...G,allowCustomDesign:e.target.checked})},className:"mr-2 w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Allow custom design upload"})]})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{B(!1),W(null),J({name:"",description:"",basePrice:0,category:"",image:"",images:[],sizes:[],colors:[],allowCustomText:!1,allowCustomDesign:!1,customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date})},className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:ei,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[ei&&(0,r.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),V?"Update Product":"Add Product"]})]})]})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-700",children:F.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-gray-400 text-sm truncate max-w-xs",children:e.description})]})}),(0,r.jsx)("td",{className:"px-4 py-4 text-gray-300",children:e.category||"N/A"}),(0,r.jsxs)("td",{className:"px-4 py-4 text-gray-300",children:[e.basePrice," DA"]}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>W(e),className:"text-blue-400 hover:text-blue-300 transition-colors",children:(0,r.jsx)(b.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>ey(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Made-to-Order Orders (",M.length,")"]}),(0,r.jsxs)("button",{onClick:()=>{(async()=>{try{eo(!0);let e=await fetch("/api/made-to-order/orders");if(!e.ok){console.error("❌ Failed to fetch made-to-order orders:",e.status);return}let t=await e.json();console.log("\uD83D\uDD04 Refreshed made-to-order orders:",t.length),_(t)}catch(e){console.error("Error refreshing orders:",e)}finally{eo(!1)}})()},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",disabled:ei,children:[ei?(0,r.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Refresh Orders"]})]}),0===M.length?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,r.jsx)(c.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No orders yet"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Orders will appear here when customers place made-to-order requests."})]}):(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Order ID"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Size/Color"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-700",children:M.map(e=>{var t,s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,r.jsxs)("td",{className:"px-4 py-4 text-white font-mono",children:["#",e.id.slice(-8)]}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.customer_name}),(0,r.jsx)("div",{className:"text-gray-400 text-sm",children:e.customer_phone})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(null===(t=e.made_to_order_products)||void 0===t?void 0:t.image)&&(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)("img",{src:e.made_to_order_products.image,alt:e.made_to_order_products.name,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-medium text-sm",children:(null===(s=e.made_to_order_products)||void 0===s?void 0:s.name)||"Product not found"}),(0,r.jsxs)("div",{className:"text-gray-400 text-xs",children:["ID: ",e.product_id]})]})]})}),(0,r.jsxs)("td",{className:"px-4 py-4",children:[(0,r.jsx)("div",{className:"text-white",children:e.selected_size}),(0,r.jsx)("div",{className:"text-gray-400 text-xs",children:e.selected_color})]}),(0,r.jsxs)("td",{className:"px-4 py-4 text-gray-300",children:[e.total_price," DA"]}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"pending"===e.status?"bg-blue-100 text-blue-800":"confirmed"===e.status?"bg-blue-100 text-blue-800":"ready"===e.status?"bg-green-100 text-green-800":"shipped"===e.status?"bg-purple-100 text-purple-800":"delivered"===e.status?"bg-emerald-100 text-emerald-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,r.jsx)("td",{className:"px-4 py-4 text-gray-400",children:new Date(e.order_date).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:e.status,onChange:t=>ev(e.id,t.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs",children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"ready",children:"Ready"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,r.jsx)("button",{onClick:()=>ej(e.id),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete Order",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})]})]}),"wilayas"===P&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Wilaya Tariffs"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage delivery tariffs for each wilaya"})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Wilaya"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Tariff (DA)"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-700",children:Z.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-gray-400 text-xs",children:["#",e.id]})]})}),(0,r.jsx)("td",{className:"px-4 py-4 text-center",children:(0,r.jsx)("input",{type:"number",value:e.tariff,onChange:t=>{let s=parseFloat(t.target.value)||0;T(t=>t.map(t=>t.id===e.id?{...t,tariff:s}:t))},className:"w-20 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-center focus:outline-none focus:ring-2 focus:ring-red-500",min:"0",step:"0.01"})}),(0,r.jsx)("td",{className:"px-4 py-4 text-center",children:(0,r.jsx)("button",{onClick:()=>eN(e.id.toString(),e.tariff),disabled:ei,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm transition-colors disabled:opacity-50",children:ei?(0,r.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}):"Save"})})]},e.id))})]})})})]})]})};return window.innerWidth<1024?(0,r.jsx)(em,{activeTab:P,onTabChange:O,onLogout:t,username:s,children:ew()}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col lg:flex-row transition-colors duration-300 ".concat("light"===E?"bg-gradient-to-br from-gray-50 via-white to-gray-100":"bg-gradient-to-br from-gray-900 via-black to-gray-900"),children:[(0,r.jsx)("div",{className:"lg:hidden bg-gray-900 border-b border-gray-800 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"OBSIDIAN"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Admin Dashboard"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:"Logout"})]})}),(0,r.jsxs)("div",{className:"lg:w-64 bg-gray-900 border-r border-gray-800 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"OBSIDIAN"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Admin Dashboard"})]}),(0,r.jsx)("nav",{className:"space-y-2",children:en.map(e=>(0,r.jsxs)("button",{onClick:()=>O(e.id),className:"w-full flex items-center px-4 py-3 rounded-lg transition-all duration-200 group ".concat(P===e.id?"".concat(e.bgColor," ").concat(e.color):"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5 mb-1 ".concat(P===e.id?"text-black":e.color)}),(0,r.jsx)("span",{className:"ml-3 font-medium",children:e.label})]},e.id))})]}),(0,r.jsx)("div",{className:"p-6 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:s}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Administrator"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(g.Z,{className:"w-5 h-5"})})]})})]}),ew(),(X||Q)&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-auto shadow-2xl border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:Q?"Edit Product":"Add New Product"}),(0,r.jsx)("button",{onClick:()=>{K(!1),$(null)},className:"text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(g.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:Q?ed:ec,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",value:ee.name,onChange:e=>el(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter product name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),(0,r.jsxs)("select",{value:ee.category,onChange:e=>el(t=>({...t,category:e.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),(0,r.jsx)("option",{value:"T-Shirts",children:"T-Shirts"}),(0,r.jsx)("option",{value:"Hoodies",children:"Hoodies"}),(0,r.jsx)("option",{value:"Pants",children:"Pants"}),(0,r.jsx)("option",{value:"Accessories",children:"Accessories"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price (DA) *"}),(0,r.jsx)("input",{type:"number",value:ee.price,onChange:e=>el(t=>({...t,price:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",placeholder:"0.00",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),(0,r.jsx)("textarea",{value:ee.description,onChange:e=>el(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe the product, materials, features...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Main Product Image"}),(0,r.jsx)(eh,{value:ee.image,onChange:e=>el(t=>({...t,image:e})),placeholder:"Upload main product image"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Images"}),(0,r.jsx)(eg,{value:ee.images||[],onChange:e=>el(t=>({...t,images:e})),placeholder:"Upload additional product images",maxImages:5})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Sizes"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(ee.sizes||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center bg-gray-700 rounded-lg px-3 py-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300 mr-2",children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=(ee.sizes||[]).filter((e,s)=>s!==t);el(t=>({...t,sizes:e}))},className:"text-red-400 hover:text-red-300 text-xs",children:"\xd7"})]},t))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add size (e.g., S, M, L, XL)",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target,s=t.value.trim();if(s){let e=ee.sizes||[];e.includes(s)||el(t=>({...t,sizes:[...e,s]})),t.value=""}}}}),(0,r.jsx)("button",{type:"button",onClick:e=>{var t;let s=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector("input"),r=s.value.trim();if(r){let e=ee.sizes||[];e.includes(r)||el(t=>({...t,sizes:[...e,r]})),s.value=""}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:"Add"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Colors"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(ee.colors||[]).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center bg-gray-700 rounded-lg px-3 py-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-300 mr-2",children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=(ee.colors||[]).filter((e,s)=>s!==t);el(t=>({...t,colors:e}))},className:"text-red-400 hover:text-red-300 text-xs",children:"\xd7"})]},t))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add color (e.g., Black, White, Red)",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target,s=t.value.trim();if(s){let e=ee.colors||[];e.includes(s)||el(t=>({...t,colors:[...e,s]})),t.value=""}}}}),(0,r.jsx)("button",{type:"button",onClick:e=>{var t;let s=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector("input"),r=s.value.trim();if(r){let e=ee.colors||[];e.includes(r)||el(t=>({...t,colors:[...e,r]})),s.value=""}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:"Add"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{K(!1),$(null),el({id:"",name:"",description:"",price:0,category:"",image:"",stock:{},images:[],sizes:[],colors:[],customSizeChart:void 0,inStock:!0,rating:0,reviews:0,createdAt:new Date,updatedAt:new Date})},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2",disabled:ei,children:[ei&&(0,r.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),Q?"Update Product":"Add Product"]})]})]})]})})]})}},8628:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return i},useAuth:function(){return o}});var r=s(7437),a=s(2265);let l=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,a.useState)(!1),[o,n]=(0,a.useState)("");return(0,a.useEffect)(()=>{{let e=localStorage.getItem("obsidian-admin-auth"),t=localStorage.getItem("obsidian-admin-username");"true"===e&&t&&(i(!0),n(t))}},[]),(0,r.jsx)(l.Provider,{value:{isAuthenticated:s,login:(e,t)=>(i(!0),n(e),localStorage.setItem("obsidian-admin-auth","true"),localStorage.setItem("obsidian-admin-username",e),!0),logout:()=>{i(!1),n(""),localStorage.removeItem("obsidian-admin-auth"),localStorage.removeItem("obsidian-admin-username")},username:o},children:t})},o=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6713:function(e,t,s){"use strict";s.r(t),s.d(t,{ThemeProvider:function(){return i},useTheme:function(){return o}});var r=s(7437),a=s(2265);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)("dark");return(0,a.useEffect)(()=>{let e=localStorage.getItem("admin-theme");e&&i(e)},[]),(0,a.useEffect)(()=>{localStorage.setItem("admin-theme",s),document.documentElement.setAttribute("data-theme",s);let e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content","dark"===s?"#000000":"#ffffff")},[s]),(0,r.jsx)(l.Provider,{value:{theme:s,toggleTheme:()=>{i(e=>"dark"===e?"light":"dark")},setTheme:e=>{i(e)}},children:t})}function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5109:function(e,t,s){"use strict";s.d(t,{rA:function(){return r}});let r=[{id:1,name:"Adrar",nameAr:"أدرار",stopDeskEcommerce:800,domicileEcommerce:1200},{id:2,name:"Chlef",nameAr:"الشلف",stopDeskEcommerce:300,domicileEcommerce:500},{id:3,name:"Laghouat",nameAr:"الأغواط",stopDeskEcommerce:500,domicileEcommerce:800},{id:4,name:"Oum El Bouaghi",nameAr:"أم البواقي",stopDeskEcommerce:450,domicileEcommerce:700},{id:5,name:"Batna",nameAr:"باتنة",stopDeskEcommerce:500,domicileEcommerce:800},{id:6,name:"B\xe9ja\xefa",nameAr:"بجاية",stopDeskEcommerce:400,domicileEcommerce:600},{id:7,name:"Biskra",nameAr:"بسكرة",stopDeskEcommerce:600,domicileEcommerce:900},{id:8,name:"B\xe9char",nameAr:"بشار",stopDeskEcommerce:1e3,domicileEcommerce:1500},{id:9,name:"Blida",nameAr:"البليدة",stopDeskEcommerce:250,domicileEcommerce:400},{id:10,name:"Bouira",nameAr:"البويرة",stopDeskEcommerce:300,domicileEcommerce:500},{id:11,name:"Tamanrasset",nameAr:"تمنراست",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:12,name:"T\xe9bessa",nameAr:"تبسة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:13,name:"Tlemcen",nameAr:"تلمسان",stopDeskEcommerce:450,domicileEcommerce:700},{id:14,name:"Tiaret",nameAr:"تيارت",stopDeskEcommerce:400,domicileEcommerce:600},{id:15,name:"Tizi Ouzou",nameAr:"تيزي وزو",stopDeskEcommerce:300,domicileEcommerce:450},{id:16,name:"Alger",nameAr:"الجزائر",stopDeskEcommerce:200,domicileEcommerce:300},{id:17,name:"Djelfa",nameAr:"الجلفة",stopDeskEcommerce:450,domicileEcommerce:700},{id:18,name:"Jijel",nameAr:"جيجل",stopDeskEcommerce:350,domicileEcommerce:550},{id:19,name:"S\xe9tif",nameAr:"سطيف",stopDeskEcommerce:400,domicileEcommerce:600},{id:20,name:"Sa\xefda",nameAr:"سعيدة",stopDeskEcommerce:400,domicileEcommerce:600},{id:21,name:"Skikda",nameAr:"سكيكدة",stopDeskEcommerce:400,domicileEcommerce:650},{id:22,name:"Sidi Bel Abb\xe8s",nameAr:"سيدي بلعباس",stopDeskEcommerce:450,domicileEcommerce:700},{id:23,name:"Annaba",nameAr:"عنابة",stopDeskEcommerce:450,domicileEcommerce:700},{id:24,name:"Guelma",nameAr:"قالمة",stopDeskEcommerce:400,domicileEcommerce:650},{id:25,name:"Constantine",nameAr:"قسنطينة",stopDeskEcommerce:400,domicileEcommerce:600},{id:26,name:"M\xe9d\xe9a",nameAr:"المدية",stopDeskEcommerce:300,domicileEcommerce:500},{id:27,name:"Mostaganem",nameAr:"مستغانم",stopDeskEcommerce:400,domicileEcommerce:600},{id:28,name:"M'Sila",nameAr:"المسيلة",stopDeskEcommerce:450,domicileEcommerce:700},{id:29,name:"Mascara",nameAr:"معسكر",stopDeskEcommerce:400,domicileEcommerce:650},{id:30,name:"Ouargla",nameAr:"ورقلة",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:31,name:"Oran",nameAr:"وهران",stopDeskEcommerce:250,domicileEcommerce:400},{id:32,name:"El Bayadh",nameAr:"البيض",stopDeskEcommerce:500,domicileEcommerce:800},{id:33,name:"Illizi",nameAr:"إليزي",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:34,name:"Bordj Bou Arr\xe9ridj",nameAr:"برج بوعريريج",stopDeskEcommerce:400,domicileEcommerce:600},{id:35,name:"Boumerd\xe8s",nameAr:"بومرداس",stopDeskEcommerce:300,domicileEcommerce:450},{id:36,name:"El Tarf",nameAr:"الطارف",stopDeskEcommerce:450,domicileEcommerce:700},{id:37,name:"Tindouf",nameAr:"تندوف",stopDeskEcommerce:1200,domicileEcommerce:1800},{id:38,name:"Tissemsilt",nameAr:"تيسمسيلت",stopDeskEcommerce:350,domicileEcommerce:550},{id:39,name:"El Oued",nameAr:"الوادي",stopDeskEcommerce:600,domicileEcommerce:900},{id:40,name:"Khenchela",nameAr:"خنشلة",stopDeskEcommerce:500,domicileEcommerce:800},{id:41,name:"Souk Ahras",nameAr:"سوق أهراس",stopDeskEcommerce:450,domicileEcommerce:700},{id:42,name:"Tipaza",nameAr:"تيبازة",stopDeskEcommerce:250,domicileEcommerce:400},{id:43,name:"Mila",nameAr:"ميلة",stopDeskEcommerce:400,domicileEcommerce:600},{id:44,name:"A\xefn Defla",nameAr:"عين الدفلى",stopDeskEcommerce:300,domicileEcommerce:500},{id:45,name:"Na\xe2ma",nameAr:"النعامة",stopDeskEcommerce:500,domicileEcommerce:800},{id:46,name:"A\xefn T\xe9mouchent",nameAr:"عين تيموشنت",stopDeskEcommerce:400,domicileEcommerce:650},{id:47,name:"Gharda\xefa",nameAr:"غرداية",stopDeskEcommerce:650,domicileEcommerce:1e3},{id:48,name:"Relizane",nameAr:"غليزان",stopDeskEcommerce:400,domicileEcommerce:600},{id:49,name:"Timimoun",nameAr:"تيميمون",stopDeskEcommerce:900,domicileEcommerce:1400},{id:50,name:"Bordj Badji Mokhtar",nameAr:"برج باجي مختار",stopDeskEcommerce:1100,domicileEcommerce:1600},{id:51,name:"Ouled Djellal",nameAr:"أولاد جلال",stopDeskEcommerce:700,domicileEcommerce:1100},{id:52,name:"Beni Abbes",nameAr:"بني عباس",stopDeskEcommerce:850,domicileEcommerce:1300},{id:53,name:"In Salah",nameAr:"عين صالح",stopDeskEcommerce:1150,domicileEcommerce:1700},{id:54,name:"In Guezzam",nameAr:"عين قزام",stopDeskEcommerce:1250,domicileEcommerce:1900},{id:55,name:"Touggourt",nameAr:"تقرت",stopDeskEcommerce:600,domicileEcommerce:950},{id:56,name:"Djanet",nameAr:"جانت",stopDeskEcommerce:1300,domicileEcommerce:2e3},{id:57,name:"El M'Ghair",nameAr:"المغير",stopDeskEcommerce:800,domicileEcommerce:1200},{id:58,name:"El Meniaa",nameAr:"المنيعة",stopDeskEcommerce:900,domicileEcommerce:1400}].sort((e,t)=>e.id-t.id)},4401:function(e,t,s){"use strict";s.d(t,{X:function(){return l}});var r=s(3325);class a{async initializeOrders(){await this.loadOrders()}async loadOrders(){this.orders=await r.k.getOrders()}setupDataSync(){window.addEventListener("data-updated",e=>{let t=e.detail;t&&t.orders&&(this.orders=t.orders)})}generateOrderId(){let e=Date.now().toString(),t=Math.random().toString(36).substr(2,4).toUpperCase();return"OBS".concat(e.slice(-6)).concat(t)}async createOrder(e,t){try{let s=this.generateOrderId(),a=new Date,l={id:s,customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone,customerAddress:e.customerAddress,customerCity:e.customerCity||"",wilayaId:e.wilayaId,wilayaName:e.wilayaName,productId:e.productId,productName:t.name,productImage:t.image,selectedSize:e.selectedSize,selectedColor:e.selectedColor,quantity:e.quantity,subtotal:e.subtotal,shippingCost:e.shippingCost,total:e.total,shippingType:"domicileEcommerce"===e.shippingType?"homeDelivery":"stopDesk",paymentMethod:e.paymentMethod,paymentStatus:"pending",status:"pending",orderDate:a,notes:e.notes||"",trackingNumber:"",estimatedDelivery:this.calculateEstimatedDelivery(e.shippingType),createdAt:a,updatedAt:a};return await r.k.addOrder(l),this.orders.unshift(l),console.log("✅ Order created successfully, email will be sent via API"),{success:!0,orderId:s}}catch(e){return console.error("❌ Failed to create order:",e),{success:!1,error:"Failed to create order. Please try again."}}}getOrders(){return this.orders}getOrder(e){return this.orders.find(t=>t.id===e)}async updateOrderStatus(e,t,s){try{let a=this.orders.findIndex(t=>t.id===e);if(-1===a)return!1;let l={...this.orders[a],status:t,trackingNumber:s||this.orders[a].trackingNumber,updatedAt:new Date};return await r.k.updateOrder(e,l),this.orders[a]=l,!0}catch(e){return console.error("Failed to update order status:",e),!1}}calculateEstimatedDelivery(e){let t=new Date;return t.setDate(t.getDate()+("domicileEcommerce"===e?3:2)),t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getOrderStats(){let e=this.orders.length,t=this.orders.filter(e=>"pending"===e.status).length,s=this.orders.filter(e=>"confirmed"===e.status).length,r=this.orders.filter(e=>"shipped"===e.status).length;return{total:e,pending:t,confirmed:s,shipped:r,delivered:this.orders.filter(e=>"delivered"===e.status).length,cancelled:this.orders.filter(e=>"cancelled"===e.status).length,totalRevenue:this.orders.filter(e=>"delivered"===e.status).reduce((e,t)=>e+t.total,0)}}setOrders(e){this.orders=e}exportOrdersCSV(){return[["Order ID","Date","Customer","Email","Phone","Product","Size","Color","Quantity","Total","Status","Wilaya","Shipping"],...this.orders.map(e=>{let t="";try{if(e.orderDate instanceof Date)t=e.orderDate.toISOString().split("T")[0];else if("string"==typeof e.orderDate){let s=new Date(e.orderDate);t=isNaN(s.getTime())?e.orderDate:s.toISOString().split("T")[0]}else t="Unknown"}catch(s){console.warn("Error formatting date for order:",e.id,s),t="Unknown"}return[e.id||"N/A",t,e.customerName||"N/A",e.customerEmail||"N/A",e.customerPhone||"N/A",e.productName||"N/A",e.selectedSize||"N/A",e.selectedColor||"N/A",e.quantity||0,e.total||0,e.status||"N/A",e.wilayaName||"N/A",e.shippingType||"N/A"]})].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n")}clearOrders(){this.orders=[]}constructor(){this.orders=[],this.initializeOrders(),this.setupDataSync()}}let l=new a}},function(e){e.O(0,[986,440,159,298,137,971,938,744],function(){return e(e.s=74)}),_N_E=e.O()}]);