"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_lib_inventoryService_ts"],{

/***/ "(app-pages-browser)/./src/lib/inventoryService.ts":
/*!*************************************!*\
  !*** ./src/lib/inventoryService.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addInventory: function() { return /* binding */ addInventory; },\n/* harmony export */   checkStock: function() { return /* binding */ checkStock; },\n/* harmony export */   getInventory: function() { return /* binding */ getInventory; },\n/* harmony export */   getInventoryTransactions: function() { return /* binding */ getInventoryTransactions; },\n/* harmony export */   getLowStockItems: function() { return /* binding */ getLowStockItems; },\n/* harmony export */   getProductInventory: function() { return /* binding */ getProductInventory; },\n/* harmony export */   initializeProductInventory: function() { return /* binding */ initializeProductInventory; },\n/* harmony export */   updateInventoryQuantity: function() { return /* binding */ updateInventoryQuantity; }\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://twlegtqcyydgjkycxngw.supabase.co\";\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bGVndHFjeXlkZ2preWN4bmd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNzQ2MDAsImV4cCI6MjA3Mjc1MDYwMH0.uD9GD_ksHCDgmmPAgR7fcLUAJHRJtTkT-J-SVjU-WR0\";\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Get all inventory records\nasync function getInventory() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"\\n        *,\\n        products (\\n          id,\\n          name,\\n          image,\\n          price\\n        )\\n      \").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Inventory service: getInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventory error:\", error);\n        return [];\n    }\n}\n// Get inventory for a specific product\nasync function getProductInventory(productId) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"\\n        *,\\n        products (\\n          id,\\n          name,\\n          image,\\n          price\\n        )\\n      \").eq(\"product_id\", productId).order(\"size\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getProductInventory error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getProductInventory error:\", error);\n        return [];\n    }\n}\n// Update inventory quantity\nasync function updateInventoryQuantity(inventoryId, newQuantity, reason, createdBy) {\n    try {\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        if (fetchError || !currentRecord) {\n            console.error(\"Inventory service: Record not found:\", inventoryId);\n            return false;\n        }\n        // Update inventory\n        const { error: updateError } = await supabase.from(\"inventory\").update({\n            quantity: newQuantity,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", inventoryId);\n        if (updateError) {\n            console.error(\"Inventory service: updateInventoryQuantity error:\", updateError);\n            return false;\n        }\n        // Log transaction\n        const quantityChange = newQuantity - currentRecord.quantity;\n        if (quantityChange !== 0) {\n            await supabase.from(\"inventory_transactions\").insert([\n                {\n                    id: \"TXN-\".concat(Date.now(), \"-\").concat(inventoryId),\n                    product_id: currentRecord.product_id,\n                    size: currentRecord.size,\n                    color: currentRecord.color,\n                    transaction_type: \"adjustment\",\n                    quantity_change: quantityChange,\n                    previous_quantity: currentRecord.quantity,\n                    new_quantity: newQuantity,\n                    reason: reason || \"Manual adjustment\",\n                    created_by: createdBy || \"admin\"\n                }\n            ]);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: updateInventoryQuantity error:\", error);\n        return false;\n    }\n}\n// Add inventory (stock in)\nasync function addInventory(productId, size, color, quantity, reason, createdBy) {\n    try {\n        const inventoryId = \"INV-\".concat(productId, \"-\").concat(size, \"-\").concat(color);\n        // Get current record\n        const { data: currentRecord, error: fetchError } = await supabase.from(\"inventory\").select(\"*\").eq(\"id\", inventoryId).single();\n        const currentQuantity = (currentRecord === null || currentRecord === void 0 ? void 0 : currentRecord.quantity) || 0;\n        const newQuantity = currentQuantity + quantity;\n        // Upsert inventory record\n        const { error: upsertError } = await supabase.from(\"inventory\").upsert([\n            {\n                id: inventoryId,\n                product_id: productId,\n                size,\n                color,\n                quantity: newQuantity,\n                reserved_quantity: (currentRecord === null || currentRecord === void 0 ? void 0 : currentRecord.reserved_quantity) || 0,\n                min_stock_level: (currentRecord === null || currentRecord === void 0 ? void 0 : currentRecord.min_stock_level) || 5,\n                max_stock_level: (currentRecord === null || currentRecord === void 0 ? void 0 : currentRecord.max_stock_level) || 100\n            }\n        ]);\n        if (upsertError) {\n            console.error(\"Inventory service: addInventory error:\", upsertError);\n            return false;\n        }\n        // Log transaction\n        await supabase.from(\"inventory_transactions\").insert([\n            {\n                id: \"TXN-\".concat(Date.now(), \"-\").concat(inventoryId),\n                product_id: productId,\n                size,\n                color,\n                transaction_type: \"in\",\n                quantity_change: quantity,\n                previous_quantity: currentQuantity,\n                new_quantity: newQuantity,\n                reason: reason || \"Stock added\",\n                created_by: createdBy || \"admin\"\n            }\n        ]);\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: addInventory error:\", error);\n        return false;\n    }\n}\n// Check if product has sufficient stock\nasync function checkStock(productId, size, color, requestedQuantity) {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"available_quantity\").eq(\"product_id\", productId).eq(\"size\", size).eq(\"color\", color).single();\n        if (error || !data) {\n            return {\n                available: false,\n                currentStock: 0\n            };\n        }\n        return {\n            available: data.available_quantity >= requestedQuantity,\n            currentStock: data.available_quantity\n        };\n    } catch (error) {\n        console.error(\"Inventory service: checkStock error:\", error);\n        return {\n            available: false,\n            currentStock: 0\n        };\n    }\n}\n// Get low stock items\nasync function getLowStockItems() {\n    try {\n        const { data, error } = await supabase.from(\"inventory\").select(\"\\n        *,\\n        products (\\n          id,\\n          name,\\n          image,\\n          price\\n        )\\n      \").lte(\"available_quantity\", 10) // Simple threshold for now\n        .order(\"available_quantity\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Inventory service: getLowStockItems error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getLowStockItems error:\", error);\n        return [];\n    }\n}\n// Get inventory transactions\nasync function getInventoryTransactions(productId) {\n    let limit = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 50;\n    try {\n        let query = supabase.from(\"inventory_transactions\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (productId) {\n            query = query.eq(\"product_id\", productId);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Inventory service: getInventoryTransactions error:\", error);\n            return [];\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Inventory service: getInventoryTransactions error:\", error);\n        return [];\n    }\n}\n// Initialize inventory for a product\nasync function initializeProductInventory(productId) {\n    try {\n        // Get product details\n        const { data: product, error: productError } = await supabase.from(\"products\").select(\"sizes, colors, stock\").eq(\"id\", productId).single();\n        if (productError || !product) {\n            console.error(\"Inventory service: Product not found:\", productId);\n            return false;\n        }\n        const sizes = product.sizes || [];\n        const colors = product.colors || [];\n        const stock = product.stock || {};\n        // Create inventory records for each size/color combination\n        const inventoryRecords = [];\n        for (const size of sizes){\n            for (const color of colors){\n                var _stock_size;\n                const stockQuantity = ((_stock_size = stock[size]) === null || _stock_size === void 0 ? void 0 : _stock_size[color]) || 0;\n                inventoryRecords.push({\n                    id: \"INV-\".concat(productId, \"-\").concat(size, \"-\").concat(color),\n                    product_id: productId,\n                    size,\n                    color,\n                    quantity: stockQuantity,\n                    reserved_quantity: 0,\n                    min_stock_level: 5,\n                    max_stock_level: 100\n                });\n            }\n        }\n        if (inventoryRecords.length > 0) {\n            const { error: insertError } = await supabase.from(\"inventory\").upsert(inventoryRecords);\n            if (insertError) {\n                console.error(\"Inventory service: initializeProductInventory error:\", insertError);\n                return false;\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Inventory service: initializeProductInventory error:\", error);\n        return false;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvaW52ZW50b3J5U2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGNBQWNILGtOQUF5QztBQUU3RCxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksYUFBYTtJQUNoQyxNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSxNQUFNQyxXQUFXUixtRUFBWUEsQ0FBQ0MsYUFBYUk7QUFzQzNDLDRCQUE0QjtBQUNyQixlQUFlSTtJQUNwQixJQUFJO1FBQ0YsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQzNCSSxJQUFJLENBQUMsYUFDTEMsTUFBTSxDQUFFLDBIQVNSQyxLQUFLLENBQUMsY0FBYztZQUFFQyxXQUFXO1FBQU07UUFFMUMsSUFBSUosT0FBTztZQUNUSyxRQUFRTCxLQUFLLENBQUMsMENBQTBDQTtZQUN4RCxPQUFPLEVBQUU7UUFDWDtRQUVBLE9BQU9ELFFBQVEsRUFBRTtJQUNuQixFQUFFLE9BQU9DLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDeEQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBLHVDQUF1QztBQUNoQyxlQUFlTSxvQkFBb0JDLFNBQWlCO0lBQ3pELElBQUk7UUFDRixNQUFNLEVBQUVSLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUgsU0FDM0JJLElBQUksQ0FBQyxhQUNMQyxNQUFNLENBQUUsMEhBU1JNLEVBQUUsQ0FBQyxjQUFjRCxXQUNqQkosS0FBSyxDQUFDLFFBQVE7WUFBRUMsV0FBVztRQUFLO1FBRW5DLElBQUlKLE9BQU87WUFDVEssUUFBUUwsS0FBSyxDQUFDLGlEQUFpREE7WUFDL0QsT0FBTyxFQUFFO1FBQ1g7UUFFQSxPQUFPRCxRQUFRLEVBQUU7SUFDbkIsRUFBRSxPQUFPQyxPQUFPO1FBQ2RLLFFBQVFMLEtBQUssQ0FBQyxpREFB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d0RBO1FBQ3RFLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvaW52ZW50b3J5U2VydmljZS50cz8wMmU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlS2V5KSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbnZlbnRvcnlSZWNvcmQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcHJvZHVjdF9pZDogc3RyaW5nO1xyXG4gIHNpemU6IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG4gIHF1YW50aXR5OiBudW1iZXI7XHJcbiAgcmVzZXJ2ZWRfcXVhbnRpdHk6IG51bWJlcjtcclxuICBhdmFpbGFibGVfcXVhbnRpdHk6IG51bWJlcjtcclxuICBtaW5fc3RvY2tfbGV2ZWw6IG51bWJlcjtcclxuICBtYXhfc3RvY2tfbGV2ZWw6IG51bWJlcjtcclxuICBsYXN0X3VwZGF0ZWQ6IHN0cmluZztcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG4gIHByb2R1Y3RzPzoge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGltYWdlOiBzdHJpbmc7XHJcbiAgICBwcmljZTogbnVtYmVyO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW52ZW50b3J5VHJhbnNhY3Rpb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgcHJvZHVjdF9pZDogc3RyaW5nO1xyXG4gIHNpemU6IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG4gIHRyYW5zYWN0aW9uX3R5cGU6ICdpbicgfCAnb3V0JyB8ICdhZGp1c3RtZW50JyB8ICdyZXNlcnZlJyB8ICd1bnJlc2VydmUnO1xyXG4gIHF1YW50aXR5X2NoYW5nZTogbnVtYmVyO1xyXG4gIHByZXZpb3VzX3F1YW50aXR5OiBudW1iZXI7XHJcbiAgbmV3X3F1YW50aXR5OiBudW1iZXI7XHJcbiAgcmVhc29uPzogc3RyaW5nO1xyXG4gIG9yZGVyX2lkPzogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYnk/OiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgYWxsIGludmVudG9yeSByZWNvcmRzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZlbnRvcnkoKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2V0IGludmVudG9yeSBmb3IgYSBzcGVjaWZpYyBwcm9kdWN0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0SW52ZW50b3J5KHByb2R1Y3RJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5vcmRlcignc2l6ZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0UHJvZHVjdEludmVudG9yeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGdldFByb2R1Y3RJbnZlbnRvcnkgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVXBkYXRlIGludmVudG9yeSBxdWFudGl0eVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSW52ZW50b3J5UXVhbnRpdHkoXHJcbiAgaW52ZW50b3J5SWQ6IHN0cmluZyxcclxuICBuZXdRdWFudGl0eTogbnVtYmVyLFxyXG4gIHJlYXNvbj86IHN0cmluZyxcclxuICBjcmVhdGVkQnk/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBjdXJyZW50IHJlY29yZFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50UmVjb3JkLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaW52ZW50b3J5SWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudFJlY29yZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogUmVjb3JkIG5vdCBmb3VuZDonLCBpbnZlbnRvcnlJZCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgaW52ZW50b3J5XHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIHF1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSlcclxuICAgICAgLmVxKCdpZCcsIGludmVudG9yeUlkKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IHVwZGF0ZUludmVudG9yeVF1YW50aXR5IGVycm9yOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgcXVhbnRpdHlDaGFuZ2UgPSBuZXdRdWFudGl0eSAtIGN1cnJlbnRSZWNvcmQucXVhbnRpdHk7XHJcbiAgICBpZiAocXVhbnRpdHlDaGFuZ2UgIT09IDApIHtcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgICAgLmluc2VydChbe1xyXG4gICAgICAgICAgaWQ6IGBUWE4tJHtEYXRlLm5vdygpfS0ke2ludmVudG9yeUlkfWAsXHJcbiAgICAgICAgICBwcm9kdWN0X2lkOiBjdXJyZW50UmVjb3JkLnByb2R1Y3RfaWQsXHJcbiAgICAgICAgICBzaXplOiBjdXJyZW50UmVjb3JkLnNpemUsXHJcbiAgICAgICAgICBjb2xvcjogY3VycmVudFJlY29yZC5jb2xvcixcclxuICAgICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICdhZGp1c3RtZW50JyxcclxuICAgICAgICAgIHF1YW50aXR5X2NoYW5nZTogcXVhbnRpdHlDaGFuZ2UsXHJcbiAgICAgICAgICBwcmV2aW91c19xdWFudGl0eTogY3VycmVudFJlY29yZC5xdWFudGl0eSxcclxuICAgICAgICAgIG5ld19xdWFudGl0eTogbmV3UXVhbnRpdHksXHJcbiAgICAgICAgICByZWFzb246IHJlYXNvbiB8fCAnTWFudWFsIGFkanVzdG1lbnQnLFxyXG4gICAgICAgICAgY3JlYXRlZF9ieTogY3JlYXRlZEJ5IHx8ICdhZG1pbidcclxuICAgICAgICB9XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiB1cGRhdGVJbnZlbnRvcnlRdWFudGl0eSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBZGQgaW52ZW50b3J5IChzdG9jayBpbilcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEludmVudG9yeShcclxuICBwcm9kdWN0SWQ6IHN0cmluZyxcclxuICBzaXplOiBzdHJpbmcsXHJcbiAgY29sb3I6IHN0cmluZyxcclxuICBxdWFudGl0eTogbnVtYmVyLFxyXG4gIHJlYXNvbj86IHN0cmluZyxcclxuICBjcmVhdGVkQnk/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGludmVudG9yeUlkID0gYElOVi0ke3Byb2R1Y3RJZH0tJHtzaXplfS0ke2NvbG9yfWA7XHJcbiAgICBcclxuICAgIC8vIEdldCBjdXJyZW50IHJlY29yZFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50UmVjb3JkLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ludmVudG9yeScpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaW52ZW50b3J5SWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50UXVhbnRpdHkgPSBjdXJyZW50UmVjb3JkPy5xdWFudGl0eSB8fCAwO1xyXG4gICAgY29uc3QgbmV3UXVhbnRpdHkgPSBjdXJyZW50UXVhbnRpdHkgKyBxdWFudGl0eTtcclxuXHJcbiAgICAvLyBVcHNlcnQgaW52ZW50b3J5IHJlY29yZFxyXG4gICAgY29uc3QgeyBlcnJvcjogdXBzZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAudXBzZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGludmVudG9yeUlkLFxyXG4gICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICBzaXplLFxyXG4gICAgICAgIGNvbG9yLFxyXG4gICAgICAgIHF1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICByZXNlcnZlZF9xdWFudGl0eTogY3VycmVudFJlY29yZD8ucmVzZXJ2ZWRfcXVhbnRpdHkgfHwgMCxcclxuICAgICAgICBtaW5fc3RvY2tfbGV2ZWw6IGN1cnJlbnRSZWNvcmQ/Lm1pbl9zdG9ja19sZXZlbCB8fCA1LFxyXG4gICAgICAgIG1heF9zdG9ja19sZXZlbDogY3VycmVudFJlY29yZD8ubWF4X3N0b2NrX2xldmVsIHx8IDEwMFxyXG4gICAgICB9XSk7XHJcblxyXG4gICAgaWYgKHVwc2VydEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBhZGRJbnZlbnRvcnkgZXJyb3I6JywgdXBzZXJ0RXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9nIHRyYW5zYWN0aW9uXHJcbiAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5X3RyYW5zYWN0aW9ucycpXHJcbiAgICAgIC5pbnNlcnQoW3tcclxuICAgICAgICBpZDogYFRYTi0ke0RhdGUubm93KCl9LSR7aW52ZW50b3J5SWR9YCxcclxuICAgICAgICBwcm9kdWN0X2lkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgc2l6ZSxcclxuICAgICAgICBjb2xvcixcclxuICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnaW4nLFxyXG4gICAgICAgIHF1YW50aXR5X2NoYW5nZTogcXVhbnRpdHksXHJcbiAgICAgICAgcHJldmlvdXNfcXVhbnRpdHk6IGN1cnJlbnRRdWFudGl0eSxcclxuICAgICAgICBuZXdfcXVhbnRpdHk6IG5ld1F1YW50aXR5LFxyXG4gICAgICAgIHJlYXNvbjogcmVhc29uIHx8ICdTdG9jayBhZGRlZCcsXHJcbiAgICAgICAgY3JlYXRlZF9ieTogY3JlYXRlZEJ5IHx8ICdhZG1pbidcclxuICAgICAgfV0pO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogYWRkSW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENoZWNrIGlmIHByb2R1Y3QgaGFzIHN1ZmZpY2llbnQgc3RvY2tcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrU3RvY2soXHJcbiAgcHJvZHVjdElkOiBzdHJpbmcsXHJcbiAgc2l6ZTogc3RyaW5nLFxyXG4gIGNvbG9yOiBzdHJpbmcsXHJcbiAgcmVxdWVzdGVkUXVhbnRpdHk6IG51bWJlclxyXG4pOiBQcm9taXNlPHsgYXZhaWxhYmxlOiBib29sZWFuOyBjdXJyZW50U3RvY2s6IG51bWJlciB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnknKVxyXG4gICAgICAuc2VsZWN0KCdhdmFpbGFibGVfcXVhbnRpdHknKVxyXG4gICAgICAuZXEoJ3Byb2R1Y3RfaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5lcSgnc2l6ZScsIHNpemUpXHJcbiAgICAgIC5lcSgnY29sb3InLCBjb2xvcilcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBhdmFpbGFibGU6IGZhbHNlLCBjdXJyZW50U3RvY2s6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhdmFpbGFibGU6IGRhdGEuYXZhaWxhYmxlX3F1YW50aXR5ID49IHJlcXVlc3RlZFF1YW50aXR5LFxyXG4gICAgICBjdXJyZW50U3RvY2s6IGRhdGEuYXZhaWxhYmxlX3F1YW50aXR5XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogY2hlY2tTdG9jayBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBhdmFpbGFibGU6IGZhbHNlLCBjdXJyZW50U3RvY2s6IDAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdldCBsb3cgc3RvY2sgaXRlbXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExvd1N0b2NrSXRlbXMoKTogUHJvbWlzZTxJbnZlbnRvcnlSZWNvcmRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBwcm9kdWN0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgIHByaWNlXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAubHRlKCdhdmFpbGFibGVfcXVhbnRpdHknLCAxMCkgLy8gU2ltcGxlIHRocmVzaG9sZCBmb3Igbm93XHJcbiAgICAgIC5vcmRlcignYXZhaWxhYmxlX3F1YW50aXR5JywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRMb3dTdG9ja0l0ZW1zIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbnZlbnRvcnkgc2VydmljZTogZ2V0TG93U3RvY2tJdGVtcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgaW52ZW50b3J5IHRyYW5zYWN0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW52ZW50b3J5VHJhbnNhY3Rpb25zKFxyXG4gIHByb2R1Y3RJZD86IHN0cmluZyxcclxuICBsaW1pdDogbnVtYmVyID0gNTBcclxuKTogUHJvbWlzZTxJbnZlbnRvcnlUcmFuc2FjdGlvbltdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdpbnZlbnRvcnlfdHJhbnNhY3Rpb25zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAubGltaXQobGltaXQpO1xyXG5cclxuICAgIGlmIChwcm9kdWN0SWQpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncHJvZHVjdF9pZCcsIHByb2R1Y3RJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnlUcmFuc2FjdGlvbnMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBnZXRJbnZlbnRvcnlUcmFuc2FjdGlvbnMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBpbnZlbnRvcnkgZm9yIGEgcHJvZHVjdFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVByb2R1Y3RJbnZlbnRvcnkocHJvZHVjdElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IHByb2R1Y3QgZGV0YWlsc1xyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9kdWN0LCBlcnJvcjogcHJvZHVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZHVjdHMnKVxyXG4gICAgICAuc2VsZWN0KCdzaXplcywgY29sb3JzLCBzdG9jaycpXHJcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0SWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAocHJvZHVjdEVycm9yIHx8ICFwcm9kdWN0KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmVudG9yeSBzZXJ2aWNlOiBQcm9kdWN0IG5vdCBmb3VuZDonLCBwcm9kdWN0SWQpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2l6ZXMgPSBwcm9kdWN0LnNpemVzIHx8IFtdO1xyXG4gICAgY29uc3QgY29sb3JzID0gcHJvZHVjdC5jb2xvcnMgfHwgW107XHJcbiAgICBjb25zdCBzdG9jayA9IHByb2R1Y3Quc3RvY2sgfHwge307XHJcblxyXG4gICAgLy8gQ3JlYXRlIGludmVudG9yeSByZWNvcmRzIGZvciBlYWNoIHNpemUvY29sb3IgY29tYmluYXRpb25cclxuICAgIGNvbnN0IGludmVudG9yeVJlY29yZHMgPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBzaXplIG9mIHNpemVzKSB7XHJcbiAgICAgIGZvciAoY29uc3QgY29sb3Igb2YgY29sb3JzKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvY2tRdWFudGl0eSA9IHN0b2NrW3NpemVdPy5bY29sb3JdIHx8IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW52ZW50b3J5UmVjb3Jkcy5wdXNoKHtcclxuICAgICAgICAgIGlkOiBgSU5WLSR7cHJvZHVjdElkfS0ke3NpemV9LSR7Y29sb3J9YCxcclxuICAgICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgIHNpemUsXHJcbiAgICAgICAgICBjb2xvcixcclxuICAgICAgICAgIHF1YW50aXR5OiBzdG9ja1F1YW50aXR5LFxyXG4gICAgICAgICAgcmVzZXJ2ZWRfcXVhbnRpdHk6IDAsXHJcbiAgICAgICAgICBtaW5fc3RvY2tfbGV2ZWw6IDUsXHJcbiAgICAgICAgICBtYXhfc3RvY2tfbGV2ZWw6IDEwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGludmVudG9yeVJlY29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnaW52ZW50b3J5JylcclxuICAgICAgICAudXBzZXJ0KGludmVudG9yeVJlY29yZHMpO1xyXG5cclxuICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5IGVycm9yOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignSW52ZW50b3J5IHNlcnZpY2U6IGluaXRpYWxpemVQcm9kdWN0SW52ZW50b3J5IGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwiZ2V0SW52ZW50b3J5IiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiY29uc29sZSIsImdldFByb2R1Y3RJbnZlbnRvcnkiLCJwcm9kdWN0SWQiLCJlcSIsInVwZGF0ZUludmVudG9yeVF1YW50aXR5IiwiaW52ZW50b3J5SWQiLCJuZXdRdWFudGl0eSIsInJlYXNvbiIsImNyZWF0ZWRCeSIsImN1cnJlbnRSZWNvcmQiLCJmZXRjaEVycm9yIiwic2luZ2xlIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJxdWFudGl0eSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJxdWFudGl0eUNoYW5nZSIsImluc2VydCIsImlkIiwibm93IiwicHJvZHVjdF9pZCIsInNpemUiLCJjb2xvciIsInRyYW5zYWN0aW9uX3R5cGUiLCJxdWFudGl0eV9jaGFuZ2UiLCJwcmV2aW91c19xdWFudGl0eSIsIm5ld19xdWFudGl0eSIsImNyZWF0ZWRfYnkiLCJhZGRJbnZlbnRvcnkiLCJjdXJyZW50UXVhbnRpdHkiLCJ1cHNlcnRFcnJvciIsInVwc2VydCIsInJlc2VydmVkX3F1YW50aXR5IiwibWluX3N0b2NrX2xldmVsIiwibWF4X3N0b2NrX2xldmVsIiwiY2hlY2tTdG9jayIsInJlcXVlc3RlZFF1YW50aXR5IiwiYXZhaWxhYmxlIiwiY3VycmVudFN0b2NrIiwiYXZhaWxhYmxlX3F1YW50aXR5IiwiZ2V0TG93U3RvY2tJdGVtcyIsImx0ZSIsImdldEludmVudG9yeVRyYW5zYWN0aW9ucyIsImxpbWl0IiwicXVlcnkiLCJpbml0aWFsaXplUHJvZHVjdEludmVudG9yeSIsInByb2R1Y3QiLCJwcm9kdWN0RXJyb3IiLCJzaXplcyIsImNvbG9ycyIsInN0b2NrIiwiaW52ZW50b3J5UmVjb3JkcyIsInN0b2NrUXVhbnRpdHkiLCJwdXNoIiwibGVuZ3RoIiwiaW5zZXJ0RXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/inventoryService.ts\n"));

/***/ })

}]);