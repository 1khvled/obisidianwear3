"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{5454:function(t,e,r){r.r(e),r.d(e,{default:function(){return g}});var s=r(7437),a=r(6712),o=r(2549),n=r(8004),i=r(2265),c=r(1396),l=r.n(c),d=r(9298),u=r(5049),h=r(8956);function m(){let{language:t,setLanguage:e}=(0,d.useLanguage)();return(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-800 rounded-lg px-3 py-2",children:[(0,s.jsx)(h.Z,{size:16,className:"text-white"}),(0,s.jsx)("button",{onClick:()=>{let r="en"===t?"fr":"en";console.log("\uD83C\uDF0D Language switching from",t,"to",r),e(r)},className:"text-white hover:text-gray-300 transition-colors font-medium text-sm min-w-[32px] touch-target",type:"button",children:"en"===t?"FR":"EN"}),(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"|"}),(0,s.jsx)("button",{onClick:()=>{console.log("\uD83C\uDF0D Setting to EN"),e("en")},className:"text-xs px-2 py-1 rounded transition-colors touch-target ".concat("en"===t?"bg-white text-black":"text-gray-400 hover:text-white"),type:"button",children:"EN"}),(0,s.jsx)("button",{onClick:()=>{console.log("\uD83C\uDF0D Setting to FR"),e("fr")},className:"text-xs px-2 py-1 rounded transition-colors touch-target ".concat("fr"===t?"bg-white text-black":"text-gray-400 hover:text-white"),type:"button",children:"FR"})]})}var x=r(5343);function g(){let[t,e]=(0,i.useState)(!1),{t:r}=(0,d.useLanguage)(),{getTotalItems:c}=(0,u.useCart)();return(0,s.jsx)("header",{className:"bg-black/95 backdrop-blur-md border-b border-gray-800/50 fixed top-0 left-0 right-0 z-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto container-padding",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-16 sm:h-20",children:[(0,s.jsx)(x.Z,{}),(0,s.jsxs)("nav",{className:"hidden lg:flex items-center space-x-8 xl:space-x-12",children:[(0,s.jsx)(l(),{href:"/",className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium",onClick:()=>{console.log("\uD83C\uDFE0 Home navigation clicked"),window.location.href="/"},children:r("nav.home")}),(0,s.jsx)("button",{onClick:()=>{console.log("\uD83D\uDECD️ Collection navigation clicked");let t=document.getElementById("products");t?t.scrollIntoView({behavior:"smooth"}):window.location.href="/#products"},className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium cursor-pointer",children:r("nav.collection")}),(0,s.jsx)(l(),{href:"/cart",className:"text-white hover:text-gray-300 transition-colors text-sm xl:text-base font-medium",children:"Cart"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)(m,{})}),(0,s.jsxs)(l(),{href:"/cart",className:"relative touch-target text-white hover:text-gray-300 transition-colors rounded-lg",children:[(0,s.jsx)(a.Z,{size:20,className:"sm:w-6 sm:h-6"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-white text-black text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-semibold text-[10px] sm:text-xs",children:c()})]}),(0,s.jsx)("button",{className:"lg:hidden touch-target text-white hover:text-gray-300 transition-colors rounded-lg",onClick:()=>e(!t),children:t?(0,s.jsx)(o.Z,{size:20,className:"sm:w-6 sm:h-6"}):(0,s.jsx)(n.Z,{size:20,className:"sm:w-6 sm:h-6"})})]})]}),t&&(0,s.jsx)("div",{className:"lg:hidden border-t border-gray-800/50 py-4 animate-in slide-in-from-top-2 duration-200",children:(0,s.jsxs)("nav",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("button",{className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-3 rounded-lg font-medium text-left",onClick:()=>{console.log("\uD83C\uDFE0 Mobile Home clicked"),e(!1),window.location.href="/"},children:r("nav.home")}),(0,s.jsx)("button",{className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-3 rounded-lg font-medium text-left",onClick:()=>{console.log("\uD83D\uDECD️ Mobile Collection clicked"),e(!1);let t=document.getElementById("products");t?t.scrollIntoView({behavior:"smooth"}):window.location.href="/#products"},children:r("nav.collection")}),(0,s.jsx)(l(),{href:"/cart",className:"text-white hover:text-gray-300 hover:bg-gray-800/50 transition-all py-3 px-3 rounded-lg font-medium text-left block",onClick:()=>e(!1),children:"Cart"}),(0,s.jsx)("div",{className:"sm:hidden pt-2 mt-2 border-t border-gray-800/50",children:(0,s.jsx)(m,{})})]})})]})})}},5343:function(t,e,r){r.d(e,{Z:function(){return c}});var s=r(7437),a=r(6691),o=r.n(a),n=r(1396),i=r.n(n);function c(t){let{className:e="",showText:r=!0,size:a="md"}=t,n={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,s.jsxs)(i(),{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity ".concat(e),children:[(0,s.jsx)("div",{className:"".concat(n[a]," relative"),children:(0,s.jsx)(o(),{src:"/Logo Obsidian Wear sur fond noir.png",alt:"OBSIDIAN WEAR",width:"sm"===a?32:"md"===a?48:64,height:"sm"===a?32:"md"===a?48:64,className:"".concat(n[a]," object-contain"),priority:!0})}),r&&(0,s.jsx)("span",{className:"".concat({sm:"text-lg",md:"text-2xl",lg:"text-3xl"}[a]," font-bold font-poppins text-white tracking-wider"),children:"OBSIDIAN WEAR"})]})}},5049:function(t,e,r){r.r(e),r.d(e,{CartProvider:function(){return u},useCart:function(){return h}});var s=r(7437),a=r(2265),o=r(2671);class n{static getInstance(){return n.instance||(n.instance=new n),n.instance}generateSessionId(){{let t=sessionStorage.getItem("obsidian-cart-session-id");return t||(t="cart_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("obsidian-cart-session-id",t)),t}}async getCart(){let t=Date.now();if(this.cache&&t-this.cacheTime<this.CACHE_DURATION)return this.cache.items;try{let{data:e,error:r}=await o.OQ.from("carts").select("*").eq("session_id",this.sessionId).single();if(r&&"PGRST116"!==r.code)return console.error("Error fetching cart:",r),[];if(e)return this.cache=e,this.cacheTime=t,e.items||[];return[]}catch(t){return console.error("Error fetching cart:",t),[]}}async addToCart(t){try{let e;let r=await this.getCart(),s=r.findIndex(e=>e.productId===t.productId&&e.selectedSize===t.selectedSize&&e.selectedColor===t.selectedColor);if(s>=0)(e=[...r])[s]={...e[s],quantity:e[s].quantity+t.quantity};else{let s={...t,id:"item_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)};e=[...r,s]}let{error:a}=await o.OQ.from("carts").upsert({session_id:this.sessionId,items:e,updated_at:new Date().toISOString()});if(a)return console.error("Error saving cart:",a),!1;return this.cache=null,this.cacheTime=0,!0}catch(t){return console.error("Error adding to cart:",t),!1}}async updateCartItem(t,e){try{let r=await this.getCart(),s=r.findIndex(e=>e.id===t);if(-1===s)return!1;let a=[...r];a[s]={...a[s],...e};let{error:n}=await o.OQ.from("carts").upsert({session_id:this.sessionId,items:a,updated_at:new Date().toISOString()});if(n)return console.error("Error updating cart item:",n),!1;return this.cache=null,this.cacheTime=0,!0}catch(t){return console.error("Error updating cart item:",t),!1}}async removeFromCart(t){try{let e=(await this.getCart()).filter(e=>e.id!==t),{error:r}=await o.OQ.from("carts").upsert({session_id:this.sessionId,items:e,updated_at:new Date().toISOString()});if(r)return console.error("Error removing from cart:",r),!1;return this.cache=null,this.cacheTime=0,!0}catch(t){return console.error("Error removing from cart:",t),!1}}async clearCart(){try{let{error:t}=await o.OQ.from("carts").delete().eq("session_id",this.sessionId);if(t)return console.error("Error clearing cart:",t),!1;return this.cache=null,this.cacheTime=0,!0}catch(t){return console.error("Error clearing cart:",t),!1}}async getCartTotal(){return(await this.getCart()).reduce((t,e)=>t+e.price*e.quantity,0)}async getCartItemCount(){return(await this.getCart()).reduce((t,e)=>t+e.quantity,0)}constructor(){this.cache=null,this.cacheTime=0,this.CACHE_DURATION=3e4,this.sessionId=this.generateSessionId()}}var i=n.getInstance(),c=r(3006);let l=(0,a.createContext)(void 0),d=()=>{let[t,e]=(0,a.useState)(()=>()=>{});return(0,a.useEffect)(()=>{try{let t=(0,c.useToast)();(null==t?void 0:t.showToast)&&e(()=>t.showToast)}catch(t){console.log("Toast context not available during SSR")}},[]),t},u=t=>{let{children:e}=t,[r,o]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),u=d();(0,a.useEffect)(()=>{(async()=>{try{c(!0);let t=await i.getCart();o(t)}catch(t){console.error("Error loading cart:",t)}finally{c(!1)}})()},[]);let h=async(t,e,r,s)=>{var a,n;console.log("CartContext: addToCart called with:",{product:t,selectedSize:e,selectedColor:r,quantity:s});let c=(null===(n=t.stock)||void 0===n?void 0:null===(a=n[e])||void 0===a?void 0:a[r])||0;if(s>c){alert("Only ".concat(c," items available in stock!"));return}let l={productId:t.id,name:t.name,price:t.price,image:t.image,selectedSize:e,selectedColor:r,quantity:s,availableStock:c};try{if(await i.addToCart(l)){let e=await i.getCart();o(e),u("".concat(t.name," added to cart!"),"success")}}catch(t){console.error("Error adding to cart:",t),u("Failed to add item to cart","error")}},m=async t=>{try{if(await i.removeFromCart(t)){let t=await i.getCart();o(t),u("Item removed from cart","info")}}catch(t){console.error("Error removing from cart:",t),u("Failed to remove item from cart","error")}},x=async(t,e)=>{if(e<=0){m(t);return}try{if(await i.updateCartItem(t,{quantity:e})){let t=await i.getCart();o(t)}}catch(t){console.error("Error updating cart quantity:",t)}},g=async()=>{try{await i.clearCart()&&o([])}catch(t){console.error("Error clearing cart:",t)}};return(0,s.jsx)(l.Provider,{value:{items:r,addToCart:h,removeFromCart:m,updateQuantity:x,clearCart:g,getTotalItems:()=>r.reduce((t,e)=>t+e.quantity,0),getTotalPrice:()=>r.reduce((t,e)=>t+e.price*e.quantity,0),loading:n},children:e})},h=()=>{let t=(0,a.useContext)(l);if(void 0===t)throw Error("useCart must be used within a CartProvider");return t}},3006:function(t,e,r){r.r(e),r.d(e,{ToastProvider:function(){return l},useToast:function(){return d}});var s=r(7437),a=r(2265),o=r(3008),n=r(2549);function i(t){let{message:e,type:r="success",duration:i=3e3,onClose:c}=t,[l,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{d(!1),setTimeout(c,300)},i);return()=>clearTimeout(t)},[i,c]),(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full mx-auto transform transition-all duration-300 ease-in-out ".concat(l?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:(0,s.jsxs)("div",{className:"".concat((()=>{switch(r){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}})()," border rounded-lg shadow-lg p-4 flex items-center space-x-3"),children:[(()=>{switch(r){case"success":return(0,s.jsx)(o.Z,{className:"w-5 h-5 text-green-500"});case"error":return(0,s.jsx)(n.Z,{className:"w-5 h-5 text-red-500"});default:return(0,s.jsx)(o.Z,{className:"w-5 h-5 text-blue-500"})}})(),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 flex-1",children:e}),(0,s.jsx)("button",{onClick:()=>{d(!1),setTimeout(c,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(n.Z,{className:"w-4 h-4"})})]})})}let c=(0,a.createContext)(void 0);function l(t){let{children:e}=t,[r,o]=(0,a.useState)([]),n=t=>{o(e=>e.filter(e=>e.id!==t))};return(0,s.jsxs)(c.Provider,{value:{showToast:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s={id:Math.random().toString(36).substr(2,9),message:t,type:e,duration:r};o(t=>[...t,s])}},children:[e,(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(t=>(0,s.jsx)(i,{message:t.message,type:t.type,duration:t.duration,onClose:()=>n(t.id)},t.id))})]})}function d(){let t=(0,a.useContext)(c);if(void 0===t)throw Error("useToast must be used within a ToastProvider");return t}}}]);